var Yv=Object.defineProperty;var X2=e=>t=>{var r=e[t];if(r)return r();throw new Error("Module not found in bundle: "+t)};var q=(e,t)=>()=>(e&&(t=e(e=0)),t);var Qu=(e,t)=>{for(var r in t)Yv(e,r,{get:t[r],enumerable:!0})};var C,f=q(()=>{C={PROD:!0}});var $u,Q2=q(()=>{$u={}});import t7 from"open-color";var r7,J2,Vi,$2,Ka,Xa,wo,vo,de,e0,sd,ld,cd,t0,r0,o0,n0,$t=q(()=>{"use strict";f();r7=(e,t)=>t.reduce((r,o)=>(o in e&&(r[o]=e[o]),r),{}),J2=5,Vi=5,$2=4,Ka=4,Xa=1,wo=[0,2,4,6,8],vo=(e,t)=>t.map(r=>t7[e][r]),de={transparent:"transparent",black:"#1e1e1e",white:"#ffffff",gray:vo("gray",wo),red:vo("red",wo),pink:vo("pink",wo),grape:vo("grape",wo),violet:vo("violet",wo),blue:vo("blue",wo),cyan:vo("cyan",wo),teal:vo("teal",wo),green:vo("green",wo),yellow:vo("yellow",wo),orange:vo("orange",wo),bronze:["#f8f1ee","#eaddd7","#d2bab0","#a18072","#846358"]},e0=r7(de,["cyan","blue","violet","grape","pink","green","teal","yellow","orange","red"]),sd=[de.black,de.red[Ka],de.green[Ka],de.blue[Ka],de.yellow[Ka]],ld=[de.transparent,de.red[Xa],de.green[Xa],de.blue[Xa],de.yellow[Xa]],cd=[de.white,"#f8f9fa","#f5faff","#fffce8","#fdf8f6"],t0={transparent:de.transparent,white:de.white,gray:de.gray,black:de.black,bronze:de.bronze,...e0},r0={transparent:de.transparent,white:de.white,gray:de.gray,black:de.black,bronze:de.bronze,...e0},o0=e=>[de.cyan[e],de.blue[e],de.violet[e],de.grape[e],de.pink[e],de.green[e],de.teal[e],de.yellow[e],de.orange[e],de.red[e]],n0=(e,t,r)=>`#${((1<<24)+(e<<16)+(t<<8)+r).toString(16).slice(1)}`});var ar,dd,i0,bn,o7,EP,md,a0,gl,fl,xn,Za,s0,eh,l0,Go,th,Le,qn,Ki,bl,yr,pd,mt,ae,qe,rh,ud,Lt,Kt,Qn,Xi,Jn,hd,n7,c0,xl,d0,m0,En,El,p0,te,gd,er,yl,u0,h0,g0,f0,Zi,ja,oh,b0,qa,fd,bd,nh,x0,E0,y0,w0,v0,Qa,Ja,Co,C0,ih,_e,ji,bt,T0,A0,yt,$n,S0,xd,I0,at,ah,Ed,rt,wl,Or,yd,wt,$r,wd,V=q(()=>{"use strict";f();Q2();$t();ar=/Mac|iPod|iPhone|iPad/.test(navigator.platform),dd=/^Win/.test(navigator.platform),i0=/\b(android)\b/i.test(navigator.userAgent),bn="netscape"in window&&navigator.userAgent.indexOf("rv:")>1&&navigator.userAgent.indexOf("Gecko")>1,o7=navigator.userAgent.indexOf("Chrome")!==-1,EP=!o7&&navigator.userAgent.indexOf("Safari")!==-1,md=/iPad|iPhone/.test(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,a0=()=>navigator.brave?.isBrave?.name==="isBrave",gl=typeof window<"u"&&"ResizeObserver"in window,fl="Excalidraw",xn=10,Za=8,s0=5,eh=1,l0=30,Go=Math.PI/12,th="red",Le={TEXT:"text",CROSSHAIR:"crosshair",GRABBING:"grabbing",GRAB:"grab",POINTER:"pointer",MOVE:"move",AUTO:""},qn={MAIN:0,WHEEL:1,SECONDARY:2,TOUCH:-1,ERASER:5},Ki={enabled:"all",disabled:"none",inheritFromUI:"var(--ui-pointerEvents)"},bl={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5},yr={TEST:"test",DEVELOPMENT:"development"},pd={SHAPE_ACTIONS_MENU:"App-menu__left"},mt={Virgil:1,Helvetica:2,Cascadia:3,Assistant:4},ae={LIGHT:"light",DARK:"dark"},qe={strokeColor:"#bbb",strokeWidth:2,strokeStyle:"solid",fillStyle:"solid",roughness:0,roundness:null,backgroundColor:"transparent",radius:8,nameOffsetY:3,nameColorLightTheme:"#999999",nameColorDarkTheme:"#7a7a7a",nameFontSize:14,nameLineHeight:1.25},rh="Segoe UI Emoji",ud=1,Lt=20,Kt=mt.Virgil,Qn="left",Xi="top",Jn=2,hd=2*Jn,n7=1e-5,c0=2*hd-n7,xl="#ffffff",d0="#1e1e1e",m0="#a2f1a6",En=20,El={svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",gif:"image/gif",webp:"image/webp",bmp:"image/bmp",ico:"image/x-icon",avif:"image/avif",jfif:"image/jfif"},p0=["text/plain","text/html"],te={json:"application/json",excalidraw:"application/vnd.excalidraw+json",excalidrawlib:"application/vnd.excalidrawlib+json","excalidraw.svg":"image/svg+xml","excalidraw.png":"image/png",binary:"application/octet-stream",...El},gd={png:"png",svg:"svg",clipboard:"clipboard"},er={excalidraw:"excalidraw",excalidrawClipboard:"excalidraw/clipboard",excalidrawLibrary:"excalidrawlib",excalidrawClipboardWithAPI:"excalidraw-api/clipboard"},yl=window.EXCALIDRAW_EXPORT_SOURCE||window.location.origin,u0=500,h0=300,g0=500,f0=100,Zi=.1,ja=.1,oh=30,b0=300,qa=$u.themeFilter,fd={addLibrary:"addLibrary"},bd={addLibrary:"addLibrary"},nh={canvasActions:{changeViewBackgroundColor:!0,clearCanvas:!0,export:{saveFileToDisk:!0},loadScene:!0,saveToActiveFile:!0,toggleTheme:null,saveAsImage:!0},tools:{image:!0}},x0=730,E0=1e3,y0=500,w0=1229,v0=parseInt($u.rightSidebarWidth),Qa=2,Ja=[1,2,3],Co=10,C0=1440,ih=2*1024*1024,_e="http://www.w3.org/2000/svg",ji={excalidraw:2,excalidrawLibrary:2},bt=5,T0=.7,A0=11,yt={TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"},$n={LEFT:"left",CENTER:"center",RIGHT:"right"},S0=20,xd=.25,I0=32,at={LEGACY:1,PROPORTIONAL_RADIUS:2,ADAPTIVE_RADIUS:3},ah={architect:0,artist:1,cartoonist:2},Ed={thin:1,bold:2,extraBold:4},rt={strokeColor:de.black,backgroundColor:de.transparent,fillStyle:"solid",strokeWidth:2,strokeStyle:"solid",roughness:ah.artist,opacity:100,locked:!1},wl="library",Or={name:"default",defaultTab:wl},yd=new Set(["iframe","embeddable","image"]),wt={selection:"selection",rectangle:"rectangle",diamond:"diamond",ellipse:"ellipse",arrow:"arrow",line:"line",freedraw:"freedraw",text:"text",image:"image",eraser:"eraser",hand:"hand",frame:"frame",magicframe:"magicframe",embeddable:"embeddable",laser:"laser"},$r={OAI_API_KEY:"excalidraw-oai-api-key",MERMAID_TO_EXCALIDRAW:"mermaid-to-excalidraw",PUBLISH_LIBRARY:"publish-library-data"},wd="Untitled"});function gt(e,t,r,o){return e?(e?.addEventListener?.(t,r,o),()=>{e?.removeEventListener?.(t,r,o)}):()=>{}}function Y0(e,t=!0){let r=e.length;if(r<4)return"";let o=e[0],n=e[1],i=e[2],a=`M${o[0].toFixed(2)},${o[1].toFixed(2)} Q${n[0].toFixed(2)},${n[1].toFixed(2)} ${Cd(n[0],i[0]).toFixed(2)},${Cd(n[1],i[1]).toFixed(2)} T`;for(let s=2,l=r-1;s<l;s++)o=e[s],n=e[s+1],a+=`${Cd(o[0],n[0]).toFixed(2)},${Cd(o[1],n[1]).toFixed(2)} `;return t&&(a+="Z"),a}var k0,lh,ei,D0,ch,R0,eo,$a,Ve,qi,es,yn,L0,N0,O0,Pt,Qe,N,Ke,Bt,vl,p7,u7,h7,Td,To,Ad,dh,mh,sr,Sd,B0,F0,z0,H0,wn,X,_0,Uo,Br,G0,Id,ts,U0,Wo,Cl,P0,Je,ti,Ao,W0,Tl,Yo,ph,Md,Cd,kd,Fr,Al,G=q(()=>{"use strict";f();$t();V();k0=null,lh=()=>{if(k0)return k0;let e=new Date,t=e.getFullYear(),r=`${e.getMonth()+1}`.padStart(2,"0"),o=`${e.getDate()}`.padStart(2,"0"),n=`${e.getHours()}`.padStart(2,"0"),i=`${e.getMinutes()}`.padStart(2,"0");return`${t}-${r}-${o}-${n}${i}`},ei=e=>e.charAt(0).toUpperCase()+e.slice(1),D0=e=>e instanceof HTMLElement&&e.className.includes("ToolIcon"),ch=e=>e instanceof HTMLElement&&e.dataset.type==="wysiwyg"||e instanceof HTMLBRElement||e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement,R0=e=>ch(e)||e instanceof Element&&!!e.closest("label, button"),eo=e=>e instanceof HTMLElement&&e.dataset.type==="wysiwyg"||e instanceof HTMLBRElement||e instanceof HTMLTextAreaElement||e instanceof HTMLInputElement&&(e.type==="text"||e.type==="number"||e.type==="password"),$a=({fontFamily:e})=>{for(let[t,r]of Object.entries(mt))if(r===e)return`${t}, ${rh}`;return rh},Ve=({fontSize:e,fontFamily:t})=>`${e}px ${$a({fontFamily:t})}`,qi=(e,t)=>{let r=0,o=null,n=(...i)=>{o=i,clearTimeout(r),r=window.setTimeout(()=>{o=null,e(...i)},t)};return n.flush=()=>{if(clearTimeout(r),o){let i=o;o=null,e(...i)}},n.cancel=()=>{o=null,clearTimeout(r)},n},es=(e,t)=>{let r=null,o=null,n=null,i=s=>{r=window.requestAnimationFrame(()=>{r=null,e(...s),o=null,n&&(o=n,n=null,i(o))})},a=(...s)=>{if(C.MODE==="test"){e(...s);return}o=s,r===null?i(o):t?.trailing&&(n=s)};return a.flush=()=>{r!==null&&(cancelAnimationFrame(r),r=null),o&&(e(...n||o),o=n=null)},a.cancel=()=>{o=n=null,r!==null&&(cancelAnimationFrame(r),r=null)},a},yn=e=>1-Math.pow(1-e,4),L0=(e,t,r)=>(t-e)*yn(r)+e,N0=({fromValues:e,toValues:t,onStep:r,duration:o=250,interpolateValue:n,onStart:i,onEnd:a,onCancel:s})=>{let l=!1,c=0,d;function m(p){if(l)return;d===void 0&&(d=p,i?.());let u=Math.min(p-d,o),h=yn(u/o),x={};if(Object.keys(e).forEach(E=>{let w=E,y=(t[w]-e[w])*h+e[w];x[w]=y}),r(x),u<o){let E=u/o,w={};Object.keys(e).forEach(y=>{let v=y,A=e[v],L=t[v],S;S=n?n(A,L,E,v):L0(A,L,E),S==null&&(S=L0(A,L,E)),w[v]=S}),r(w),c=window.requestAnimationFrame(m)}else r(t),a?.()}return c=window.requestAnimationFrame(m),()=>{s?.(),l=!0,window.cancelAnimationFrame(c)}},O0=(e,t)=>{if(!e.length||t<1)return[];let r=0,o=0,n=Array(Math.ceil(e.length/t));for(;r<e.length;)n[o++]=e.slice(r,r+=t);return n},Pt=(e,t)=>Math.abs(e-t),Qe=(e,t)=>t.type==="custom"?{...e.activeTool,type:"custom",customType:t.customType,locked:t.locked??e.activeTool.locked}:{...e.activeTool,lastActiveTool:t.lastActiveToolBeforeEraser===void 0?e.activeTool.lastActiveTool:t.lastActiveToolBeforeEraser,type:t.type,customType:null,locked:t.locked??e.activeTool.locked},N=e=>(e=e.replace(/\bAlt\b/i,"Alt").replace(/\bShift\b/i,"Shift").replace(/\b(Enter|Return)\b/i,"Enter"),ar?e.replace(/\bCtrlOrCmd\b/gi,"Cmd").replace(/\bAlt\b/i,"Option"):e.replace(/\bCtrlOrCmd\b/gi,"Ctrl")),Ke=({clientX:e,clientY:t},{zoom:r,offsetLeft:o,offsetTop:n,scrollX:i,scrollY:a})=>{let s=(e-o)/r.value-i,l=(t-n)/r.value-a;return{x:s,y:l}},Bt=({sceneX:e,sceneY:t},{zoom:r,offsetLeft:o,offsetTop:n,scrollX:i,scrollY:a})=>{let s=(e+i)*r.value+o,l=(t+a)*r.value+n;return{x:s,y:l}},vl=e=>getComputedStyle(document.documentElement).getPropertyValue(`--${e}`),p7="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u2C00-\uFB1C\uFDFE-\uFE6F\uFEFD-\uFFFF",u7="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC",h7=new RegExp(`^[^${p7}]*[${u7}]`),Td=e=>h7.test(e),To=e=>{let[t,r]=e;return{x:t,y:r}},Ad=e=>{if(e?.name==="AbortError"){console.warn(e);return}throw e},dh=(e,t,r=0)=>{r<0&&(r=e.length+r),r=Math.min(e.length,Math.max(r,0));let o=r-1;for(;++o<e.length;)if(t(e[o],o,e))return o;return-1},mh=(e,t,r=e.length-1)=>{r<0&&(r=e.length+r),r=Math.min(e.length-1,Math.max(r,0));let o=r+1;for(;--o>-1;)if(t(e[o],o,e))return o;return-1},sr=e=>{let t=e.length===5&&e.substr(4,1)==="0",r=e.length===9&&e.substr(7,2)==="00";return t||r||e===de.transparent},Sd=()=>{let e,t,r=new Promise((o,n)=>{e=o,t=n});return r.resolve=e,r.reject=t,r},B0=e=>{let t=e.parentElement;for(;t;){if(t===document.body)return document;let{overflowY:r}=window.getComputedStyle(t);if(t.scrollHeight>t.clientHeight&&(r==="auto"||r==="scroll"||r==="overlay"))return t;t=t.parentElement}return document},F0=e=>{let t=e.parentElement;for(;t;){if(t.tabIndex>-1){t.focus();return}t=t.parentElement}},z0=e=>{e.preventDefault(),e.returnValue=""},H0=e=>Array.from(e).map(t=>`0${t.toString(16)}`.slice(-2)).join(""),wn=()=>Br()?1:Date.now(),X=e=>e instanceof Map?e:e.reduce((t,r)=>(t.set(typeof r=="string"?r:r.id,r),t),new Map),_0=e=>e.reduce((t,r,o)=>(t.set(r.id,[r,o]),t),new Map),Uo=(e,t)=>e.reduce((r,o)=>(r[t?t(o):String(o)]=o,r),{}),Br=()=>C.MODE==="test",G0=()=>C.MODE==="development",Id=(e,t)=>new CustomEvent(e,{detail:{nativeEvent:t},cancelable:!0}),ts=(e,t)=>{let r=!1;for(let o in t){let n=t[o];if(typeof n<"u"){if(e[o]===n&&(typeof n!="object"||n===null))continue;r=!0}}return r?{...e,...t}:e},U0=()=>{try{return window.self===window.top?"top":"iframe"}catch{return"iframe"}},Wo=e=>!!e&&typeof e=="object"&&"then"in e&&"catch"in e&&"finally"in e,Cl=e=>{let t=e?.querySelectorAll("button, a, input, select, textarea, div[tabindex], label[tabindex]");return t?Array.from(t).filter(r=>r.tabIndex>-1&&!r.disabled):[]},P0=(e,t)=>Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t,Je=(e,t,r,o=!1)=>{let n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return o&&console.warn("%cisShallowEqual: objects don't have same properties ->","color: #8B4000",e,t),!1;if(r&&Array.isArray(r)){for(let a of r)if(!(e[a]===t[a]||P0(e[a],t[a])))return o&&console.warn(`%cisShallowEqual: ${a} not equal ->`,"color: #8B4000",e[a],t[a]),!1;return!0}return n.every(a=>{let s=r?.[a],l=s?s(e[a],t[a]):e[a]===t[a]||P0(e[a],t[a]);return!l&&o&&console.warn(`%cisShallowEqual: ${a} not equal ->`,"color: #8B4000",e[a],t[a]),l})},ti=(e,t,{checkForDefaultPrevented:r=!0}={})=>function(n){if(e?.(n),!r||!n?.defaultPrevented)return t?.(n)},Ao=(e,t,r)=>{if(!t)return e;if(r)return console.error(t),e;throw new Error(t)},W0=e=>{let t,r,o=function(n){let i=Object.entries(n);if(t){let s=!0;for(let[l,c]of i)if(t.get(l)!==c){s=!1;break}if(s)return r}let a=e(n);return t=new Map(i),r=a,a};return o.clear=()=>{t=void 0,r=void 0},o},Tl=(e,t)=>e instanceof Set||e instanceof Map?e.has(t):"includes"in e?e.includes(t):e.hasOwnProperty(t),Yo=e=>JSON.parse(JSON.stringify(e)),ph=e=>typeof e=="number"&&Number.isFinite(e),Md=(e,t)=>Je(e,t)?e:t;Cd=(e,t)=>(e+t)/2;kd=e=>e.replace(/\r?\n|\r/g,`
`),Fr=e=>e,Al=async(e,...t)=>new Promise(r=>{r(e(...t))})});var lr,to,At,ro,Xt,U,ri,Qi,ee,Dt,g7,ne,we,Sl,wr,uh,Ji,Vo,Il,tr,Ie,Ko,V0,K0,X0,se=q(()=>{"use strict";f();V();G();lr=e=>!!e&&e.type==="image"&&!!e.fileId,to=e=>!!e&&e.type==="image",At=e=>!!e&&e.type==="embeddable",ro=e=>!!e&&e.type==="iframe",Xt=e=>!!e&&(e.type==="iframe"||e.type==="embeddable"),U=e=>e!=null&&e.type==="text",ri=e=>e!=null&&e.type==="frame",Qi=e=>e!=null&&e.type==="magicframe",ee=e=>e!=null&&(e.type==="frame"||e.type==="magicframe"),Dt=e=>e!=null&&g7(e.type),g7=e=>e==="freedraw",ne=e=>e!=null&&Sl(e.type),we=e=>e!=null&&e.type==="arrow",Sl=e=>e==="arrow"||e==="line",wr=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&uh(e.type),uh=e=>e==="arrow",Ji=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&(e.type==="rectangle"||e.type==="diamond"||e.type==="ellipse"||e.type==="image"||e.type==="iframe"||e.type==="embeddable"||e.type==="frame"||e.type==="magicframe"||e.type==="text"&&!e.containerId),Vo=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&(e.type==="rectangle"||e.type==="diamond"||e.type==="ellipse"||we(e)),Il=e=>{let t=e?.type;if(!t)return!1;switch(t){case"text":case"diamond":case"rectangle":case"iframe":case"embeddable":case"ellipse":case"arrow":case"freedraw":case"line":case"frame":case"magicframe":case"image":case"selection":return!0;default:return Ao(t,null),!1}},tr=e=>Vo(e)&&!!e.boundElements?.some(({type:t})=>t==="text"),Ie=e=>e!==null&&"containerId"in e&&e.containerId!==null&&U(e),Ko=e=>e==="rectangle"||e==="embeddable"||e==="iframe"||e==="image",V0=e=>e==="line"||e==="arrow"||e==="diamond",K0=(e,t)=>!!((e===at.ADAPTIVE_RADIUS||e===at.LEGACY)&&Ko(t.type)||e===at.PROPORTIONAL_RADIUS&&V0(t.type)),X0=e=>V0(e.type)?{type:at.PROPORTIONAL_RADIUS}:Ko(e.type)?{type:at.ADAPTIVE_RADIUS}:null});import{Random as f7}from"roughjs/bin/math";import{nanoid as b7}from"nanoid";var x7,E7,oo,Rt,So=q(()=>{"use strict";f();G();x7=new f7(Date.now()),E7=0,oo=()=>Math.floor(x7.next()*2**31),Rt=()=>Br()?`id${E7++}`:b7()});var Ld,Xo,Io,Pd,oi=q(()=>{"use strict";f();Ld=class extends Error{constructor(t="Couldn't export canvas.",r="CANVAS_ERROR"){super(),this.name=r,this.message=t}},Xo=class extends DOMException{constructor(t="Request Aborted"){super(t,"AbortError")}},Io=class extends Error{code;constructor(t="Image Scene Data Error",r="IMAGE_SCENE_DATA_ERROR"){super(t),this.name="EncodingError",this.code=r}},Pd=class extends Error{code="ELEMENT_HAS_INVALID_INDEX"}});import{generateNKeysBetween as y7}from"fractional-indexing";var hh,Dd,Ft,cr,w7,v7,Ml,j0,Z0,no=q(()=>{"use strict";f();Ge();oi();hh=e=>{for(let[t,r]of e.entries()){let o=e[t-1],n=e[t+1];if(!Ml(r,o,n))throw new Pd(`Fractional indices invariant for element has been compromised - ["${o}", "${r}", "${n}"] [predecessor, current, successor]`)}},Dd=e=>e.sort((t,r)=>Z0(t)&&Z0(r)?t.index<r.index?-1:t.index>r.index?1:t.id<r.id?-1:1:1),Ft=(e,t)=>{try{let r=w7(e,t),o=j0(e,r);hh(e.map(n=>o.get(n)?.index||n.index));for(let[n,i]of o)z(n,i,!1)}catch{cr(e)}return e},cr=e=>{let t=v7(e),r=j0(e,t);for(let[o,n]of r)z(o,n,!1);return e},w7=(e,t)=>{let r=[],o=0;for(;o<e.length;)if(t.has(e[o].id)&&!Ml(e[o]?.index,e[o-1]?.index,e[o+1]?.index)){let n=[o-1,o];for(;++o<e.length&&(t.has(e[o].id)&&!Ml(e[o]?.index,e[o-1]?.index,e[o+1]?.index));)n.push(o);n.push(o),r.push(n)}else o++;return r},v7=e=>{let t=[],r,o,n=-1,i=0,a=c=>{let d=e[n]?e[n].index:void 0,m=e[c-1]?.index;return!d&&m||d&&m&&m>d?[m,c-1]:[d,n]},s=c=>{let d=e[i]?e[i].index:void 0;if(d&&c<i)return[d,i];let m=i;for(;++m<e.length;){let p=e[m]?.index;if(!d&&p||d&&p&&p>d)return[p,m]}return[void 0,m]},l=0;for(;l<e.length;){let c=e[l].index;if([r,n]=a(l),[o,i]=s(l),Ml(c,r,o))l++;else{let d=[n,l];for(;++l<e.length;){let m=e[l].index,[p,u]=a(l),[h,x]=s(l);if(Ml(m,p,h))break;[r,n]=[p,u],[o,i]=[h,x],d.push(l)}d.push(i),t.push(d)}}return t},Ml=(e,t,r)=>e?t&&r?t<e&&e<r:!t&&r?e<r:t&&!r?t<e:!!e:!1,j0=(e,t)=>{let r=new Map;for(let o of t){let n=o.shift(),i=o.pop(),a=y7(e[n]?.index,e[i]?.index,o.length);for(let s=0;s<o.length;s++){let l=e[o[s]];r.set(l,{index:a[s]})}}return r},Z0=e=>!!e.index});var q0,C7,Q0,gh,St,ni=q(()=>{"use strict";f();be();se();ii();So();no();G();G();V();q0=e=>{let t=new Map,r=[];for(let o of e)o.isDeleted||(r.push(o),t.set(o.id,o));return{elementsMap:t,elements:r}},C7=e=>{let t=["includeBoundTextElement","includeElementsInFrames"],r="";for(let o of t)r+=`${o}:${e[o]?"1":"0"}`;return r},Q0=e=>typeof e=="string",gh=class e{static sceneMapByElement=new WeakMap;static sceneMapById=new Map;static mapElementToScene(t,r){Q0(t)?this.sceneMapById.set(t,r):(this.sceneMapByElement.set(t,r),this.sceneMapById.set(t.id,r))}static getScene(t){return Q0(t)?this.sceneMapById.get(t)||null:this.sceneMapByElement.get(t)||null}callbacks=new Set;nonDeletedElements=[];nonDeletedElementsMap=Fr(new Map);elements=[];nonDeletedFramesLikes=[];frames=[];elementsMap=Fr(new Map);selectedElementsCache={selectedElementIds:null,elements:null,cache:new Map};versionNonce;getNonDeletedElementsMap(){return this.nonDeletedElementsMap}getElementsIncludingDeleted(){return this.elements}getElementsMapIncludingDeleted(){return this.elementsMap}getNonDeletedElements(){return this.nonDeletedElements}getFramesIncludingDeleted(){return this.frames}getSelectedElements(t){let r=C7(t),o=t?.elements||this.nonDeletedElements;if(this.selectedElementsCache.elements===o&&this.selectedElementsCache.selectedElementIds===t.selectedElementIds){let i=this.selectedElementsCache.cache.get(r);if(i)return i}else t?.elements==null&&this.selectedElementsCache.cache.clear();let n=ue(o,{selectedElementIds:t.selectedElementIds},t);return t?.elements==null&&(this.selectedElementsCache.selectedElementIds=t.selectedElementIds,this.selectedElementsCache.elements=this.nonDeletedElements,this.selectedElementsCache.cache.set(r,n)),n}getNonDeletedFramesLikes(){return this.nonDeletedFramesLikes}getElement(t){return this.elementsMap.get(t)||null}getVersionNonce(){return this.versionNonce}getNonDeletedElement(t){let r=this.getElement(t);return r&&kl(r)?r:null}mapElements(t){let r=!1,o=this.elements.map(n=>{let i=t(n);return i!==n&&(r=!0),i});return r&&this.replaceAllElements(o),r}replaceAllElements(t){let r=t instanceof Array?t:Array.from(t.values()),o=[];(C.DEV||C.MODE===yr.TEST)&&hh(r.map(i=>i.index)),this.elements=cr(r),this.elementsMap.clear(),this.elements.forEach(i=>{ee(i)&&o.push(i),this.elementsMap.set(i.id,i),e.mapElementToScene(i,this)});let n=q0(this.elements);this.nonDeletedElements=n.elements,this.nonDeletedElementsMap=n.elementsMap,this.frames=o,this.nonDeletedFramesLikes=q0(this.frames).elements,this.informMutation()}informMutation(){this.versionNonce=oo();for(let t of Array.from(this.callbacks))t()}addCallback(t){if(this.callbacks.has(t))throw new Error;return this.callbacks.add(t),()=>{if(!this.callbacks.has(t))throw new Error;this.callbacks.delete(t)}}destroy(){this.elements=[],this.nonDeletedElements=[],this.nonDeletedFramesLikes=[],this.frames=[],this.elementsMap.clear(),this.selectedElementsCache.selectedElementIds=null,this.selectedElementsCache.elements=null,this.selectedElementsCache.cache.clear(),e.sceneMapById.forEach((t,r)=>{t===this&&e.sceneMapById.delete(r)}),this.callbacks.clear()}insertElementAtIndex(t,r){if(!Number.isFinite(r)||r<0)throw new Error("insertElementAtIndex can only be called with index >= 0");let o=[...this.elements.slice(0,r),t,...this.elements.slice(r)];Ft(o,X([t])),this.replaceAllElements(o)}insertElementsAtIndex(t,r){if(!Number.isFinite(r)||r<0)throw new Error("insertElementAtIndex can only be called with index >= 0");let o=[...this.elements.slice(0,r),...t,...this.elements.slice(r)];Ft(o,X(t)),this.replaceAllElements(o)}insertElement=t=>{let r=t.frameId?this.getElementIndex(t.frameId):this.elements.length;this.insertElementAtIndex(t,r)};insertElements=t=>{let r=t[0].frameId?this.getElementIndex(t[0].frameId):this.elements.length;this.insertElementsAtIndex(t,r)};getElementIndex(t){return this.elements.findIndex(r=>r.id===t)}getContainerElement=t=>t&&t.containerId&&this.getElement(t.containerId)||null},St=gh});var Rd,ai,Ll=q(()=>{"use strict";f();Rd=e=>{let t=e.map(o=>o[0]),r=e.map(o=>o[1]);return{width:Math.max(...t)-Math.min(...t),height:Math.max(...r)-Math.min(...r)}},ai=(e,t,r,o)=>{let n=r.map(u=>u[e]),i=Math.max(...n),a=Math.min(...n),s=i-a,l=s===0?1:t/s,c=1/0,d=r.map(u=>{let h=u[e]*l,x=[...u];return x[e]=h,h<c&&(c=h),x});if(!o||d.length===2)return d;let m=a-c;return d.map(u=>u.map((h,x)=>x===e?h+m:h))}});var ye,Ue,J0,vt,Pl,dr,Nd,It,Mo,fh,bh,T7,$0,eb,tb,xh,rb,Dl,Rl,Nl,zt=q(()=>{"use strict";f();V();st();Zo();ye=(e,t,r,o,n)=>[(e-r)*Math.cos(n)-(t-o)*Math.sin(n)+r,(e-r)*Math.sin(n)+(t-o)*Math.cos(n)+o],Ue=(e,t,r)=>ye(e[0],e[1],t[0],t[1],r),J0=(e,t,r,o,n,i,a,s)=>{let l=Math.cos(o),c=Math.sin(o);return e.e&&e.w?t+=n+a:e.e?(t+=n*(1+l),r+=n*c,t+=a*(1-l),r+=a*-c):e.w&&(t+=n*(1-l),r+=n*-c,t+=a*(1+l),r+=a*c),e.n&&e.s?r+=i+s:e.n?(t+=i*c,r+=i*(1-l),t+=s*-c,r+=s*(1+l)):e.s&&(t+=i*-c,r+=i*(1+l),t+=s*c,r+=s*(1-l)),[t,r]},vt=(e,t,r,o)=>{let n=r-e,i=o-t;return Math.hypot(n,i)},Pl=(e,t)=>[(e[0]+t[0])/2,(e[1]+t[1])/2],dr=(e,t=1)=>{if(e.length>=3){let[r,o]=[e[0],e[e.length-1]];return vt(r[0],r[1],o[0],o[1])<=Za/t}return!1},Nd=(e,t,r)=>t[0]<=Math.max(e[0],r[0])&&t[0]>=Math.min(e[0],r[0])&&t[1]<=Math.max(e[1],r[1])&&t[1]>=Math.min(e[1],r[1]),It=(e,t,r)=>r?[Math.round(e/r)*r,Math.round(t/r)*r]:[e,t],Mo=(e,t)=>{if(t.roundness?.type===at.PROPORTIONAL_RADIUS||t.roundness?.type===at.LEGACY)return e*xd;if(t.roundness?.type===at.ADAPTIVE_RADIUS){let r=t.roundness?.value??I0,o=r/xd;return e<=o?e*xd:r}return 0},fh=(e,t)=>{let r=Pe.generateElementShape(e,null);if(!r)return null;let o=si(r[0]),n=[0,0],i=0,a=1/0,s=null;for(;i<o.length;){let{op:l,data:c}=o[i];if(l==="move"&&(n=c),l==="bcurveTo"){let d=n,m=[c[0],c[1]],p=[c[2],c[3]],u=[c[4],c[5]],h=vt(u[0],u[1],t[0],t[1]);h<a&&(a=h,s=[d,m,p,u]),n=u}i++}return s},bh=(e,t,r,o,n)=>{let i=(l,c)=>Math.pow(1-l,3)*o[c]+3*l*Math.pow(1-l,2)*r[c]+3*Math.pow(l,2)*(1-l)*t[c]+e[c]*Math.pow(l,3),a=i(n,0),s=i(n,1);return[a,s]},T7=(e,t)=>{let r=fh(e,t);if(!r)return[];let o=[],n=1;for(;n>0;){let i=bh(r[0],r[1],r[2],r[3],n);o.push([i[0],i[1]]),n-=.05}return o.length&&xh(o.at(-1),t)&&o.push([t[0],t[1]]),o},$0=(e,t)=>{let r=[];r[0]=0;let o=T7(e,t),n=0,i=0;for(;n<o.length-1;){let a=vt(o[n][0],o[n][1],o[n+1][0],o[n+1][1]);i+=a,r.push(i),n++}return r},eb=(e,t)=>$0(e,t).at(-1),tb=(e,t,r)=>{let o=$0(e,t),n=o.length-1,i=o.at(-1),a=r*i,s=0,l=n,c=0;for(;s<l;)c=Math.floor(s+(l-s)/2),o[c]<a?s=c+1:l=c;return o[c]>a&&c--,o[c]===a?c/n:1-(c+(a-o[c])/(o[c+1]-o[c]))/n},xh=(e,t)=>e[0]===t[0]&&e[1]===t[1],rb=e=>Math.round(e/Math.PI*1e4)%5e3===0,Dl=([e,t],[r,o])=>e<=r?t>=r:e>=r?o>=e:!1,Rl=(e,t)=>{let r=Math.max(e[0],t[0]),o=Math.min(e[1],t[1]);return r<=o?[r,o]:null},Nl=(e,t,r)=>e>=t&&e<=r});var vn,Ol,Od,Bd,rs,$i,Eh,Bl=q(()=>{"use strict";f();se();vn=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="line"||e==="freedraw",Ol=e=>e!=="image"&&e!=="frame"&&e!=="magicframe",Od=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="freedraw"||e==="arrow"||e==="line",Bd=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="arrow"||e==="line",rs=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="arrow"||e==="line"||e==="diamond"||e==="image",$i=e=>e==="arrow",Eh=(e,t)=>{let r=null;for(let o=e.length-1;o>=0;--o){let n=e[o];if(!n.isDeleted&&t(n)){r=n;break}}return r}});import{simplify as A7}from"points-on-curve";function I7(e){let t=e.roughness,r=Math.max(e.width,e.height),o=Math.min(e.width,e.height);return o>=20&&r>=50||o>=15&&e.roundness&&rs(e.type)||ne(e)&&r>=50?t:Math.min(t/(r<10?3:2),2.5)}var S7,ib,zr,ob,nb,ab,yh=q(()=>{"use strict";f();be();zt();Cn();G();V();se();Bl();S7=e=>[8,8+e],ib=e=>[1.5,6+e];zr=(e,t=!1)=>{let r={seed:e.seed,strokeLineDash:e.strokeStyle==="dashed"?S7(e.strokeWidth):e.strokeStyle==="dotted"?ib(e.strokeWidth):void 0,disableMultiStroke:e.strokeStyle!=="solid",strokeWidth:e.strokeStyle!=="solid"?e.strokeWidth+.5:e.strokeWidth,fillWeight:e.strokeWidth/2,hachureGap:e.strokeWidth*4,roughness:I7(e),stroke:e.strokeColor,preserveVertices:t||e.roughness<ah.cartoonist};switch(e.type){case"rectangle":case"iframe":case"embeddable":case"diamond":case"ellipse":return r.fillStyle=e.fillStyle,r.fill=sr(e.backgroundColor)?void 0:e.backgroundColor,e.type==="ellipse"&&(r.curveFitting=1),r;case"line":case"freedraw":return dr(e.points)&&(r.fillStyle=e.fillStyle,r.fill=e.backgroundColor==="transparent"?void 0:e.backgroundColor),r;case"arrow":return r;default:throw new Error(`Unimplemented type ${e.type}`)}},ob=(e,t,r)=>Xt(e)&&(t||At(e)&&r?.get(e.id)!==!0)&&sr(e.backgroundColor)&&sr(e.strokeColor)?{...e,roughness:0,backgroundColor:"#d3d3d3",fillStyle:"solid"}:ro(e)?{...e,strokeColor:sr(e.strokeColor)?"#000000":e.strokeColor,backgroundColor:sr(e.backgroundColor)?"#f4f4f6":e.backgroundColor}:e,nb=(e,t,r,o,n,i,a)=>{let s=vh(e,t,r,o);if(s===null)return[];switch(o){case"dot":case"circle":case"circle_outline":{let[l,c,d]=s;return delete i.strokeLineDash,[n.circle(l,c,d,{...i,fill:o==="circle_outline"?a:e.strokeColor,fillStyle:"solid",stroke:e.strokeColor,roughness:Math.min(.5,i.roughness||0)})]}case"triangle":case"triangle_outline":{let[l,c,d,m,p,u]=s;return delete i.strokeLineDash,[n.polygon([[l,c],[d,m],[p,u],[l,c]],{...i,fill:o==="triangle_outline"?a:e.strokeColor,fillStyle:"solid",roughness:Math.min(1,i.roughness||0)})]}case"diamond":case"diamond_outline":{let[l,c,d,m,p,u,h,x]=s;return delete i.strokeLineDash,[n.polygon([[l,c],[d,m],[p,u],[h,x],[l,c]],{...i,fill:o==="diamond_outline"?a:e.strokeColor,fillStyle:"solid",roughness:Math.min(1,i.roughness||0)})]}case"bar":case"arrow":default:{let[l,c,d,m,p,u]=s;if(e.strokeStyle==="dotted"){let h=ib(e.strokeWidth-1);i.strokeLineDash=[h[0],h[1]-1]}else delete i.strokeLineDash;return i.roughness=Math.min(1,i.roughness||0),[n.line(d,m,l,c,i),n.line(p,u,l,c,i)]}}},ab=(e,t,{isExporting:r,canvasBackgroundColor:o,embedsValidationStatus:n})=>{switch(e.type){case"rectangle":case"iframe":case"embeddable":{let i;if(e.roundness){let a=e.width,s=e.height,l=Mo(Math.min(a,s),e);i=t.path(`M ${l} 0 L ${a-l} 0 Q ${a} 0, ${a} ${l} L ${a} ${s-l} Q ${a} ${s}, ${a-l} ${s} L ${l} ${s} Q 0 ${s}, 0 ${s-l} L 0 ${l} Q 0 0, ${l} 0`,zr(ob(e,r,n),!0))}else i=t.rectangle(0,0,e.width,e.height,zr(ob(e,r,n),!1));return i}case"diamond":{let i,[a,s,l,c,d,m,p,u]=wh(e);if(e.roundness){let h=Mo(Math.abs(a-p),e),x=Mo(Math.abs(c-s),e);i=t.path(`M ${a+h} ${s+x} L ${l-h} ${c-x}
            C ${l} ${c}, ${l} ${c}, ${l-h} ${c+x}
            L ${d+h} ${m-x}
            C ${d} ${m}, ${d} ${m}, ${d-h} ${m-x}
            L ${p+h} ${u+x}
            C ${p} ${u}, ${p} ${u}, ${p+h} ${u-x}
            L ${a-h} ${s+x}
            C ${a} ${s}, ${a} ${s}, ${a+h} ${s+x}`,zr(e,!0))}else i=t.polygon([[a,s],[l,c],[d,m],[p,u]],zr(e));return i}case"ellipse":return t.ellipse(e.width/2,e.height/2,e.width,e.height,zr(e));case"line":case"arrow":{let i,a=zr(e),s=e.points.length?e.points:[[0,0]];if(e.roundness?i=[t.curve(s,a)]:a.fill?i=[t.polygon(s,a)]:i=[t.linearPath(s,a)],e.type==="arrow"){let{startArrowhead:l=null,endArrowhead:c="arrow"}=e;if(l!==null){let d=nb(e,i,"start",l,t,a,o);i.push(...d)}if(c!==null){let d=nb(e,i,"end",c,t,a,o);i.push(...d)}}return i}case"freedraw":{let i;if(sb(e),dr(e.points)){let a=A7(e.points,.75);i=t.curve(a,{...zr(e),stroke:"none"})}else i=null;return i}case"frame":case"magicframe":case"text":case"image":return null;default:return Ao(e,`generateElementShape(): Unimplemented type ${e?.type}`),null}}});var rr,lb,ea,os,cb,Ch,li,M7,Th,Fd,Ah,db,Sh,mb,ta,pb,Ih,BD,FD,zD,HD,_D,GD,UD,ra=q(()=>{"use strict";f();rr=(e,t)=>[0,0,0,0,t,e,1,0],lb=(e,t)=>[0,0,0,0,t,e,0,0],ea=(e=0,t=0)=>{let r=[0,0,0,0,0,0,0,0];if(t<0||t>7)throw new Error(`Expected \`index\` between 0 and 7, got \`${t}\``);return e!==0&&(r[t]=e),r},os=e=>[e[0],e[1],e[2],e[3],-e[4],-e[5],-e[6],-e[7]],cb=(e,t)=>Ih(t)?[e[0]+t,e[1],e[2],e[3],e[4],e[5],e[6],e[7]]:[e[0]+t[0],e[1]+t[1],e[2]+t[2],e[3]+t[3],e[4]+t[4],e[5]+t[5],e[6]+t[6],e[7]+t[7]],Ch=(e,t)=>Ih(t)?[e[0]-t,e[1],e[2],e[3],e[4],e[5],e[6],e[7]]:[e[0]-t[0],e[1]-t[1],e[2]-t[2],e[3]-t[3],e[4]-t[4],e[5]-t[5],e[6]-t[6],e[7]-t[7]],li=(e,t)=>Ih(t)?[e[0]*t,e[1]*t,e[2]*t,e[3]*t,e[4]*t,e[5]*t,e[6]*t,e[7]*t]:[M7(e,t),t[1]*e[0]+t[0]*e[1]-t[4]*e[2]+t[5]*e[3]+t[2]*e[4]-t[3]*e[5]-t[7]*e[6]-t[6]*e[7],t[2]*e[0]+t[0]*e[2]-t[6]*e[3]+t[3]*e[6],t[3]*e[0]+t[6]*e[2]+t[0]*e[3]-t[2]*e[6],t[4]*e[0]+t[2]*e[1]-t[1]*e[2]+t[7]*e[3]+t[0]*e[4]+t[6]*e[5]-t[5]*e[6]+t[3]*e[7],t[5]*e[0]-t[3]*e[1]+t[7]*e[2]+t[1]*e[3]-t[6]*e[4]+t[0]*e[5]+t[4]*e[6]+t[2]*e[7],t[6]*e[0]+t[3]*e[2]-t[2]*e[3]+t[0]*e[6],t[7]*e[0]+t[6]*e[1]+t[5]*e[2]+t[4]*e[3]+t[3]*e[4]+t[2]*e[5]+t[1]*e[6]+t[0]*e[7]],M7=(e,t)=>t[0]*e[0]+t[2]*e[2]+t[3]*e[3]-t[6]*e[6],Th=(e,t)=>[t[0]*e[0],t[1]*e[0]+t[0]*e[1],t[2]*e[0]+t[0]*e[2],t[3]*e[0]+t[0]*e[3],t[4]*e[0]+t[2]*e[1]-t[1]*e[2]+t[0]*e[4],t[5]*e[0]-t[3]*e[1]+t[1]*e[3]+t[0]*e[5],t[6]*e[0]+t[3]*e[2]-t[2]*e[3]+t[0]*e[6],t[7]*e[0]+t[6]*e[1]+t[5]*e[2]+t[4]*e[3]+t[3]*e[4]+t[2]*e[5]+t[1]*e[6]],Fd=(e,t)=>[Ah(e,t),e[1]*t[7]+e[4]*t[5]-e[5]*t[4]+e[7]*t[1],e[2]*t[7]-e[4]*t[6]+e[6]*t[4]+e[7]*t[2],e[3]*t[7]+e[5]*t[6]-e[6]*t[5]+e[7]*t[3],e[4]*t[7]+e[7]*t[4],e[5]*t[7]+e[7]*t[5],e[6]*t[7]+e[7]*t[6],e[7]*t[7]],Ah=(e,t)=>e[0]*t[7]+e[1]*t[6]+e[2]*t[5]+e[3]*t[4]+e[4]*t[3]+e[5]*t[2]+e[6]*t[1]+e[7]*t[0],db=(e,t)=>[t[0]*e[0]+t[2]*e[2]+t[3]*e[3]-t[6]*e[6],t[1]*e[0]+t[0]*e[1]-t[4]*e[2]+t[5]*e[3]+t[2]*e[4]-t[3]*e[5]-t[7]*e[6]-t[6]*e[7],t[2]*e[0]+t[0]*e[2]-t[6]*e[3]+t[3]*e[6],t[3]*e[0]+t[6]*e[2]+t[0]*e[3]-t[2]*e[6],t[4]*e[0]+t[7]*e[3]+t[0]*e[4]+t[3]*e[7],t[5]*e[0]+t[7]*e[2]+t[0]*e[5]+t[2]*e[7],t[6]*e[0]+t[0]*e[6],t[7]*e[0]+t[0]*e[7]],Sh=e=>Math.sqrt(Math.abs(e[0]*e[0]-e[2]*e[2]-e[3]*e[3]+e[6]*e[6])),mb=e=>Math.sqrt(Math.abs(e[7]*e[7]-e[5]*e[5]-e[4]*e[4]+e[1]*e[1])),ta=e=>{let t=Sh(e);if(t===0||t===1)return e;let r=e[6]<0?-1:1;return li(e,r/t)},pb=e=>{let t=mb(e);return t===0||t===1?e:li(e,1/t)},Ih=e=>typeof e=="number",BD=ea(1,1),FD=ea(1,2),zD=ea(1,3),HD=ea(1,4),_D=ea(1,5),GD=ea(1,6),UD=ea(1,7)});var zd,ns,ub,hb,gb,Mh=q(()=>{"use strict";f();ra();zd=(e,t,r)=>ta([0,r,e,t,0,0,0,0]),ns=(e,t)=>ta(Fd(t,e)),ub=(e,t)=>db(e,t),hb=(e,t)=>ub(ns(e,t),t),gb=e=>Math.sign(e[1])});var oa,na,bb,xb,kh,ci,Eb=q(()=>{"use strict";f();ra();Mh();ra();oa=([e,t])=>[0,0,0,0,t,e,1,0],na=e=>[e[5],e[4]],bb=e=>[0,0,0,0,Math.abs(e[4]),Math.abs(e[5]),1,0],xb=(e,t)=>ta(Th(e,t)),kh=(e,t)=>Sh(Fd(e,t)),ci=(e,t)=>Ah(e,t)});var Lh,yb,Ph=q(()=>{"use strict";f();ra();Lh=e=>[0,0,0,0,e[4],e[5],0,0],yb=(e,t)=>pb([0,0,0,0,t[4]-e[4],t[5]-e[5],0,0])});var Dh,vb,Cb,Tb,ko,Ab=q(()=>{"use strict";f();ra();Ph();Dh=(e,t)=>cb(li(e,Math.sin(t/2)),Math.cos(t/2)),vb=e=>[1,0,0,0,-(.5*e[5]),.5*e[4],0,0],Cb=(e,t)=>{let r=.5*t;return[1,0,0,0,r*e[4],r*e[5],0,0]},Tb=(e,t)=>li(t,e),ko=(e,t)=>ta(li(li(e,t),os(e)))});var is,P7,as,jo,D7,Sb,R7,xt,N7,Rh,O7,Ib,B7,ia,Nh,F7,z7,Oh,Mb,Bh,kb,H7,Lb,Pb,Hd=q(()=>{"use strict";f();zt();is=1e-4,P7=e=>{let t=e[0],r=e[e.length-1];return t[0]===r[0]&&t[1]===r[1]},as=e=>P7(e)?e:[...e,e[0]],jo=e=>e*180/Math.PI,D7=e=>e/180*Math.PI,Sb=(e,t)=>[e[0]*Math.cos(t)-e[1]*Math.sin(t),e[0]*Math.sin(t)+e[1]*Math.cos(t)],R7=e=>e[0]===0&&e[1]===0,xt=(e,t,r)=>{let o=D7(t);return!r||R7(r)?Sb(e,o):Sb(e.map((n,i)=>n-r[i]),o).map((n,i)=>n+r[i])},N7=e=>[-e[0],-e[1]],Rh=(e,t)=>[e[0]+t[0],e[1]+t[1]],O7=(e,t)=>vt(...e,...t),Ib=(e,t,r)=>{let o=Rh(e,N7(t));return xt(o,-jo(r))},B7=(e,t)=>{let[r,o]=e,[[n,i],[a,s]]=t,l=r-n,c=o-i,d=a-n,m=s-i,p=l*d+c*m,u=d*d+m*m,h=-1;u!==0&&(h=p/u);let x,E;h<0?(x=n,E=i):h>1?(x=a,E=s):(x=n+h*d,E=i+h*m);let w=r-x,y=o-E;return Math.sqrt(w*w+y*y)},ia=(e,t,r=is)=>{let o=B7(e,t);return o===0?!0:o<r},Nh=(e,t,r=is)=>t.some(o=>ia(e,o,r)),F7=e=>{let[t,r,o,n]=e;return(i,a)=>Math.pow(1-i,3)*n[a]+3*i*Math.pow(1-i,2)*o[a]+3*Math.pow(i,2)*(1-i)*r[a]+t[a]*Math.pow(i,3)},z7=(e,t=10)=>{let r=F7(e),o=[r(0,0),r(0,1)],n=[],i=0,a=1/t;for(let s=0;s<t;s++)if(i+=a,i<=1){let l=[r(i,0),r(i,1)];n.push([o,l]),o=l}return n},Oh=(e,t,r=is)=>Nh(e,z7(t),r),Mb=(e,t,r=is)=>t.some(o=>Oh(e,o,r)),Bh=(e,t)=>{let r=e[0],o=e[1],n=!1;for(let i=0,a=t.length-1;i<t.length;a=i++){let s=t[i][0],l=t[i][1],c=t[a][0],d=t[a][1];(l>o&&d<=o||l<=o&&d>o)&&r<(c-s)*(o-l)/(d-l)+s&&(n=!n)}return n},kb=(e,t,r=is)=>{let o=!1,n=as(t);for(let i=0,a=n.length-1;i<a;i++)if(ia(e,[n[i],n[i+1]],r)){o=!0;break}return o},H7=(e,t)=>{let{angle:r,halfWidth:o,halfHeight:n,center:i}=t,a=o,s=n,[l,c]=Ib(e,i,r),d=Math.abs(l),m=Math.abs(c),p=.707,u=.707;for(let E=0;E<3;E++){let w=a*p,y=s*u,v=(a*a-s*s)*p**3/a,A=(s*s-a*a)*u**3/s,L=w-v,S=y-A,k=d-v,R=m-A,_=Math.hypot(S,L),M=Math.hypot(R,k);p=Math.min(1,Math.max(0,(k*_/M+v)/a)),u=Math.min(1,Math.max(0,(R*_/M+A)/s));let O=Math.hypot(u,p);p/=O,u/=O}let[h,x]=[a*p*Math.sign(l),s*u*Math.sign(c)];return O7([l,c],[h,x])},Lb=(e,t,r=is)=>H7(e,t)<=r,Pb=(e,t)=>{let{center:r,angle:o,halfWidth:n,halfHeight:i}=t,[a,s]=Ib(e,r,o);return a/n*(a/n)+s/i*(s/i)<=1}});var zl,ss,_d=q(()=>{"use strict";f();Hd();zl=(e,t,r=0)=>{switch(t.type){case"polygon":return kb(e,t.data,r);case"ellipse":return Lb(e,t.data,r);case"line":return ia(e,t.data,r);case"polyline":return Nh(e,t.data,r);case"curve":return Oh(e,t.data,r);case"polycurve":return Mb(e,t.data,r);default:throw Error(`shape ${t} is not implemented`)}},ss=(e,t)=>{switch(t.type){case"polygon":return Bh(e,t.data);case"line":return!1;case"curve":return!1;case"ellipse":return Pb(e,t.data);case"polyline":{let r=as(t.data.flat());return Bh(e,r)}case"polycurve":return!1;default:throw Error(`shape ${t} is not implemented`)}}});var fe,T,ls,Gd,cs,aa,ge=q(()=>{"use strict";f();V();fe={EQUAL:"Equal",MINUS:"Minus",NUM_ADD:"NumpadAdd",NUM_SUBTRACT:"NumpadSubtract",NUM_ZERO:"Numpad0",BRACKET_RIGHT:"BracketRight",BRACKET_LEFT:"BracketLeft",ONE:"Digit1",TWO:"Digit2",THREE:"Digit3",NINE:"Digit9",QUOTE:"Quote",ZERO:"Digit0",SLASH:"Slash",C:"KeyC",D:"KeyD",H:"KeyH",V:"KeyV",Z:"KeyZ",R:"KeyR",S:"KeyS"},T={ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",BACKSPACE:"Backspace",ALT:"Alt",CTRL_OR_CMD:ar?"metaKey":"ctrlKey",DELETE:"Delete",ENTER:"Enter",ESCAPE:"Escape",QUESTION_MARK:"?",SPACE:" ",TAB:"Tab",CHEVRON_LEFT:"<",CHEVRON_RIGHT:">",PERIOD:".",COMMA:",",SUBTRACT:"-",SLASH:"/",A:"a",C:"c",D:"d",E:"e",F:"f",G:"g",H:"h",I:"i",L:"l",O:"o",P:"p",Q:"q",R:"r",S:"s",T:"t",V:"v",X:"x",Y:"y",Z:"z",K:"k",W:"w",0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},ls=e=>e===T.ARROW_LEFT||e===T.ARROW_RIGHT||e===T.ARROW_DOWN||e===T.ARROW_UP,Gd=e=>e.altKey,cs=e=>e.shiftKey,aa=e=>e.shiftKey});var Ob,qo,_7,la,Db,G7,Bb,U7,W7,_l,Yd,Gl,sa,Fb,Fh,zb,Y7,Qo,V7,Hr,K7,X7,Z7,Rb,ds,Hb,Vd,Nb,Kd,Hl,_b,Ul,j7,q7,Q7,J7,$7,zh,Hh,_h,e8,t8,r8,o8,Gb,n8,i8,a8,s8,l8,c8,Ub,Ud,Wd,di,mi,io=q(()=>{"use strict";f();ra();Eb();Ph();Mh();Ab();st();_d();Xe();se();Ge();ni();Zt();G();ge();lt();Ob=e=>!e[T.CTRL_OR_CMD],qo=e=>e.isBindingEnabled,_7=(e,t)=>{let r=[];return t.forEach(o=>{let n=e.getNonDeletedElement(o);n!=null&&r.push(n)}),r},la=(e,t,r,o)=>{let n=new Set,i=new Set;Db(e,t,r,"start",n,i,o),Db(e,r,t,"end",n,i,o);let a=Array.from(i).filter(s=>!n.has(s));_7(St.getScene(e),a).forEach(s=>{z(s,{boundElements:s.boundElements?.filter(l=>l.type!=="arrow"||l.id!==e.id)})})},Db=(e,t,r,o,n,i,a)=>{if(t!=="keep"){if(t===null){let s=Y7(e,o);s!=null&&i.add(s);return}zb(e)?(r==null||(r==="keep"?!Fb(e,t,o):o==="start"||r.id!==t.id))&&(sa(e,t,o,a),n.add(t.id)):(sa(e,t,o,a),n.add(t.id))}},G7=(e,t,r)=>{let o=r.scene.getNonDeletedElementsMap(),n=Hb(e,t,o),i=t==="start"?e.startBinding?.elementId:e.endBinding?.elementId;if(i){let a=o.get(i);if(_b(a,n,r))return a}return null},Bb=(e,t)=>["start","end"].map(r=>G7(e,r,t)),U7=(e,t,r,o)=>{let i=e.points.length-1,a=r.findIndex(d=>d===0)>-1,s=r.findIndex(d=>d===i)>-1,l=a?t?ds(e,"start",o):null:ds(e,"start",o),c=s?t?ds(e,"end",o):null:ds(e,"end",o);return[l,c]},W7=(e,t,r)=>{let[o,n]=Bb(e,t),i=o&&r?ds(e,"start",t):null,a=n&&r?ds(e,"end",t):null;return[i,a]},_l=(e,t,r,o)=>{e.forEach(n=>{let[i,a]=o?.length?U7(n,r,o??[],t):W7(n,t,r);la(n,i,a,t.scene.getNonDeletedElementsMap())})},Yd=(e,t)=>e.length>50?[]:e.filter(ne).flatMap(r=>Bb(r,t)).filter(r=>r!==null).filter(r=>e.filter(o=>o.id===r?.id).length===0),Gl=(e,t,r,o)=>{t.startBoundElement!=null&&sa(e,t.startBoundElement,"start",o.scene.getNonDeletedElementsMap());let n=Qo(r,o);n!=null&&!Fb(e,n,"end")&&sa(e,n,"end",o.scene.getNonDeletedElementsMap())},sa=(e,t,r,o)=>{z(e,{[r==="start"?"startBinding":"endBinding"]:{elementId:t.id,...V7(e,t,r,o)}}),X(t.boundElements||[]).has(e.id)||z(t,{boundElements:(t.boundElements||[]).concat({id:e.id,type:"arrow"})})},Fb=(e,t,r)=>{let o=e[r==="start"?"endBinding":"startBinding"];return Fh(e,o?.elementId,t)},Fh=(e,t,r)=>t===r.id&&zb(e),zb=e=>e.points.length<3,Y7=(e,t)=>{let r=t==="start"?"startBinding":"endBinding",o=e[r];return o==null?null:(z(e,{[r]:null}),o.elementId)},Qo=(e,t)=>Eh(t.scene.getNonDeletedElements(),o=>Ji(o,!1)&&_b(o,e,t)),V7=(e,t,r,o)=>{let n=r==="start"?-1:1,i=n===-1?0:e.points.length-1,a=i-n,s=Z.getPointAtIndexGlobalCoordinates(e,i,o),l=Z.getPointAtIndexGlobalCoordinates(e,a,o);return{focus:e8(t,l,s,o),gap:Math.max(1,j7(t,s,o))}},Hr=(e,t,r)=>{let{newSize:o,simultaneouslyUpdated:n}=r??{},i=X7(n);Ji(e)&&Ud(t,e,a=>{if(!ne(a)||a.isDeleted||!K7(a,e))return;let s={startBinding:Rb(e,a.startBinding,o),endBinding:Rb(e,a.endBinding,o)};if(i.has(a.id)){z(a,s);return}Wd(t,a,(c,d)=>{c&&Ji(c)&&(d==="startBinding"||d==="endBinding")&&Z7(a,d,s[d],c,t)});let l=me(a,t);l&&!l.isDeleted&&ca(a,t,!1)})},K7=(e,t)=>e.startBinding?.elementId===t.id||e.endBinding?.elementId===t.id,X7=e=>new Set((e||[]).map(t=>t.id)),Z7=(e,t,r,o,n)=>{if(r==null||r.elementId!==o.id&&e.points.length>2)return;let i=t==="startBinding"?-1:1,a=i===-1?0:e.points.length-1,s=a-i,l=Z.getPointAtIndexGlobalCoordinates(e,s,n),c=t8(o,r.focus,l,n),d;if(r.gap===0)d=c;else{let m=r8(o,l,c,r.gap,n);m.length===0?d=c:d=m[0]}Z.movePoints(e,[{index:a,point:Z.pointFromAbsoluteCoords(e,d,n)}],{[t]:r})},Rb=(e,t,r)=>{if(t==null||r==null)return t;let{gap:o,focus:n,elementId:i}=t,{width:a,height:s}=r,{width:l,height:c}=e,d=Math.max(1,Math.min(Ul(e,a,s),o*(a<s?a/l:s/c)));return{elementId:i,gap:d,focus:n}},ds=(e,t,r)=>Qo(Hb(e,t,r.scene.getNonDeletedElementsMap()),r),Hb=(e,t,r)=>{let o=t==="start"?0:-1;return To(Z.getPointAtIndexGlobalCoordinates(e,o,r))},Vd=(e,t,r,o)=>{let n=new Set,i=new Set,a=o==="duplicatesServeAsOld";t.forEach(s=>{let{boundElements:l}=s;if(l!=null&&l.length>0&&(l.forEach(c=>{a&&!r.has(c.id)&&n.add(c.id)}),i.add(r.get(s.id))),wr(s)){if(s.startBinding!=null){let{elementId:c}=s.startBinding;a&&!r.has(c)&&i.add(c)}if(s.endBinding!=null){let{elementId:c}=s.endBinding;a&&!r.has(c)&&i.add(c)}(s.startBinding!=null||s.endBinding!=null)&&n.add(r.get(s.id))}}),e.filter(({id:s})=>n.has(s)).forEach(s=>{let{startBinding:l,endBinding:c}=s;z(s,{startBinding:Nb(l,r),endBinding:Nb(c,r)})}),e.filter(({id:s})=>i.has(s)).forEach(s=>{let{boundElements:l}=s;l!=null&&l.length>0&&z(s,{boundElements:l.map(c=>r.has(c.id)?{id:r.get(c.id),type:c.type}:c)})})},Nb=(e,t)=>{if(e==null)return null;let{elementId:r,focus:o,gap:n}=e;return{focus:o,gap:n,elementId:t.get(r)??r}},Kd=(e,t)=>{let r=X(e);for(let o of t)di.unbindAffected(r,o,z),mi.unbindAffected(r,o,z)},Hl=(e,t,r=[])=>{if(!e)return null;let o=e.filter(n=>!t.has(n.id));return o.push(...r.map(n=>({id:n.id,type:n.type}))),o},_b=(e,{x:t,y:r},o)=>{let n=Ul(e,e.width,e.height),i=o.getElementShape(e);return zl([t,r],i,n)},Ul=(e,t,r)=>{let n=(e.type==="diamond"?1/Math.sqrt(2):1)*Math.min(t,r);return Math.max(16,Math.min(.25*n,32))},j7=(e,t,r)=>{switch(e.type){case"rectangle":case"image":case"text":case"iframe":case"embeddable":case"frame":case"magicframe":return q7(e,t,r);case"diamond":return Q7(e,t,r);case"ellipse":return J7(e,t,r)}},q7=(e,t,r)=>{let[,o,n,i]=zh(e,t,r);return Math.max(ci(o,zd(0,1,-i)),ci(o,zd(1,0,-n)))},Q7=(e,t,r)=>{let[,o,n,i]=zh(e,t,r),a=zd(i,n,-i*n);return ci(o,a)},J7=(e,t,r)=>{let[o,n]=$7(e,t,r);return-gb(n)*ci(o,n)},$7=(e,t,r)=>{let[,o,n,i]=zh(e,t,r),[a,s]=na(o),l=.707,c=.707,d=n,m=i;[0,1,2,3].forEach(h=>{let x=d*l,E=m*c,w=(d*d-m*m)*l**3/d,y=(m*m-d*d)*c**3/m,v=x-w,A=E-y,L=a-w,S=s-y,k=Math.hypot(A,v),R=Math.hypot(S,L);l=Math.min(1,Math.max(0,(L*k/R+w)/d)),c=Math.min(1,Math.max(0,(S*k/R+y)/m));let _=Math.hypot(c,l);l/=_,c/=_});let p=rr(d*l,m*c),u=hb(o,p);return[o,u]},zh=(e,t,r)=>{let o=oa(t),[n,i,a,s]=re(e,r),l=_h(n,i,a,s),c=Dh(l,e.angle),d=ko(c,o),m=Ch(d,Lh(l)),p=bb(m),u=lb(e.x,e.y),h=Ch(d,u),x=(a-n)/2,E=(s-i)/2;return[h,p,x,E]},Hh=(e,t)=>{let[r,o,n,i]=re(e,t),a=_h(r,o,n,i),s=Dh(a,e.angle),l=os(vb(Lh(a)));return Tb(s,l)},_h=(e,t,r,o)=>rr((e+r)/2,(t+o)/2),e8=(e,t,r,o)=>{let n=Hh(e,o),i=ko(n,oa(t)),a=ko(n,oa(r)),s=ns(i,a),l=e.height/e.width,c=e.width/2,d=e.height/2,m=s[2],p=s[3],u=s[1],h=Math.abs(p),x=Math.abs(m),E;switch(e.type){case"rectangle":case"image":case"text":case"iframe":case"embeddable":case"frame":case"magicframe":E=u/(c*(x+l*h));break;case"diamond":E=h<x?u/(x*c):u/(h*d);break;case"ellipse":E=u/(c*Math.sqrt(m**2+l**2*p**2));break}return E||0},t8=(e,t,r,o)=>{if(t===0){let[l,c,d,m]=re(e,o),p=_h(l,c,d,m);return na(p)}let n=Hh(e,o),i=ko(n,oa(r)),a=os(n),s;switch(e.type){case"rectangle":case"image":case"text":case"diamond":case"iframe":case"embeddable":case"frame":case"magicframe":s=c8(e,t,i);break;case"ellipse":s=l8(e,t,i);break}return na(ko(a,s))},r8=(e,t,r,o=0,n)=>{let i=Hh(e,n),a=ko(i,oa(t)),s=ko(i,oa(r)),l=ns(a,s),c=os(i);return o8(e,l,a,o).map(m=>na(ko(c,m)))},o8=(e,t,r,o=0)=>{let n;switch(e.type){case"rectangle":case"image":case"text":case"diamond":case"iframe":case"embeddable":case"frame":case"magicframe":let a=Gb(e);n=a.flatMap((s,l)=>{let c=[s,a[(l+1)%4]];return n8(t,i8(c,o))}).concat(a.flatMap(s=>s8(s,o,t)));break;case"ellipse":n=a8(e,o,t);break}if(n.length<2)return[];let i=n.sort((a,s)=>kh(a,r)-kh(s,r));return[i[0],i[i.length-1]]},Gb=(e,t=1)=>{let r=t*e.width/2,o=t*e.height/2;switch(e.type){case"rectangle":case"image":case"text":case"iframe":case"embeddable":case"frame":case"magicframe":return[rr(r,o),rr(r,-o),rr(-r,-o),rr(-r,o)];case"diamond":return[rr(0,o),rr(r,0),rr(0,-o),rr(-r,0)]}},n8=(e,t)=>{let[r,o]=t,n=ci(r,e),i=ci(o,e);return n*i>=0?[]:[xb(e,ns(r,o))]},i8=(e,t)=>{let[r,o]=e,n=Cb(yb(r,o),t);return[ko(n,r),ko(n,o)]},a8=(e,t,r)=>{let o=e.width/2+t,n=e.height/2+t,i=r[2],a=r[3],s=r[1],l=o*o*i*i+n*n*a*a,c=l-s*s;if(l===0||c<=0)return[];let d=Math.sqrt(c),m=-o*o*i*s,p=-n*n*a*s;return[rr((m+o*n*a*d)/l,(p-o*n*i*d)/l),rr((m-o*n*a*d)/l,(p+o*n*i*d)/l)]},s8=(e,t,r)=>{if(t===0)return ci(r,e)===0?[e]:[];let o=r[2],n=r[3],i=r[1],[a,s]=na(e),l=t,c=o*o+n*n,d=l*l*c-(o*a+n*s+i)**2;if(c===0||d<=0)return[];let m=Math.sqrt(d),p=a*n*n-s*o*n-o*i,u=s*o*o-a*o*n-n*i;return[rr((p+n*m)/c,(u-o*m)/c),rr((p-n*m)/c,(u+o*m)/c)]},l8=(e,t,r)=>{let o=Math.abs(t),n=e.width*o/2,i=e.height*o/2,a=Math.sign(t),[s,l]=na(r),c=l===0?1e-4:l,d=s**2*i**2+c**2*n**2,m=(-s*i**2+a*c*Math.sqrt(Math.max(0,d-n**2*i**2)))/d,p=(-m*s-1)/c;p===0&&(p=(Object.is(p,-0)?-1:1)*.01);let u=-(n**2*m)/(p**2*i**2+m**2*n**2);return rr(u,(-m*u-1)/p)},c8=(e,t,r)=>{let o=Math.abs(t),n=Math.sign(t),i=Gb(e,o),a=0,s=null;return i.forEach(l=>{let c=n*ns(r,l)[1];c>a&&(a=c,s=l)}),s},Ub=new Set(["boundElements","frameId","containerId","startBinding","endBinding"]),Ud=(e,t,r)=>{Ji(t)&&(t.boundElements?.slice()??[]).forEach(({id:n})=>{r(e.get(n),"boundElements",n)})},Wd=(e,t,r)=>{if(t.frameId){let o=t.frameId;r(e.get(o),"frameId",o)}if(Ie(t)){let o=t.containerId;r(e.get(o),"containerId",o)}if(we(t)){if(t.startBinding){let o=t.startBinding.elementId;r(e.get(o),"startBinding",o)}if(t.endBinding){let o=t.endBinding.elementId;r(e.get(o),"endBinding",o)}}},di=class{static unbindAffected(t,r,o){r&&Wd(t,r,n=>{!n||n.isDeleted||Ud(t,n,(i,a,s)=>{s===r.id&&o(n,{boundElements:Hl(n.boundElements,new Set([s]))})})})}static rebindAffected=(t,r,o)=>{!r||r.isDeleted||Wd(t,r,(n,i)=>{if(!n||n.isDeleted){o(r,{[i]:null});return}i!=="frameId"&&(n.boundElements?.find(a=>a.id===r.id)||(we(r)&&o(n,{boundElements:Hl(n.boundElements,new Set,new Array(r))}),U(r)&&(n.boundElements?.find(a=>a.type==="text")?o(r,{[i]:null}):o(n,{boundElements:Hl(n.boundElements,new Set,new Array(r))}))))})}},mi=class{static unbindAffected(t,r,o){r&&Ud(t,r,n=>{!n||n.isDeleted||Wd(t,n,(i,a,s)=>{s===r.id&&o(n,{[a]:null})})})}static rebindAffected=(t,r,o)=>{!r||r.isDeleted||Ud(t,r,(n,i,a)=>{if(!n||n.isDeleted){o(r,{boundElements:Hl(r.boundElements,new Set([a]))});return}U(n)&&((r.boundElements?.slice()??[]).reverse().find(l=>l.type==="text")?.id===n.id?n.containerId!==r.id&&o(n,{containerId:r.id}):(n.containerId!==null&&o(n,{containerId:null}),o(r,{boundElements:Hl(r.boundElements,new Set([n.id]))})))})}}});var Tn,Z,d8,Zt=q(()=>{"use strict";f();zt();be();st();Ge();io();G();se();ge();lt();V();Zo();Tn={version:null,points:[],zoom:null},Z=class e{elementId;selectedPointsIndices;pointerDownState;isDragging;lastUncommittedPoint;pointerOffset;startBindingElement;endBindingElement;hoverPointIndex;segmentMidPointHoveredCoords;constructor(t){this.elementId=t.id,e.normalizePoints(t),this.selectedPointsIndices=null,this.lastUncommittedPoint=null,this.isDragging=!1,this.pointerOffset={x:0,y:0},this.startBindingElement="keep",this.endBindingElement="keep",this.pointerDownState={prevSelectedPointsIndices:null,lastClickedPoint:-1,origin:null,segmentMidpoint:{value:null,index:null,added:!1}},this.hoverPointIndex=-1,this.segmentMidPointHoveredCoords=null}static POINT_HANDLE_SIZE=10;static getElement(t,r){let o=r.get(t);return o||null}static handleBoxSelection(t,r,o,n){if(!r.editingLinearElement||r.draggingElement?.type!=="selection")return!1;let{editingLinearElement:i}=r,{selectedPointsIndices:a,elementId:s}=i,l=e.getElement(s,n);if(!l)return!1;let[c,d,m,p]=re(r.draggingElement,n),h=e.getPointsGlobalCoordinates(l,n).reduce((x,E,w)=>((E[0]>=c&&E[0]<=m&&E[1]>=d&&E[1]<=p||t.shiftKey&&a?.includes(w))&&x.push(w),x),[]);o({editingLinearElement:{...i,selectedPointsIndices:h.length?h:null}})}static handlePointDragging(t,r,o,n,i,a,s){if(!a)return!1;let{selectedPointsIndices:l,elementId:c}=a,d=e.getElement(c,s);if(!d)return!1;let m=d.points[a.pointerDownState.lastClickedPoint];if(l&&m){if(aa(t)&&l.length===1&&d.points.length>1){let u=l[0],h=d.points[u===0?1:u-1],[x,E]=e._getShiftLockedDelta(d,s,h,[o,n],t[T.CTRL_OR_CMD]?null:r.gridSize);e.movePoints(d,[{index:u,point:[x+h[0],E+h[1]],isDragging:u===a.pointerDownState.lastClickedPoint}])}else{let u=e.createPointAt(d,s,o-a.pointerOffset.x,n-a.pointerOffset.y,t[T.CTRL_OR_CMD]?null:r.gridSize),h=u[0]-m[0],x=u[1]-m[1];e.movePoints(d,l.map(E=>{let w=E===a.pointerDownState.lastClickedPoint?e.createPointAt(d,s,o-a.pointerOffset.x,n-a.pointerOffset.y,t[T.CTRL_OR_CMD]?null:r.gridSize):[d.points[E][0]+h,d.points[E][1]+x];return{index:E,point:w,isDragging:E===a.pointerDownState.lastClickedPoint}}))}if(me(d,s)&&ca(d,s,!1),wr(d,!1)){let u=[];l[0]===0&&u.push(To(e.getPointGlobalCoordinates(d,d.points[0],s)));let x=l[l.length-1];x===d.points.length-1&&u.push(To(e.getPointGlobalCoordinates(d,d.points[x],s))),u.length&&i(d,u)}return!0}return!1}static handlePointerUp(t,r,o,n){let i=n.scene.getNonDeletedElementsMap(),{elementId:a,selectedPointsIndices:s,isDragging:l,pointerDownState:c}=r,d=e.getElement(a,i);if(!d)return r;let m={};if(l&&s){for(let p of s)if(p===0||p===d.points.length-1){dr(d.points,o.zoom.value)&&e.movePoints(d,[{index:p,point:p===0?d.points[d.points.length-1]:d.points[0]}]);let u=qo(o)?Qo(To(e.getPointAtIndexGlobalCoordinates(d,p,i)),n):null;m[p===0?"startBindingElement":"endBindingElement"]=u}}return{...r,...m,selectedPointsIndices:l||t.shiftKey?!l&&t.shiftKey&&c.prevSelectedPointsIndices?.includes(c.lastClickedPoint)?s&&s.filter(p=>p!==c.lastClickedPoint):s:s?.includes(c.lastClickedPoint)?[c.lastClickedPoint]:s,isDragging:!1,pointerOffset:{x:0,y:0}}}static getEditorMidPoints=(t,r,o)=>{let n=me(t,r);return!o.editingLinearElement&&t.points.length>2&&!n?[]:(Tn.version===t.version&&Tn.zoom===o.zoom.value||e.updateEditorMidPointsCache(t,r,o),Tn.points)};static updateEditorMidPointsCache=(t,r,o)=>{let n=e.getPointsGlobalCoordinates(t,r),i=0,a=[];for(;i<n.length-1;){if(e.isSegmentTooShort(t,t.points[i],t.points[i+1],o.zoom)){a.push(null),i++;continue}let s=e.getSegmentMidPoint(t,n[i],n[i+1],i+1,r);a.push(s),i++}Tn.points=a,Tn.version=t.version,Tn.zoom=o.zoom.value};static getSegmentMidpointHitCoords=(t,r,o,n)=>{let{elementId:i}=t,a=e.getElement(i,n);if(!a||e.getPointIndexUnderCursor(a,n,o.zoom,r.x,r.y)>=0||e.getPointsGlobalCoordinates(a,n).length>=3&&!o.editingLinearElement)return null;let c=e.POINT_HANDLE_SIZE/o.zoom.value,d=t.segmentMidPointHoveredCoords;if(d&&vt(d[0],d[1],r.x,r.y)<=c)return d;let m=0,p=e.getEditorMidPoints(a,n,o);for(;m<p.length;){if(p[m]!==null&&vt(p[m][0],p[m][1],r.x,r.y)<=c)return p[m];m++}return null};static isSegmentTooShort(t,r,o,n){let i=vt(r[0],r[1],o[0],o[1]);return t.points.length>2&&t.roundness&&(i=eb(t,o)),i*n.value<e.POINT_HANDLE_SIZE*4}static getSegmentMidPoint(t,r,o,n,i){let a=Pl(r,o);if(t.points.length>2&&t.roundness){let s=fh(t,t.points[n]);if(s){let l=tb(t,t.points[n],.5),[c,d]=bh(s[0],s[1],s[2],s[3],l);a=e.getPointGlobalCoordinates(t,[c,d],i)}}return a}static getSegmentMidPointIndex(t,r,o,n){let i=e.getElement(t.elementId,n);if(!i)return-1;let a=e.getEditorMidPoints(i,n,r),s=0;for(;s<a.length;){if(e.arePointsEqual(o,a[s]))return s+1;s++}return-1}static handlePointerDown(t,r,o,n,i,a){let s=a.scene.getNonDeletedElementsMap(),l={didAddPoint:!1,hitElement:null,linearElementEditor:null};if(!i)return l;let{elementId:c}=i,d=e.getElement(c,s);if(!d)return l;let m=e.getSegmentMidpointHitCoords(i,n,r,s),p=null;if(m&&(p=e.getSegmentMidPointIndex(i,r,m,s)),t.altKey&&r.editingLinearElement)return i.lastUncommittedPoint==null&&(z(d,{points:[...d.points,e.createPointAt(d,s,n.x,n.y,t[T.CTRL_OR_CMD]?null:r.gridSize)]}),l.didAddPoint=!0),o.shouldCaptureIncrement(),l.linearElementEditor={...i,pointerDownState:{prevSelectedPointsIndices:i.selectedPointsIndices,lastClickedPoint:-1,origin:{x:n.x,y:n.y},segmentMidpoint:{value:m,index:p,added:!1}},selectedPointsIndices:[d.points.length-1],lastUncommittedPoint:null,endBindingElement:Qo(n,a)},l.didAddPoint=!0,l;let u=e.getPointIndexUnderCursor(d,s,r.zoom,n.x,n.y);if(u>=0||m)l.hitElement=d;else{let{startBindingElement:S,endBindingElement:k}=i;qo(r)&&wr(d)&&la(d,S,k,s)}let[h,x,E,w]=re(d,s),y=(h+E)/2,v=(x+w)/2,A=u>-1&&ye(d.x+d.points[u][0],d.y+d.points[u][1],y,v,d.angle),L=u>-1||t.shiftKey?t.shiftKey||i.selectedPointsIndices?.includes(u)?d8([...i.selectedPointsIndices||[],u]):[u]:null;return l.linearElementEditor={...i,pointerDownState:{prevSelectedPointsIndices:i.selectedPointsIndices,lastClickedPoint:u,origin:{x:n.x,y:n.y},segmentMidpoint:{value:m,index:p,added:!1}},selectedPointsIndices:L,pointerOffset:A?{x:n.x-A[0],y:n.y-A[1]}:{x:0,y:0}},l}static arePointsEqual(t,r){return!t&&!r?!0:!t||!r?!1:xh(t,r)}static handlePointerMove(t,r,o,n,i){if(!n.editingLinearElement)return null;let{elementId:a,lastUncommittedPoint:s}=n.editingLinearElement,l=e.getElement(a,i);if(!l)return n.editingLinearElement;let{points:c}=l,d=c[c.length-1];if(!t.altKey)return d===s&&e.deletePoints(l,[c.length-1]),{...n.editingLinearElement,lastUncommittedPoint:null};let m;if(aa(t)&&c.length>=2){let p=c[c.length-2],[u,h]=e._getShiftLockedDelta(l,i,p,[r,o],t[T.CTRL_OR_CMD]?null:n.gridSize);m=[u+p[0],h+p[1]]}else m=e.createPointAt(l,i,r-n.editingLinearElement.pointerOffset.x,o-n.editingLinearElement.pointerOffset.y,t[T.CTRL_OR_CMD]?null:n.gridSize);return d===s?e.movePoints(l,[{index:l.points.length-1,point:m}]):e.addPoints(l,n,[{point:m}]),{...n.editingLinearElement,lastUncommittedPoint:l.points[l.points.length-1]}}static getPointGlobalCoordinates(t,r,o){let[n,i,a,s]=re(t,o),l=(n+a)/2,c=(i+s)/2,{x:d,y:m}=t;return[d,m]=ye(d+r[0],m+r[1],l,c,t.angle),[d,m]}static getPointsGlobalCoordinates(t,r){let[o,n,i,a]=re(t,r),s=(o+i)/2,l=(n+a)/2;return t.points.map(c=>{let{x:d,y:m}=t;return[d,m]=ye(d+c[0],m+c[1],s,l,t.angle),[d,m]})}static getPointAtIndexGlobalCoordinates(t,r,o){let n=r<0?t.points.length+r:r,[i,a,s,l]=re(t,o),c=(i+s)/2,d=(a+l)/2,m=t.points[n],{x:p,y:u}=t;return m?ye(p+m[0],u+m[1],c,d,t.angle):ye(p,u,c,d,t.angle)}static pointFromAbsoluteCoords(t,r,o){let[n,i,a,s]=re(t,o),l=(n+a)/2,c=(i+s)/2,[d,m]=ye(r[0],r[1],l,c,-t.angle);return[d-t.x,m-t.y]}static getPointIndexUnderCursor(t,r,o,n,i){let a=e.getPointsGlobalCoordinates(t,r),s=a.length;for(;--s>-1;){let l=a[s];if(vt(n,i,l[0],l[1])*o.value<e.POINT_HANDLE_SIZE+1)return s}return-1}static createPointAt(t,r,o,n,i){let a=It(o,n,i),[s,l,c,d]=re(t,r),m=(s+c)/2,p=(l+d)/2,[u,h]=ye(a[0],a[1],m,p,-t.angle);return[u-t.x,h-t.y]}static getNormalizedPoints(t){let{points:r}=t,o=r[0][0],n=r[0][1];return{points:r.map((i,a)=>[i[0]-o,i[1]-n]),x:t.x+o,y:t.y+n}}static normalizePoints(t){z(t,e.getNormalizedPoints(t))}static duplicateSelectedPoints(t,r){if(!t.editingLinearElement)return!1;let{selectedPointsIndices:o,elementId:n}=t.editingLinearElement,i=e.getElement(n,r);if(!i||o===null)return!1;let{points:a}=i,s=[],l=!1,c=-1,d=a.reduce((m,p,u)=>{if(++c,m.push(p),o.includes(u)){let x=a[u+1];x||(l=!0),m.push(x?[(p[0]+x[0])/2,(p[1]+x[1])/2]:[p[0],p[1]]),s.push(c+1),++c}return m},[]);if(z(i,{points:d}),l){let m=i.points[i.points.length-1];e.movePoints(i,[{index:i.points.length-1,point:[m[0]+30,m[1]+30]}])}return{appState:{...t,editingLinearElement:{...t.editingLinearElement,selectedPointsIndices:s}}}}static deletePoints(t,r){let o=0,n=0;if(r.includes(0)){let s=t.points.find((l,c)=>!r.includes(c));s&&(o=s[0],n=s[1])}let a=t.points.reduce((s,l,c)=>(r.includes(c)||s.push(s.length?[l[0]-o,l[1]-n]:[0,0]),s),[]);e._updatePoints(t,a,o,n)}static addPoints(t,r,o){let a=[...t.points,...o.map(s=>s.point)];e._updatePoints(t,a,0,0)}static movePoints(t,r,o){let{points:n}=t,i=0,a=0,s=r.find(({index:c})=>c===0);s&&(i=s.point[0]+n[s.index][0],a=s.point[1]+n[s.index][1]);let l=n.map((c,d)=>{let m=r.find(p=>p.index===d);if(m){if(s)return c;let p=m.point[0]-n[m.index][0],u=m.point[1]-n[m.index][1];return[c[0]+p,c[1]+u]}return i||a?[c[0]-i,c[1]-a]:c});e._updatePoints(t,l,i,a,o)}static shouldAddMidpoint(t,r,o,n){if(!e.getElement(t.elementId,n))return!1;let{segmentMidpoint:a}=t.pointerDownState;if(a.added||a.value===null||a.index===null||t.pointerDownState.origin===null)return!1;let s=t.pointerDownState.origin,l=vt(s.x,s.y,r.x,r.y);return!(!o.editingLinearElement&&l<xn/o.zoom.value)}static addMidpoint(t,r,o,n,i){let a=e.getElement(t.elementId,i);if(!a)return;let{segmentMidpoint:s}=t.pointerDownState,l={pointerDownState:t.pointerDownState,selectedPointsIndices:t.selectedPointsIndices},c=e.createPointAt(a,i,r.x,r.y,n?o.gridSize:null),d=[...a.points.slice(0,s.index),c,...a.points.slice(s.index)];return z(a,{points:d}),l.pointerDownState={...t.pointerDownState,segmentMidpoint:{...t.pointerDownState.segmentMidpoint,added:!0},lastClickedPoint:s.index},l.selectedPointsIndices=[s.index],l}static _updatePoints(t,r,o,n,i){let a=Gh(t,r),s=Gh(t,t.points),l=(a[0]+a[2])/2,c=(a[1]+a[3])/2,d=(s[0]+s[2])/2,m=(s[1]+s[3])/2,p=d-l,u=m-c,h=ye(o,n,p,u,t.angle);z(t,{...i,points:r,x:t.x+h[0],y:t.y+h[1]})}static _getShiftLockedDelta(t,r,o,n,i){let a=e.getPointGlobalCoordinates(t,o,r),[s,l]=It(n[0],n[1],i),{width:c,height:d}=ms(a[0],a[1],s,l);return Ue([c,d],[0,0],-t.angle)}static getBoundTextElementPosition=(t,r,o)=>{let n=e.getPointsGlobalCoordinates(t,o);n.length<2&&z(r,{isDeleted:!0});let i=0,a=0;if(t.points.length%2===1){let s=Math.floor(t.points.length/2),l=e.getPointGlobalCoordinates(t,t.points[s],o);i=l[0]-r.width/2,a=l[1]-r.height/2}else{let s=t.points.length/2-1,l=Tn.points[s];t.points.length===2&&(l=Pl(n[0],n[1])),(!l||Tn.version!==t.version)&&(l=e.getSegmentMidPoint(t,n[s],n[s+1],s+1,o)),i=l[0]-r.width/2,a=l[1]-r.height/2}return{x:i,y:a}};static getMinMaxXYWithBoundText=(t,r,o,n)=>{let[i,a,s,l]=o,c=(i+s)/2,d=(a+l)/2,{x:m,y:p}=e.getBoundTextElementPosition(t,n,r),u=m+n.width,h=p+n.height,x=Ue([i,a],[c,d],t.angle),E=Ue([s,a],[c,d],t.angle),w=Ue([m,p],[c,d],-t.angle),y=Ue([u,p],[c,d],-t.angle),v=Ue([m,h],[c,d],-t.angle),A=Ue([u,h],[c,d],-t.angle);return x[0]<E[0]&&x[1]>=E[1]?(i=Math.min(i,v[0]),s=Math.max(s,Math.max(y[0],A[0])),a=Math.min(a,w[1]),l=Math.max(l,A[1])):x[0]>=E[0]&&x[1]>E[1]?(i=Math.min(i,A[0]),s=Math.max(s,Math.max(w[0],y[0])),a=Math.min(a,v[1]),l=Math.max(l,y[1])):x[0]>=E[0]?(i=Math.min(i,y[0]),s=Math.max(s,v[0]),a=Math.min(a,A[1]),l=Math.max(l,w[1])):x[1]<=E[1]&&(i=Math.min(i,Math.min(y[0],w[0])),s=Math.max(s,A[0]),a=Math.min(a,y[1]),l=Math.max(l,v[1])),[i,a,s,l,c,d]};static getElementAbsoluteCoords=(t,r,o=!1)=>{let n,i,a,s,l;if(t.points.length<2||!Pe.get(t)){let{minX:p,minY:u,maxX:h,maxY:x}=t.points.reduce((E,[w,y])=>(E.minY=Math.min(E.minY,y),E.minX=Math.min(E.minX,w),E.maxX=Math.max(E.maxX,w),E.maxY=Math.max(E.maxY,y),E),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});i=p+t.x,a=u+t.y,s=h+t.x,l=x+t.y}else{let p=Pe.generateElementShape(t,null),u=si(p[0]),[h,x,E,w]=Wl(u);i=h+t.x,a=x+t.y,s=E+t.x,l=w+t.y}let c=(i+s)/2,d=(a+l)/2;if(n=[i,a,s,l,c,d],!o)return n;let m=me(t,r);return m&&(n=e.getMinMaxXYWithBoundText(t,r,[i,a,s,l],m)),n}},d8=e=>{let t=[...new Set(e.filter(r=>r!==null&&r!==-1))];return t=t.sort((r,o)=>r-o),t.length?t:null}});var da,ma,Xd,Wb,Zd=q(()=>{"use strict";f();da={},ma=(e,t)=>{let r=da[e]||(da[e]={height:t});return r.height=t,r},Xd=e=>{da[e]&&delete da[e]},Wb=e=>da[e]?.height??null});var pi,Yh,Nt,jd,ca,ps,Lo,Vb,ui,qd,Qd,Uh,Yl,Vl,m8,p8,hi,Kb,Xb,Jd,u8,Po,me,pt,$d,Vh,Zb,jb,qb,h8,Qb,An,vr,pa,Jb,Wh,Yb,_r,lt=q(()=>{"use strict";f();G();Ge();V();be();se();Zt();Zd();pi=e=>kd(e).replace(/\t/g,"        "),Yh=e=>pi(e).split(`
`),Nt=(e,t,r,o=!0)=>{let n,i={x:e.x,y:e.y,text:e.text,width:e.width,height:e.height,angle:t?.angle??e.angle};i.text=e.text,t&&(n=vr(t,e),i.text=hi(e.originalText,Ve(e),n));let a=Lo(i.text,Ve(e),e.lineHeight);if(i.width=a.width,i.height=a.height,t){let s=pa(t,e),l=vr(t,e);if(!we(t)&&a.height>s){let p=An(a.height,t.type);z(t,{height:p},o),ma(t.id,p)}if(a.width>l){let p=An(a.width,t.type);z(t,{width:p},o)}let c={...e,...i},{x:d,y:m}=ps(t,c,r);i.x=d,i.y=m}z(e,i,o)},jd=(e,t,r)=>{let o=X(e);t.forEach(n=>{let i=r.get(n.id),a=Po(n);if(a){let s=r.get(a);if(s){let l=o.get(i);l&&z(l,{boundElements:(n.boundElements||[]).filter(d=>d.id!==s&&d.id!==a).concat({type:"text",id:s})});let c=o.get(s);c&&U(c)&&z(c,{containerId:l?i:null})}}})},ca=(e,t,r,o=!1)=>{if(!Po(e))return;Xd(e.id);let i=me(e,t);if(i&&i.text){if(!e)return;let a=i.text,s=i.height,l=i.width,c=vr(e,i),d=pa(e,i),m=e.height;if(o||r!=="n"&&r!=="s"){a&&(a=hi(i.originalText,Ve(i),c));let p=Lo(a,Ve(i),i.lineHeight);s=p.height,l=p.width}if(s>d){m=An(s,e.type);let p=m-e.height,u=!we(e)&&(r==="ne"||r==="nw"||r==="n")?e.y-p:e.y;z(e,{height:m,y:u})}z(i,{text:a,width:l,height:s}),we(e)||z(i,ps(e,i,t))}},ps=(e,t,r)=>{if(we(e))return Z.getBoundTextElementPosition(e,t,r);let o=Vh(e),n=pa(e,t),i=vr(e,t),a,s;return t.verticalAlign===yt.TOP?s=o.y:t.verticalAlign===yt.BOTTOM?s=o.y+(n-t.height):s=o.y+(n/2-t.height/2),t.textAlign===$n.LEFT?a=o.x:t.textAlign===$n.RIGHT?a=o.x+(i-t.width):a=o.x+(i/2-t.width/2),{x:a,y:s}},Lo=(e,t,r)=>{e=e.split(`
`).map(a=>a||" ").join(`
`);let o=parseFloat(t),n=m8(e,o,r);return{width:Vl(e,t),height:n}},Vb=e=>{let t=Yh(e.text).length;return e.height/t/e.fontSize},ui=(e,t)=>e*t,qd=(e,t,r)=>{let{unitsPerEm:o,ascender:n,descender:i}=Yb[e]||Yb[mt.Helvetica],a=t/o,s=r-a*n+a*i;return a*n+s},Qd=(e,t)=>ui(e,t)+bt*2,Yl=(e,t)=>{Uh||(Uh=document.createElement("canvas"));let r=Uh.getContext("2d");r.font=t;let o=r.measureText(e).width;return Br()?o*10:o},Vl=(e,t)=>{let r=Yh(e),o=0;return r.forEach(n=>{o=Math.max(o,Yl(n,t))}),o},m8=(e,t,r)=>{let o=Yh(e).length;return ui(t,r)*o},p8=e=>{let t=e.split("-");return t.length>1&&t.forEach((r,o)=>{o!==t.length-1&&(t[o]=r+="-")}),t.join(" ").split(" ")},hi=(e,t,r)=>{if(!Number.isFinite(r)||r<0)return e;let o=[],n=e.split(`
`),i=Yl(" ",t),a="",s=0,l=d=>{d.trim()&&o.push(d)},c=()=>{a="",s=0};return n.forEach(d=>{if(Vl(d,t)<=r){o.push(d);return}let p=p8(d);c();let u=0;for(;u<p.length;){let h=Yl(p[u],t);if(h===r)l(p[u]),u++;else if(h>r){for(l(a),c();p[u].length>0;){let x=String.fromCodePoint(p[u].codePointAt(0)),E=Kb.calculate(x,t);s+=E,p[u]=p[u].slice(x.length),s>=r?(l(a),a=x,s=E):a+=x}s+i>=r?(l(a),c()):a.endsWith("-")||(a+=" ",s+=i),u++}else for(;s<r&&u<p.length;){let x=p[u];if(s=Yl(a+x,t),s>r){l(a),c();break}u++;let E=!x.endsWith("-");if(a+=x,E&&(a+=" "),s+i>=r){E?o.push(a.slice(0,-1)):o.push(a),c();break}}}a.slice(-1)===" "&&(a=a.slice(0,-1),l(a))}),o.join(`
`)},Kb=(()=>{let e={};return{calculate:(o,n)=>{let i=o.charCodeAt(0);if(e[n]||(e[n]=[]),!e[n][i]){let a=Yl(o,n);e[n][i]=a}return e[n][i]},getCache:o=>e[o]}})(),Xb="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".toLocaleUpperCase(),Jd=(e,t)=>{let r=u8(e);return r===0?Lo(Xb.split("").join(`
`),e,t).width+bt*2:r+bt*2},u8=e=>{let t=Kb.getCache(e);if(!t)return 0;let r=t.filter(o=>o!==void 0);return Math.max(...r)},Po=e=>e?.boundElements?.length&&e?.boundElements?.filter(t=>t.type==="text")[0]?.id||null,me=(e,t)=>{if(!e)return null;let r=Po(e);return r&&t.get(r)||null},pt=(e,t)=>e&&e.containerId&&t.get(e.containerId)||null,$d=(e,t,r)=>{if(!we(e))return{x:e.x+e.width/2,y:e.y+e.height/2};let o=Z.getPointsGlobalCoordinates(e,r);if(o.length%2===1){let a=Math.floor(e.points.length/2),s=Z.getPointGlobalCoordinates(e,e.points[a],r);return{x:s[0],y:s[1]}}let n=e.points.length/2-1,i=Z.getEditorMidPoints(e,r,t)[n];return i||(i=Z.getSegmentMidPoint(e,o[n],o[n+1],n+1,r)),{x:i[0],y:i[1]}},Vh=e=>{let t=bt,r=bt;return e.type==="ellipse"&&(t+=e.width/2*(1-Math.sqrt(2)/2),r+=e.height/2*(1-Math.sqrt(2)/2)),e.type==="diamond"&&(t+=e.width/4,r+=e.height/4),{x:e.x+t,y:e.y+r}},Zb=(e,t)=>!t||we(t)?e.angle:t.angle,jb=(e,t)=>e.some(r=>{if(Ie(r)){let o=pt(r,t);return!we(o)}return!1}),qb=(e,t)=>e.some(r=>{if(Ie(r)){let o=pt(r,t);return!we(o)}return U(r)}),h8=new Set(["rectangle","ellipse","diamond","arrow"]),Qb=e=>h8.has(e.type),An=(e,t)=>{e=Math.ceil(e);let r=bt*2;return t==="ellipse"?Math.round((e+r)/Math.sqrt(2)*2):t==="arrow"?e+r*8:t==="diamond"?2*(e+r):e+r},vr=(e,t)=>{let{width:r}=e;if(we(e)){let o=(t?.fontSize??Lt)*A0;return Math.max(T0*r,o)}return e.type==="ellipse"?Math.round(r/2*Math.sqrt(2))-bt*2:e.type==="diamond"?Math.round(r/2)-bt*2:r-bt*2},pa=(e,t)=>{let{height:r}=e;return we(e)?r-bt*8*2<=0?t.height:r:e.type==="ellipse"?Math.round(r/2*Math.sqrt(2))-bt*2:e.type==="diamond"?Math.round(r/2)-bt*2:r-bt*2},Jb=()=>Vl(Xb,Ve({fontSize:Lt,fontFamily:Kt}))>0,Wh={[mt.Virgil]:1.25,[mt.Helvetica]:1.15,[mt.Cascadia]:1.2},Yb={[mt.Virgil]:{unitsPerEm:1e3,ascender:886,descender:-374},[mt.Helvetica]:{unitsPerEm:2048,ascender:1577,descender:-471},[mt.Cascadia]:{unitsPerEm:2048,ascender:1977,descender:-480},[mt.Assistant]:{unitsPerEm:1e3,ascender:1021,descender:-287}},_r=e=>e in Wh?Wh[e]:Wh[Kt]});import Xh from"roughjs/bin/rough";var Kh,re,Zh,wh,si,$b,ex,g8,Wl,jh,f8,b8,x8,vh,E8,y8,Gr,Te,em,us,Gh,qh,Cr,w8,st=q(()=>{"use strict";f();zt();yh();se();Ll();lt();Zt();Zo();G();Kh=class e{static boundsCache=new WeakMap;static getBounds(t,r){let o=e.boundsCache.get(t);if(o?.version&&o.version===t.version&&!Ie(t))return o.bounds;let n=e.calculateBounds(t,r);return e.boundsCache.set(t,{version:t.version,bounds:n}),n}static calculateBounds(t,r){let o,[n,i,a,s,l,c]=re(t,r);if(Dt(t)){let[d,m,p,u]=jh(t.points.map(([h,x])=>ye(h,x,l-t.x,c-t.y,t.angle)));return[d+t.x,m+t.y,p+t.x,u+t.y]}else if(ne(t))o=y8(t,l,c,r);else if(t.type==="diamond"){let[d,m]=ye(l,i,l,c,t.angle),[p,u]=ye(l,s,l,c,t.angle),[h,x]=ye(n,c,l,c,t.angle),[E,w]=ye(a,c,l,c,t.angle),y=Math.min(d,p,h,E),v=Math.min(m,u,x,w),A=Math.max(d,p,h,E),L=Math.max(m,u,x,w);o=[y,v,A,L]}else if(t.type==="ellipse"){let d=(a-n)/2,m=(s-i)/2,p=Math.cos(t.angle),u=Math.sin(t.angle),h=Math.hypot(d*p,m*u),x=Math.hypot(m*p,d*u);o=[l-h,c-x,l+h,c+x]}else{let[d,m]=ye(n,i,l,c,t.angle),[p,u]=ye(n,s,l,c,t.angle),[h,x]=ye(a,s,l,c,t.angle),[E,w]=ye(a,i,l,c,t.angle),y=Math.min(d,p,h,E),v=Math.min(m,u,x,w),A=Math.max(d,p,h,E),L=Math.max(m,u,x,w);o=[y,v,A,L]}return o}},re=(e,t,r=!1)=>{if(Dt(e))return f8(e);if(ne(e))return Z.getElementAbsoluteCoords(e,t,r);if(U(e)){let o=t?pt(e,t):null;if(we(o)){let n=Z.getBoundTextElementPosition(o,e,t);return[n.x,n.y,n.x+e.width,n.y+e.height,n.x+e.width/2,n.y+e.height/2]}}return[e.x,e.y,e.x+e.width,e.y+e.height,e.x+e.width/2,e.y+e.height/2]},Zh=(e,t)=>{let[r,o,n,i,a,s]=re(e,t),l=[a,s];if(ne(e)||Dt(e)){let w=[],y=0;for(;y<e.points.length-1;)w.push([Ue([e.points[y][0]+e.x,e.points[y][1]+e.y],l,e.angle),Ue([e.points[y+1][0]+e.x,e.points[y+1][1]+e.y],l,e.angle)]),y++;return w}let[c,d,m,p,u,h,x,E]=[[r,o],[n,o],[r,i],[n,i],[a,o],[a,i],[r,s],[n,s]].map(w=>Ue(w,l,e.angle));return e.type==="diamond"?[[u,x],[u,E],[h,x],[h,E]]:e.type==="ellipse"?[[u,x],[u,E],[h,x],[h,E],[u,x],[u,E],[h,x],[h,E]]:[[c,d],[m,p],[c,m],[d,p],[c,E],[m,E],[d,x],[p,x]]},wh=e=>{let t=Math.floor(e.width/2)+1,r=0,o=e.width,n=Math.floor(e.height/2)+1,i=t,a=e.height;return[t,r,o,n,i,a,0,n]},si=e=>{for(let t of e.sets)if(t.type==="path")return t.ops;return e.sets[0].ops},$b=(e,t,r,o,n)=>{let i=1-e;return Math.pow(i,3)*t+3*Math.pow(i,2)*e*r+3*i*Math.pow(e,2)*o+Math.pow(e,3)*n},ex=(e,t,r,o)=>{let n=t-e,i=r-t,a=o-r,s=3*n-6*i+3*a,l=6*i-6*n,c=3*n,d=l*l-4*s*c;if(!(d>=0))return!1;let p=null,u=null,h=1/0,x=1/0;return s===0?h=x=-c/l:(h=(-l+Math.sqrt(d))/(2*s),x=(-l-Math.sqrt(d))/(2*s)),h>=0&&h<=1&&(p=$b(h,e,t,r,o)),x>=0&&x<=1&&(u=$b(x,e,t,r,o)),[p,u]},g8=(e,t,r,o)=>{let n=ex(e[0],t[0],r[0],o[0]),i=ex(e[1],t[1],r[1],o[1]),a=Math.min(e[0],o[0]),s=Math.max(e[0],o[0]);if(n){let d=n.filter(m=>m!==null);a=Math.min(a,...d),s=Math.max(s,...d)}let l=Math.min(e[1],o[1]),c=Math.max(e[1],o[1]);if(i){let d=i.filter(m=>m!==null);l=Math.min(l,...d),c=Math.max(c,...d)}return[a,l,s,c]},Wl=(e,t)=>{let r=[0,0],{minX:o,minY:n,maxX:i,maxY:a}=e.reduce((s,{op:l,data:c})=>{if(l==="move")r=c;else if(l==="bcurveTo"){let d=[c[0],c[1]],m=[c[2],c[3]],p=[c[4],c[5]],u=t?t(...d):d,h=t?t(...m):m,x=t?t(...p):p,E=t?t(...r):r;r=p;let[w,y,v,A]=g8(E,u,h,x);s.minX=Math.min(s.minX,w),s.minY=Math.min(s.minY,y),s.maxX=Math.max(s.maxX,v),s.maxY=Math.max(s.maxY,A)}return s},{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});return[o,n,i,a]},jh=e=>{let t=1/0,r=1/0,o=-1/0,n=-1/0;for(let[i,a]of e)t=Math.min(t,i),r=Math.min(r,a),o=Math.max(o,i),n=Math.max(n,a);return[t,r,o,n]},f8=e=>{let[t,r,o,n]=jh(e.points),i=t+e.x,a=r+e.y,s=o+e.x,l=n+e.y;return[i,a,s,l,(i+s)/2,(a+l)/2]},b8=e=>{switch(e){case"arrow":return 25;case"diamond":case"diamond_outline":return 12;default:return 15}},x8=e=>{switch(e){case"bar":return 90;case"arrow":return 20;default:return 25}},vh=(e,t,r,o)=>{let n=si(t[0]);if(n.length<1)return null;let i=r==="start"?1:n.length-1,a=n[i].data,s=[a[4],a[5]],l=[a[2],a[3]],c=[a[0],a[1]],d=n[i-1],m=[0,0];d.op==="move"?m=d.data:d.op==="bcurveTo"&&(m=[d.data[4],d.data[5]]);let p=(j,oe)=>Math.pow(1-j,3)*s[oe]+3*j*Math.pow(1-j,2)*l[oe]+3*Math.pow(j,2)*(1-j)*c[oe]+m[oe]*Math.pow(j,3),[u,h]=r==="start"?m:s,[x,E]=[p(.3,0),p(.3,1)],w=Math.hypot(u-x,h-E),y=(u-x)/w,v=(h-E)/w,A=b8(o),L=0;{let[j,oe]=r==="end"?e.points[e.points.length-1]:e.points[0],[Ce,Y]=e.points.length>1?r==="end"?e.points[e.points.length-2]:e.points[1]:[0,0];L=Math.hypot(j-Ce,oe-Y)}let k=Math.min(A,L*(o==="diamond"||o==="diamond_outline"?.25:.5)),R=u-y*k,_=h-v*k;if(o==="dot"||o==="circle"||o==="circle_outline"){let j=Math.hypot(_-h,R-u)+e.strokeWidth-2;return[u,h,j]}let M=x8(o),[O,I]=ye(R,_,u,h,-M*Math.PI/180),[F,Q]=ye(R,_,u,h,M*Math.PI/180);if(o==="diamond"||o==="diamond_outline"){let j,oe;if(r==="start"){let[Ce,Y]=e.points.length>1?e.points[1]:[0,0];[j,oe]=ye(u+k*2,h,u,h,Math.atan2(Y-h,Ce-u))}else{let[Ce,Y]=e.points.length>1?e.points[e.points.length-2]:[0,0];[j,oe]=ye(u-k*2,h,u,h,Math.atan2(h-Y,u-Ce))}return[u,h,O,I,j,oe,F,Q]}return[u,h,O,I,F,Q]},E8=e=>{let t=Xh.generator(),r=zr(e),o=e.roundness?"curve":r.fill?"polygon":"linearPath";return t[o](e.points,r)},y8=(e,t,r,o)=>{let n=me(e,o);if(e.points.length<2){let[m,p]=e.points[0],[u,h]=ye(e.x+m,e.y+p,t,r,e.angle),x=[u,h,u,h];if(n){let E=Z.getMinMaxXYWithBoundText(e,o,[u,h,u,h],n);x=[E[0],E[1],E[2],E[3]]}return x}let a=Pe.get(e)?.[0]??E8(e),s=si(a),c=Wl(s,(m,p)=>ye(e.x+m,e.y+p,t,r,e.angle)),d=[c[0],c[1],c[2],c[3]];if(n){let m=Z.getMinMaxXYWithBoundText(e,o,d,n);d=[m[0],m[1],m[2],m[3]]}return d},Gr=(e,t)=>Kh.getBounds(e,t),Te=e=>{if(!e.length)return[0,0,0,0];let t=1/0,r=-1/0,o=1/0,n=-1/0,i=X(e);return e.forEach(a=>{let[s,l,c,d]=Gr(a,i);t=Math.min(t,s),o=Math.min(o,l),r=Math.max(r,c),n=Math.max(n,d)}),[t,o,r,n]},em=(e,t)=>{let[r,o,n,i]=Te(e);return[r+t.x,o+t.y,n+t.x,i+t.y]},us=(e,t,r,o)=>{if(!(ne(e)||Dt(e)))return[e.x,e.y,e.x+t,e.y+r];let n=ai(0,t,ai(1,r,e.points,o),o),i;if(Dt(e))i=jh(n);else{let d=Xh.generator(),m=e.roundness?d.curve(n,zr(e)):d.linearPath(n,zr(e)),p=si(m);i=Wl(p)}let[a,s,l,c]=i;return[a+e.x,s+e.y,l+e.x,c+e.y]},Gh=(e,t)=>{let r=Xh.generator(),o=e.roundness==null?r.linearPath(t,zr(e)):r.curve(t,zr(e)),n=si(o),[i,a,s,l]=Wl(n);return[i+e.x,a+e.y,s+e.x,l+e.y]},qh=(e,t)=>{if(!e.length)return[0,0,0,0];let r=1/0,o=e[0],n=X(e);return e.forEach(i=>{let[a,s,l,c]=Gr(i,n),d=vt((a+l)/2,(s+c)/2,t.x,t.y);d<r&&(r=d,o=i)}),Gr(o,n)},Cr=e=>{let[t,r,o,n]=Te(e);return{minX:t,minY:r,maxX:o,maxY:n,width:o-t,height:n-r,midX:(t+o)/2,midY:(r+n)/2}},w8=({scrollX:e,scrollY:t,width:r,height:o,zoom:n})=>[-e,-t,-e+r/n.value,-t+o/n.value]});var v8,jt,C8,tx,tm,rx,Tr,Do,Ar=q(()=>{"use strict";f();$t();V();v8=Ja.includes(devicePixelRatio)?devicePixelRatio:1,jt=()=>({showWelcomeScreen:!1,theme:ae.LIGHT,collaborators:new Map,currentChartType:"bar",currentItemBackgroundColor:rt.backgroundColor,currentItemEndArrowhead:"arrow",currentItemFillStyle:rt.fillStyle,currentItemFontFamily:Kt,currentItemFontSize:Lt,currentItemOpacity:rt.opacity,currentItemRoughness:rt.roughness,currentItemStartArrowhead:null,currentItemStrokeColor:rt.strokeColor,currentItemRoundness:"round",currentItemStrokeStyle:rt.strokeStyle,currentItemStrokeWidth:rt.strokeWidth,currentItemTextAlign:Qn,cursorButton:"up",activeEmbeddable:null,draggingElement:null,editingElement:null,editingGroupId:null,editingLinearElement:null,activeTool:{type:"selection",customType:null,locked:rt.locked,lastActiveTool:null},penMode:!1,penDetected:!1,errorMessage:null,exportBackground:!0,exportScale:v8,exportEmbedScene:!1,exportWithDarkMode:!1,fileHandle:null,gridSize:null,isBindingEnabled:!0,defaultSidebarDockedPreference:!1,isLoading:!1,isResizing:!1,isRotating:!1,lastPointerDownWith:"mouse",multiElement:null,name:null,contextMenu:null,openMenu:null,openPopup:null,openSidebar:null,openDialog:null,pasteDialog:{shown:!1,data:null},previousSelectedElementIds:{},resizingElement:null,scrolledOutside:!1,scrollX:0,scrollY:0,selectedElementIds:{},selectedGroupIds:{},selectedElementsAreBeingDragged:!1,selectionElement:null,shouldCacheIgnoreZoom:!1,showStats:!1,startBoundElement:null,suggestedBindings:[],frameRendering:{enabled:!0,clip:!0,name:!0,outline:!0},frameToHighlight:null,editingFrame:null,elementsToHighlight:null,toast:null,viewBackgroundColor:de.white,zenModeEnabled:!1,zoom:{value:1},viewModeEnabled:!1,pendingImageElementId:null,showHyperlinkPopup:!1,selectedLinearElement:null,snapLines:[],originSnapOffset:{x:0,y:0},objectsSnapModeEnabled:!1,userToFollow:null,followedBy:new Set}),C8=(e=>e)({showWelcomeScreen:{browser:!0,export:!1,server:!1},theme:{browser:!0,export:!1,server:!1},collaborators:{browser:!1,export:!1,server:!1},currentChartType:{browser:!0,export:!1,server:!1},currentItemBackgroundColor:{browser:!0,export:!1,server:!1},currentItemEndArrowhead:{browser:!0,export:!1,server:!1},currentItemFillStyle:{browser:!0,export:!1,server:!1},currentItemFontFamily:{browser:!0,export:!1,server:!1},currentItemFontSize:{browser:!0,export:!1,server:!1},currentItemRoundness:{browser:!0,export:!1,server:!1},currentItemOpacity:{browser:!0,export:!1,server:!1},currentItemRoughness:{browser:!0,export:!1,server:!1},currentItemStartArrowhead:{browser:!0,export:!1,server:!1},currentItemStrokeColor:{browser:!0,export:!1,server:!1},currentItemStrokeStyle:{browser:!0,export:!1,server:!1},currentItemStrokeWidth:{browser:!0,export:!1,server:!1},currentItemTextAlign:{browser:!0,export:!1,server:!1},cursorButton:{browser:!0,export:!1,server:!1},activeEmbeddable:{browser:!1,export:!1,server:!1},draggingElement:{browser:!1,export:!1,server:!1},editingElement:{browser:!1,export:!1,server:!1},editingGroupId:{browser:!0,export:!1,server:!1},editingLinearElement:{browser:!1,export:!1,server:!1},activeTool:{browser:!0,export:!1,server:!1},penMode:{browser:!0,export:!1,server:!1},penDetected:{browser:!0,export:!1,server:!1},errorMessage:{browser:!1,export:!1,server:!1},exportBackground:{browser:!0,export:!1,server:!1},exportEmbedScene:{browser:!0,export:!1,server:!1},exportScale:{browser:!0,export:!1,server:!1},exportWithDarkMode:{browser:!0,export:!1,server:!1},fileHandle:{browser:!1,export:!1,server:!1},gridSize:{browser:!0,export:!0,server:!0},height:{browser:!1,export:!1,server:!1},isBindingEnabled:{browser:!1,export:!1,server:!1},defaultSidebarDockedPreference:{browser:!0,export:!1,server:!1},isLoading:{browser:!1,export:!1,server:!1},isResizing:{browser:!1,export:!1,server:!1},isRotating:{browser:!1,export:!1,server:!1},lastPointerDownWith:{browser:!0,export:!1,server:!1},multiElement:{browser:!1,export:!1,server:!1},name:{browser:!0,export:!1,server:!1},offsetLeft:{browser:!1,export:!1,server:!1},offsetTop:{browser:!1,export:!1,server:!1},contextMenu:{browser:!1,export:!1,server:!1},openMenu:{browser:!0,export:!1,server:!1},openPopup:{browser:!1,export:!1,server:!1},openSidebar:{browser:!0,export:!1,server:!1},openDialog:{browser:!1,export:!1,server:!1},pasteDialog:{browser:!1,export:!1,server:!1},previousSelectedElementIds:{browser:!0,export:!1,server:!1},resizingElement:{browser:!1,export:!1,server:!1},scrolledOutside:{browser:!0,export:!1,server:!1},scrollX:{browser:!0,export:!1,server:!1},scrollY:{browser:!0,export:!1,server:!1},selectedElementIds:{browser:!0,export:!1,server:!1},selectedGroupIds:{browser:!0,export:!1,server:!1},selectedElementsAreBeingDragged:{browser:!1,export:!1,server:!1},selectionElement:{browser:!1,export:!1,server:!1},shouldCacheIgnoreZoom:{browser:!0,export:!1,server:!1},showStats:{browser:!0,export:!1,server:!1},startBoundElement:{browser:!1,export:!1,server:!1},suggestedBindings:{browser:!1,export:!1,server:!1},frameRendering:{browser:!1,export:!1,server:!1},frameToHighlight:{browser:!1,export:!1,server:!1},editingFrame:{browser:!1,export:!1,server:!1},elementsToHighlight:{browser:!1,export:!1,server:!1},toast:{browser:!1,export:!1,server:!1},viewBackgroundColor:{browser:!0,export:!0,server:!0},width:{browser:!1,export:!1,server:!1},zenModeEnabled:{browser:!0,export:!1,server:!1},zoom:{browser:!0,export:!1,server:!1},viewModeEnabled:{browser:!1,export:!1,server:!1},pendingImageElementId:{browser:!1,export:!1,server:!1},showHyperlinkPopup:{browser:!1,export:!1,server:!1},selectedLinearElement:{browser:!0,export:!1,server:!1},snapLines:{browser:!1,export:!1,server:!1},originSnapOffset:{browser:!1,export:!1,server:!1},objectsSnapModeEnabled:{browser:!0,export:!1,server:!1},userToFollow:{browser:!1,export:!1,server:!1},followedBy:{browser:!1,export:!1,server:!1}}),tx=(e,t)=>{let r={};for(let o of Object.keys(e))if(C8[o]?.[t]){let i=e[o];r[o]=i}return r},tm=e=>tx(e,"export"),rx=e=>tx(e,"server"),Tr=({activeTool:e})=>e.type==="eraser",Do=({activeTool:e})=>e.type==="hand"});var Qh,qt,rm,Jh,Sn,om,ox,ua,tt,nx,ix,ax,sx,ha,lx,cx,mr=q(()=>{"use strict";f();Xe();lt();ii();Qh=(e,t,r)=>{let o=r.reduce((n,i)=>(i.groupIds.includes(e)&&(n[i.id]=!0),n),{});return Object.keys(o).length<2?t.selectedGroupIds[e]||t.editingGroupId===e?{selectedElementIds:t.selectedElementIds,selectedGroupIds:{...t.selectedGroupIds,[e]:!1},editingGroupId:null}:t:{editingGroupId:t.editingGroupId,selectedGroupIds:{...t.selectedGroupIds,[e]:!0},selectedElementIds:{...t.selectedElementIds,...o}}},qt=function(){let e=null,t=null,r=null,o=(i,a,s,l)=>{if(r!==void 0&&a===t&&i===e&&s.editingGroupId===r?.editingGroupId)return r;let c={};for(let p of i){let u=p.groupIds;if(s.editingGroupId){let h=u.indexOf(s.editingGroupId);h>-1&&(u=u.slice(0,h))}if(u.length>0){let h=u[u.length-1];c[h]=!0}}let d={},m=a.reduce((p,u)=>{let h=u.groupIds.find(x=>c[x]);return h&&(p[u.id]=!0,Array.isArray(d[h])?d[h].push(u.id):d[h]=[u.id]),p},{});for(let p of Object.keys(d))d[p].length<2&&c[p]&&(c[p]=!1);return t=a,e=i,r={editingGroupId:s.editingGroupId,selectedGroupIds:c,selectedElementIds:Ne({...s.selectedElementIds,...m},l)},r},n=(i,a,s,l)=>{let c=l?l.scene.getSelectedElements({selectedElementIds:i.selectedElementIds,elements:a}):ue(a,i);return c.length?o(c,a,i,s):{selectedGroupIds:{},editingGroupId:null,selectedElementIds:Ne(i.selectedElementIds,s)}};return n.clearCache=()=>{t=null,e=null,r=null},n}(),rm=(e,t)=>Jh(e,t)!=null,Jh=(e,t)=>t.groupIds.filter(r=>r!==e.editingGroupId).find(r=>e.selectedGroupIds[r]),Sn=e=>Object.entries(e.selectedGroupIds).filter(([t,r])=>r).map(([t,r])=>t),om=(e,t)=>{let r={...t,selectedGroupIds:{}};for(let o of e){let n=o.groupIds;if(t.editingGroupId){let i=n.indexOf(t.editingGroupId);i>-1&&(n=n.slice(0,i))}if(n.length>0){let i=n[n.length-1];r={...r,...Qh(i,r,e)}}}return r.selectedGroupIds},ox=(e,t)=>({...e,editingGroupId:t.groupIds.length?t.groupIds[0]:null,selectedGroupIds:{},selectedElementIds:{[t.id]:!0}}),ua=(e,t)=>e.groupIds.includes(t),tt=(e,t)=>{let r=[];for(let o of e.values())ua(o,t)&&r.push(o);return r},nx=(e,t)=>e.groupIds.find(r=>t[r]),ix=(e,t,r)=>{let o=[...e],n=t?e.indexOf(t):-1,i=n>-1?n:e.length;for(let a=0;a<i;a++)o[a]=r(o[a]);return o},ax=(e,t,r)=>{let o=[...e],n=r?o.indexOf(r):-1,i=n>-1?n:o.length;return o.splice(i,0,t),o},sx=(e,t)=>e.filter(r=>!t[r]),ha=(e,t)=>{let r=new Map;return e.forEach(o=>{let n=o.groupIds.length===0?o.id:o.groupIds[o.groupIds.length-1],i=r.get(n)||[],a=me(o,t);a&&i.push(a),r.set(n,[...i,o])}),Array.from(r.values())},lx=e=>{let t=new Set;for(let[,r]of e)if(!r.isDeleted)for(let o of r.groupIds??[])t.add(o);return t},cx=e=>e.groupIds.length>0});import{sanitizeUrl as T8}from"@braintree/sanitize-url";var nm,pr,im,am,ga=q(()=>{"use strict";f();nm=e=>e.replace(/"/g,"&quot;"),pr=e=>(e=e.trim(),e&&T8(nm(e))),im=e=>!!(e?.includes(location.origin)||e?.startsWith("/")),am=e=>{if(e=pr(e),e.startsWith("/"))return`${location.origin}${e}`;try{new URL(e)}catch{return"about:blank"}return e}});var sm,H,Ze=q(()=>{"use strict";f();sm=[],H=e=>(sm=sm.concat(e),e)});import lm from"open-color";var mx,A8,px,S8,I8,Ur,We,Jo,dx,$h,Wr,hs=q(()=>{"use strict";f();V();Ar();mx='<svg viewBox="0 0 24 24" stroke-width="1" width="28" height="28" xmlns="http://www.w3.org/2000/svg">',A8='<path d="M6.164 11.755a5.314 5.314 0 0 1-4.932-5.298 5.314 5.314 0 0 1 5.311-5.311 5.314 5.314 0 0 1 5.307 5.113l8.773 8.773a3.322 3.322 0 0 1 0 4.696l-.895.895a3.322 3.322 0 0 1-4.696 0l-8.868-8.868Z" style="fill:#fff"/>',px='<path stroke="#1b1b1f" fill="#fff" d="m7.868 11.113 7.773 7.774a2.359 2.359 0 0 0 1.667.691 2.368 2.368 0 0 0 2.357-2.358c0-.625-.248-1.225-.69-1.667L11.201 7.78 9.558 9.469l-1.69 1.643v.001Zm10.273 3.606-3.333 3.333m-3.25-6.583 2 2m-7-7 3 3M3.664 3.625l1 1M2.529 6.922l1.407-.144m5.735-2.932-1.118.866M4.285 9.823l.758-1.194m1.863-6.207-.13 1.408"/>',S8=`data:${te.svg},${encodeURIComponent(`${mx}${px}</svg>`)}`,I8=`data:${te.svg},${encodeURIComponent(`${mx}${A8}${px}</svg>`)}`,Ur=e=>{e&&(e.style.cursor="")},We=(e,t)=>{e&&(e.style.cursor=t)},$h=(e,t)=>{let o=()=>{let n=t===ae.DARK;Jo=document.createElement("canvas"),Jo.theme=t,Jo.height=20,Jo.width=20;let i=Jo.getContext("2d");i.lineWidth=1,i.beginPath(),i.arc(Jo.width/2,Jo.height/2,5,0,2*Math.PI),i.fillStyle=n?lm.black:lm.white,i.fill(),i.strokeStyle=n?lm.white:lm.black,i.stroke(),dx=Jo.toDataURL(te.svg)};(!Jo||Jo.theme!==t)&&o(),We(e,`url(${dx}) ${20/2} ${20/2}, auto`)},Wr=(e,t)=>{if(e)if(t.activeTool.type==="selection")Ur(e);else if(Do(t))e.style.cursor=Le.GRAB;else if(Tr(t))$h(e,t.theme);else if(t.activeTool.type==="laser"){let r=t.theme===ae.LIGHT?S8:I8;e.style.cursor=`url(${r}), auto`}else["image","custom"].includes(t.activeTool.type)?t.activeTool.type!=="image"&&(e.style.cursor=Le.AUTO):e.style.cursor=Le.CROSSHAIR}});var In,Yr,eg,ux,mm,Kl,hx,Ht,M8,gs,tg,gx,ao,Xl,cm,Mn,dm,Zl,pm,kn=q(()=>{"use strict";f();G();So();Ge();mr();be();zt();st();lt();V();In=(e,{x:t,y:r,strokeColor:o=rt.strokeColor,backgroundColor:n=rt.backgroundColor,fillStyle:i=rt.fillStyle,strokeWidth:a=rt.strokeWidth,strokeStyle:s=rt.strokeStyle,roughness:l=rt.roughness,opacity:c=rt.opacity,width:d=0,height:m=0,angle:p=0,groupIds:u=[],frameId:h=null,index:x=null,roundness:E=null,boundElements:w=null,link:y=null,locked:v=rt.locked,...A})=>({id:A.id||Rt(),type:e,x:t,y:r,width:d,height:m,angle:p,strokeColor:o,backgroundColor:n,fillStyle:i,strokeWidth:a,strokeStyle:s,roughness:l,opacity:c,groupIds:u,frameId:h,index:x,roundness:E,seed:A.seed??oo(),version:A.version||1,versionNonce:A.versionNonce??0,isDeleted:!1,boundElements:w,updated:wn(),link:y,locked:v,customData:A.customData}),Yr=e=>In(e.type,e),eg=e=>In("embeddable",e),ux=e=>({...In("iframe",e)}),mm=e=>ie({...In("frame",e),type:"frame",name:e?.name||null},{}),Kl=e=>ie({...In("magicframe",e),type:"magicframe",name:e?.name||null},{}),hx=(e,t)=>({x:e.textAlign==="center"?t.width/2:e.textAlign==="right"?t.width:0,y:e.verticalAlign==="middle"?t.height/2:0}),Ht=e=>{let t=e.fontFamily||Kt,r=e.fontSize||Lt,o=e.lineHeight||_r(t),n=pi(e.text),i=Lo(n,Ve({fontFamily:t,fontSize:r}),o),a=e.textAlign||Qn,s=e.verticalAlign||Xi,l=hx({textAlign:a,verticalAlign:s},i);return ie({...In("text",e),text:n,fontSize:r,fontFamily:t,textAlign:a,verticalAlign:s,x:e.x-l.x,y:e.y-l.y,width:i.width,height:i.height,containerId:e.containerId||null,originalText:n,lineHeight:o},{})},M8=(e,t,r)=>{let{width:o,height:n}=Lo(r,Ve(e),e.lineHeight),{textAlign:i,verticalAlign:a}=e,s,l;if(i==="center"&&a===yt.MIDDLE&&!e.containerId){let c=Lo(e.text,Ve(e),e.lineHeight),d=hx(e,{width:o-c.width,height:n-c.height});s=e.x-d.x,l=e.y-d.y}else{let[c,d,m,p]=re(e,t),[u,h,x,E]=us(e,o,n,!1),w=(c-u)/2,y=(d-h)/2,v=(m-x)/2,A=(p-E)/2;[s,l]=J0({s:!0,e:i==="center"||i==="left",w:i==="center"||i==="right"},e.x,e.y,e.angle,w,y,v,A)}return{width:o,height:n,x:Number.isFinite(s)?s:e.x,y:Number.isFinite(l)?l:e.y}},gs=(e,t,r,o=e.text)=>{if(e.isDeleted)return;t&&(o=hi(o,Ve(e),vr(t,e)));let n=M8(e,r,o);return{text:o,...n}},tg=(e,t,r,{text:o,isDeleted:n,originalText:i})=>ie(e,{originalText:i,isDeleted:n??e.isDeleted,...gs(e,t,r,i)}),gx=e=>({...In(e.type,e),points:e.points||[],pressures:[],simulatePressure:e.simulatePressure,lastCommittedPoint:null}),ao=e=>({...In(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:e.startArrowhead||null,endArrowhead:e.endArrowhead||null}),Xl=e=>({...In("image",e),strokeColor:"transparent",status:e.status??"pending",fileId:e.fileId??null,scale:e.scale??[1,1]}),cm=(e,t=0)=>{if(e==null||typeof e!="object")return e;let r=Object.prototype.toString.call(e);if(r==="[object Object]"){let o=typeof e.constructor=="function"?Object.create(Object.getPrototypeOf(e)):{};for(let n in e)if(e.hasOwnProperty(n)){if(t===0&&(n==="shape"||n==="canvas"))continue;o[n]=cm(e[n],t+1)}return o}if(Array.isArray(e)){let o=e.length,n=new Array(o);for(;o--;)n[o]=cm(e[o],t+1);return n}return C.DEV&&r!=="[object Object]"&&r!=="[object Array]"&&r.startsWith("[object ")&&console.warn(`_deepCloneElement: unexpected object type ${r}. This value will not be cloned!`),e},Mn=e=>cm(e),dm=e=>{if(Br()&&e){let t=`${e}_copy`;return window.h?.app?.getSceneElementsIncludingDeleted().find(r=>r.id===t)&&(t+="_copy"),t}return Rt()},Zl=(e,t,r,o)=>{let n=Mn(r);return n.id=dm(n.id),n.boundElements=null,n.updated=wn(),n.seed=oo(),n.groupIds=ix(n.groupIds,e,i=>(t.has(i)||t.set(i,dm(i)),t.get(i))),o&&(n=Object.assign(n,o)),n},pm=(e,t)=>{let r=[],o=X(e),n=new Map,i=s=>{if(n.has(s))return n.get(s);if(o.has(s)){let l=dm(s);return n.set(s,l),l}return null},a=new Map;for(let s of e){let l=cm(s);if(l.id=i(s.id),t?.randomizeSeed&&(l.seed=oo(),gi(l)),l.groupIds&&(l.groupIds=l.groupIds.map(c=>(a.has(c)||a.set(c,dm(c)),a.get(c)))),"containerId"in l&&l.containerId){let c=i(l.containerId);l.containerId=c}if("boundElements"in l&&l.boundElements&&(l.boundElements=l.boundElements.reduce((c,d)=>{let m=i(d.id);return m&&c.push({...d,id:m}),c},[])),"endBinding"in l&&l.endBinding){let c=i(l.endBinding.elementId);l.endBinding=c?{...l.endBinding,elementId:c}:null}if("startBinding"in l&&l.startBinding){let c=i(l.startBinding.elementId);l.startBinding=c?{...l.startBinding,elementId:c}:null}l.frameId&&(l.frameId=i(l.frameId)),r.push(l)}return r}});var ft,jl,ql,fx=q(()=>{"use strict";f();V();io();Zt();Ge();lt();se();no();mr();Oe();G();ft=class e{constructor(t,r){this.deleted=t;this.inserted=r}static create(t,r,o,n){let i=o&&n!=="inserted"?o(t):t,a=o&&n!=="deleted"?o(r):r;return new e(i,a)}static calculate(t,r,o,n){if(t===r)return e.empty();let i={},a={};for(let c of this.distinctKeysIterator("full",t,r))i[c]=t[c],a[c]=r[c];let[s,l]=n?n(i,a):[i,a];return e.create(s,l,o)}static empty(){return new e({},{})}static isEmpty(t){return!Object.keys(t.deleted).length&&!Object.keys(t.inserted).length}static mergeObjects(t,r,o){let n={...t};for(let i of Object.keys(o))delete n[i];return{...n,...r}}static mergeArrays(t,r,o,n){return Object.values(e.mergeObjects(Uo(t??[],n),Uo(r??[],n),Uo(o??[],n)))}static diffObjects(t,r,o,n){if(!(!t[o]&&!r[o])&&(typeof t[o]=="object"||typeof r[o]=="object")){let i=t[o]??{},a=r[o]??{},s=e.getLeftDifferences(i,a).reduce((c,d)=>(c[d]=n(i[d]),c),{}),l=e.getRightDifferences(i,a).reduce((c,d)=>(c[d]=n(a[d]),c),{});Object.keys(s).length||Object.keys(l).length?(Reflect.set(t,o,s),Reflect.set(r,o,l)):(Reflect.deleteProperty(t,o),Reflect.deleteProperty(r,o))}}static diffArrays(t,r,o,n){if(!(!t[o]&&!r[o])&&(Array.isArray(t[o])||Array.isArray(r[o]))){let i=Array.isArray(t[o])?t[o]:[],a=Array.isArray(r[o])?r[o]:[],s=Uo(e.getLeftDifferences(Uo(i,n),Uo(a,n))),l=Uo(e.getRightDifferences(Uo(i,n),Uo(a,n)));if(Object.keys(s).length||Object.keys(l).length){let c=i.filter(m=>s[n?n(m):String(m)]),d=a.filter(m=>l[n?n(m):String(m)]);Reflect.set(t,o,c),Reflect.set(r,o,d)}else Reflect.deleteProperty(t,o),Reflect.deleteProperty(r,o)}}static isLeftDifferent(t,r,o=!1){return!!this.distinctKeysIterator("left",t,r,o).next().value}static isRightDifferent(t,r,o=!1){return!!this.distinctKeysIterator("right",t,r,o).next().value}static getLeftDifferences(t,r,o=!1){return Array.from(this.distinctKeysIterator("left",t,r,o))}static getRightDifferences(t,r,o=!1){return Array.from(this.distinctKeysIterator("right",t,r,o))}static*distinctKeysIterator(t,r,o,n=!1){if(r===o)return;let i=[];t==="left"?i=Object.keys(r):t==="right"?i=Object.keys(o):t==="full"?i=Array.from(new Set([...Object.keys(r),...Object.keys(o)])):Ao(t,`Unknown distinctKeysIterator's join param "${t}"`,!0);for(let a of i){let s=r[a],l=o[a];if(s!==l){if(!n&&typeof s=="object"&&typeof l=="object"&&s!==null&&l!==null&&Je(s,l))continue;yield a}}}},jl=class e{constructor(t){this.delta=t}static calculate(t,r){let o=ft.calculate(t,r,void 0,e.postProcess);return new e(o)}static empty(){return new e(ft.create({},{}))}inverse(){let t=ft.create(this.delta.inserted,this.delta.deleted);return new e(t)}applyTo(t,r){try{let{selectedElementIds:o={},selectedGroupIds:n={}}=this.delta.deleted,{selectedElementIds:i={},selectedGroupIds:a={},selectedLinearElementId:s,editingLinearElementId:l,...c}=this.delta.inserted,d=ft.mergeObjects(t.selectedElementIds,i,o),m=ft.mergeObjects(t.selectedGroupIds,a,n),p=s&&r.has(s)?new Z(r.get(s)):null,u=l&&r.has(l)?new Z(r.get(l)):null,h={...t,...c,selectedElementIds:d,selectedGroupIds:m,selectedLinearElement:typeof s<"u"?p:t.selectedLinearElement,editingLinearElement:typeof l<"u"?u:t.editingLinearElement},x=this.filterInvisibleChanges(t,h,r);return[h,x]}catch(o){if(console.error("Couldn't apply appstate change",o),C.DEV||C.MODE===yr.TEST)throw o;return[t,!1]}}isEmpty(){return ft.isEmpty(this.delta)}static postProcess(t,r){try{ft.diffObjects(t,r,"selectedElementIds",o=>!0),ft.diffObjects(t,r,"selectedGroupIds",o=>o??!1)}catch(o){if(console.error("Couldn't postprocess appstate change deltas."),C.DEV||C.MODE===yr.TEST)throw o}finally{return[t,r]}}filterInvisibleChanges(t,r,o){let n=Ql(t),i=Ql(r),a=ft.isRightDifferent(e.stripElementsProps(n),e.stripElementsProps(i)),s=ft.isRightDifferent(e.stripStandaloneProps(n),e.stripStandaloneProps(i));if(!a&&!s)return!1;let l={value:a};if(s){let c=ft.getRightDifferences(e.stripStandaloneProps(n),e.stripStandaloneProps(i)),d=new Set;(c.includes("editingGroupId")||c.includes("selectedGroupIds"))&&(d=lx(o));for(let m of c)switch(m){case"selectedElementIds":r[m]=e.filterSelectedElements(r[m],o,l);break;case"selectedGroupIds":r[m]=e.filterSelectedGroups(r[m],d,l);break;case"editingGroupId":let p=r[m];p?d.has(p)?l.value=!0:r[m]=null:l.value=!0;break;case"selectedLinearElementId":case"editingLinearElementId":let u=e.convertToAppStateKey(m),h=r[u];if(!h)l.value=!0;else{let x=o.get(h.elementId);x&&!x.isDeleted?l.value=!0:r[u]=null}break;default:Ao(m,`Unknown ObservedElementsAppState's key "${m}"`,!0)}}return l.value}static convertToAppStateKey(t){switch(t){case"selectedLinearElementId":return"selectedLinearElement";case"editingLinearElementId":return"editingLinearElement"}}static filterSelectedElements(t,r,o){let n=Object.keys(t);if(!n.length)return o.value=!0,t;let i={...t};for(let a of n){let s=r.get(a);s&&!s.isDeleted?o.value=!0:delete i[a]}return i}static filterSelectedGroups(t,r,o){if(!Object.keys(t).length)return o.value=!0,t;let i={...t};for(let a of Object.keys(i))r.has(a)?o.value=!0:delete i[a];return i}static stripElementsProps(t){let{editingGroupId:r,selectedGroupIds:o,selectedElementIds:n,editingLinearElementId:i,selectedLinearElementId:a,...s}=t;return s}static stripStandaloneProps(t){let{name:r,viewBackgroundColor:o,...n}=t;return n}},ql=class e{constructor(t,r,o){this.added=t;this.removed=r;this.updated=o}static create(t,r,o,n={shouldRedistribute:!1}){let i;if(n.shouldRedistribute){let a=new Map,s=new Map,l=new Map,c=[...t,...r,...o];for(let[d,m]of c)this.satisfiesAddition(m)?a.set(d,m):this.satisfiesRemoval(m)?s.set(d,m):l.set(d,m);i=new e(a,s,l)}else i=new e(t,r,o);return(C.DEV||C.MODE===yr.TEST)&&(e.validate(i,"added",this.satisfiesAddition),e.validate(i,"removed",this.satisfiesRemoval),e.validate(i,"updated",this.satisfiesUpdate)),i}static satisfiesAddition=({deleted:t,inserted:r})=>t.isDeleted===!0&&!r.isDeleted;static satisfiesRemoval=({deleted:t,inserted:r})=>!t.isDeleted&&r.isDeleted===!0;static satisfiesUpdate=({deleted:t,inserted:r})=>!!t.isDeleted==!!r.isDeleted;static validate(t,r,o){for(let[n,i]of t[r].entries())if(!o(i))throw console.error(`Broken invariant for "${r}" delta, element "${n}", delta:`,i),new Error(`ElementsChange invariant broken for element "${n}".`)}static calculate(t,r){if(t===r)return e.empty();let o=new Map,n=new Map,i=new Map;for(let a of t.values())if(!r.get(a.id)){let l={...a,isDeleted:!1},c={isDeleted:!0},d=ft.create(l,c,e.stripIrrelevantProps);n.set(a.id,d)}for(let a of r.values()){let s=t.get(a.id);if(!s){let l={isDeleted:!0},c={...a,isDeleted:!1},d=ft.create(l,c,e.stripIrrelevantProps);o.set(a.id,d);continue}if(s.versionNonce!==a.versionNonce){let l=ft.calculate(s,a,e.stripIrrelevantProps,e.postProcess);if(typeof s.isDeleted=="boolean"&&typeof a.isDeleted=="boolean"&&s.isDeleted!==a.isDeleted){s.isDeleted&&!a.isDeleted?o.set(a.id,l):n.set(a.id,l);continue}ft.isEmpty(l)||i.set(a.id,l)}}return e.create(o,n,i)}static empty(){return e.create(new Map,new Map,new Map)}inverse(){let t=i=>{let a=new Map;for(let[s,l]of i.entries())a.set(s,ft.create(l.inserted,l.deleted));return a},r=t(this.added),o=t(this.removed),n=t(this.updated);return e.create(o,r,n)}isEmpty(){return this.added.size===0&&this.removed.size===0&&this.updated.size===0}applyLatestChanges(t){let r=s=>l=>{let c={};for(let d of Object.keys(l))switch(d){case"boundElements":c[d]=l[d];break;default:c[d]=s[d]}return c},o=s=>{let l=new Map;for(let[c,d]of s.entries()){let m=t.get(c);if(m){let p=ft.create(d.deleted,d.inserted,r(m),"inserted");l.set(c,p)}else l.set(c,d)}return l},n=o(this.added),i=o(this.removed),a=o(this.updated);return e.create(n,i,a,{shouldRedistribute:!0})}applyTo(t,r){let o=Fr(new Map(t)),n,i={containsVisibleDifference:!1,containsZindexDifference:!1};try{let a=e.createApplier(o,r,i),s=a(this.added),l=a(this.removed),c=a(this.updated),d=this.resolveConflicts(t,o);n=new Map([...s,...l,...c,...d])}catch(a){if(console.error("Couldn't apply elements change",a),C.DEV||C.MODE===yr.TEST)throw a;return[t,!0]}try{e.redrawTextBoundingBoxes(o,n),e.redrawBoundArrows(o,n),o=e.reorderElements(o,n,i)}catch(a){if(console.error("Couldn't mutate elements after applying elements change",a),C.DEV||C.MODE===yr.TEST)throw a}finally{return[o,i.containsVisibleDifference]}}static createApplier=(t,r,o)=>{let n=e.createGetter(t,r,o);return i=>Array.from(i.entries()).reduce((a,[s,l])=>{let c=n(s,l.inserted);if(c){let d=e.applyDelta(c,l,o);t.set(d.id,d),a.set(d.id,d)}return a},new Map)};static createGetter=(t,r,o)=>(n,i)=>{let a=t.get(n);return a||(a=r.get(n),a&&(o.containsZindexDifference=!0,(i.isDeleted===!1||i.isDeleted!==!0&&a.isDeleted===!1)&&(o.containsVisibleDifference=!0))),a};static applyDelta(t,r,o={containsVisibleDifference:!0,containsZindexDifference:!0}){let{boundElements:n,...i}=r.inserted;if(r.deleted.boundElements?.length||r.inserted.boundElements?.length){let a=ft.mergeArrays(t.boundElements,r.inserted.boundElements,r.deleted.boundElements,s=>s.id);Object.assign(i,{boundElements:a})}if(!o.containsVisibleDifference){let{index:a,...s}=i,l=e.checkForVisibleDifference(t,s);o.containsVisibleDifference=l}return o.containsZindexDifference||(o.containsZindexDifference=r.deleted.index!==r.inserted.index),ie(t,i)}static checkForVisibleDifference(t,r){return t.isDeleted&&r.isDeleted!==!1?!1:t.isDeleted&&r.isDeleted===!1||t.isDeleted===!1&&r.isDeleted?!0:ft.isRightDifferent(t,r)}resolveConflicts(t,r){let o=new Map,n=(c,d)=>{let m=r.get(c.id);if(!m)return;let p;t.get(c.id)===m?p=ie(m,d):p=z(m,d),o.set(p.id,p),r.set(p.id,p)};for(let[c]of this.removed)e.unbindAffected(t,r,c,n);for(let[c]of this.added)e.rebindAffected(t,r,c,n);for(let[c]of Array.from(this.updated).filter(([d,m])=>Object.keys({...m.deleted,...m.inserted}).find(p=>Ub.has(p)))){let d=r.get(c);!d||d.isDeleted||e.rebindAffected(t,r,c,n)}let i=new Map(Array.from(t).filter(([c])=>o.has(c))),{added:a,removed:s,updated:l}=e.calculate(i,o);for(let[c,d]of a)this.added.set(c,d);for(let[c,d]of s)this.removed.set(c,d);for(let[c,d]of l)this.updated.set(c,d);return o}static unbindAffected(t,r,o,n){let i=()=>t.get(o),a=()=>r.get(o);di.unbindAffected(r,i(),n),di.unbindAffected(r,a(),n),mi.unbindAffected(r,i(),n),mi.unbindAffected(r,a(),n)}static rebindAffected(t,r,o,n){let i=()=>t.get(o),a=()=>r.get(o);di.unbindAffected(r,i(),n),di.rebindAffected(r,a(),n),mi.unbindAffected(r,i(),(s,l)=>{U(s)&&n(s,l)}),mi.rebindAffected(r,a(),n)}static redrawTextBoundingBoxes(t,r){let o=new Map;for(let n of r.values()){if(Ie(n)){let{containerId:i}=n,a=i?t.get(i):void 0;a&&o.set(a.id,{container:a,boundText:n})}if(tr(n)){let i=Po(n),a=i?t.get(i):void 0;a&&o.set(n.id,{container:n,boundText:a})}}for(let{container:n,boundText:i}of o.values())n.isDeleted||i.isDeleted||Nt(i,n,t,!1)}static redrawBoundArrows(t,r){for(let o of r.values())!o.isDeleted&&Ji(o)&&Hr(o,t)}static reorderElements(t,r,o){if(!o.containsZindexDifference)return t;let n=Array.from(t.values()),i=Dd([...n]);return!o.containsVisibleDifference&&ft.isRightDifferent(n,i,!0)&&(o.containsVisibleDifference=!0),X(Ft(i,r))}static postProcess(t,r){try{ft.diffArrays(t,r,"boundElements",o=>o.id)}catch(o){if(console.error("Couldn't postprocess elements change deltas."),C.DEV||C.MODE===yr.TEST)throw o}finally{return[t,r]}}static stripIrrelevantProps(t){let{id:r,updated:o,version:n,versionNonce:i,seed:a,...s}=t;return s}}});var or,Jl=q(()=>{"use strict";f();or=class{subscribers=[];on(...t){let r=t.flat().filter(o=>typeof o=="function");return this.subscribers.push(...r),()=>this.off(r)}once(...t){let r=t.flat().filter(n=>typeof n=="function");r.push(()=>o());let o=this.on(...r);return o}off(...t){let r=t.flat();this.subscribers=this.subscribers.filter(o=>!r.includes(o))}trigger(...t){for(let r of this.subscribers)r(...t);return this}clear(){this.subscribers=[]}}});var bx,Ql,k8,D,rg,um,hm,Oe=q(()=>{"use strict";f();Ar();fx();V();Ge();kn();Jl();G();bx="__observedAppState",Ql=e=>{let t={name:e.name,editingGroupId:e.editingGroupId,viewBackgroundColor:e.viewBackgroundColor,selectedElementIds:e.selectedElementIds,selectedGroupIds:e.selectedGroupIds,editingLinearElementId:e.editingLinearElement?.elementId||null,selectedLinearElementId:e.selectedLinearElement?.elementId||null};return Reflect.defineProperty(t,bx,{value:!0,enumerable:!1}),t},k8=e=>!!Reflect.get(e,bx),D={CAPTURE:"capture",UPDATE:"update",NONE:"none"},rg=class{constructor(t,r){this.elementsChange=t;this.appStateChange=r}},um=class{onStoreIncrementEmitter=new or;scheduledActions=new Set;_snapshot=hm.empty();get snapshot(){return this._snapshot}set snapshot(t){this._snapshot=t}shouldCaptureIncrement=()=>{this.scheduleAction(D.CAPTURE)};shouldUpdateSnapshot=()=>{this.scheduleAction(D.UPDATE)};scheduleAction=t=>{this.scheduledActions.add(t),this.satisfiesScheduledActionsInvariant()};commit=(t,r)=>{try{this.scheduledActions.has(D.CAPTURE)?this.captureIncrement(t,r):this.scheduledActions.has(D.UPDATE)&&this.updateSnapshot(t,r)}finally{this.satisfiesScheduledActionsInvariant(),this.scheduledActions=new Set}};captureIncrement=(t,r)=>{let o=this.snapshot,n=this.snapshot.maybeClone(t,r);if(o!==n){let i=n.meta.didElementsChange?ql.calculate(o.elements,n.elements):ql.empty(),a=n.meta.didAppStateChange?jl.calculate(o.appState,n.appState):jl.empty();(!i.isEmpty()||!a.isEmpty())&&this.onStoreIncrementEmitter.trigger(new rg(i,a)),this.snapshot=n}};updateSnapshot=(t,r)=>{let o=this.snapshot.maybeClone(t,r);this.snapshot!==o&&(this.snapshot=o)};filterUncomittedElements=(t,r)=>{for(let[o,n]of t.entries()){if(!r.get(o))continue;let a=this.snapshot.elements.get(o);a?a.version<n.version&&r.set(o,a):r.delete(o)}return r};clear=()=>{this.snapshot=hm.empty(),this.scheduledActions=new Set};satisfiesScheduledActionsInvariant=()=>{if(!(this.scheduledActions.size>=0&&this.scheduledActions.size<=3)){let t=`There can be at most three store actions scheduled at the same time, but there are "${this.scheduledActions.size}".`;if(console.error(t,this.scheduledActions.values()),C.DEV||C.MODE===yr.TEST)throw new Error(t)}}},hm=class e{constructor(t,r,o={didElementsChange:!1,didAppStateChange:!1,isEmpty:!1}){this.elements=t;this.appState=r;this.meta=o}static empty(){return new e(new Map,Ql(jt()),{didElementsChange:!1,didAppStateChange:!1,isEmpty:!0})}isEmpty(){return this.meta.isEmpty}maybeClone(t,r){let o=this.maybeCreateElementsSnapshot(t),n=this.maybeCreateAppStateSnapshot(r),i=!1,a=!1;return this.elements!==o&&(i=!0),this.appState!==n&&(a=!0),!i&&!a?this:new e(o,n,{didElementsChange:i,didAppStateChange:a})}maybeCreateAppStateSnapshot(t){if(!t)return this.appState;let r=k8(t)?t:Ql(t);return this.detectChangedAppState(r)?r:this.appState}detectChangedAppState(t){return!Je(this.appState,t,{selectedElementIds:Je,selectedGroupIds:Je})}maybeCreateElementsSnapshot(t){return t?this.detectChangedElements(t)?this.createElementsSnapshot(t):this.elements:this.elements}detectChangedElements(t){if(this.elements===t)return!1;if(this.elements.size!==t.size)return!0;let r=Array.from(t.keys());for(let o=r.length-1;o>=0;o--){let n=this.elements.get(r[o]),i=t.get(r[o]);if(!n||!i||n.id!==i.id||n.versionNonce!==i.versionNonce)return!0}return!1}createElementsSnapshot(t){let r=new Map;for(let[o,n]of this.elements.entries())t.get(o)?r.set(o,n):r.set(o,ie(n,{isDeleted:!0}));for(let[o,n]of t.entries()){let i=r.get(o);(!i||i&&i.versionNonce!==n.versionNonce)&&r.set(o,Mn(n))}return r}}});var Ln,L8,P8,D8,xx,R8,Ex,N8,O8,B8,yx,og,wx,$l,Pn,gm,hO,ng,vx,fs,ec=q(()=>{"use strict";f();Ze();V();G();hs();kn();lt();se();ga();Oe();Ln=new Map,L8=/^(?:http(?:s)?:\/\/)?(?:www\.)?youtu(?:be\.com|\.be)\/(embed\/|watch\?v=|shorts\/|playlist\?list=|embed\/videoseries\?list=)?([a-zA-Z0-9_-]+)(?:\?t=|&t=|\?start=|&start=)?([a-zA-Z0-9_-]+)?[^\s]*$/,P8=/^(?:http(?:s)?:\/\/)?(?:(?:w){3}\.)?(?:player\.)?vimeo\.com\/(?:video\/)?([^?\s]+)(?:\?.*)?$/,D8=/^https:\/\/(?:www\.)?figma\.com/,xx=/^https:\/\/gist\.github\.com\/([\w_-]+)\/([\w_-]+)/,R8=/^<script[\s\S]*?\ssrc=["'](https:\/\/gist\.github\.com\/.*?)\.js["']/i,Ex=/(?:https?:\/\/)?(?:(?:w){3}\.)?(?:twitter|x)\.com\/[^/]+\/status\/(\d+)/,N8=/^<blockquote[\s\S]*?\shref=["'](https?:\/\/(?:twitter|x)\.com\/[^"']*)/i,O8=/^https:\/\/(?:www\.)?val\.town\/(v|embed)\/[a-zA-Z_$][0-9a-zA-Z_$]+\.[a-zA-Z_$][0-9a-zA-Z_$]+/,B8=/^<(?:iframe|blockquote)[\s\S]*?\s(?:src|href)=["']([^"']*)["'][\s\S]*?>$/i,yx=/giphy.com\/(?:clips|embed|gifs)\/[a-zA-Z0-9]*?-?([a-zA-Z0-9]+)(?:[^a-zA-Z0-9]|$)/,og=new Set(["youtube.com","youtu.be","vimeo.com","player.vimeo.com","figma.com","link.excalidraw.com","gist.github.com","twitter.com","x.com","*.simplepdf.eu","stackblitz.com","val.town","giphy.com"]),wx=new Set(["youtube.com","youtu.be","vimeo.com","player.vimeo.com","figma.com","twitter.com","x.com","*.simplepdf.eu","stackblitz.com"]),$l=e=>`<html><body>${e}</body></html>`,Pn=e=>{if(!e)return null;if(Ln.has(e))return Ln.get(e);let t=e,r=wx.has(ng(e,wx)||""),o="generic",n={w:560,h:840},i=e.match(L8);if(i?.[2]){let c=i[3]?`&start=${i[3]}`:"",d=e.includes("shorts");switch(o="video",i[1]){case"embed/":case"watch?v=":case"shorts/":e=`https://www.youtube.com/embed/${i[2]}?enablejsapi=1${c}`;break;case"playlist?list=":case"embed/videoseries?list=":e=`https://www.youtube.com/embed/videoseries?list=${i[2]}&enablejsapi=1${c}`;break;default:e=`https://www.youtube.com/embed/${i[2]}?enablejsapi=1${c}`;break}return n=d?{w:315,h:560}:{w:560,h:315},Ln.set(t,{link:e,intrinsicSize:n,type:o,sandbox:{allowSameOrigin:r}}),{link:e,intrinsicSize:n,type:o,sandbox:{allowSameOrigin:r}}}let a=e.match(P8);if(a?.[1]){let c=a?.[1],d=/^\d+$/.test(c)?void 0:new URIError("Invalid embed link format");return o="video",e=`https://player.vimeo.com/video/${c}?api=1`,n={w:560,h:315},Ln.set(t,{link:e,intrinsicSize:n,type:o,sandbox:{allowSameOrigin:r}}),{link:e,intrinsicSize:n,type:o,error:d,sandbox:{allowSameOrigin:r}}}if(e.match(D8))return o="generic",e=`https://www.figma.com/embed?embed_host=share&url=${encodeURIComponent(e)}`,n={w:550,h:550},Ln.set(t,{link:e,intrinsicSize:n,type:o,sandbox:{allowSameOrigin:r}}),{link:e,intrinsicSize:n,type:o,sandbox:{allowSameOrigin:r}};let l=e.match(O8);if(l)return e=l[1]==="embed"?l[0]:l[0].replace("/v","/embed"),Ln.set(t,{link:e,intrinsicSize:n,type:o,sandbox:{allowSameOrigin:r}}),{link:e,intrinsicSize:n,type:o,sandbox:{allowSameOrigin:r}};if(Ex.test(e)){let c=e.match(Ex)[1],d=nm(`https://twitter.com/x/status/${c}`),m={type:"document",srcdoc:p=>$l(`<blockquote class="twitter-tweet" data-dnt="true" data-theme="${p}"><a href="${d}"></a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>`),intrinsicSize:{w:480,h:480},sandbox:{allowSameOrigin:r}};return Ln.set(t,m),m}if(xx.test(e)){let[,c,d]=e.match(xx),m=nm(`https://gist.github.com/${c}/${d}`),p={type:"document",srcdoc:()=>$l(`
          <script src="${m}.js"><\/script>
          <style type="text/css">
            * { margin: 0px; }
            table, .gist { height: 100%; }
            .gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }
          </style>
        `),intrinsicSize:{w:550,h:720},sandbox:{allowSameOrigin:r}};return Ln.set(e,p),p}return Ln.set(e,{link:e,intrinsicSize:n,type:o,sandbox:{allowSameOrigin:r}}),{link:e,intrinsicSize:n,type:o,sandbox:{allowSameOrigin:r}}},gm=e=>{let t;ro(e)?t="IFrame element":t=!e.link||e?.link===""?"Empty Web-Embed":e.link;let r=Math.max(Math.min(e.width/2,e.width/t.length),e.width/30),o=mt.Helvetica,n=Ve({fontSize:r,fontFamily:o});return Ht({x:e.x+e.width/2,y:e.y+e.height/2,strokeColor:e.strokeColor!=="transparent"?e.strokeColor:"black",backgroundColor:"transparent",fontFamily:o,fontSize:r,text:hi(t,n,e.width-20),textAlign:"center",verticalAlign:yt.MIDDLE,angle:e.angle??0})},hO=H({name:"setEmbeddableAsActiveTool",trackEvent:{category:"toolbar"},target:"Tool",label:"toolBar.embeddable",perform:(e,t,r,o)=>{let n=Qe(t,{type:"embeddable"});return Wr(o.canvas,{...t,activeTool:n}),{elements:e,appState:{...t,activeTool:Qe(t,{type:"embeddable"})},storeAction:D.NONE}}}),ng=(e,t)=>{try{let{hostname:r}=new URL(e),o=r.replace(/^www\./,"");if(t instanceof Set){if(og.has(o))return o;let i=o.replace(/^([^.]+)/,"*");return og.has(i)?i:null}let n=t.replace(/^www\./,"");if(o===n)return n}catch{}return null},vx=e=>{let t=e.match(N8);if(t&&t.length===2)return t[1];let r=e.match(R8);if(r&&r.length===2)return r[1];if(yx.test(e))return`https://giphy.com/embed/${yx.exec(e)[1]}`;let o=e.match(B8);return o&&o.length===2?o[1]:e},fs=(e,t)=>{if(!e)return!1;if(t!=null)if(typeof t=="function"){let r=t(e);if(typeof r=="boolean")return r}else{if(typeof t=="boolean")return t;if(t instanceof RegExp)return t.test(e);if(Array.isArray(t)){for(let r of t)if(r instanceof RegExp){if(e.match(r))return!0}else if(ng(e,r))return!0;return!1}}return!!ng(e,og)}});var tc,rc,fm,Cx,Tx=q(()=>{"use strict";f();V();ga();be();ec();Zt();lt();se();nr();zt();Zo();G();Cn();tc=(e,t,r)=>{if(typeof r>"u")return e.draw(t);let o={sets:t.sets,shape:t.shape,options:{...t.options,fixedDecimalPlaceDigits:r}};return e.draw(o)},rc=(e,t,r,o,n)=>{if(!o.enabled||!o.clip)return null;let i=_t(e,n);if(i){let a=t.ownerDocument.createElementNS(_e,"g");return a.setAttributeNS(_e,"clip-path",`url(#${i.id})`),r.forEach(s=>a.appendChild(s)),a}return null},fm=(e,t,r,o,n,i,a,s)=>{let l={x:i,y:a},[c,d,m,p]=re(e,t),u=(m-c)/2-(e.x-c),h=(p-d)/2-(e.y-d);if(U(e)){let v=pt(e,t);if(we(v)){let[A,L,S,k]=re(v,t),R=Z.getBoundTextElementPosition(v,e,t);u=(S-A)/2-(R.x-A),h=(k-L)/2-(R.y-L),i=i+R.x-e.x,a=a+R.y-e.y}}let x=180*e.angle/Math.PI,E=o;if(e.link){let v=o.ownerDocument.createElementNS(_e,"a");v.setAttribute("href",pr(e.link)),E.appendChild(v),E=v}let w=(v,A)=>{Br()&&v.setAttribute("data-id",A.id),E.appendChild(v)},y=(_t(e,t)?.opacity??100)*e.opacity/1e4;switch(e.type){case"selection":throw new Error("Selection rendering is not supported for SVG");case"rectangle":case"diamond":case"ellipse":{let v=Pe.generateElementShape(e,null),A=tc(r,v,Qa);y!==1&&(A.setAttribute("stroke-opacity",`${y}`),A.setAttribute("fill-opacity",`${y}`)),A.setAttribute("stroke-linecap","round"),A.setAttribute("transform",`translate(${i||0} ${a||0}) rotate(${x} ${u} ${h})`);let L=rc(e,E,[A],s.frameRendering,t);w(L||A,e);break}case"iframe":case"embeddable":{let v=Pe.generateElementShape(e,s),A=tc(r,v,Qa),L=e.opacity/100;L!==1&&(A.setAttribute("stroke-opacity",`${L}`),A.setAttribute("fill-opacity",`${L}`)),A.setAttribute("stroke-linecap","round"),A.setAttribute("transform",`translate(${i||0} ${a||0}) rotate(${x} ${u} ${h})`),w(A,e);let S=gm(e);fm(S,t,r,E,n,S.x+l.x-e.x,S.y+l.y-e.y,s);let k=tc(r,v,Qa);for(k.setAttribute("stroke-linecap","round"),k.setAttribute("transform",`translate(${i||0} ${a||0}) rotate(${x} ${u} ${h})`);k.firstChild;)k.removeChild(k.firstChild);let R=Mo(Math.min(e.width,e.height),e),_=Pn(am(e.link||""));if(s.renderEmbeddables===!1||_?.type==="document"){let M=o.ownerDocument.createElementNS(_e,"a");M.setAttribute("href",pr(e.link||"")),M.setAttribute("target","_blank"),M.setAttribute("rel","noopener noreferrer"),M.style.borderRadius=`${R}px`,k.appendChild(M)}else{let M=o.ownerDocument.createElementNS(_e,"foreignObject");M.style.width=`${e.width}px`,M.style.height=`${e.height}px`,M.style.border="none";let O=M.ownerDocument.createElementNS(_e,"div");O.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),O.style.width="100%",O.style.height="100%";let I=O.ownerDocument.createElement("iframe");I.src=_?.link??"",I.style.width="100%",I.style.height="100%",I.style.border="none",I.style.borderRadius=`${R}px`,I.style.top="0",I.style.left="0",I.allowFullscreen=!0,O.appendChild(I),M.appendChild(O),k.appendChild(M)}w(k,e);break}case"line":case"arrow":{let v=me(e,t),A=o.ownerDocument.createElementNS(_e,"mask");if(v){A.setAttribute("id",`mask-${e.id}`);let R=o.ownerDocument.createElementNS(_e,"rect");i=i||0,a=a||0,R.setAttribute("x","0"),R.setAttribute("y","0"),R.setAttribute("fill","#fff"),R.setAttribute("width",`${e.width+100+i}`),R.setAttribute("height",`${e.height+100+a}`),A.appendChild(R);let _=o.ownerDocument.createElementNS(_e,"rect"),M=Z.getBoundTextElementPosition(e,v,t),O=i+M.x-e.x,I=a+M.y-e.y;_.setAttribute("x",O.toString()),_.setAttribute("y",I.toString()),_.setAttribute("fill","#000"),_.setAttribute("width",`${v.width}`),_.setAttribute("height",`${v.height}`),_.setAttribute("opacity","1"),A.appendChild(_)}let L=o.ownerDocument.createElementNS(_e,"g");v&&L.setAttribute("mask",`url(#mask-${e.id})`),L.setAttribute("stroke-linecap","round"),Pe.generateElementShape(e,s).forEach(R=>{let _=tc(r,R,Qa);y!==1&&(_.setAttribute("stroke-opacity",`${y}`),_.setAttribute("fill-opacity",`${y}`)),_.setAttribute("transform",`translate(${i||0} ${a||0}) rotate(${x} ${u} ${h})`),e.type==="line"&&dr(e.points)&&e.backgroundColor!=="transparent"&&_.setAttribute("fill-rule","evenodd"),L.appendChild(_)});let k=rc(e,E,[L,A],s.frameRendering,t);k?(w(k,e),E.appendChild(k)):(w(L,e),E.append(A));break}case"freedraw":{let v=Pe.generateElementShape(e,s),A=v?tc(r,v,Qa):o.ownerDocument.createElementNS(_e,"g");y!==1&&(A.setAttribute("stroke-opacity",`${y}`),A.setAttribute("fill-opacity",`${y}`)),A.setAttribute("transform",`translate(${i||0} ${a||0}) rotate(${x} ${u} ${h})`),A.setAttribute("stroke","none");let L=o.ownerDocument.createElementNS(_e,"path");L.setAttribute("fill",e.strokeColor),L.setAttribute("d",bm(e)),A.appendChild(L);let S=rc(e,E,[A],s.frameRendering,t);w(S||A,e);break}case"image":{let v=Math.round(e.width),A=Math.round(e.height),L=lr(e)&&n[e.fileId];if(L){let S=`image-${L.id}`,k=o.querySelector(`#${S}`);if(!k){k=o.ownerDocument.createElementNS(_e,"symbol"),k.id=S;let O=o.ownerDocument.createElementNS(_e,"image");O.setAttribute("width","100%"),O.setAttribute("height","100%"),O.setAttribute("href",L.dataURL),k.appendChild(O),E.prepend(k)}let R=o.ownerDocument.createElementNS(_e,"use");if(R.setAttribute("href",`#${S}`),s.exportWithDarkMode&&L.mimeType!==te.svg&&R.setAttribute("filter",ig),R.setAttribute("width",`${v}`),R.setAttribute("height",`${A}`),R.setAttribute("opacity",`${y}`),e.scale[0]!==1||e.scale[1]!==1){let O=e.scale[0]!==1?-v:0,I=e.scale[1]!==1?-A:0;R.setAttribute("transform",`scale(${e.scale[0]}, ${e.scale[1]}) translate(${O} ${I})`)}let _=o.ownerDocument.createElementNS(_e,"g");if(_.appendChild(R),_.setAttribute("transform",`translate(${i||0} ${a||0}) rotate(${x} ${u} ${h})`),e.roundness){let O=o.ownerDocument.createElementNS(_e,"clipPath");O.id=`image-clipPath-${e.id}`;let I=o.ownerDocument.createElementNS(_e,"rect"),F=Mo(Math.min(e.width,e.height),e);I.setAttribute("width",`${e.width}`),I.setAttribute("height",`${e.height}`),I.setAttribute("rx",`${F}`),I.setAttribute("ry",`${F}`),O.appendChild(I),w(O,e),_.setAttributeNS(_e,"clip-path",`url(#${O.id})`)}let M=rc(e,E,[_],s.frameRendering,t);w(M||_,e)}break}case"frame":case"magicframe":{if(s.frameRendering.enabled&&s.frameRendering.outline){let v=document.createElementNS(_e,"rect");v.setAttribute("transform",`translate(${i||0} ${a||0}) rotate(${x} ${u} ${h})`),v.setAttribute("width",`${e.width}px`),v.setAttribute("height",`${e.height}px`),v.setAttribute("rx",qe.radius.toString()),v.setAttribute("ry",qe.radius.toString()),v.setAttribute("fill","none"),v.setAttribute("stroke",qe.strokeColor),v.setAttribute("stroke-width",qe.strokeWidth.toString()),w(v,e)}break}default:if(U(e)){let v=o.ownerDocument.createElementNS(_e,"g");y!==1&&(v.setAttribute("stroke-opacity",`${y}`),v.setAttribute("fill-opacity",`${y}`)),v.setAttribute("transform",`translate(${i||0} ${a||0}) rotate(${x} ${u} ${h})`);let A=e.text.replace(/\r\n?/g,`
`).split(`
`),L=ui(e.fontSize,e.lineHeight),S=e.textAlign==="center"?e.width/2:e.textAlign==="right"?e.width:0,k=qd(e.fontFamily,e.fontSize,L),R=Td(e.text)?"rtl":"ltr",_=e.textAlign==="center"?"middle":e.textAlign==="right"||R==="rtl"?"end":"start";for(let O=0;O<A.length;O++){let I=o.ownerDocument.createElementNS(_e,"text");I.textContent=A[O],I.setAttribute("x",`${S}`),I.setAttribute("y",`${O*L+k}`),I.setAttribute("font-family",$a(e)),I.setAttribute("font-size",`${e.fontSize}px`),I.setAttribute("fill",e.strokeColor),I.setAttribute("text-anchor",_),I.setAttribute("style","white-space: pre;"),I.setAttribute("direction",R),I.setAttribute("dominant-baseline","alphabetic"),v.appendChild(I)}let M=rc(e,E,[v],s.frameRendering,t);w(M||v,e)}else throw new Error(`Unimplemented type ${e.type}`)}},Cx=(e,t,r,o,n,i)=>{o&&(e.filter(a=>!Xt(a)).forEach(a=>{if(!a.isDeleted){if(U(a)&&a.containerId&&t.has(a.containerId))return;try{fm(a,t,r,o,n,a.x+i.offsetX,a.y+i.offsetY,i);let s=me(a,t);s&&fm(s,t,r,o,n,s.x+i.offsetX,s.y+i.offsetY,i)}catch(s){console.error(s)}}}),e.filter(a=>Xt(a)).forEach(a=>{if(!a.isDeleted)try{fm(a,t,r,o,n,a.x+i.offsetX,a.y+i.offsetY,i)}catch(s){console.error(s)}}))}});import{fileOpen as F8,fileSave as z8,supported as fi}from"browser-fs-access";var Ax,bs,xs,Dn=q(()=>{"use strict";f();V();oi();G();Ax=500,bs=e=>{let t=e.extensions?.reduce((o,n)=>(o.push(te[n]),o),[]),r=e.extensions?.reduce((o,n)=>n==="jpg"?o.concat(".jpg",".jpeg"):o.concat(`.${n}`),[]);return F8({description:e.description,extensions:r,mimeTypes:t,multiple:e.multiple??!1,legacySetup:(o,n,i)=>{let a=qi(n,Ax),s=()=>{l(),document.addEventListener("keyup",a),document.addEventListener("pointerup",a),a()},l=()=>{if(i.files?.length){let d=e.multiple?[...i.files]:i.files[0];o(d)}};requestAnimationFrame(()=>{window.addEventListener("focus",s)});let c=window.setInterval(()=>{l()},Ax);return d=>{clearInterval(c),a.cancel(),window.removeEventListener("focus",s),document.removeEventListener("keyup",a),document.removeEventListener("pointerup",a),d&&(console.warn("Opening the file was canceled (legacy-fs)."),d(new Xo))}}})},xs=(e,t)=>z8(e,{fileName:`${t.name}.${t.extension}`,description:t.description,extensions:[`.${t.extension}`]},t.fileHandle)});var H8,_8,Sx,Es,G8,U8,W8,Y8,oc,V8,Ix,kx,bi,Mx,fa,ys=q(()=>{"use strict";f();be();se();So();V();Ar();Zt();Ge();G();G();lt();ga();no();H8={selection:!0,text:!0,rectangle:!0,diamond:!0,ellipse:!0,line:!0,image:!0,arrow:!0,freedraw:!0,eraser:!1,custom:!0,frame:!0,embeddable:!0,hand:!0,laser:!1,magicframe:!1},_8=e=>Object.keys(mt).includes(e)?mt[e]:Kt,Sx=e=>e?{...e,focus:e.focus||0}:null,Es=(e,t)=>{let r={type:t.type||e.type,version:e.version||1,versionNonce:e.versionNonce??0,index:e.index??null,isDeleted:e.isDeleted??!1,id:e.id||Rt(),fillStyle:e.fillStyle||rt.fillStyle,strokeWidth:e.strokeWidth||rt.strokeWidth,strokeStyle:e.strokeStyle??rt.strokeStyle,roughness:e.roughness??rt.roughness,opacity:e.opacity==null?rt.opacity:e.opacity,angle:e.angle||0,x:t.x??e.x??0,y:t.y??e.y??0,strokeColor:e.strokeColor||rt.strokeColor,backgroundColor:e.backgroundColor||rt.backgroundColor,width:e.width||0,height:e.height||0,seed:e.seed??1,groupIds:e.groupIds??[],frameId:e.frameId??null,roundness:e.roundness?e.roundness:e.strokeSharpness==="round"?{type:Ko(e.type)?at.LEGACY:at.PROPORTIONAL_RADIUS}:null,boundElements:e.boundElementIds?e.boundElementIds.map(o=>({type:"arrow",id:o})):e.boundElements??[],updated:e.updated??wn(),link:e.link?pr(e.link):null,locked:e.locked??!1};return("customData"in e||"customData"in t)&&(r.customData="customData"in t?t.customData:e.customData),{...r,...nc(r),...t}},G8=e=>{switch(e.type){case"text":let t=e.fontSize,r=e.fontFamily;if("font"in e){let[i,a]=e.font.split(" ");t=parseFloat(i),r=_8(a)}let o=typeof e.text=="string"&&e.text||"",n=e.lineHeight||(e.height?Vb(e):_r(e.fontFamily));return e=Es(e,{fontSize:t,fontFamily:r,text:o,textAlign:e.textAlign||Qn,verticalAlign:e.verticalAlign||Xi,containerId:e.containerId??null,originalText:e.originalText||o,lineHeight:n}),!o&&!e.isDeleted&&(e={...e,originalText:o,isDeleted:!0},e=gi(e)),e;case"freedraw":return Es(e,{points:e.points,lastCommittedPoint:null,simulatePressure:e.simulatePressure,pressures:e.pressures});case"image":return Es(e,{status:e.status||"pending",fileId:e.fileId,scale:e.scale||[1,1]});case"line":case"draw":case"arrow":{let{startArrowhead:i=null,endArrowhead:a=e.type==="arrow"?"arrow":null}=e,s=e.x,l=e.y,c=!Array.isArray(e.points)||e.points.length<2?[[0,0],[e.width,e.height]]:e.points;return(c[0][0]!==0||c[0][1]!==0)&&({points:c,x:s,y:l}=Z.getNormalizedPoints(e)),Es(e,{type:e.type==="draw"?"line":e.type,startBinding:Sx(e.startBinding),endBinding:Sx(e.endBinding),lastCommittedPoint:null,startArrowhead:i,endArrowhead:a,points:c,x:s,y:l})}case"ellipse":case"rectangle":case"diamond":case"iframe":case"embeddable":return Es(e,{});case"magicframe":case"frame":return Es(e,{name:e.name??null})}return null},U8=(e,t)=>{if(e.boundElements){let r=e.boundElements.slice(),o=new Set;e.boundElements=r.reduce((n,i)=>{let a=t.get(i.id);if(a&&!o.has(i.id)){if(o.add(i.id),a.isDeleted)return n;n.push(i),U(a)&&!a.containerId&&(a.containerId=e.id)}return n},[])}},W8=(e,t)=>{let r=e.containerId?t.get(e.containerId):null;if(!r){e.containerId=null;return}if(!e.isDeleted&&r.boundElements&&!r.boundElements.find(o=>o.id===e.id)){let o=(r.boundElements||(r.boundElements=[])).slice();o.push({type:"text",id:e.id}),r.boundElements=o}},Y8=(e,t)=>{e.frameId&&(t.get(e.frameId)||(e.frameId=null))},oc=(e,t,r)=>{let o=new Set,n=t?X(t):null,i=cr((e||[]).reduce((s,l)=>{if(l.type!=="selection"&&!so(l)){let c=G8(l);if(c){let d=n?.get(l.id);d&&d.version>c.version&&(c=gi(c,d.version)),o.has(c.id)&&(c={...c,id:Rt()}),o.add(c.id),s.push(c)}}return s},[]));if(!r?.repairBindings)return i;let a=X(i);for(let s of i)s.frameId&&Y8(s,a),U(s)&&s.containerId?W8(s,a):s.boundElements&&U8(s,a),r.refreshDimensions&&U(s)&&Object.assign(s,gs(s,pt(s,a),a));return i},V8=(e,t,r)=>{let o=t[e];return o!==void 0?o:r[e]},Ix={isSidebarDocked:(e,t)=>["defaultSidebarDockedPreference",e.isSidebarDocked??V8("defaultSidebarDockedPreference",e,t)]},kx=(e,t)=>{e=e||{};let r=jt(),o={};for(let n of Object.keys(Ix))if(n in e){let[i,a]=Ix[n](e,r);o[i]=a}for(let[n,i]of Object.entries(r)){let a=e[n],s=t?t[n]:void 0;o[n]=a!==void 0?a:s!==void 0?s:i}return{...o,cursorButton:t?.cursorButton||"up",penDetected:t?.penDetected??(e.penMode?e.penDetected??!1:!1),activeTool:{...Qe(r,o.activeTool.type&&H8[o.activeTool.type]?o.activeTool:{type:"selection"}),lastActiveTool:null,locked:o.activeTool.locked??!1},zoom:typeof e.zoom=="number"?{value:e.zoom}:e.zoom?.value?e.zoom:r.zoom,openSidebar:typeof e.openSidebar=="string"?{name:Or.name}:o.openSidebar}},bi=(e,t,r,o)=>({elements:oc(e?.elements,r,o),appState:kx(e?.appState,t||null),files:e?.files||{}}),Mx=e=>{let t=oc(Ee(e.elements),null);return t.length?{...e,elements:t}:null},fa=(e=[],t)=>{let r=[];for(let o of e)if(Array.isArray(o)){let n=Mx({status:t,elements:o,id:Rt(),created:Date.now()});n&&r.push(n)}else{let n=o,i=Mx({...n,id:n.id||Rt(),status:n.status||t,created:n.created||Date.now()});i&&r.push(i)}return r}});var Lx=q(()=>{"use strict";f();V();Sr()});import{deflate as K8,inflate as X8}from"pako";var ag,Px,Dx,Rx,Nx,sg,lg,Ox=q(()=>{"use strict";f();Lx();ag=e=>new Promise((t,r)=>{let o=typeof e=="string"?new Blob([new TextEncoder().encode(e)]):new Blob([e instanceof Uint8Array?e:new Uint8Array(e)]),n=new FileReader;n.onload=i=>{if(!i.target||typeof i.target.result!="string")return r(new Error("couldn't convert to byte string"));t(i.target.result)},n.readAsBinaryString(o)}),Px=e=>{let t=new ArrayBuffer(e.length),r=new Uint8Array(t);for(let o=0,n=e.length;o<n;o++)r[o]=e.charCodeAt(o);return t},Dx=e=>new TextDecoder("utf-8").decode(Px(e)),Rx=async(e,t=!1)=>t?window.btoa(e):window.btoa(await ag(e)),Nx=async(e,t=!1)=>t?window.atob(e):Dx(window.atob(e)),sg=async({text:e,compress:t})=>{let r;if(t!==!1)try{r=await ag(K8(e))}catch(o){console.error("encode: cannot deflate",o)}return{version:"1",encoding:"bstring",compressed:!!r,encoded:r||await ag(e)}},lg=async e=>{let t;switch(e.encoding){case"bstring":t=e.compressed?e.encoded:await Dx(e.encoded);break;default:throw new Error(`decode: unknown encoding "${e.encoding}"`)}return e.compressed?X8(new Uint8Array(Px(t)),{to:"string"}):t}});var ic={};Qu(ic,{decodePngMetadata:()=>j8,decodeSvgMetadata:()=>Q8,encodePngMetadata:()=>cg,encodeSvgMetadata:()=>q8,getTEXtChunk:()=>zx});import Bx from"png-chunks-extract";import Fx from"png-chunk-text";import Z8 from"png-chunks-encode";var zx,cg,j8,q8,Q8,ws=q(()=>{"use strict";f();Ox();V();Sr();zx=async e=>{let r=Bx(new Uint8Array(await Rn(e))).find(o=>o.name==="tEXt");return r?Fx.decode(r.data):null},cg=async({blob:e,metadata:t})=>{let r=Bx(new Uint8Array(await Rn(e))),o=Fx.encode(te.excalidraw,JSON.stringify(await sg({text:t,compress:!0})));return r.splice(-1,0,o),new Blob([Z8(r)],{type:te.png})},j8=async e=>{let t=await zx(e);if(t?.keyword===te.excalidraw)try{let r=JSON.parse(t.text);if(!("encoded"in r)){if("type"in r&&r.type===er.excalidraw)return t.text;throw new Error("FAILED")}return await lg(r)}catch(r){throw console.error(r),new Error("FAILED")}throw new Error("INVALID")},q8=async({text:e})=>{let t=await Rx(JSON.stringify(await sg({text:e})),!0),r="";return r+=`<!-- payload-type:${te.excalidraw} -->`,r+="<!-- payload-version:2 -->",r+="<!-- payload-start -->",r+=t,r+="<!-- payload-end -->",r},Q8=async({svg:e})=>{if(e.includes(`payload-type:${te.excalidraw}`)){let t=e.match(/<!-- payload-start -->\s*(.+?)\s*<!-- payload-end -->/);if(!t)throw new Error("INVALID");let n=(e.match(/<!-- payload-version:(\d+) -->/)?.[1]||"1")!=="1";try{let i=await Nx(t[1],n),a=JSON.parse(i);if(!("encoded"in a)){if("type"in a&&a.type===er.excalidraw)return i;throw new Error("FAILED")}return await lg(a)}catch(i){throw console.error(i),new Error("FAILED")}}throw new Error("INVALID")}});import{nanoid as J8}from"nanoid";var _x,dg,Gx,vs,xi,Em,Cs,mg,pg,Nn,Ux,ym,Wx,ac,ug,Yx,Vx,$8,Hx,xm,sc,Rn,Sr=q(()=>{"use strict";f();Ar();V();be();oi();Xe();G();Dn();On();ys();_x=async e=>{let t;if(e.type===te.png)try{return await(await Promise.resolve().then(()=>(ws(),ic))).decodePngMetadata(e)}catch(r){throw r.message==="INVALID"?new Io("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):new Io("Error: cannot restore image")}else if("text"in Blob?t=await e.text():t=await new Promise(r=>{let o=new FileReader;o.readAsText(e,"utf8"),o.onloadend=()=>{o.readyState===FileReader.DONE&&r(o.result)}}),e.type===te.svg)try{return await(await Promise.resolve().then(()=>(ws(),ic))).decodeSvgMetadata({svg:t})}catch(r){throw r.message==="INVALID"?new Io("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):new Io("Error: cannot restore image")}return t},dg=e=>e&&e.name.match(/\.(json|excalidraw|png|svg)$/)?.[1]||null,Gx=e=>e==="png"||e==="svg",vs=e=>{let t=dg(e);return t==="png"||t==="svg"},xi=e=>{let{type:t}=e||{};return!!t&&Object.values(El).includes(t)},Em=async(e,t,r,o)=>{let n=await _x(e),i;try{try{i=JSON.parse(n)}catch(a){throw xi(e)?new Io("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):a}if(Kx(i))return{type:te.excalidraw,data:bi({elements:wm(i.elements||[]),appState:{theme:t?.theme,fileHandle:o||e.handle||null,...tm(i.appState||{}),...t?$o(i.elements||[],t):{}},files:i.files},t,r,{repairBindings:!0,refreshDimensions:!1})};if(hg(i))return{type:te.excalidrawlib,data:i};throw new Error("Error: invalid file")}catch(a){throw a instanceof Io?a:new Error("Error: invalid file")}},Cs=async(e,t,r,o)=>{let n=await Em(e,t,r,o);if(n.type!==te.excalidraw)throw new Error("Error: invalid file");return n.data},mg=(e,t="unpublished")=>{let r=JSON.parse(e);if(!hg(r))throw new Error("Invalid library");let o=r.libraryItems||r.library;return fa(o,t)},pg=async(e,t="unpublished")=>mg(await _x(e),t),Nn=async e=>new Promise(async(t,r)=>{try{Wo(e)&&(e=await e),e.toBlob(o=>{if(!o)return r(new Ld("Error: Canvas too big","CANVAS_POSSIBLY_TOO_BIG"));t(o)})}catch(o){r(o)}}),Ux=async e=>{try{let t=await window.crypto.subtle.digest("SHA-1",await Rn(e));return H0(new Uint8Array(t))}catch(t){return console.error(t),J8(40)}},ym=async e=>new Promise((t,r)=>{let o=new FileReader;o.onload=()=>{let n=o.result;t(n)},o.onerror=n=>r(n),o.readAsDataURL(e)}),Wx=(e,t="")=>{let r=e.indexOf(","),o=atob(e.slice(r+1)),n=e.slice(0,r).split(":")[1].split(";")[0],i=new ArrayBuffer(o.length),a=new Uint8Array(i);for(let s=0;s<o.length;s++)a[s]=o.charCodeAt(s);return new File([i],t,{type:n})},ac=async(e,t)=>{if(e.type===te.svg)return e;let[r,o]=await Promise.all([import("pica").then(i=>i.default),import("image-blob-reduce").then(i=>i.default)]),n=o({pica:r({features:["js","wasm"]})});if(t.outputType){let{outputType:i}=t;n._create_blob=function(a){return this.pica.toBlob(a.out_canvas,i,.8).then(s=>(a.out_blob=s,a))}}if(!xi(e))throw new Error("Error: unsupported file type",{cause:"UNSUPPORTED"});return new File([await n.toBlob(e,{max:t.maxWidthOrHeight})],e.name,{type:t.outputType||e.type})},ug=(e,t="")=>new File([new TextEncoder().encode(e)],t,{type:te.svg}),Yx=async(e,t="")=>{let r;try{r=await fetch(e)}catch{throw new Error("Error: failed to fetch image",{cause:"FETCH_ERROR"})}if(!r.ok)throw new Error("Error: failed to fetch image",{cause:"FETCH_ERROR"});let o=await r.blob();if(o.type&&xi(o)){let n=t||o.name||"";return new File([o],n,{type:o.type})}throw new Error("Error: unsupported file type",{cause:"UNSUPPORTED"})},Vx=async e=>{let t=e.dataTransfer.files.item(0),r=await $8(e);return{file:t?await sc(t):null,fileHandle:r}},$8=async e=>{if(fi)try{return await e.dataTransfer.items[0].getAsFileSystemHandle()||null}catch(t){return console.warn(t.name,t.message),null}return null},Hx=e=>{let t=null,r=`${[...new Uint8Array(e).slice(0,8)].join(" ")} `,o={png:"137 80 78 71 13 10 26 10 ",jpg:"255 216 255 ",gif:"71 73 70 56 57 97 "};return r===o.png?t=te.png:r.startsWith(o.jpg)?t=te.jpg:r.startsWith(o.gif)&&(t=te.gif),t},xm=(e,t,r)=>new File([e],r||"",{type:t}),sc=async e=>{if(e.type){if(xi(e)){let t=await Rn(e),r=Hx(t);r&&r!==e.type&&(e=xm(t,r,e.name))}}else if(e?.name?.endsWith(".excalidrawlib"))e=xm(await Rn(e),te.excalidrawlib,e.name);else if(e?.name?.endsWith(".excalidraw"))e=xm(await Rn(e),te.excalidraw,e.name);else{let t=await Rn(e),r=Hx(t);r&&(e=xm(t,r,e.name))}return e},Rn=e=>"arrayBuffer"in e?e.arrayBuffer():new Promise((t,r)=>{let o=new FileReader;o.onload=n=>{if(!n.target?.result)return r(new Error("Couldn't convert blob to ArrayBuffer"));t(n.target.result)},o.readAsArrayBuffer(e)})});var eC,Ei,vm,gg,Kx,hg,Cm,Xx,On=q(()=>{"use strict";f();Dn();Ar();V();be();Sr();eC=(e,t)=>{let r={};for(let o of e)!o.isDeleted&&"fileId"in o&&o.fileId&&t[o.fileId]&&(r[o.fileId]=t[o.fileId]);return r},Ei=(e,t,r,o)=>{let n={type:er.excalidraw,version:ji.excalidraw,source:yl,elements:o==="local"?wm(e):Zx(e),appState:o==="local"?tm(t):rx(t),files:o==="local"?eC(e,r):void 0};return JSON.stringify(n,null,2)},vm=async(e,t,r,o=t.name||wd)=>{let n=Ei(e,t,r,"local"),i=new Blob([n],{type:te.excalidraw});return{fileHandle:await xs(i,{name:o,extension:"excalidraw",description:"Excalidraw file",fileHandle:vs(t.fileHandle)?null:t.fileHandle})}},gg=async(e,t)=>{let r=await bs({description:"Excalidraw files"});return Cs(await sc(r),e,t,r.handle)},Kx=e=>e?.type===er.excalidraw&&(!e.elements||Array.isArray(e.elements)&&(!e.appState||typeof e.appState=="object")),hg=e=>typeof e=="object"&&e&&e.type===er.excalidrawLibrary&&(e.version===1||e.version===2),Cm=e=>{let t={type:er.excalidrawLibrary,version:ji.excalidrawLibrary,source:yl,libraryItems:e};return JSON.stringify(t,null,2)},Xx=async e=>{let t=Cm(e);await xs(new Blob([t],{type:te.excalidrawlib}),{name:"library",extension:"excalidrawlib",description:"Excalidraw library file"})}});var fg,Tm,Am,tC,jx,bg=q(()=>{"use strict";f();V();se();fg=e=>new Promise((t,r)=>{let o=new Image;o.onload=()=>{t(o)},o.onerror=n=>{r(n)},o.src=e}),Tm=async({fileIds:e,files:t,imageCache:r})=>{let o=new Map,n=new Map;return await Promise.all(e.reduce((i,a)=>{let s=t[a];return s&&!o.has(a)?(o.set(a,!0),i.concat((async()=>{try{if(s.mimeType===te.binary)throw new Error("Only images can be added to ImageCache");let l=fg(s.dataURL),c={image:l,mimeType:s.mimeType};r.set(a,c);let d=await l;r.set(a,{...c,image:d})}catch{n.set(a,!0)}})())):i},[])),{imageCache:r,updatedFiles:o,erroredFiles:n}},Am=e=>e.filter(t=>lr(t)),tC=e=>e?.nodeName.toLowerCase()==="svg",jx=async e=>{let t=new DOMParser().parseFromString(e,te.svg),r=t.querySelector("svg");if(t.querySelector("parsererror")||!tC(r))throw new Error("Invalid SVG");if(r.hasAttribute("xmlns")||r.setAttribute("xmlns",_e),!r.hasAttribute("width")||!r.hasAttribute("height")){let n=r.getAttribute("viewBox"),i=r.getAttribute("width")||"50",a=r.getAttribute("height")||"50";if(n){let s=n.match(/\d+ +\d+ +(\d+) +(\d+)/);s&&([,i,a]=s)}r.setAttribute("width",i),r.setAttribute("height",a)}return r.outerHTML}});import{pointsOnBezierCurves as rC}from"points-on-curve";var Sm,qx,Qx,Jx,$x,oC,eE,tE,xg=q(()=>{"use strict";f();be();Hd();Sm=e=>{let{angle:t,width:r,height:o,x:n,y:i}=e,a=jo(t),s=n+r/2,l=i+o/2,c=[s,l],d=[];return e.type==="diamond"?d=[xt([s,i],a,c),xt([n+r,l],a,c),xt([s,i+o],a,c),xt([n,l],a,c)]:d=[xt([n,i],a,c),xt([n+r,i],a,c),xt([n+r,i+o],a,c),xt([n,i+o],a,c)],{type:"polygon",data:d}},qx=(e,t,r=10)=>{let[o,n,i,a,s,l]=re(e,t,!0);o-=r,i+=r,n-=r,a+=r;let c=jo(e.angle),d=[s,l],m=xt([o,n],c,d),p=xt([i,n],c,d),u=xt([o,a],c,d),h=xt([i,a],c,d);return{type:"polygon",data:[m,p,h,u]}},Qx=e=>{let{width:t,height:r,angle:o,x:n,y:i}=e;return{type:"ellipse",data:{center:[n+t/2,i+r/2],angle:o,halfWidth:t/2,halfHeight:r/2}}},Jx=e=>{for(let t of e.sets)if(t.type==="path")return t.ops;return e.sets[0].ops},$x=(e,t=[0,0],r,o)=>{let n=l=>xt([l[0]+t[0],l[1]+t[1]],jo(r),o),i=Jx(e),a=[],s=[0,0];for(let l of i)if(l.op==="move"&&(s=n(l.data)),l.op==="bcurveTo"){let c=n([l.data[0],l.data[1]]),d=n([l.data[2],l.data[3]]),m=n([l.data[4],l.data[5]]);a.push([s,c,d,m]),s=m}return{type:"polycurve",data:a}},oC=e=>{let t=e[0],r=[];for(let o=1;o<e.length;o++){let n=e[o];r.push([t,n]),t=n}return r},eE=(e,t,r=!1)=>{let o=jo(e.angle),n=a=>xt(Rh(a,[e.x,e.y]),o,t),i=oC(e.points.map(a=>n(a)));return r?{type:"polygon",data:as(i.flat())}:{type:"polyline",data:i}},tE=(e,t,r=[0,0],o,n)=>{let i=d=>xt([d[0]+r[0],d[1]+r[1]],jo(o),n);if(e.roundness===null)return{type:"polygon",data:as(e.points.map(d=>i(d)))};let a=Jx(t),s=[],l=!1;for(let d of a)d.op==="move"?(l=!l,l&&s.push([d.data[0],d.data[1]])):d.op==="bcurveTo"?l&&(s.push([d.data[0],d.data[1]]),s.push([d.data[2],d.data[3]]),s.push([d.data[4],d.data[5]])):d.op==="lineTo"&&l&&s.push([d.data[0],d.data[1]]);return{type:"polygon",data:rC(s,10,5).map(d=>i(d))}}});var Im,ba,lc,rE,oE,Mm=q(()=>{"use strict";f();zt();st();xg();_d();G();se();Im=e=>{if(e.type==="arrow")return!1;let t=!sr(e.backgroundColor)||tr(e)||Xt(e)||U(e);return e.type==="line"?t&&dr(e.points):e.type==="freedraw"?t&&dr(e.points):t||to(e)},ba=({x:e,y:t,element:r,shape:o,threshold:n=10,frameNameBound:i=null})=>{let a=Im(r)?ss([e,t],o)||zl([e,t],o,n):zl([e,t],o,n);return!a&&i&&(a=ss([e,t],{type:"polygon",data:Sm(i).data})),a},lc=(e,t,r,o,n=0)=>{let[i,a,s,l]=Gr(r,o);return i-=n,a-=n,s+=n,l+=n,Nd([i,a],[e,t],[s,l])},rE=(e,t)=>!ba(e)&&lc(e.x,e.y,e.element,t),oE=(e,t,r)=>r&&ss([e,t],r)});var Eg,cc,yg,km,Lm=q(()=>{"use strict";f();V();st();Mm();zt();Cn();Eg=document.createElement("img");Eg.src=`data:${te.svg}, ${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#1971c2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>')}`;cc=([e,t,r,o],n,i)=>{let a=nE,s=a/i.zoom.value,l=a/i.zoom.value,c=a/i.zoom.value,d=(e+r)/2,m=(t+o)/2,p=(a-8)/(2*i.zoom.value),u=4/i.zoom.value,h=r+u-p,x=t-u-c+p,[E,w]=ye(h+s/2,x+l/2,d,m,n);return[E-s/2,w-l/2,s,l]},yg=(e,t,r,[o,n])=>{let i=4/r.zoom.value,[a,s,l,c]=re(e,t),[d,m,p,u]=cc([a,s,l,c],e.angle,r);return o>d-i&&o<d+i+p&&n>m-i&&n<m+u+i},km=(e,t,r,[o,n],i)=>!e.link||r.selectedElementIds[e.id]?!1:!i&&r.viewModeEnabled&&lc(o,n,e,t)?!0:yg(e,t,r,[o,n])});var dc,Pm,Dm,wg=q(()=>{"use strict";f();V();dc=(e,t,r,o,n=!0)=>{e.beginPath(),e.arc(t,r,o,0,Math.PI*2),e.fill(),n&&e.stroke()},Pm=(e,t)=>[e.width/t,e.height/t],Dm=({canvas:e,scale:t,normalizedWidth:r,normalizedHeight:o,theme:n,isExporting:i,viewBackgroundColor:a})=>{let s=e.getContext("2d");return s.setTransform(1,0,0,1,0,0),s.scale(t,t),i&&n===ae.DARK&&(s.filter=qa),typeof a=="string"?((a==="transparent"||a.length===5||a.length===9||/(hsla|rgba)\(/.test(a))&&s.clearRect(0,0,r,o),s.save(),s.fillStyle=a,s.fillRect(0,0,r,o),s.restore()):s.clearRect(0,0,r,o),s}});var nC,iE,Bn,aE,sE,vg,Nm,Om=q(()=>{"use strict";f();V();be();nr();se();Cn();ec();Lm();wg();G();lt();nC=(e,t,r,o,n,i,a)=>{let l;(E=>(E.Bold="#cccccc",E.Regular="#e5e5e5"))(l||={});let c=-Math.round(n.value/t)*t+r%t,d=-Math.round(n.value/t)*t+o%t,m=Math.min(1/n.value,1),p=1/n.value,u=[m*3,p+(m+p)];e.save(),e.lineWidth=m;for(let h=c;h<c+i+t*2;h+=t){let x=Math.round(h-r)%(5*t)===0;e.beginPath(),e.setLineDash(x?[]:u),e.strokeStyle=x?"#cccccc":"#e5e5e5",e.moveTo(h,d-t),e.lineTo(h,d+a+t*2),e.stroke()}for(let h=d;h<d+a+t*2;h+=t){let x=Math.round(h-o)%(5*t)===0;e.beginPath(),e.setLineDash(x?[]:u),e.strokeStyle=x?"#cccccc":"#e5e5e5",e.moveTo(c-t,h),e.lineTo(c+i+t*2,h),e.stroke()}e.restore()},iE=(e,t,r,o)=>{t.translate(e.x+o.scrollX,e.y+o.scrollY),t.beginPath(),t.roundRect?t.roundRect(0,0,e.width,e.height,qe.radius/o.zoom.value):t.rect(0,0,e.width,e.height),t.clip(),t.translate(-(e.x+o.scrollX),-(e.y+o.scrollY))},aE=(e,t,r,o)=>{if(e.link&&!r.selectedElementIds[e.id]){let[n,i,a,s]=re(e,o),[l,c,d,m]=cc([n,i,a,s],e.angle,r),p=l+d/2,u=c+m/2;if(t.save(),t.translate(r.scrollX+p,r.scrollY+u),t.rotate(e.angle),!Bn||Bn.zoom!==r.zoom.value){Bn=document.createElement("canvas"),Bn.zoom=r.zoom.value,Bn.width=d*window.devicePixelRatio*r.zoom.value,Bn.height=m*window.devicePixelRatio*r.zoom.value;let h=Bn.getContext("2d");h.scale(window.devicePixelRatio*r.zoom.value,window.devicePixelRatio*r.zoom.value),h.fillStyle="#fff",h.fillRect(0,0,d,m),h.drawImage(Eg,0,0,d,m),h.restore(),t.drawImage(Bn,l-p,c-u,d,m)}else t.drawImage(Bn,l-p,c-u,d,m);t.restore()}},sE=({canvas:e,rc:t,elementsMap:r,allElementsMap:o,visibleElements:n,scale:i,appState:a,renderConfig:s})=>{if(e===null)return;let{renderGrid:l=!0,isExporting:c}=s,[d,m]=Pm(e,i),p=Dm({canvas:e,scale:i,normalizedWidth:d,normalizedHeight:m,theme:a.theme,isExporting:c,viewBackgroundColor:a.viewBackgroundColor});p.scale(a.zoom.value,a.zoom.value),l&&a.gridSize&&nC(p,a.gridSize,a.scrollX,a.scrollY,a.zoom,d/a.zoom.value,m/a.zoom.value);let u=new Set;n.forEach(h=>{h.groupIds.length>0&&a.frameToHighlight&&a.selectedElementIds[h.id]&&(en(h,a.frameToHighlight,r)||h.groupIds.find(x=>u.has(x)))&&h.groupIds.forEach(x=>u.add(x))}),n.filter(h=>!Xt(h)).forEach(h=>{try{let x=h.frameId||a.frameToHighlight?.id;if(U(h)&&h.containerId&&r.has(h.containerId))return;if(p.save(),x&&a.frameRendering.enabled&&a.frameRendering.clip){let w=Rm(h,r,a);w&&xa(h,r,a)&&iE(w,p,s,a),Ts(h,r,o,t,p,s,a)}else Ts(h,r,o,t,p,s,a);let E=me(h,r);E&&Ts(E,r,o,t,p,s,a),p.restore(),c||aE(h,p,a,r)}catch(x){console.error(x)}}),n.filter(h=>Xt(h)).forEach(h=>{try{let x=()=>{if(Ts(h,r,o,t,p,s,a),Xt(h)&&(c||At(h)&&s.embedsValidationStatus.get(h.id)!==!0)&&h.width&&h.height){let w=gm(h);Ts(w,r,o,t,p,s,a)}c||aE(h,p,a,r)};if((h.frameId||a.frameToHighlight?.id)&&a.frameRendering.enabled&&a.frameRendering.clip){p.save();let w=Rm(h,r,a);w&&xa(h,r,a)&&iE(w,p,s,a),x(),p.restore()}else x()}catch(x){console.error(x)}})},vg=es(e=>{sE(e)},{trailing:!0}),Nm=(e,t)=>{if(t){vg(e);return}sE(e)}});import lE from"roughjs/bin/rough";var iC,aC,sC,cE,dE,Bm,As,Cg,mE,mc=q(()=>{"use strict";f();st();Tx();G();V();Ar();On();bg();nr();be();Ge();se();no();Om();iC="<!-- svg-source:excalidraw -->",aC=(e,t)=>{if(e.width<=t)return e;let o=document.createElement("canvas").getContext("2d");o.font=Ve({fontFamily:e.fontFamily,fontSize:e.fontSize});let n=e.text;if(o.measureText(n).width>t)for(let a=n.length;a>0;a--){let s=`${n.slice(0,a)}...`;if(o.measureText(s).width<=t){n=s;break}}return ie(e,{text:n,width:t})},sC=(e,t)=>{let r=[],o=0,n=0;for(let i of e){if(ee(i)){ri(i)?o++:n++;let a=Ht({x:i.x,y:i.y-qe.nameOffsetY,fontFamily:mt.Assistant,fontSize:qe.nameFontSize,lineHeight:qe.nameLineHeight,strokeColor:t.exportWithDarkMode?qe.nameColorDarkTheme:qe.nameColorLightTheme,text:Fm(i,ri(i)?o:n)});a.y-=a.height,a=aC(a,i.width),r.push(a)}r.push(i)}return r},cE=(e,t)=>(t=t||jt().frameRendering,{enabled:e?!0:t.enabled,outline:e?!1:t.outline,name:e?!1:t.name,clip:e?!0:t.clip}),dE=({elements:e,exportingFrame:t,frameRendering:r,exportWithDarkMode:o})=>{let n;return t?n=Ss(e,t):r.enabled&&r.name?n=sC(e,{exportWithDarkMode:o}):n=e,n},Bm=async(e,t,r,{exportBackground:o,exportPadding:n=Co,viewBackgroundColor:i,exportingFrame:a},s=(l,c)=>{let d=document.createElement("canvas");return d.width=l*t.exportScale,d.height=c*t.exportScale,{canvas:d,scale:t.exportScale}})=>{let l=cE(a??null,t.frameRendering??null),c=dE({elements:e,exportingFrame:a,exportWithDarkMode:t.exportWithDarkMode,frameRendering:l});a&&(n=0);let[d,m,p,u]=Cg(a?[a]:Tg(c),n),{canvas:h,scale:x=1}=s(p,u),E=jt(),{imageCache:w}=await Tm({imageCache:new Map,fileIds:Am(c).map(y=>y.fileId),files:r});return Nm({canvas:h,rc:lE.canvas(h),elementsMap:Fr(X(c)),allElementsMap:Fr(X(cr(e))),visibleElements:c,scale:x,appState:{...t,frameRendering:l,viewBackgroundColor:o?i:null,scrollX:-d+n,scrollY:-m+n,zoom:E.zoom,shouldCacheIgnoreZoom:!1,theme:t.exportWithDarkMode?ae.DARK:ae.LIGHT},renderConfig:{canvasBackgroundColor:i,imageCache:w,renderGrid:!1,isExporting:!0,embedsValidationStatus:new Map,elementsPendingErasure:new Set}}),h},As=async(e,t,r,o)=>{let n=cE(o?.exportingFrame??null,t.frameRendering??null),{exportPadding:i=Co,exportWithDarkMode:a=!1,viewBackgroundColor:s,exportScale:l=1,exportEmbedScene:c}=t,{exportingFrame:d=null}=o||{},m=dE({elements:e,exportingFrame:d,exportWithDarkMode:a,frameRendering:n});d&&(i=0);let p="";if(c)try{p=await(await Promise.resolve().then(()=>(ws(),ic))).encodeSvgMetadata({text:Ei(e,t,r||{},"local")})}catch(M){console.error(M)}let[u,h,x,E]=Cg(d?[d]:Tg(m),i),w=document.createElementNS(_e,"svg");w.setAttribute("version","1.1"),w.setAttribute("xmlns",_e),w.setAttribute("viewBox",`0 0 ${x} ${E}`),w.setAttribute("width",`${x*l}`),w.setAttribute("height",`${E*l}`),a&&w.setAttribute("filter",qa);let y="https://excalidraw.com/";C.VITE_IS_EXCALIDRAW_NPM_PACKAGE&&(y=window.EXCALIDRAW_ASSET_PATH||`https://unpkg.com/${C.VITE_PKG_NAME}@${C.PKG_VERSION}`,y?.startsWith("/")&&(y=y.replace("/",`${window.location.origin}/`)),y=`${y}/dist/excalidraw-assets/`);let v=-u+i,A=-h+i,L=pc(e),S="",k=X(e);for(let M of L){let[O,I,F,Q]=re(M,k),j=(F-O)/2-(M.x-O),oe=(Q-I)/2-(M.y-I);S+=`<clipPath id=${M.id}>
            <rect transform="translate(${M.x+v} ${M.y+A}) rotate(${M.angle} ${j} ${oe})"
          width="${M.width}"
          height="${M.height}"
          >
          </rect>
        </clipPath>`}if(w.innerHTML=`
  ${iC}
  ${p}
  <defs>
    <style class="style-fonts">
      @font-face {
        font-family: "Virgil";
        src: url("${y}Virgil.woff2");
      }
      @font-face {
        font-family: "Cascadia";
        src: url("${y}Cascadia.woff2");
      }
      @font-face {
        font-family: "Assistant";
        src: url("${y}Assistant-Regular.woff2");
      }
    </style>
    ${S}
  </defs>
  `,t.exportBackground&&s){let M=w.ownerDocument.createElementNS(_e,"rect");M.setAttribute("x","0"),M.setAttribute("y","0"),M.setAttribute("width",`${x}`),M.setAttribute("height",`${E}`),M.setAttribute("fill",s),w.appendChild(M)}let R=lE.svg(w),_=o?.renderEmbeddables??!1;return Cx(m,Fr(X(m)),R,w,r||{},{offsetX:v,offsetY:A,isExporting:!0,exportWithDarkMode:a,renderEmbeddables:_,frameRendering:n,canvasBackgroundColor:s,embedsValidationStatus:_?new Map(m.filter(M=>ee(M)).map(M=>[M.id,!0])):new Map}),w},Cg=(e,t)=>{let[r,o,n,i]=Te(e),a=Pt(r,n)+t*2,s=Pt(o,i)+t*2;return[r,o,a,s]},mE=(e,t,r)=>{let[,,o,n]=Cg(e,t).map(i=>Math.trunc(i*r));return[o,n]}});var No,$e,yi,uE,Ea,Is,uc,Ag,pE,lC,hE,zm,lo,gE,cC,dC,mC,fE,pC,uC,bE,Sg=q(()=>{"use strict";f();$t();V();be();So();No=32,$e=12,yi=256,uE=50,Ea="NOT_SPREADSHEET",Is="VALID_SPREADSHEET",uc=e=>{let t=/^([-+]?)[$€£¥₩]?([-+]?)([\d.,]+)[%]?$/.exec(e);return t?parseFloat(`${(t[1]||t[2])+t[3]}`.replace(/,/g,"")):null},Ag=(e,t)=>e.slice(1).every(r=>uc(r[t])!==null),pE=e=>{let t=e[0].length;if(t>2)return{type:Ea,reason:"More than 2 columns"};if(t===1){if(!Ag(e,0))return{type:Ea,reason:"Value is not numeric"};let l=uc(e[0][0])===null,c=(l?e.slice(1):e).map(d=>uc(d[0]));return c.length<2?{type:Ea,reason:"Less than two rows"}:{type:Is,spreadsheet:{title:l?e[0][0]:null,labels:null,values:c}}}let r=Ag(e,0),o=Ag(e,1);if(!r&&!o)return{type:Ea,reason:"Value is not numeric"};let[n,i]=o?[0,1]:[1,0],a=uc(e[0][i])===null,s=a?e.slice(1):e;return s.length<2?{type:Ea,reason:"Less than 2 rows"}:{type:Is,spreadsheet:{title:a?e[0][i]:null,labels:s.map(l=>l[n]),values:s.map(l=>uc(l[i]))}}},lC=e=>{let t=[];for(let r=0;r<e[0].length;r++){let o=[];for(let n=0;n<e.length;n++)o.push(e[n][r]);t.push(o)}return t},hE=e=>{let t=e.trim().split(`
`).map(i=>i.trim().split("	"));if(t.length&&t[0].length!==2&&(t=e.trim().split(`
`).map(i=>i.trim().split(","))),t.length===0)return{type:Ea,reason:"No values"};let r=t[0].length;if(!t.every(i=>i.length===r))return{type:Ea,reason:"All rows don't have same number of columns"};let n=pE(t);if(n.type!==Is){let i=pE(lC(t));if(i.type===Is)return i}return n},zm=o0($2),lo={fillStyle:"hachure",fontFamily:Kt,fontSize:Lt,opacity:100,roughness:1,strokeColor:de.black,roundness:null,strokeStyle:"solid",strokeWidth:1,verticalAlign:yt.MIDDLE,locked:!1},gE=e=>{let t=(No+$e)*e.values.length+$e,r=yi+$e*2;return{chartWidth:t,chartHeight:r}},cC=(e,t,r,o,n)=>e.labels?.map((i,a)=>Ht({groupIds:[o],backgroundColor:n,...lo,text:i.length>8?`${i.slice(0,5)}...`:i,x:t+a*(No+$e)+$e*2,y:r+$e/2,width:No,angle:5.87,fontSize:16,textAlign:"center",verticalAlign:"top"}))||[],dC=(e,t,r,o,n)=>{let i=Ht({groupIds:[o],backgroundColor:n,...lo,x:t-$e,y:r-$e,text:"0",textAlign:"right"}),a=Ht({groupIds:[o],backgroundColor:n,...lo,x:t-$e,y:r-yi-i.height/2,text:Math.max(...e.values).toLocaleString(),textAlign:"right"});return[i,a]},mC=(e,t,r,o,n)=>{let{chartWidth:i,chartHeight:a}=gE(e),s=ao({backgroundColor:n,groupIds:[o],...lo,type:"line",x:t,y:r,startArrowhead:null,endArrowhead:null,width:i,points:[[0,0],[i,0]]}),l=ao({backgroundColor:n,groupIds:[o],...lo,type:"line",x:t,y:r,startArrowhead:null,endArrowhead:null,height:a,points:[[0,0],[0,-a]]}),c=ao({backgroundColor:n,groupIds:[o],...lo,type:"line",x:t,y:r-yi-$e,startArrowhead:null,endArrowhead:null,strokeStyle:"dotted",width:i,opacity:uE,points:[[0,0],[i,0]]});return[s,l,c]},fE=(e,t,r,o,n,i)=>{let{chartWidth:a,chartHeight:s}=gE(e),l=e.title?Ht({backgroundColor:n,groupIds:[o],...lo,text:e.title,x:t+a/2,y:r-yi-$e*2-Lt,roundness:null,textAlign:"center"}):null,c=i?Yr({backgroundColor:n,groupIds:[o],...lo,type:"rectangle",x:t,y:r-s,width:a,height:s,strokeColor:de.black,fillStyle:"solid",opacity:6}):null;return[...c?[c]:[],...l?[l]:[],...cC(e,t,r,o,n),...dC(e,t,r,o,n),...mC(e,t,r,o,n)]},pC=(e,t,r)=>{let o=Math.max(...e.values),n=Rt(),i=zm[Math.floor(Math.random()*zm.length)];return[...e.values.map((s,l)=>{let c=s/o*yi;return Yr({backgroundColor:i,groupIds:[n],...lo,type:"rectangle",x:t+l*(No+$e)+$e,y:r-c-$e,width:No,height:c})}),...fE(e,t,r,n,i,C.DEV)]},uC=(e,t,r)=>{let o=Math.max(...e.values),n=Rt(),i=zm[Math.floor(Math.random()*zm.length)],a=0,s=[];for(let x of e.values){let E=a*(No+$e),w=-(x/o)*yi;s.push([E,w]),a++}let l=Math.max(...s.map(x=>x[0])),c=Math.max(...s.map(x=>x[1])),d=Math.min(...s.map(x=>x[0])),m=Math.min(...s.map(x=>x[1])),p=ao({backgroundColor:i,groupIds:[n],...lo,type:"line",x:t+$e+No/2,y:r-$e,startArrowhead:null,endArrowhead:null,height:c-m,width:l-d,strokeWidth:2,points:s}),u=e.values.map((x,E)=>{let w=E*(No+$e)+$e/2,y=-(x/o)*yi+$e/2;return Yr({backgroundColor:i,groupIds:[n],...lo,fillStyle:"solid",strokeWidth:2,type:"ellipse",x:t+w+No/2,y:r+y-$e*2,width:$e,height:$e})}),h=e.values.map((x,E)=>{let w=E*(No+$e)+$e/2,y=x/o*yi+$e/2+$e;return ao({backgroundColor:i,groupIds:[n],...lo,type:"line",x:t+w+No/2+$e/2,y:r-y,startArrowhead:null,endArrowhead:null,height:y,strokeStyle:"dotted",opacity:uE,points:[[0,0],[0,y]]})});return[...fE(e,t,r,n,i,C.DEV),p,...h,...u]},bE=(e,t,r,o)=>e==="line"?uC(t,r,o):pC(t,r,o)});function EE(e){let t=[];for(let r of e.childNodes)if(r.nodeType===3){let o=r.textContent?.trim();o&&t.push({type:"text",value:o})}else if(r instanceof HTMLImageElement){let o=r.getAttribute("src");o&&o.startsWith("http")&&t.push({type:"imageUrl",value:o})}else t=t.concat(EE(r));return t}var tz,Hm,Ms,hC,xE,gC,_m,fC,bC,yE,xC,Gm,Um,Fn,EC,wi=q(()=>{"use strict";f();Sg();V();se();kn();Ge();nr();G();tz="clipboard"in navigator&&"readText"in navigator.clipboard,Hm="clipboard"in navigator&&"writeText"in navigator.clipboard,Ms="clipboard"in navigator&&"write"in navigator.clipboard&&"ClipboardItem"in window&&"toBlob"in HTMLCanvasElement.prototype,hC=e=>!!([er.excalidraw,er.excalidrawClipboard,er.excalidrawClipboardWithAPI].includes(e?.type)&&Array.isArray(e.elements)),xE=({types:e,files:t})=>{!e&&!t&&console.warn("createPasteEvent: no types or files provided");let r=new ClipboardEvent("paste",{clipboardData:new DataTransfer});if(e)for(let[o,n]of Object.entries(e))try{if(r.clipboardData?.setData(o,n),r.clipboardData?.getData(o)!==n)throw new Error(`Failed to set "${o}" as clipboardData item`)}catch(i){throw new Error(i.message)}if(t){let o=-1;for(let n of t){o++;try{if(r.clipboardData?.items.add(n),r.clipboardData?.files[o]!==n)throw new Error(`Failed to set file "${n.name}" as clipboardData item`)}catch(i){throw new Error(i.message)}}}return r},gC=({elements:e,files:t})=>{let r=X(e),o=new Set(e.filter(s=>ee(s))),n=!1,i=e.reduce((s,l)=>(lr(l)&&(n=!0,t&&t[l.fileId]&&(s[l.fileId]=t[l.fileId])),s),{});n&&!t&&console.warn("copyToClipboard: attempting to file element(s) without providing associated `files` object.");let a={type:er.excalidrawClipboard,elements:e.map(s=>{if(_t(s,r)&&!o.has(_t(s,r))){let l=Mn(s);return z(l,{frameId:null}),l}return s}),files:t?i:void 0};return JSON.stringify(a)},_m=async(e,t,r)=>{await Fn(gC({elements:e,files:t}),r)},fC=e=>{let t=hE(e);return t.type===Is?{spreadsheet:t.spreadsheet}:null};bC=e=>{let t=e.clipboardData?.getData("text/html");if(!t)return null;try{let r=new DOMParser().parseFromString(t,"text/html"),o=EE(r.body);if(o.length)return{type:"mixedContent",value:o}}catch(r){console.error(`error in parseHTMLFromPaste: ${r.message}`)}return null},yE=async()=>{let e={};try{if(navigator.clipboard?.readText)return{"text/plain":await navigator.clipboard?.readText()}}catch(r){if(navigator.clipboard?.read)console.warn(`navigator.clipboard.readText() failed (${r.message}). Failling back to navigator.clipboard.read()`);else throw r}let t;try{t=await navigator.clipboard?.read()}catch(r){if(r.name==="DataError")return console.warn(`navigator.clipboard.read() error, clipboard is probably empty: ${r.message}`),e;throw r}for(let r of t)for(let o of r.types)if(Tl(p0,o))try{e[o]=await(await r.getType(o)).text()}catch(n){console.warn(`Cannot retrieve ${o} from clipboardItem: ${n.message}`)}return Object.keys(e).length===0&&console.warn("No clipboard data found from clipboard.read()."),e},xC=async(e,t=!1)=>{try{let r=!t&&e&&bC(e);return r?r.value.every(n=>n.type==="text")?{type:"text",value:e.clipboardData?.getData("text/plain")||r.value.map(n=>n.value).join(`
`).trim()}:r:{type:"text",value:(e.clipboardData?.getData("text/plain")||"").trim()}}catch{return{type:"text",value:""}}},Gm=async(e,t=!1)=>{let r=await xC(e,t);if(r.type==="mixedContent")return{mixedContent:r.value};try{let o=!t&&fC(r.value);if(o)return o}catch(o){console.error(o)}try{let o=JSON.parse(r.value),n=o.type===er.excalidrawClipboardWithAPI;if(hC(o))return{elements:o.elements,files:o.files,text:t?JSON.stringify(o.elements,null,2):void 0,programmaticAPI:n}}catch{}return{text:r.value}},Um=async e=>{try{await navigator.clipboard.write([new window.ClipboardItem({[te.png]:e})])}catch(t){if(Wo(e))await navigator.clipboard.write([new window.ClipboardItem({[te.png]:await e})]);else throw t}},Fn=async(e,t)=>{if(Hm)try{await navigator.clipboard.writeText(e||"");return}catch(r){console.error(r)}try{if(t){if(t.clipboardData?.setData("text/plain",e||""),t.clipboardData?.getData("text/plain")!==e)throw new Error("Failed to setData on clipboardEvent");return}}catch(r){console.error(r)}if(!EC(e))throw new Error("Error copying to clipboard.")},EC=e=>{e||(e=" ");let t=document.documentElement.getAttribute("dir")==="rtl",r=document.createElement("textarea");r.style.border="0",r.style.padding="0",r.style.margin="0",r.style.position="absolute",r.style[t?"right":"left"]="-9999px";let o=window.pageYOffset||document.documentElement.scrollTop;r.style.top=`${o}px`,r.style.fontSize="12pt",r.setAttribute("readonly",""),r.value=e,document.body.appendChild(r);let n=!1;try{r.select(),r.setSelectionRange(0,r.value.length),n=document.execCommand("copy")}catch(i){console.error(i)}return r.remove(),n}});var vi,Wm,ks,yC,ya=q(()=>{"use strict";f();mc();Ar();ys();V();ws();On();wi();vi=({elements:e,appState:t,files:r,maxWidthOrHeight:o,getDimensions:n,exportPadding:i,exportingFrame:a})=>{let{elements:s,appState:l}=bi({elements:e,appState:t},null,null),{exportBackground:c,viewBackgroundColor:d}=l;return Bm(s,{...l,offsetTop:0,offsetLeft:0,width:0,height:0},r||{},{exportBackground:c,exportPadding:i,viewBackgroundColor:d,exportingFrame:a},(m,p)=>{let u=document.createElement("canvas");if(o){typeof n=="function"&&console.warn("`getDimensions()` is ignored when `maxWidthOrHeight` is supplied.");let x=Math.max(m,p),E=o<x?o/x:t?.exportScale??1;return u.width=m*E,u.height=p*E,{canvas:u,scale:E}}let h=n?.(m,p)||{width:m,height:p};return u.width=h.width,u.height=h.height,{canvas:u,scale:h.scale??1}})},Wm=async e=>{let{mimeType:t=te.png,quality:r}=e;t===te.png&&typeof r=="number"&&console.warn(`"quality" will be ignored for "${te.png}" mimeType`),t==="image/jpg"&&(t=te.jpg),t===te.jpg&&!e.appState?.exportBackground&&(console.warn(`Defaulting "exportBackground" to "true" for "${te.jpg}" mimeType`),e={...e,appState:{...e.appState,exportBackground:!0}});let o=await vi(e);return r=r||(/image\/jpe?g/.test(t)?.92:.8),new Promise((n,i)=>{o.toBlob(async a=>{if(!a)return i(new Error("couldn't export to blob"));a&&t===te.png&&e.appState?.exportEmbedScene&&(a=await cg({blob:a,metadata:Ei(e.elements,e.appState,e.files||{},"local")})),n(a)},t,r)})},ks=async({elements:e,appState:t=jt(),files:r={},exportPadding:o,renderEmbeddables:n,exportingFrame:i})=>{let{elements:a,appState:s}=bi({elements:e,appState:t},null,null),l={...s,exportPadding:o};return As(a,l,r,{exportingFrame:i,renderEmbeddables:n})},yC=async e=>{if(e.type==="svg"){let t=await ks(e);await Fn(t.outerHTML)}else if(e.type==="png")await Um(Wm(e));else if(e.type==="json")await _m(e.elements,e.files);else throw new Error("Invalid export type")}});var wC,vC,wE,vE,Ig,CE,Mg,kg=q(()=>{"use strict";f();se();zt();st();G();wC=e=>e.type==="diamond"?[[e.width/2,0],[e.width,e.height/2],[e.width/2,e.height],[0,e.height/2]]:[[0,0],[0+e.width,0],[0+e.width,e.height],[0,e.height]],vC=e=>ne(e)||Dt(e)?e.points:wC(e),wE=e=>{let t=e.reduce((r,[o,n])=>(r.minY=Math.min(r.minY,n),r.minX=Math.min(r.minX,o),r.maxX=Math.max(r.maxX,o),r.maxY=Math.max(r.maxY,n),r),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,cx:0,cy:0});return t.cx=(t.maxX+t.minX)/2,t.cy=(t.maxY+t.minY)/2,t},vE=e=>{let t=vC(e),{cx:r,cy:o}=wE(t),n=[r,o],i=t.map(d=>Ue([d[0],d[1]],n,e.angle)),{minX:a,minY:s,maxX:l,maxY:c}=wE(i);return[a+e.x,s+e.y,l+e.x,c+e.y]},Ig=(e,t,r=!1)=>{let o=vE(e),n=t[0]<=o[0]&&t[2]>=o[2]&&t[1]<=o[1]&&t[3]>=o[3];return r?n?!0:o[0]<=t[0]&&o[2]>=t[2]&&o[1]<=t[1]&&o[3]>=t[3]:n},CE=(e,t)=>{let r=vE(e);return(Nl(r[0],t[0],t[2])||Nl(t[0],r[0],r[2]))&&(Nl(r[1],t[1],t[3])||Nl(t[1],r[1],r[3]))},Mg=({elements:e,bounds:t,type:r,errorMargin:o=0})=>{Il(t)&&(t=Gr(t,X(e)));let n=[t[0]-o,t[1]-o,t[2]+o,t[3]+o],i=new Set;for(let a of e){if(i.has(a.id))continue;if(r==="overlap"?CE(a,n):r==="inside"?Ig(a,n):Ig(a,n,!0)){if(i.add(a.id),a.boundElements)for(let l of a.boundElements)i.add(l.id);U(a)&&a.containerId&&i.add(a.containerId),we(a)&&(a.startBinding&&i.add(a.startBinding.elementId),a.endBinding&&i.add(a.endBinding?.elementId))}}return e.filter(a=>i.has(a.id))}});function TE(e){return[Math.min(e[0][0],e[1][0]),Math.min(e[0][1],e[1][1]),Math.max(e[0][0],e[1][0]),Math.max(e[0][1],e[1][1])]}function IE(e,t){return e[0]*t[1]-t[0]*e[1]}function CC(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function Ym(e,t){return[e[0]-t[0],e[1]-t[1]]}function AE(e,t){let r=Ym(e[1],e[0]),o=Ym(t,e[0]),n=IE(r,o);return Math.abs(n)<TC}function Lg(e,t){let r=Ym(e[1],e[0]),o=Ym(t,e[0]);return IE(r,o)<0}function SE(e,t){return AE(e,t[0])||AE(e,t[1])||(Lg(e,t[0])?!Lg(e,t[1]):Lg(e,t[1]))}function ME(e,t){return CC(TE(e),TE(t))&&SE(e,t)&&SE(t,e)}var TC,kE=q(()=>{"use strict";f();TC=1e-6});var LE=q(()=>{"use strict";f();ya();kg();kE()});function PE(e,t,r){let o=Zh(t,r),n=Zh(e,r);return o.some(a=>n.some(s=>ME(a,s)))}var Vm,DE,RE,NE,en,Pg,OE,Vr,pc,Tg,Ls,BE,_t,FE,hc,Ps,Dg,Km,tn,Xm,Rm,xa,Fm,Ss,nr=q(()=>{"use strict";f();be();zt();lt();G();Ge();Xe();mr();st();LE();se();Vm=(e,t,r)=>{let o=X(e);for(let n of t)if(n.frameId){let i=r.get(n.id),a=r.get(n.frameId);if(i){let s=o.get(i);s&&z(s,{frameId:a??n.frameId},!1)}}};DE=(e,t,r)=>Xm(Ds(e,t,r,!1)).filter(o=>!ee(o)&&!o.frameId||o.frameId===t.id),RE=(e,t,r,o)=>Ds(e,t,o).some(n=>n.id===r.id),NE=(e,t,r)=>{let[o,n,i,a]=re(t,r),[s,l,c,d]=Te(e);return o<=s&&n<=l&&i>=c&&a>=d},en=(e,t,r)=>NE([e],t,r)||PE(e,t,r)||RE([t],e,t,r),Pg=(e,t,r)=>{let[o,n,i,a]=re(t,r);return Nd([o,n],[e.x,e.y],[i,a])},OE=e=>{let t=new Map;for(let r of e){let o=ee(r)?r.id:r.frameId;o&&!t.has(o)&&t.set(o,Vr(e,o))}return t},Vr=(e,t)=>{let r=[];for(let o of e.values())o.frameId===t&&r.push(o);return r},pc=e=>e.filter(t=>ee(t)),Tg=e=>{let t=X(pc(e));return e.filter(r=>t.has(r.id)||!r.frameId||!t.has(r.frameId))},Ls=(e,t,r,o)=>{let n=Vr(e,t.id),i=new Set(n),a=new Set([...DE(e,t,o),...n.filter(p=>RE(e,p,t,o))]),s=n.filter(p=>!a.has(p)),l=new Set(Array.from(a).flatMap(p=>p.groupIds));for(let p of s)if(!PE(p,t,o))p.groupIds.length===0&&i.delete(p);else if(p.groupIds.length>0)for(let u of p.groupIds)l.add(u);for(let p of s)if(p.groupIds.length>0){let u=!0;for(let h of p.groupIds)l.has(h)&&(u=!1);u&&i.delete(p)}let c=Array.from(a).filter(p=>p.groupIds.length===0);for(let p of c)i.add(p);let d=Array.from(a).filter(p=>p.groupIds.length>0),m=om(d,r);for(let[p,u]of Object.entries(m))if(u){let h=tt(e,p);if(NE(h,t,o))for(let x of h)i.add(x)}return[...i].filter(p=>!(U(p)&&p.containerId))},BE=(e,t,r)=>Xm(e,DE(e,t,r)),_t=(e,t)=>e.frameId&&t.get(e.frameId)||null,FE=(e,t)=>{let r=new Set,o=X(e);e=Xm(e);for(let a of e)ee(a)&&a.id!==t.id&&r.add(a.id);let n=new Set,i=[];for(let a of e)if(!(ee(a)||a.frameId&&r.has(a.frameId)))if(a.groupIds.length){let s=a.groupIds.at(-1);if(!n.has(s)){n.add(s);let l=tt(e,s);if(l.some(c=>en(c,t,o)))for(let c of l)i.push(c)}}else en(a,t,o)&&i.push(a);return i},hc=(e,t,r)=>{let o=X(e),n=new Map;for(let l of e.values())l.frameId===r.id&&n.set(l.id,!0);let i=new Set(t.map(l=>l.id)),a=[],s=new Set;for(let l of t)ee(l)&&l.id!==r.id&&s.add(l.id);for(let l of Xm(e,t)){if(ee(l)||l.frameId&&s.has(l.frameId))continue;n.has(l.id)||a.push(l);let c=me(l,o);c&&!i.has(c.id)&&!n.has(c.id)&&a.push(c)}for(let l of a)z(l,{frameId:r.id},!1);return e},Ps=(e,t)=>{let r=new Map,o=new Map;for(let n of e)if(n.frameId){r.set(n.id,n);let i=o.get(n.frameId)||[];i.push(n);let a=me(n,t);a&&(r.set(a.id,a),i.push(a)),o.set(n.frameId,i)}for(let[,n]of r)z(n,{frameId:null},!1)},Dg=(e,t)=>{let r=Vr(e,t.id);return Ps(r,X(e)),e},Km=(e,t,r,o)=>hc(Dg(e,r),t,r).slice(),tn=(e,t,r)=>{let o=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,elements:e}),n=new Set(o);if(t.editingGroupId)for(let s of o)s.groupIds.length===0?n.add(s):s.groupIds.flatMap(l=>tt(e,l)).forEach(l=>n.add(l));let i=new Set,a=X(e);return n.forEach(s=>{s.frameId&&!ee(s)&&!xa(s,a,t)&&i.add(s)}),i.size>0&&Ps(i,a),e},Xm=(e,t)=>{let r=new Set,o=t||e;for(let a of o.values()){let s=a.groupIds[a.groupIds.length-1];s&&r.add(s)}let n=new Set;for(let a of r)tt(e,a).some(s=>ee(s))&&n.add(a);let i=[];for(let a of o.values())n.has(a.groupIds[a.groupIds.length-1])||i.push(a);return i},Rm=(e,t,r)=>{let o=U(e)&&pt(e,t)||e;return r.selectedElementIds[o.id]&&r.selectedElementsAreBeingDragged?r.frameToHighlight:_t(o,t)},xa=(e,t,r)=>{let o=Rm(e,t,r),n=U(e)&&pt(e,t)||e;if(o){if(!r.selectedElementIds[e.id]||!r.selectedElementsAreBeingDragged)return!0;if(n.groupIds.length===0)return en(n,o,t);let i=new Set(n.groupIds.flatMap(a=>tt(t,a)));if(r.editingGroupId&&r.selectedElementsAreBeingDragged){let a=new Set(ue(t,r));if(r.frameToHighlight!==null)return!0;a.forEach(l=>{i.delete(l)})}for(let a of i)if(ee(a))return!1;for(let a of i)if(en(a,o,t))return!0}return!1},Fm=(e,t)=>e.name===null?ri(e)?`Frame ${t}`:`AI Frame $${t}`:e.name,Ss=(e,t)=>Mg({elements:e,bounds:t,type:"overlap"}).filter(r=>!r.frameId||r.frameId===t.id)});import GE from"roughjs/bin/rough";import{getStroke as AC}from"perfect-freehand";function sb(e){let t=bm(e),r=new Path2D(t);return XE.set(e,r),r}function LC(e){return XE.get(e)}function bm(e){let t=e.simulatePressure?e.points:e.points.length?e.points.map(([o,n],i)=>[o,n,e.pressures[i]]):[[0,0,.5]],r={simulatePressure:e.simulatePressure,size:e.strokeWidth*4.25,thinning:.6,smoothing:.5,streamline:.5,easing:o=>Math.sin(o*Math.PI/2),last:!!e.lastCommittedPoint};return DC(AC(t,r))}function _E(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}function DC(e){if(!e.length)return"";let t=e.length-1;return e.reduce((r,o,n,i)=>(n===t?r.push(o,_E(o,i[0]),"L",i[0],"Z"):r.push(o,_E(o,i[n+1])),r),["M",e[0],"Q"]).join(" ").replace(PC,"$1")}var ig,SC,UE,WE,qm,Rg,IC,MC,nE,YE,VE,kC,Zm,jm,zE,HE,KE,Ts,XE,PC,Cn=q(()=>{"use strict";f();se();st();G();zt();Ar();V();lt();Zt();nr();Zo();ig="invert(100%) hue-rotate(180deg) saturate(1.25)",SC=jt(),UE=(e,t)=>lr(e)&&!t.imageCache.has(e.fileId),WE=(e,t,r)=>r.theme===ae.DARK&&lr(e)&&!UE(e,t)&&t.imageCache.get(e.fileId)?.mimeType!==te.svg,qm=e=>e.type==="freedraw"?e.strokeWidth*12:20,Rg=(e,t,r)=>{let o=(t?.opacity??100)*e.opacity/1e4;return(r.has(e.id)||t&&r.has(t.id))&&(o*=S0/100),o},IC=(e,t,r)=>{let i=qm(e),[a,s,l,c]=re(e,t),d=ne(e)||Dt(e)?Pt(a,l):e.width,m=ne(e)||Dt(e)?Pt(s,c):e.height,p=d*window.devicePixelRatio+i*2,u=m*window.devicePixelRatio+i*2,h=r.value;return(p*h>32767||u*h>32767)&&(h=Math.min(32767/p,32767/u)),p*u*h*h>16777216&&(h=Math.sqrt(16777216/(p*u))),p=Math.floor(p*h),u=Math.floor(u*h),{width:p,height:u,scale:h}},MC=(e,t,r,o,n)=>{let i=document.createElement("canvas"),a=i.getContext("2d"),s=qm(e),{width:l,height:c,scale:d}=IC(e,t,r);i.width=l,i.height=c;let m=0,p=0;if(ne(e)||Dt(e)){let[h,x]=re(e,t);m=e.x>h?Pt(e.x,h)*window.devicePixelRatio*d:0,p=e.y>x?Pt(e.y,x)*window.devicePixelRatio*d:0,a.translate(m,p)}a.save(),a.translate(s*d,s*d),a.scale(window.devicePixelRatio*d,window.devicePixelRatio*d);let u=GE.canvas(i);return WE(e,o,n)&&(a.filter=ig),Zm(e,u,a,o,n),a.restore(),{element:e,canvas:i,theme:n.theme,scale:d,zoomValue:r.value,canvasOffsetX:m,canvasOffsetY:p,boundTextElementVersion:me(e,t)?.version||null,containingFrameOpacity:_t(e,t)?.opacity||100}},nE=14,YE=document.createElement("img");YE.src=`data:${te.svg},${encodeURIComponent('<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="image" class="svg-inline--fa fa-image fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#888" d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"></path></svg>')}`;VE=document.createElement("img");VE.src=`data:${te.svg},${encodeURIComponent('<svg viewBox="0 0 668 668" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2"><path d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48ZM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56ZM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.81709 0 0 .81709 124.825 145.825)"/><path d="M256 8C119.034 8 8 119.033 8 256c0 136.967 111.034 248 248 248s248-111.034 248-248S392.967 8 256 8Zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676ZM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.30366 0 0 .30366 506.822 60.065)"/></svg>')}`;kC=(e,t,r)=>{t.fillStyle="#E7E7E7",t.fillRect(0,0,e.width,e.height);let o=Math.min(e.width,e.height),n=Math.min(o,Math.min(o*.4,100));t.drawImage(e.status==="error"?VE:YE,e.width/2-n/2,e.height/2-n/2,n,n)},Zm=(e,t,r,o,n)=>{switch(e.type){case"rectangle":case"iframe":case"embeddable":case"diamond":case"ellipse":{r.lineJoin="round",r.lineCap="round",t.draw(Pe.get(e));break}case"arrow":case"line":{r.lineJoin="round",r.lineCap="round",Pe.get(e).forEach(i=>{t.draw(i)});break}case"freedraw":{r.save(),r.fillStyle=e.strokeColor;let i=LC(e),a=Pe.get(e);a&&t.draw(a),r.fillStyle=e.strokeColor,r.fill(i),r.restore();break}case"image":{let i=lr(e)?o.imageCache.get(e.fileId)?.image:void 0;i!=null&&!(i instanceof Promise)?(e.roundness&&r.roundRect&&(r.beginPath(),r.roundRect(0,0,e.width,e.height,Mo(Math.min(e.width,e.height),e)),r.clip()),r.drawImage(i,0,0,e.width,e.height)):kC(e,r,n.zoom.value);break}default:if(U(e)){let i=Td(e.text),a=i&&!r.canvas.isConnected;a&&document.body.appendChild(r.canvas),r.canvas.setAttribute("dir",i?"rtl":"ltr"),r.save(),r.font=Ve(e),r.fillStyle=e.strokeColor,r.textAlign=e.textAlign;let s=e.text.replace(/\r\n?/g,`
`).split(`
`),l=e.textAlign==="center"?e.width/2:e.textAlign==="right"?e.width:0,c=ui(e.fontSize,e.lineHeight),d=qd(e.fontFamily,e.fontSize,c);for(let m=0;m<s.length;m++)r.fillText(s[m],l,m*c+d);r.restore(),a&&r.canvas.remove()}else throw new Error(`Unimplemented type ${e.type}`)}},jm=new WeakMap,zE=(e,t,r,o)=>{let n=r?o.zoom:SC.zoom,i=jm.get(e),a=i&&i.zoomValue!==n.value&&!o?.shouldCacheIgnoreZoom,s=me(e,t)?.version||null,l=_t(e,t)?.opacity||100;if(!i||a||i.theme!==o.theme||i.boundTextElementVersion!==s||i.containingFrameOpacity!==l){let c=MC(e,t,n,r,o);return jm.set(e,c),c}return i},HE=(e,t,r,o,n)=>{let i=e.element,a=qm(i),s=e.scale,[l,c,d,m]=re(i,n);Dt(i)&&(l=Math.floor(l),d=Math.ceil(d),c=Math.floor(c),m=Math.ceil(m));let p=((l+d)/2+o.scrollX)*window.devicePixelRatio,u=((c+m)/2+o.scrollY)*window.devicePixelRatio;t.save(),t.scale(1/window.devicePixelRatio,1/window.devicePixelRatio);let h=me(i,n);if(we(i)&&h){let x=document.createElement("canvas"),E=x.getContext("2d"),w=Math.max(Pt(l,d),Pt(c,m));x.width=w*window.devicePixelRatio*s+a*e.scale*10,x.height=w*window.devicePixelRatio*s+a*e.scale*10;let y=(x.width-e.canvas.width)/2,v=(x.height-e.canvas.height)/2;E.translate(x.width/2,x.height/2),E.rotate(i.angle),E.drawImage(e.canvas,-e.canvas.width/2,-e.canvas.height/2,e.canvas.width,e.canvas.height);let[,,,,A,L]=re(h,n);E.rotate(-i.angle);let S=x.width/2-(A-l)*window.devicePixelRatio*s-y-a*s,k=x.height/2-(L-c)*window.devicePixelRatio*s-v-a*s;E.translate(-S,-k),E.clearRect(-(h.width/2+bt)*window.devicePixelRatio*s,-(h.height/2+bt)*window.devicePixelRatio*s,(h.width+bt*2)*window.devicePixelRatio*s,(h.height+bt*2)*window.devicePixelRatio*s),t.translate(p,u),t.drawImage(x,-(d-l)/2*window.devicePixelRatio-y/s-a,-(m-c)/2*window.devicePixelRatio-v/s-a,x.width/s,x.height/s)}else if(t.translate(p,u),t.rotate(i.angle),"scale"in e.element&&!UE(i,r)&&t.scale(e.element.scale[0],e.element.scale[1]),t.translate(-p,-u),t.drawImage(e.canvas,(l+o.scrollX)*window.devicePixelRatio-a*e.scale/e.scale,(c+o.scrollY)*window.devicePixelRatio-a*e.scale/e.scale,e.canvas.width/e.scale,e.canvas.height/e.scale),C.VITE_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX==="true"&&tr(i)){let x=me(i,n),E=Vh(i);t.strokeStyle="#c92a2a",t.lineWidth=3,t.strokeRect((E.x+o.scrollX)*window.devicePixelRatio,(E.y+o.scrollY)*window.devicePixelRatio,vr(i,x)*window.devicePixelRatio,pa(i,x)*window.devicePixelRatio)}t.restore()},KE=(e,t,r)=>{t.save(),t.translate(e.x+r.scrollX,e.y+r.scrollY),t.fillStyle="rgba(0, 0, 200, 0.04)";let o=.5/r.zoom.value;t.fillRect(o,o,e.width,e.height),t.lineWidth=1/r.zoom.value,t.strokeStyle=" rgb(105, 101, 219)",t.strokeRect(o,o,e.width,e.height),t.restore()},Ts=(e,t,r,o,n,i,a)=>{switch(n.globalAlpha=Rg(e,_t(e,t),i.elementsPendingErasure),e.type){case"magicframe":case"frame":{a.frameRendering.enabled&&a.frameRendering.outline&&(n.save(),n.translate(e.x+a.scrollX,e.y+a.scrollY),n.fillStyle="rgba(0, 0, 200, 0.04)",n.lineWidth=qe.strokeWidth/a.zoom.value,n.strokeStyle=qe.strokeColor,Qi(e)&&(n.strokeStyle=a.theme===ae.LIGHT?"#7affd7":"#1d8264"),qe.radius&&n.roundRect?(n.beginPath(),n.roundRect(0,0,e.width,e.height,qe.radius/a.zoom.value),n.stroke(),n.closePath()):n.strokeRect(0,0,e.width,e.height),n.restore());break}case"freedraw":{if(Pe.generateElementShape(e,null),i.isExporting){let[s,l,c,d]=re(e,t),m=(s+c)/2+a.scrollX,p=(l+d)/2+a.scrollY,u=(c-s)/2-(e.x-s),h=(d-l)/2-(e.y-l);n.save(),n.translate(m,p),n.rotate(e.angle),n.translate(-u,-h),Zm(e,o,n,i,a),n.restore()}else{let s=zE(e,t,i,a);HE(s,n,i,a,r)}break}case"rectangle":case"diamond":case"ellipse":case"line":case"arrow":case"image":case"text":case"iframe":case"embeddable":{if(Pe.generateElementShape(e,i),i.isExporting){let[s,l,c,d]=re(e,t),m=(s+c)/2+a.scrollX,p=(l+d)/2+a.scrollY,u=(c-s)/2-(e.x-s),h=(d-l)/2-(e.y-l);if(U(e)){let E=pt(e,t);if(we(E)){let w=Z.getBoundTextElementPosition(E,e,t);u=(c-s)/2-(w.x-s),h=(d-l)/2-(w.y-l)}}n.save(),n.translate(m,p),WE(e,i,a)&&(n.filter="none");let x=me(e,t);if(we(e)&&x){let E=document.createElement("canvas"),w=E.getContext("2d"),y=Math.max(Pt(s,c),Pt(l,d)),v=qm(e);E.width=y*a.exportScale+v*10*a.exportScale,E.height=y*a.exportScale+v*10*a.exportScale,w.translate(E.width/2,E.height/2),w.scale(a.exportScale,a.exportScale),u=e.width/2-(e.x-s),h=e.height/2-(e.y-l),w.rotate(e.angle);let A=GE.canvas(E);w.translate(-u,-h),Zm(e,A,w,i,a),w.translate(u,h),w.rotate(-e.angle);let[,,,,L,S]=re(x,t),k=(s+c)/2-L,R=(l+d)/2-S;w.translate(-k,-R),w.clearRect(-x.width/2,-x.height/2,x.width,x.height),n.scale(1/a.exportScale,1/a.exportScale),n.drawImage(E,-E.width/2,-E.height/2,E.width,E.height)}else n.rotate(e.angle),e.type==="image"&&n.scale(e.scale[0],e.scale[1]),n.translate(-u,-h),Zm(e,o,n,i,a);n.restore()}else{let s=zE(e,t,i,a),l=n.imageSmoothingEnabled;!a?.shouldCacheIgnoreZoom&&(!e.angle||rb(e.angle))&&(n.imageSmoothingEnabled=!1),HE(s,n,i,a,r),n.imageSmoothingEnabled=l}break}default:throw new Error(`Unimplemented type ${e.type}`)}n.globalAlpha=1},XE=new WeakMap([]);PC=/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g});import{RoughGenerator as RC}from"roughjs/bin/generator";var Pe,Zo=q(()=>{"use strict";f();Cn();yh();$t();Pe=class e{static rg=new RC;static cache=new WeakMap;static get=t=>e.cache.get(t);static set=(t,r)=>e.cache.set(t,r);static delete=t=>e.cache.delete(t);static destroy=()=>{e.cache=new WeakMap};static generateElementShape=(t,r)=>{let o=r?.isExporting?void 0:e.get(t);if(o!==void 0)return o;jm.delete(t);let n=ab(t,e.rg,r||{isExporting:!1,canvasBackgroundColor:de.white,embedsValidationStatus:null});return e.cache.set(t,n),n}}});var z,ie,gi,Ge=q(()=>{"use strict";f();ni();Ll();So();G();Zo();z=(e,t,r=!0)=>{let o=!1,{points:n,fileId:i}=t;typeof n<"u"&&(t={...Rd(n),...t});for(let a in t){let s=t[a];if(typeof s<"u"){if(e[a]===s&&(typeof s!="object"||s===null||a==="groupIds"||a==="scale"))continue;if(a==="scale"){let l=e[a],c=s;if(l[0]===c[0]&&l[1]===c[1])continue}else if(a==="points"){let l=e[a],c=s;if(l.length===c.length){let d=!1,m=l.length;for(;--m;){let p=l[m],u=c[m];if(p[0]!==u[0]||p[1]!==u[1]){d=!0;break}}if(!d)continue}}e[a]=s,o=!0}}return o&&((typeof t.height<"u"||typeof t.width<"u"||typeof i<"u"||typeof n<"u")&&Pe.delete(e),e.version++,e.versionNonce=oo(),e.updated=wn(),r&&St.getScene(e)?.informMutation()),e},ie=(e,t)=>{let r=!1;for(let o in t){let n=t[o];if(typeof n<"u"){if(e[o]===n&&(typeof n!="object"||n===null))continue;r=!0}}return r?{...e,...t,updated:wn(),version:e.version+1,versionNonce:oo()}:e},gi=(e,t)=>(e.version=(t??e.version)+1,e.versionNonce=oo(),e.updated=wn(),e)});var so,wa,Qm,ms,nc,va=q(()=>{"use strict";f();Ge();se();V();st();G();so=e=>ne(e)||Dt(e)?e.points.length<2:e.width===0&&e.height===0,wa=(e,t,r,o,n)=>{let[i,a,s,l]=Gr(e,n),c=Ke({clientX:o.offsetLeft,clientY:o.offsetTop},o),d=Ke({clientX:o.offsetLeft+t,clientY:o.offsetTop+r},o);return c.x<=s&&c.y<=l&&d.x>=i&&d.y>=a},Qm=(e,t,r)=>{let o=Math.abs(t),n=Math.abs(r);if(e==="line"||e==="arrow"||e==="freedraw"){let i=Math.round(Math.atan(n/o)/Go)*Go;i===0?r=0:i===Math.PI/2?t=0:r=o*Math.tan(i)*Math.sign(r)||r}else e!=="selection"&&(r=o*Math.sign(r));return{width:t,height:r}},ms=(e,t,r,o)=>{let n=r-e,i=o-t,a=Math.round(Math.atan(i/n)/Go)*Go;if(a===0)i=0;else if(a===Math.PI/2)n=0;else{let s=Math.tan(a),l=-1,c=t-s*e,d=-1/s,m=-1,p=o-d*r,u=(l*p-m*c)/(s*m-d*l),h=(c*d-p*s)/(s*m-d*l);n=u-e,i=h-t}return{width:n,height:i}},nc=e=>{let t={width:e.width,height:e.height,x:e.x,y:e.y};if(e.width<0){let r=Math.abs(e.width);t.width=r,t.x=e.x-r}if(e.height<0){let r=Math.abs(e.height);t.height=r,t.y=e.y-r}return t}});var ZE,NC,qE,OC,jE,Ng,zn,Jm,Ca,Rs,gc,$m,fc=q(()=>{"use strict";f();st();zt();be();se();V();ZE={mouse:8,pen:16,touch:28},NC=16,qE={e:!0,s:!0,n:!0,w:!0},OC={e:!0,s:!0,n:!0,w:!0},jE={e:!0,s:!0,n:!0,w:!0,nw:!0,se:!0},Ng={e:!0,s:!0,n:!0,w:!0},zn=(e,t,r,o,n,i,a)=>{let[s,l]=ye(e+r/2,t+o/2,n,i,a);return[s-r/2,l-o/2,r,o]},Jm=e=>!(e.viewport.isMobile||e.isTouchScreen&&(i0||md)),Ca=e=>Jm(e)?qE:{},Rs=([e,t,r,o,n,i],a,s,l,c={},d=4)=>{let m=ZE[l],p=m/s.value,u=m/s.value,h=m/s.value,x=m/s.value,E=r-e,w=o-t,y=d/s.value,v=(m-Jn*2)/(2*s.value),A={nw:c.nw?void 0:zn(e-y-h+v,t-y-x+v,p,u,n,i,a),ne:c.ne?void 0:zn(r+y-v,t-y-x+v,p,u,n,i,a),sw:c.sw?void 0:zn(e-y-h+v,o+y-v,p,u,n,i,a),se:c.se?void 0:zn(r+y-v,o+y-v,p,u,n,i,a),rotation:c.rotation?void 0:zn(e+E/2-p/2,t-y-x+v-NC/s.value,p,u,n,i,a)},L=5*ZE.mouse/s.value;return Math.abs(E)>L&&(c.n||(A.n=zn(e+E/2-p/2,t-y-x+v,p,u,n,i,a)),c.s||(A.s=zn(e+E/2-p/2,o+y-v,p,u,n,i,a))),Math.abs(w)>L&&(c.w||(A.w=zn(e-y-h+v,t+w/2-u/2,p,u,n,i,a)),c.e||(A.e=zn(r+y-v,t+w/2-u/2,p,u,n,i,a))),A},gc=(e,t,r,o="mouse",n=qE)=>{if(e.locked)return{};if(e.type==="freedraw"||ne(e)){if(e.points.length===2){let[,a]=e.points;a[0]===0||a[1]===0?n=Ng:a[0]>0&&a[1]<0?n=jE:a[0]>0&&a[1]>0?n=Ng:a[0]<0&&a[1]>0?n=jE:a[0]<0&&a[1]<0&&(n=Ng)}}else U(e)?n=OC:ee(e)&&(n={...n,rotation:!0});let i=ne(e)?Jn+8:Jn;return Rs(re(e,r,!0),e.angle,t,o,n,i)},$m=(e,t)=>{if(t.editingLinearElement)return!1;if(e.length>1)return!0;let r=e[0];return ne(r)?r.points.length>2:!0}});var Bg,QE,ep,tp,Og,BC,rp,JE,$E=q(()=>{"use strict";f();fc();st();V();Hd();se();Bg=(e,t,r)=>t>=e[0]&&t<=e[0]+e[2]&&r>=e[1]&&r<=e[1]+e[3],QE=(e,t,r,o,n,i,a,s)=>{if(!r.selectedElementIds[e.id])return!1;let{rotation:l,...c}=gc(e,i,t,a,Ca(s));if(l&&Bg(l,o,n))return"rotation";let d=Object.keys(c).filter(m=>{let p=c[m];return p?Bg(p,o,n):!1});if(d.length>0)return d[0];if(Jm(s)){let[m,p,u,h,x,E]=re(e,t);if(e.type!=="text"&&!(ne(e)&&e.points.length<=2)){let w=hd/i.value,y=JE([m-w,p-w],[u+w,h+w],[x,E],jo(e.angle));for(let[v,A]of Object.entries(y))if(ia([o,n],A,w))return v}}return!1},ep=(e,t,r,o,n,i,a,s)=>e.reduce((l,c)=>{if(l)return l;let d=QE(c,a,t,r,o,n,i,s);return d?{element:c,transformHandleType:d}:null},null),tp=([e,t,r,o],n,i,a,s,l)=>{let c=Rs([e,t,r,o,(e+r)/2,(t+o)/2],0,a,s,Ca(l)),d=Object.keys(c).find(m=>{let p=c[m];return p&&Bg(p,n,i)});if(d)return d;if(Jm(l)){let m=(e+r)/2,p=(t+o)/2,u=hd/a.value,h=JE([e-u,t-u],[r+u,o+u],[m,p],jo(0));for(let[x,E]of Object.entries(h))if(ia([n,i],E,u))return x}return!1},Og=["ns","nesw","ew","nwse"],BC=(e,t)=>{let r=Og.indexOf(e);if(r>=0){let o=Math.round(t/(Math.PI/4));e=Og[(r+o)%Og.length]}return e},rp=e=>{let{element:t,transformHandleType:r}=e,o=t&&Math.sign(t.height)*Math.sign(t.width)===-1,n=null;switch(r){case"n":case"s":n="ns";break;case"w":case"e":n="ew";break;case"nw":case"se":o?n="nesw":n="nwse";break;case"ne":case"sw":o?n="nwse":n="nesw";break;case"rotation":return"grab"}return n&&t&&(n=BC(n,t.angle)),n?`${n}-resize`:""},JE=([e,t],[r,o],n,i)=>{let a=xt([e,t],i,n),s=xt([r,t],i,n),l=xt([e,o],i,n),c=xt([r,o],i,n);return{n:[a,s],e:[s,c],s:[c,l],w:[l,a]}}});var op,Fg,FC,zC,zg,HC,_C,Hg,GC,_g,Gg,Ug=q(()=>{"use strict";f();V();Ll();zt();st();se();Ge();G();io();ni();lt();Zt();mr();op=e=>e<0?e+2*Math.PI:e>=2*Math.PI?e-2*Math.PI:e,Fg=(e,t,r,o,n,i,a,s,l,c,d)=>{if(r.length===1){let[m]=r;return t==="rotation"?(FC(m,o,s,l,n),Hr(m,o)):U(m)&&(t==="nw"||t==="ne"||t==="sw"||t==="se")?(HC(m,o,t,i,s,l),Hr(m,o)):t&&_C(e,a,m,o,t,i,s,l),!0}else if(r.length>1){if(t==="rotation")return GC(e,r,o,s,l,n,c,d),!0;if(t)return Hg(e,r,o,t,i,a,s,l),!0}return!1},FC=(e,t,r,o,n)=>{let[i,a,s,l]=re(e,t),c=(i+s)/2,d=(a+l)/2,m;ee(e)?m=0:(m=5*Math.PI/2+Math.atan2(o-d,r-c),n&&(m+=Go/2,m-=m%Go),m=op(m));let p=Po(e);if(z(e,{angle:m}),p){let u=St.getScene(e)?.getElement(p);u&&!we(e)&&z(u,{angle:m})}},zC=(e,t,r,o)=>ne(e)||Dt(e)?{points:ai(0,t,ai(1,r,e.points,o),o)}:{},zg=(e,t,r)=>{let o=e.width;if(Ie(e)){let a=pt(e,t);a&&(o=vr(a,e))}let i=e.fontSize*(r/o);return i<ud?null:{size:i}},HC=(e,t,r,o,n,i)=>{let[a,s,l,c,d,m]=re(e,t),[p,u]=ye(n,i,d,m,-e.angle),h=0,x=0;r.includes("e")&&(h=(p-a)/(l-a)),r.includes("w")&&(h=(l-p)/(l-a)),r.includes("n")&&(x=(c-u)/(c-s)),r.includes("s")&&(x=(u-s)/(c-s));let E=Math.max(h,x);if(E>0){let w=e.width*E,y=e.height*E,v=zg(e,t,w);if(v===null)return;let A=[a,s],L=[l,c],S=[d,m],k=[a,s];if(["n","w","nw"].includes(r)&&(k=[L[0]-Math.abs(w),L[1]-Math.abs(y)]),r==="ne"){let Q=[A[0],L[1]];k=[Q[0],Q[1]-Math.abs(y)]}if(r==="sw"){let Q=[L[0],A[1]];k=[Q[0]-Math.abs(w),Q[1]]}["s","n"].includes(r)&&(k[0]=S[0]-w/2),["e","w"].includes(r)&&(k[1]=S[1]-y/2),o&&(k[0]=S[0]-Math.abs(w)/2,k[1]=S[1]-Math.abs(y)/2);let R=e.angle,_=Ue(k,[d,m],R),M=[k[0]+Math.abs(w)/2,k[1]+Math.abs(y)/2],O=Ue(M,[d,m],R);k=Ue(_,O,-R);let[I,F]=k;z(e,{fontSize:v.size,width:w,height:y,x:I,y:F})}},_C=(e,t,r,o,n,i,a,s)=>{let l=e.get(r.id),[c,d,m,p]=us(l,l.width,l.height,!0),u=[c,d],h=[m,p],x=Pl(u,h),E=Ue([a,s],x,-l.angle),[w,y,v,A]=us(r,r.width,r.height,!0),L=v-w,S=A-y,k=h[0]-u[0],R=h[1]-u[1],_=k/L,M=R/S,O={},I=me(r,o);n.includes("e")&&(_=(E[0]-u[0])/L),n.includes("s")&&(M=(E[1]-u[1])/S),n.includes("w")&&(_=(h[0]-E[0])/L),n.includes("n")&&(M=(h[1]-E[1])/S);let F=l.width,Q=l.height,j=r.width*_,oe=r.height*M;if(i&&(j=2*j-F,oe=2*oe-Q),t){let Er=Math.abs(j)/F,Wa=Math.abs(oe)/Q;if(n.length===1&&(oe*=Er,j*=Wa),n.length===2){let Yi=Math.max(Er,Wa);j=F*Yi*Math.sign(j),oe=Q*Yi*Math.sign(oe)}}if(I){let Er=e.get(I.id);if(Er&&(O={fontSize:Er.fontSize}),t){let Wa={...r,width:j,height:oe},Yi=zg(I,o,vr(Wa,I));if(Yi===null)return;O={fontSize:Yi.size}}else{let Wa=Jd(Ve(I),I.lineHeight),Yi=Qd(I.fontSize,I.lineHeight);j=Math.max(j,Wa),oe=Math.max(oe,Yi)}}let[Ce,Y,W,he]=us(l,j,oe,!0),Ae=W-Ce,it=he-Y,Me=[...u];if(["n","w","nw"].includes(n)&&(Me=[h[0]-Math.abs(Ae),h[1]-Math.abs(it)]),n==="ne"){let Er=[u[0],h[1]];Me=[Er[0],Er[1]-Math.abs(it)]}if(n==="sw"){let Er=[h[0],u[1]];Me=[Er[0]-Math.abs(Ae),Er[1]]}t&&(["s","n"].includes(n)&&(Me[0]=x[0]-Ae/2),["e","w"].includes(n)&&(Me[1]=x[1]-it/2));let Jr=j<0,Xn=oe<0;Jr&&(n.includes("e")&&(Me[0]-=Math.abs(Ae)),n.includes("w")&&(Me[0]+=Math.abs(Ae))),Xn&&(n.includes("s")&&(Me[1]-=Math.abs(it)),n.includes("n")&&(Me[1]+=Math.abs(it))),i&&(Me[0]=x[0]-Math.abs(Ae)/2,Me[1]=x[1]-Math.abs(it)/2);let Ho=l.angle,gn=Ue(Me,x,Ho),Zn=[Me[0]+Math.abs(Ae)/2,Me[1]+Math.abs(it)/2],Ua=Ue(Zn,x,Ho);Me=Ue(gn,Ua,-Ho);let yo=[...Me],Nr=l.x-Ce,xr=l.y-Y;yo[0]+=Nr,yo[1]+=xr;let Wi=yo[0],Wv=yo[1],V2,K2;(ne(r)||Dt(r))&&(V2=ai(1,oe,l.points,!0),K2=ai(0,j,V2,!0));let jn={width:Math.abs(j),height:Math.abs(oe),x:Wi,y:Wv,points:K2};if("scale"in r&&"scale"in l&&z(r,{scale:[(Math.sign(W-l.x)||l.scale[0])*l.scale[0],(Math.sign(he-l.y)||l.scale[1])*l.scale[1]]}),we(r)&&I&&t){let Er=jn.width/r.width*I.fontSize;if(Er<ud)return;O.fontSize=Er}jn.width!==0&&jn.height!==0&&Number.isFinite(jn.x)&&Number.isFinite(jn.y)&&(z(r,jn),Hr(r,o,{newSize:{width:jn.width,height:jn.height}}),I&&O!=null&&z(I,{fontSize:O.fontSize}),ca(r,o,n,t))},Hg=(e,t,r,o,n,i,a,s)=>{let l=t.reduce((Y,W)=>{let he=e.get(W.id);return he&&Y.push({orig:he,latest:W}),Y},[]),c=l.reduce((Y,{orig:W})=>{if(!ne(W))return Y;let he=Po(W);if(!he)return Y;let Ae=e.get(he)??null;if(!Ie(Ae))return Y;let it=Z.getBoundTextElementPosition(W,Ae,r);return[...Y,{...Ae,...it}]},[]),{minX:d,minY:m,maxX:p,maxY:u,midX:h,midY:x}=Cr(l.map(({orig:Y})=>Y).concat(c)),E=p-d,w=u-m,y=o,v={ne:[d,u],se:[d,m],sw:[p,m],nw:[p,u],e:[d,m+w/2],w:[p,m+w/2],n:[d+E/2,u],s:[d+E/2,m]},[A,L]=n?[h,x]:v[y],S=n?2:1,k=Math.max(Math.abs(a-A)/E||0,Math.abs(s-L)/w||0)*S;if(k===0)return;let R=y.includes("e")||y.includes("w")?Math.abs(a-A)/E*S:1,_=y.includes("n")||y.includes("s")?Math.abs(s-L)/w*S:1,M=i||l.some(Y=>Y.latest.angle!==0||U(Y.latest)||cx(Y.latest));M&&(R=k,_=k);let O={ne:[a<A,s>L],se:[a<A,s<L],sw:[a>A,s<L],nw:[a>A,s>L],e:[a<A,!1],w:[a>A,!1],n:[!1,s>L],s:[!1,s<L]},[I,F]=O[y].map(Y=>Y?-1:1),Q=I<0,j=F<0,oe=[];for(let{orig:Y,latest:W}of l){if(U(Y)&&Ie(Y))continue;let he=Y.width*R,Ae=Y.height*_,it=op(Y.angle*I*F),Me=ne(Y)||Dt(Y),Jr=Y.x-A,Xn=Y.y-L,Ho=Q&&!Me?he:0,gn=j&&!Me?Ae:0,Zn=A+I*(Jr*R+Ho),Ua=L+F*(Xn*_+gn),yo=zC(Y,he*I,Ae*F,!1),Nr={x:Zn,y:Ua,width:he,height:Ae,angle:it,...yo};if(to(Y)&&(Nr.scale=[Y.scale[0]*I,Y.scale[1]*F]),U(Y)){let Wi=zg(Y,r,he);if(!Wi)return;Nr.fontSize=Wi.size}let xr=e.get(Po(Y)??"");if(xr)if(M){let Wi=xr.fontSize*k;if(Wi<ud)return;Nr.boundTextFontSize=Wi}else Nr.boundTextFontSize=xr.fontSize;oe.push({element:W,update:Nr})}let Ce=oe.map(({element:Y})=>Y);for(let{element:Y,update:{boundTextFontSize:W,...he}}of oe){let{width:Ae,height:it,angle:Me}=he;z(Y,he,!1),Hr(Y,r,{simultaneouslyUpdated:Ce,newSize:{width:Ae,height:it}});let Jr=me(Y,r);Jr&&W&&(z(Jr,{fontSize:W,angle:ne(Y)?void 0:Me},!1),ca(Y,r,o,!0))}St.getScene(oe[0].element)?.informMutation()},GC=(e,t,r,o,n,i,a,s)=>{let l=5*Math.PI/2+Math.atan2(n-s,o-a);i&&(l+=Go/2,l-=l%Go),t.filter(c=>!ee(c)).forEach(c=>{let[d,m,p,u]=re(c,r),h=(d+p)/2,x=(m+u)/2,E=e.get(c.id)?.angle??c.angle,[w,y]=ye(h,x,a,s,l+E-c.angle);z(c,{x:c.x+(w-h),y:c.y+(y-x),angle:op(l+E)},!1),Hr(c,r,{simultaneouslyUpdated:t});let v=me(c,r);v&&!we(c)&&z(v,{x:v.x+(w-h),y:v.y+(y-x),angle:op(l+E)},!1)}),St.getScene(t[0])?.informMutation()},_g=(e,t,r,o,n)=>{let[i,a,s,l]=t.length===1?re(t[0],r):Te(t),c=(i+s)/2,d=(a+l)/2,m=t.length===1?t[0].angle:0;switch([o,n]=ye(o,n,c,d,-m),e){case"n":return ye(o-(i+s)/2,n-a,0,0,m);case"s":return ye(o-(i+s)/2,n-l,0,0,m);case"w":return ye(o-i,n-(a+l)/2,0,0,m);case"e":return ye(o-s,n-(a+l)/2,0,0,m);case"nw":return ye(o-i,n-a,0,0,m);case"ne":return ye(o-s,n-a,0,0,m);case"sw":return ye(o-i,n-l,0,0,m);case"se":return ye(o-s,n-l,0,0,m);default:return[0,0]}},Gg=(e,t)=>{let[,[r,o]]=t.points;return e==="nw"&&(r<0||o<0)||e==="ne"&&r>=0||e==="sw"&&r<=0||e==="se"&&(r>0||o>0)?"end":"origin"}});var Wg,UC,e4,Yg,np,t4=q(()=>{"use strict";f();io();st();Ge();va();lt();zt();se();Wg=(e,t,r,o,n,i,a)=>{let s=new Set(t),l=t.filter(m=>ee(m)).map(m=>m.id);if(l.length>0)for(let m of n.getNonDeletedElements())m.frameId!==null&&l.includes(m.frameId)&&s.add(m);let c=Te(Array.from(s).map(m=>e.originalElements.get(m.id)??m)),d=UC(c,r,i,a);s.forEach(m=>{if(e4(e,m,d),!we(m)){let p=me(m,n.getNonDeletedElementsMap());p&&e4(e,p,d)}Hr(m,n.getElementsMapIncludingDeleted(),{simultaneouslyUpdated:Array.from(s)})})},UC=(e,t,r,o)=>{let[n,i]=e,a=n+t.x+r.x,s=i+t.y+r.y;if(r.x===0||r.y===0){let[l,c]=It(n+t.x,i+t.y,o);r.x===0&&(a=l),r.y===0&&(s=c)}return{x:a-n,y:s-i}},e4=(e,t,r)=>{let o=e.originalElements.get(t.id)??t,n=o.x+r.x,i=o.y+r.y;z(t,{x:n,y:i})},Yg=(e,t,r)=>{let[o,n]=Te(e);return[t-o,r-n]},np=(e,t,r,o,n,i,a,s,l,c,d,m=null)=>{l&&e.type!=="selection"&&(d?s=a/d:(Math.abs(i-o)>Math.abs(n-r)?{width:a,height:s}=Qm(t,s,n<r?-a:a):{width:a,height:s}=Qm(t,a,i<o?-s:s),s<0&&(s=-s)));let p=n<r?r-a:r,u=i<o?o-s:o;c&&(a+=a,s+=s,p=r-a/2,u=o-s/2),a!==0&&s!==0&&z(e,{x:p+(m?.x??0),y:u+(m?.y??0),width:a,height:s})}});var Ta,r4=q(()=>{"use strict";f();Xe();Ta=(e,t)=>!!(!e.viewModeEnabled&&(e.activeTool.type!=="custom"&&(e.editingElement||e.activeTool.type!=="selection"&&e.activeTool.type!=="eraser"&&e.activeTool.type!=="hand"&&e.activeTool.type!=="laser")||ue(t,e).length))});var WC,Vg,Kg,o4,Ee,kl,n4,Zx,wm,be=q(()=>{"use strict";f();va();se();kn();st();fc();$E();Ug();t4();se();lt();va();r4();WC=e=>e.reduce((t,r)=>t+r.version,0),Vg=e=>{let t=5381;for(let r=0;r<e.length;r++)t=(t<<5)+t+e[r].versionNonce;return t>>>0},Kg=e=>{let t=5381;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);t=(t<<5)+t+o}return t>>>0},o4=e=>e.filter(t=>!t.isDeleted&&!so(t)),Ee=e=>e.filter(t=>!t.isDeleted),kl=e=>!e.isDeleted,n4=e=>Ee(e).map(t=>Sl(t.type)?{...t,lastCommittedPoint:null}:t),Zx=e=>n4(e),wm=e=>n4(e)});var Aa,Ds,Xg,Ye,Zg,ue,Sa,Ne,ii=q(()=>{"use strict";f();be();se();nr();G();va();Aa=e=>{let t=new Set;return e.forEach(r=>{ee(r)&&t.add(r.id)}),e.filter(r=>!(r.frameId&&t.has(r.frameId)))},Ds=(e,t,r,o=!0)=>{let[n,i,a,s]=re(t,r),l=e.filter(c=>{let[d,m,p,u]=Gr(c,r),h=_t(c,r);if(h){let[x,E,w,y]=Gr(h,r);d=Math.max(x,d),m=Math.max(E,m),p=Math.min(w,p),u=Math.min(y,u)}return c.locked===!1&&c.type!=="selection"&&!Ie(c)&&n<=d&&i<=m&&a>=p&&s>=u});return l=o?Aa(l):l,l=l.filter(c=>{let d=_t(c,r);return d?en(c,d,r):!0}),l},Xg=(e,t,r,o)=>{let n=new Set(t.map(i=>i.id));return e.filter(i=>{let a=wa(i,r.width,r.height,r,o);return!n.has(i.id)&&a})},Ye=function(){let e=null,t=null,r=null,o=(n,i)=>(r!=null&&n===e&&i.selectedElementIds===t||(r=n.some(a=>i.selectedElementIds[a.id]),e=n,t=i.selectedElementIds),r);return o.clearCache=()=>{e=null,t=null,r=null},o}(),Zg=(e,t,r)=>{let o=Array.from(new Set(ue(e,t).map(n=>r(n))));return o.length===1?o[0]:null},ue=(e,t,r)=>{let o=[];for(let n of e.values()){if(t.selectedElementIds[n.id]){o.push(n);continue}if(r?.includeBoundTextElement&&Ie(n)&&t.selectedElementIds[n?.containerId]){o.push(n);continue}}if(r?.includeElementsInFrames){let n=[];return o.forEach(i=>{ee(i)&&Vr(e,i.id).forEach(a=>n.push(a)),n.push(i)}),n}return o},Sa=(e,t)=>t.editingElement?[t.editingElement]:ue(e,t,{includeBoundTextElement:!0}),Ne=(e,t)=>Je(t.selectedElementIds,e)?t.selectedElementIds:e});var YC,jg,$o,qg=q(()=>{"use strict";f();be();G();YC=(e,t)=>{let[r,o,n,i]=t,{x:a,y:s}=Bt({sceneX:r,sceneY:o},e),{x:l,y:c}=Bt({sceneX:n,sceneY:i},e);return l-a>e.width||c-s>e.height},jg=({scenePoint:e,viewportDimensions:t,zoom:r})=>({scrollX:t.width/2/r.value-e.x,scrollY:t.height/2/r.value-e.y}),$o=(e,t)=>{if(e=o4(e),!e.length)return{scrollX:0,scrollY:0};let[r,o,n,i]=Te(e);YC(t,[r,o,n,i])&&([r,o,n,i]=qh(e,Ke({clientX:t.scrollX,clientY:t.scrollY},t)));let a=(r+n)/2,s=(o+i)/2;return jg({scenePoint:{x:a,y:s},viewportDimensions:{width:t.width,height:t.height},zoom:t.zoom})}});var rn,Hn,ip=q(()=>{"use strict";f();V();rn=e=>Math.max(ja,Math.min(e,30)),Hn=({viewportX:e,viewportY:t,nextZoom:r},o)=>{let n=e-o.offsetLeft,i=t-o.offsetTop,a=o.zoom.value,s=o.scrollX+(n-n/a),l=o.scrollY+(i-i/a),c=-(n-n/r),d=-(i-i/r);return{scrollX:s+c,scrollY:l+d,zoom:{value:r}}}});var Xe=q(()=>{"use strict";f();ii();qg();Bl();ip()});f();import BL,{useEffect as FL}from"react";f();import{useEffect as c7,useState as d7}from"react";f();f();import j2 from"./en-XW4JO6VX.json";import Zv from"./percentages-UCQDHIQF.json";f();import{unstable_createStore as Kv,useAtom as KL}from"jotai";import{useLayoutEffect as ZL}from"react";var He=Symbol(),Jt=Kv();import{atom as jv,useAtomValue as qv}from"jotai";var Xv=X2({"./locales/ar-SA.json":()=>import("./ar-SA-JA6F2FMJ.json"),"./locales/az-AZ.json":()=>import("./az-AZ-GVIENQVH.json"),"./locales/bg-BG.json":()=>import("./bg-BG-YFNNHCEP.json"),"./locales/bn-BD.json":()=>import("./bn-BD-LMEIWSRD.json"),"./locales/ca-ES.json":()=>import("./ca-ES-C2WGCLOT.json"),"./locales/cs-CZ.json":()=>import("./cs-CZ-F2NDIQMB.json"),"./locales/da-DK.json":()=>import("./da-DK-WBEQB3CJ.json"),"./locales/de-DE.json":()=>import("./de-DE-VEIMCP7R.json"),"./locales/el-GR.json":()=>import("./el-GR-TKRKG5GQ.json"),"./locales/en.json":()=>import("./en-XW4JO6VX.json"),"./locales/es-ES.json":()=>import("./es-ES-TOLWEZNW.json"),"./locales/eu-ES.json":()=>import("./eu-ES-7CDRJQWJ.json"),"./locales/fa-IR.json":()=>import("./fa-IR-527E2XGU.json"),"./locales/fi-FI.json":()=>import("./fi-FI-NLQ7RQGZ.json"),"./locales/fr-FR.json":()=>import("./fr-FR-KUHO4FLU.json"),"./locales/gl-ES.json":()=>import("./gl-ES-NEXX3VBB.json"),"./locales/he-IL.json":()=>import("./he-IL-MED2VGBZ.json"),"./locales/hi-IN.json":()=>import("./hi-IN-5V633W7V.json"),"./locales/hu-HU.json":()=>import("./hu-HU-2FOZGVGR.json"),"./locales/id-ID.json":()=>import("./id-ID-I6BOLXTF.json"),"./locales/it-IT.json":()=>import("./it-IT-WKPQOK4P.json"),"./locales/ja-JP.json":()=>import("./ja-JP-VKA4ISRU.json"),"./locales/kaa.json":()=>import("./kaa-IKPRSBNY.json"),"./locales/kab-KAB.json":()=>import("./kab-KAB-IE4PHQTZ.json"),"./locales/kk-KZ.json":()=>import("./kk-KZ-MNJT6XSV.json"),"./locales/km-KH.json":()=>import("./km-KH-LADGDFXV.json"),"./locales/ko-KR.json":()=>import("./ko-KR-XD7AVF2F.json"),"./locales/ku-TR.json":()=>import("./ku-TR-4XBHKDQA.json"),"./locales/lt-LT.json":()=>import("./lt-LT-QC35R4YH.json"),"./locales/lv-LV.json":()=>import("./lv-LV-GSD5D3BA.json"),"./locales/mr-IN.json":()=>import("./mr-IN-KOLSWM7Y.json"),"./locales/my-MM.json":()=>import("./my-MM-M53KMUET.json"),"./locales/nb-NO.json":()=>import("./nb-NO-XXC6U37A.json"),"./locales/nl-NL.json":()=>import("./nl-NL-HCCJQEUO.json"),"./locales/nn-NO.json":()=>import("./nn-NO-6P7Z2PI2.json"),"./locales/oc-FR.json":()=>import("./oc-FR-JRJKPLNT.json"),"./locales/pa-IN.json":()=>import("./pa-IN-LZWLEPIB.json"),"./locales/percentages.json":()=>import("./percentages-UCQDHIQF.json"),"./locales/pl-PL.json":()=>import("./pl-PL-3WBLCXI2.json"),"./locales/pt-BR.json":()=>import("./pt-BR-O3ZPTUNW.json"),"./locales/pt-PT.json":()=>import("./pt-PT-7AQTSAFO.json"),"./locales/ro-RO.json":()=>import("./ro-RO-HJ65JYWV.json"),"./locales/ru-RU.json":()=>import("./ru-RU-P7ROIYNC.json"),"./locales/si-LK.json":()=>import("./si-LK-7ZSWVION.json"),"./locales/sk-SK.json":()=>import("./sk-SK-NXVBGLYY.json"),"./locales/sl-SI.json":()=>import("./sl-SI-VFTWOYNP.json"),"./locales/sv-SE.json":()=>import("./sv-SE-YONBLQNW.json"),"./locales/ta-IN.json":()=>import("./ta-IN-BSETPMLX.json"),"./locales/th-TH.json":()=>import("./th-TH-URTRDITB.json"),"./locales/tr-TR.json":()=>import("./tr-TR-N5SCAVTB.json"),"./locales/uk-UA.json":()=>import("./uk-UA-LBCYVSQZ.json"),"./locales/vi-VN.json":()=>import("./vi-VN-POZWLIUU.json"),"./locales/zh-CN.json":()=>import("./zh-CN-FUF5V3SC.json"),"./locales/zh-HK.json":()=>import("./zh-HK-OB4VW42C.json"),"./locales/zh-TW.json":()=>import("./zh-TW-5JPVKOM7.json")});var Qv=85,_o={code:"en",label:"English"},Va=[_o,...[{code:"ar-SA",label:"\u0627\u0644\u0639\u0631\u0628\u064A\u0629",rtl:!0},{code:"bg-BG",label:"\u0411\u044A\u043B\u0433\u0430\u0440\u0441\u043A\u0438"},{code:"ca-ES",label:"Catal\xE0"},{code:"cs-CZ",label:"\u010Cesky"},{code:"de-DE",label:"Deutsch"},{code:"el-GR",label:"\u0395\u03BB\u03BB\u03B7\u03BD\u03B9\u03BA\u03AC"},{code:"es-ES",label:"Espa\xF1ol"},{code:"eu-ES",label:"Euskara"},{code:"fa-IR",label:"\u0641\u0627\u0631\u0633\u06CC",rtl:!0},{code:"fi-FI",label:"Suomi"},{code:"fr-FR",label:"Fran\xE7ais"},{code:"gl-ES",label:"Galego"},{code:"he-IL",label:"\u05E2\u05D1\u05E8\u05D9\u05EA",rtl:!0},{code:"hi-IN",label:"\u0939\u093F\u0928\u094D\u0926\u0940"},{code:"hu-HU",label:"Magyar"},{code:"id-ID",label:"Bahasa Indonesia"},{code:"it-IT",label:"Italiano"},{code:"ja-JP",label:"\u65E5\u672C\u8A9E"},{code:"kab-KAB",label:"Taqbaylit"},{code:"kk-KZ",label:"\u049A\u0430\u0437\u0430\u049B \u0442\u0456\u043B\u0456"},{code:"ko-KR",label:"\uD55C\uAD6D\uC5B4"},{code:"ku-TR",label:"Kurd\xEE"},{code:"lt-LT",label:"Lietuvi\u0173"},{code:"lv-LV",label:"Latvie\u0161u"},{code:"my-MM",label:"Burmese"},{code:"nb-NO",label:"Norsk bokm\xE5l"},{code:"nl-NL",label:"Nederlands"},{code:"nn-NO",label:"Norsk nynorsk"},{code:"oc-FR",label:"Occitan"},{code:"pa-IN",label:"\u0A2A\u0A70\u0A1C\u0A3E\u0A2C\u0A40"},{code:"pl-PL",label:"Polski"},{code:"pt-BR",label:"Portugu\xEAs Brasileiro"},{code:"pt-PT",label:"Portugu\xEAs"},{code:"ro-RO",label:"Rom\xE2n\u0103"},{code:"ru-RU",label:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439"},{code:"sk-SK",label:"Sloven\u010Dina"},{code:"sv-SE",label:"Svenska"},{code:"sl-SI",label:"Sloven\u0161\u010Dina"},{code:"tr-TR",label:"T\xFCrk\xE7e"},{code:"uk-UA",label:"\u0423\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430"},{code:"zh-CN",label:"\u7B80\u4F53\u4E2D\u6587"},{code:"zh-TW",label:"\u7E41\u9AD4\u4E2D\u6587"},{code:"vi-VN",label:"Ti\u1EBFng Vi\u1EC7t"},{code:"mr-IN",label:"\u092E\u0930\u093E\u0920\u0940"}].filter(e=>Zv[e.code]>=Qv).sort((e,t)=>e.label>t.label?1:-1)],id="__test__";C.DEV&&Va.unshift({code:id,label:"test language"},{code:`${id}.rtl`,label:"\u202Atest language (rtl)\u202C",rtl:!0});var Ya=_o,nd={},ad=async e=>{if(Ya=e,document.documentElement.dir=Ya.rtl?"rtl":"ltr",document.documentElement.lang=Ya.code,e.code.startsWith(id))nd={};else try{nd=await Xv(`./locales/${Ya.code}.json`)}catch(t){console.error(`Failed to load language ${e.code}:`,t.message),nd=j2}Jt.set(q2,e.code)},fn=()=>Ya,Z2=(e,t)=>{for(let r=0;r<t.length;++r){let o=t[r];if(e[o]===void 0)return;e=e[o]}if(typeof e=="string")return e},b=(e,t,r)=>{if(Ya.code.startsWith(id))return`\u202A[[${t?`${e}(${JSON.stringify(t).slice(1,-1)})`:e}]]\u202C`;let o=e.split("."),n=Z2(nd,o)||Z2(j2,o)||r;if(n===void 0){let i=`Can't find translation for ${e}`;if(C.PROD)return console.warn(i),"";throw new Error(i)}if(t)for(let i in t)n=n.replace(`{{${i}}}`,String(t[i]));return n},q2=jv(_o.code),Tt=()=>{let e=qv(q2,He);return{t:b,langCode:e}};import{useState as i7,useEffect as a7}from"react";f();import Jv from"react";import{jsx as Ju}from"react/jsx-runtime";var $v=({size:e="1em",circleWidth:t=8,synchronized:r=!1})=>{let n=-(Jv.useRef(Date.now()).current%1600);return Ju("div",{className:"Spinner",children:Ju("svg",{viewBox:"0 0 100 100",style:{width:e,height:e,"--spinner-delay":r?`${n}ms`:0},children:Ju("circle",{cx:"50",cy:"50",r:50-t/2,strokeWidth:t,fill:"none",strokeMiterlimit:"10"})})})},Vt=$v;V();import s7 from"clsx";import{jsx as sh,jsxs as l7}from"react/jsx-runtime";var vd=({delay:e,theme:t})=>{let[r,o]=i7(!!e);return a7(()=>{if(!e)return;let n=setTimeout(()=>{o(!1)},e);return()=>clearTimeout(n)},[e]),r?null:l7("div",{className:s7("LoadingMessage",{"LoadingMessage--dark":t===ae.DARK}),children:[sh("div",{children:sh(Vt,{})}),sh("div",{className:"LoadingMessage-text",children:b("labels.loadingScene")})]})};import{jsx as m7}from"react/jsx-runtime";var M0=e=>{let[t,r]=d7(!0);return c7(()=>{let o=async()=>{await ad(n),r(!1)},n=Va.find(i=>i.code===e.langCode)||_o;o()},[e.langCode]),t?m7(vd,{theme:e.theme}):e.children};f();import hn,{useContext as Gi}from"react";import{flushSync as C2}from"react-dom";import bL from"roughjs/bin/rough";import Av from"clsx";import{nanoid as xL}from"nanoid";f();f();Xe();ge();f();import Qg,{useEffect as VC,useRef as i4,useState as KC}from"react";import a4 from"clsx";oi();G();import{jsx as bc,jsxs as xc}from"react/jsx-runtime";var ce=Qg.forwardRef((e,t)=>{let{id:r}=Gt(),o=Qg.useRef(null);Qg.useImperativeHandle(t,()=>o.current);let n=`ToolIcon_size_${e.size}`,[i,a]=KC(!1),s=i4(!0),l=async d=>{let m="onClick"in e&&e.onClick?.(d);if(Wo(m))try{a(!0),await m}catch(p){if(p instanceof Xo)console.warn(p);else throw p}finally{s.current&&a(!1)}};VC(()=>(s.current=!0,()=>{s.current=!1}),[]);let c=i4(null);if(e.type==="button"||e.type==="icon"||e.type==="submit"){let d=e.type==="icon"?"button":e.type;return xc("button",{className:a4("ToolIcon_type_button",n,e.className,e.visible&&!e.hidden?"ToolIcon_type_button--show":"ToolIcon_type_button--hide",{ToolIcon:!e.hidden,"ToolIcon--selected":e.selected,"ToolIcon--plain":e.type==="icon"}),style:e.style,"data-testid":e["data-testid"],hidden:e.hidden,title:e.title,"aria-label":e["aria-label"],type:d,onClick:l,ref:o,disabled:i||e.isLoading||!!e.disabled,children:[(e.icon||e.label)&&xc("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":!!e.disabled,children:[e.icon||e.label,e.keyBindingLabel&&bc("span",{className:"ToolIcon__keybinding",children:e.keyBindingLabel}),e.isLoading&&bc(Vt,{})]}),e.showAriaLabel&&xc("div",{className:"ToolIcon__label",children:[e["aria-label"]," ",i&&bc(Vt,{})]}),e.children]})}return xc("label",{className:a4("ToolIcon",e.className),title:e.title,onPointerDown:d=>{c.current=d.pointerType||null,e.onPointerDown?.({pointerType:d.pointerType||null})},onPointerUp:()=>{requestAnimationFrame(()=>{c.current=null})},children:[bc("input",{className:`ToolIcon_type_radio ${n}`,type:"radio",name:e.name,"aria-label":e["aria-label"],"aria-keyshortcuts":e["aria-keyshortcuts"],"data-testid":e["data-testid"],id:`${r}-${e.id}`,onChange:()=>{e.onChange?.({pointerType:c.current})},checked:e.checked,ref:o}),xc("div",{className:"ToolIcon__icon",children:[e.icon,e.keyBindingLabel&&bc("span",{className:"ToolIcon__keybinding",children:e.keyBindingLabel})]})]})});ce.defaultProps={visible:!0,className:"",size:"medium"};ce.displayName="ToolButton";Ze();be();Ge();mr();Zt();io();se();G();f();V();import Ir from"react";import XC from"open-color";import ZC from"clsx";import{Fragment as De,jsx as g,jsxs as B}from"react/jsx-runtime";var Oo=e=>"var(--icon-fill-color)",s4=e=>e===ae.LIGHT?XC.white:"#1e1e1e",P=(e,t=512)=>{let{width:r=512,height:o=r,mirror:n,style:i,...a}=typeof t=="number"?{width:t}:t;return g("svg",{"aria-hidden":"true",focusable:"false",role:"img",viewBox:`0 0 ${r} ${o}`,className:ZC({"rtl-mirror":n}),style:i,...a,children:typeof e=="string"?g("path",{fill:"currentColor",d:e}):e})},$={width:24,height:24,fill:"none",strokeWidth:2,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},pe={width:20,height:20,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},pG=P(B("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("rect",{x:3,y:8,width:18,height:4,rx:1}),g("line",{x1:12,y1:8,x2:12,y2:21}),g("path",{d:"M19 12v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-7"}),g("path",{d:"M7.5 8a2.5 2.5 0 0 1 0 -5a4.8 8 0 0 1 4.5 5a4.8 8 0 0 1 4.5 -5a2.5 2.5 0 0 1 0 5"})]}),$),ap=P(B("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),g("path",{d:"M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),g("line",{x1:"3",y1:"6",x2:"3",y2:"19"}),g("line",{x1:"12",y1:"6",x2:"12",y2:"19"}),g("line",{x1:"21",y1:"6",x2:"21",y2:"19"})]}),$),l4=P(B("svg",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),g("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),$),c4=P(B("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"12",cy:"12",r:"1"}),g("circle",{cx:"12",cy:"19",r:"1"}),g("circle",{cx:"12",cy:"5",r:"1"})]}),$),d4=P(B("svg",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M9 4v6l-2 4v2h10v-2l-2 -4v-6"}),g("line",{x1:"12",y1:"16",x2:"12",y2:"21"}),g("line",{x1:"8",y1:"4",x2:"16",y2:"4"})]}),$),Ia=P(B("g",{children:[g("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z",stroke:"currentColor",strokeWidth:"1.25"}),g("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z",stroke:"currentColor",strokeWidth:"1.25"}),g("mask",{id:"UnlockedIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:6,y:1,width:9,height:9,children:g("path",{stroke:"none",d:"M6.399 9.561V5.175c0-.93.401-1.823 1.116-2.48a3.981 3.981 0 0 1 2.693-1.028c1.01 0 1.98.37 2.694 1.027.715.658 1.116 1.55 1.116 2.481",fill:"#fff"})}),g("g",{mask:"url(#UnlockedIcon)",children:g("path",{stroke:"none",d:"M5.149 9.561v1.25h2.5v-1.25h-2.5Zm5.06-7.894V.417v1.25Zm2.559 3.508v1.25h2.5v-1.25h-2.5ZM7.648 8.51V5.175h-2.5V8.51h2.5Zm0-3.334c0-.564.243-1.128.713-1.561L6.668 1.775c-.959.883-1.52 2.104-1.52 3.4h2.5Zm.713-1.561a2.732 2.732 0 0 1 1.847-.697v-2.5c-1.31 0-2.585.478-3.54 1.358L8.36 3.614Zm1.847-.697c.71 0 1.374.26 1.847.697l1.694-1.839a5.231 5.231 0 0 0-3.54-1.358v2.5Zm1.847.697c.47.433.713.997.713 1.561h2.5c0-1.296-.56-2.517-1.52-3.4l-1.693 1.839Z",fill:"currentColor"})})]}),pe),Ns=P(B("g",{strokeWidth:"1.25",children:[g("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z"}),g("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z"}),g("path",{d:"M6.667 8.333V5.417C6.667 3.806 8.159 2.5 10 2.5c1.841 0 3.333 1.306 3.333 2.917v2.916"})]}),pe),m4=P(B(De,{children:[g("path",{d:"M38.5 83.5c-14-2-17.833-10.473-21-22.5C14.333 48.984 12 22 12 12.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),g("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m12.005 10.478 7.905 14.423L6 25.75l6.005-15.273Z",fill:"currentColor"}),g("path",{d:"M12.005 10.478c1.92 3.495 3.838 7 7.905 14.423m-7.905-14.423c3.11 5.683 6.23 11.368 7.905 14.423m0 0c-3.68.226-7.35.455-13.91.85m13.91-.85c-5.279.33-10.566.647-13.91.85m0 0c1.936-4.931 3.882-9.86 6.005-15.273M6 25.75c2.069-5.257 4.135-10.505 6.005-15.272",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:41,height:94,fill:"none"}),p4=P(B(De,{children:[g("path",{d:"M18.026 1.232c-5.268 13.125-5.548 33.555 3.285 42.311 8.823 8.75 33.31 12.304 42.422 13.523",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),g("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m72.181 59.247-13.058-10-2.948 13.62 16.006-3.62Z",fill:"currentColor"}),g("path",{d:"M72.181 59.247c-3.163-2.429-6.337-4.856-13.058-10m13.058 10c-5.145-3.936-10.292-7.882-13.058-10m0 0c-.78 3.603-1.563 7.196-2.948 13.62m2.948-13.62c-1.126 5.168-2.24 10.346-2.948 13.62m0 0c5.168-1.166 10.334-2.343 16.006-3.62m-16.006 3.62c5.51-1.248 11.01-2.495 16.006-3.62",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:85,height:71,fill:"none"}),u4=P(B(De,{children:[g("path",{d:"M1 77c14-2 31.833-11.973 35-24 3.167-12.016-6-35-9.5-43.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),g("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m24.165 1.093-2.132 16.309 13.27-4.258-11.138-12.05Z",fill:"currentColor"}),g("path",{d:"M24.165 1.093c-.522 3.953-1.037 7.916-2.132 16.309m2.131-16.309c-.835 6.424-1.68 12.854-2.13 16.308m0 0c3.51-1.125 7.013-2.243 13.27-4.257m-13.27 4.257c5.038-1.608 10.08-3.232 13.27-4.257m0 0c-3.595-3.892-7.197-7.777-11.14-12.05m11.14 12.05c-3.837-4.148-7.667-8.287-11.14-12.05",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:38,height:78,fill:"none"}),uG=P(g("g",{fill:"currentColor",children:g("path",{d:"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",fill:"currentColor"})}),{width:40,height:40,fill:"none"}),h4=P(B("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 6l4.153 11.793a0.365 .365 0 0 0 .331 .207a0.366 .366 0 0 0 .332 -.207l2.184 -4.793l4.787 -1.994a0.355 .355 0 0 0 .213 -.323a0.355 .355 0 0 0 -.213 -.323l-11.787 -4.36z"}),g("path",{d:"M13.5 13.5l4.5 4.5"})]}),{fill:"none",width:22,height:22,strokeWidth:1.25}),g4=P(B("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})]}),$),f4=P(B("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10.5 20.4l-6.9 -6.9c-.781 -.781 -.781 -2.219 0 -3l6.9 -6.9c.781 -.781 2.219 -.781 3 0l6.9 6.9c.781 .781 .781 2.219 0 3l-6.9 6.9c-.781 .781 -2.219 .781 -3 0z"})]}),$),b4=P(B("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"12",cy:"12",r:"9"})]}),$),x4=P(B("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),g("line",{x1:"15",y1:"16",x2:"19",y2:"12"}),g("line",{x1:"15",y1:"8",x2:"19",y2:"12"})]}),$),E4=P(g("path",{d:"M4.167 10h11.666",strokeWidth:"1.5"}),pe),y4=P(B("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z"}),g("path",{d:"M16 7h4"}),g("path",{d:"M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3"})]}),$),Os=P(B("g",{strokeWidth:"1.25",children:[g("path",{clipRule:"evenodd",d:"m7.643 15.69 7.774-7.773a2.357 2.357 0 1 0-3.334-3.334L4.31 12.357a3.333 3.333 0 0 0-.977 2.357v1.953h1.953c.884 0 1.732-.352 2.357-.977Z"}),g("path",{d:"m11.25 5.417 3.333 3.333"})]}),pe),w4=P(B("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"20",x2:"7",y2:"20"}),g("line",{x1:"14",y1:"20",x2:"21",y2:"20"}),g("line",{x1:"6.9",y1:"15",x2:"13.8",y2:"15"}),g("line",{x1:"10.2",y1:"6.3",x2:"16",y2:"20"}),g("polyline",{points:"5 20 11 4 13 4 20 20"})]}),$),v4=P(B("g",{strokeWidth:"1.25",children:[g("path",{d:"M12.5 6.667h.01"}),g("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z"}),g("path",{d:"m3.333 12.5 3.334-3.333c.773-.745 1.726-.745 2.5 0l4.166 4.166"}),g("path",{d:"m11.667 11.667.833-.834c.774-.744 1.726-.744 2.5 0l1.667 1.667"})]}),pe),C4=P(B("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3"}),g("path",{d:"M18 13.3l-6.3 -6.3"})]}),$),Jg=P(g("path",{strokeWidth:"1.25",d:"M10 4.167v11.666M4.167 10h11.666"}),pe),$g=P(g("path",{d:"M5 10h10",strokeWidth:"1.25"}),pe),T4=P(B("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M21 21l-6 -6"}),g("path",{d:"M3.268 12.043a7.017 7.017 0 0 0 6.634 4.957a7.012 7.012 0 0 0 7.043 -6.131a7 7 0 0 0 -5.314 -7.672a7.021 7.021 0 0 0 -8.241 4.403"}),g("path",{d:"M3 4v4h4"})]}),$),Bo=P(g("path",{strokeWidth:"1.25",d:"M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5"}),pe),A4=P(B("g",{strokeWidth:"1.25",children:[g("polyline",{points:"12 16 18 10 12 4"}),g("polyline",{points:"8 4 2 10 8 16"})]}),pe),Ec=P(B("g",{strokeWidth:"1.25",children:[g("path",{d:"M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z"}),g("path",{clipRule:"evenodd",d:"M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z"})]}),pe),yc=P(g("path",{clipRule:"evenodd",d:"M10 2.5h.328a6.25 6.25 0 0 0 6.6 10.372A7.5 7.5 0 1 1 10 2.493V2.5Z",stroke:"currentColor"}),pe),wc=P(g("g",{stroke:"currentColor",strokeLinejoin:"round",children:g("path",{d:"M10 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM10 4.167V2.5M14.167 5.833l1.166-1.166M15.833 10H17.5M14.167 14.167l1.166 1.166M10 15.833V17.5M5.833 14.167l-1.166 1.166M5 10H3.333M5.833 5.833 4.667 4.667"})}),{...pe,strokeWidth:1.5}),sp=P(B("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),g("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),g("line",{x1:"4",y1:"18",x2:"20",y2:"18"})]}),$),Ma=P(g("path",{strokeWidth:"1.25",d:"M3.333 14.167v1.666c0 .92.747 1.667 1.667 1.667h10c.92 0 1.667-.746 1.667-1.667v-1.666M5.833 9.167 10 13.333l4.167-4.166M10 3.333v10"}),pe),Bs=P(B("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"12",cy:"12",r:"9"}),g("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),g("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),$),S4=P(B("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"12",cy:"12",r:"9"}),g("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),g("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),$),ef=P(g("path",{strokeWidth:"1.25",d:"M9.167 5.833H5.833c-1.254 0-2.5 1.282-2.5 2.5v5.834c0 1.283 1.252 2.5 2.5 2.5h5.834c1.251 0 2.5-1.25 2.5-2.5v-3.334M8.333 11.667l8.334-8.334M12.5 3.333h4.167V7.5"}),pe),lp=P(g("path",{d:"M7.5 15.833c-3.583 1.167-3.583-2.083-5-2.5m10 4.167v-2.917c0-.833.083-1.166-.417-1.666 2.334-.25 4.584-1.167 4.584-5a3.833 3.833 0 0 0-1.084-2.667 3.5 3.5 0 0 0-.083-2.667s-.917-.25-2.917 1.084a10.25 10.25 0 0 0-5.166 0C5.417 2.333 4.5 2.583 4.5 2.583a3.5 3.5 0 0 0-.083 2.667 3.833 3.833 0 0 0-1.084 2.667c0 3.833 2.25 4.75 4.584 5-.5.5-.5 1-.417 1.666V17.5",strokeWidth:"1.25"}),pe),I4=P(B("g",{strokeWidth:"1.25",children:[g("path",{d:"M7.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM12.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM6.25 6.25c2.917-.833 4.583-.833 7.5 0M5.833 13.75c2.917.833 5.417.833 8.334 0"}),g("path",{d:"M12.917 14.167c0 .833 1.25 2.5 1.666 2.5 1.25 0 2.361-1.39 2.917-2.5.556-1.39.417-4.861-1.25-9.584-1.214-.846-2.5-1.116-3.75-1.25l-.833 2.084M7.083 14.167c0 .833-1.13 2.5-1.526 2.5-1.191 0-2.249-1.39-2.778-2.5-.529-1.39-.397-4.861 1.19-9.584 1.157-.846 2.318-1.116 3.531-1.25l.833 2.084"})]}),pe),M4=P(B("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 4l11.733 16h4.267l-11.733 -16z"}),g("path",{d:"M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772"})]}),$),k4=P(g("polyline",{fill:"none",stroke:"currentColor",points:"20 6 9 17 4 12"}),{width:24,height:24}),vc=P(B("g",{strokeWidth:"1.25",children:[g("path",{d:"M8.333 11.667a2.917 2.917 0 0 0 4.167 0l3.333-3.334a2.946 2.946 0 1 0-4.166-4.166l-.417.416"}),g("path",{d:"M11.667 8.333a2.917 2.917 0 0 0-4.167 0l-3.333 3.334a2.946 2.946 0 0 0 4.166 4.166l.417-.416"})]}),pe),L4=P("M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z",{width:448,height:512}),P4=P("M252 54L203 8a28 27 0 00-20-8H28C12 0 0 12 0 27v195c0 15 12 26 28 26h204c15 0 28-11 28-26V73a28 27 0 00-8-19zM130 213c-21 0-37-16-37-36 0-19 16-35 37-35 20 0 37 16 37 35 0 20-17 36-37 36zm56-169v56c0 4-4 6-7 6H44c-4 0-7-2-7-6V42c0-4 3-7 7-7h133l4 2 3 2a7 7 0 012 5z M296 201l87 95-188 205-78 9c-10 1-19-8-18-20l9-84zm141-14l-41-44a31 31 0 00-46 0l-38 41 87 95 38-42c13-14 13-36 0-50z",{width:448,height:512}),Fs=P(g("path",{d:"m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z",strokeWidth:"1.25"}),pe),hG=P("M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z",{width:384,height:512}),D4=P("M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"),cp=P(B("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 16l1.465 1.638a2 2 0 1 1 -3.015 .099l1.55 -1.737z"}),g("path",{d:"M13.737 9.737c2.299 -2.3 3.23 -5.095 2.081 -6.245c-1.15 -1.15 -3.945 -.217 -6.244 2.082c-2.3 2.299 -3.231 5.095 -2.082 6.244c1.15 1.15 3.946 .218 6.245 -2.081z"}),g("path",{d:"M7.492 11.818c.362 .362 .768 .676 1.208 .934l6.895 4.047c1.078 .557 2.255 -.075 3.692 -1.512c1.437 -1.437 2.07 -2.614 1.512 -3.692c-.372 -.718 -1.72 -3.017 -4.047 -6.895a6.015 6.015 0 0 0 -.934 -1.208"})]}),$),dp=P(B("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15 8h.01"}),g("path",{d:"M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5"}),g("path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4"}),g("path",{d:"M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598"}),g("path",{d:"M19 16v6"}),g("path",{d:"M22 19l-3 3l-3 -3"})]}),$),R4=P("M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z",{width:512,height:512}),gG=P("M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512}),fG=P("M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512}),N4=P("M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"),bG=P("M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"),tf=P(g("path",{d:"M7.5 10.833 4.167 7.5 7.5 4.167M4.167 7.5h9.166a3.333 3.333 0 0 1 0 6.667H12.5",strokeWidth:"1.25"}),pe),rf=P(g("path",{d:"M12.5 10.833 15.833 7.5 12.5 4.167M15.833 7.5H6.667a3.333 3.333 0 1 0 0 6.667H7.5",strokeWidth:"1.25"}),pe),O4=P("M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z",{mirror:!0}),B4=P(g("path",{d:"M5 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 7.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 17.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM7.25 8.917l5.5-2.834M7.25 11.083l5.5 2.834",strokeWidth:"1.5"}),pe),xG=P("M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"),EG=P("M16 5l-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4 4 4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2z",{width:24,height:24}),yG=P(B("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 9h-1a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-8a2 2 0 0 0 -2 -2h-1"}),g("path",{d:"M12 14v-11"}),g("path",{d:"M9 6l3 -3l3 3"})]}),$),wG=P(B(De,{children:[g("path",{fill:"currentColor",d:"M40 5.6v6.1l-4.1.7c-8.9 1.4-16.5 6.9-20.6 15C13 32 10.9 43 12.4 43c.4 0 2.4-1.3 4.4-3 5-3.9 12.1-7 18.2-7.7l5-.6v12.8l11.2-11.3L62.5 22 51.2 10.8 40-.5v6.1zm10.2 22.6L44 34.5v-6.8l-6.9.6c-3.9.3-9.8 1.7-13.2 3.1-3.5 1.4-6.5 2.4-6.7 2.2-.9-1 3-7.5 6.4-10.8C28 18.6 34.4 16 40.1 16c3.7 0 3.9-.1 3.9-3.2V9.5l6.2 6.3 6.3 6.2-6.3 6.2z"}),g("path",{stroke:"currentColor",fill:"currentColor",d:"M0 36v20h48v-6.2c0-6 0-6.1-2-4.3-1.1 1-2 2.9-2 4.2V52H4V34c0-17.3-.1-18-2-18s-2 .7-2 20z"})]}),{width:64,height:64}),vG=P(g("path",{stroke:"currentColor",strokeWidth:"40",fill:"currentColor",d:"M148 560a318 318 0 0 0 522 110 316 316 0 0 0 0-450 316 316 0 0 0-450 0c-11 11-21 22-30 34v4h47c25 0 46 21 46 46s-21 45-46 45H90c-13 0-25-6-33-14-9-9-14-20-14-33V156c0-25 20-45 45-45s45 20 45 45v32l1 1a401 401 0 0 1 623 509l212 212a42 42 0 0 1-59 59L698 757A401 401 0 0 1 65 570a42 42 0 0 1 83-10z"}),{width:1024}),of=P(B(De,{children:[B("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{d:"M13.889 4.167H8.333c-.767 0-1.389.622-1.389 1.389v5.555c0 .767.622 1.389 1.39 1.389h5.555c.767 0 1.389-.622 1.389-1.389V5.556c0-.767-.622-1.39-1.39-1.39Z",fill:"currentColor"}),g("path",{d:"M12.5 12.5v1.389a1.389 1.389 0 0 1-1.389 1.389H5.556a1.389 1.389 0 0 1-1.39-1.39V8.334a1.389 1.389 0 0 1 1.39-1.389h1.388"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),pe),nf=P(B(De,{children:[B("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.944 12.5H12.5v1.389a1.389 1.389 0 0 1-1.389 1.389H5.556a1.389 1.389 0 0 1-1.39-1.39V8.334a1.389 1.389 0 0 1 1.39-1.389h1.388",fill:"currentColor"}),g("path",{d:"M13.889 4.167H8.333c-.767 0-1.389.621-1.389 1.389v5.555c0 .767.622 1.389 1.39 1.389h5.555c.767 0 1.389-.622 1.389-1.389V5.556c0-.768-.622-1.39-1.39-1.39Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),pe),af=P(B(De,{children:[B("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M8.775 6.458h2.45a2.316 2.316 0 0 1 2.317 2.316v2.452a2.316 2.316 0 0 1-2.316 2.316H8.774a2.316 2.316 0 0 1-2.317-2.316V8.774a2.316 2.316 0 0 1 2.317-2.316Z",fill:"currentColor"}),g("path",{d:"M5.441 9.792h2.451a2.316 2.316 0 0 1 2.316 2.316v2.45a2.316 2.316 0 0 1-2.316 2.317h-2.45a2.316 2.316 0 0 1-2.317-2.316v-2.451a2.316 2.316 0 0 1 2.316-2.316ZM12.108 3.125h2.45a2.316 2.316 0 0 1 2.317 2.316v2.451a2.316 2.316 0 0 1-2.316 2.316h-2.451a2.316 2.316 0 0 1-2.316-2.316v-2.45a2.316 2.316 0 0 1 2.316-2.317Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),pe),sf=P(B(De,{children:[B("g",{clipPath:"url(#a)",children:[g("path",{d:"M5.441 9.792h2.451a2.316 2.316 0 0 1 2.316 2.316v2.45a2.316 2.316 0 0 1-2.316 2.317h-2.45a2.316 2.316 0 0 1-2.317-2.316v-2.451a2.316 2.316 0 0 1 2.316-2.316Z",stroke:"currentColor",strokeWidth:"1.25"}),g("path",{d:"M5.441 9.792h2.451a2.316 2.316 0 0 1 2.316 2.316v2.45a2.316 2.316 0 0 1-2.316 2.317h-2.45a2.316 2.316 0 0 1-2.317-2.316v-2.451a2.316 2.316 0 0 1 2.316-2.316Z",stroke:"currentColor",strokeWidth:"1.25"}),g("mask",{id:"SendToBackIcon",fill:"#fff",children:g("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.167 5.833v2.06a2.941 2.941 0 0 0 2.94 2.94h2.06v.393a2.941 2.941 0 0 1-2.941 2.94h-.393v-2.058a2.941 2.941 0 0 0-2.94-2.941h-2.06v-.393a2.941 2.941 0 0 1 2.942-2.94h.392Z"})}),g("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.167 5.833v2.06a2.941 2.941 0 0 0 2.94 2.94h2.06v.393a2.941 2.941 0 0 1-2.941 2.94h-.393v-2.058a2.941 2.941 0 0 0-2.94-2.941h-2.06v-.393a2.941 2.941 0 0 1 2.942-2.94h.392Z",fill:"currentColor"}),g("path",{d:"M9.167 5.833h1.25v-1.25h-1.25v1.25Zm5 5h1.25v-1.25h-1.25v1.25Zm-3.334 3.334h-1.25v1.25h1.25v-1.25Zm-5-5h-1.25v1.25h1.25v-1.25Zm2.084-3.334v2.06h2.5v-2.06h-2.5Zm0 2.06a4.191 4.191 0 0 0 4.19 4.19v-2.5a1.691 1.691 0 0 1-1.69-1.69h-2.5Zm4.19 4.19h2.06v-2.5h-2.06v2.5Zm.81-1.25v.393h2.5v-.393h-2.5Zm0 .393c0 .933-.758 1.69-1.691 1.69v2.5a4.191 4.191 0 0 0 4.19-4.19h-2.5Zm-1.691 1.69h-.393v2.5h.393v-2.5Zm.857 1.25v-2.058h-2.5v2.059h2.5Zm0-2.058a4.191 4.191 0 0 0-4.19-4.191v2.5c.933 0 1.69.757 1.69 1.69h2.5Zm-4.19-4.191h-2.06v2.5h2.06v-2.5Zm-.81 1.25v-.393h-2.5v.393h2.5Zm0-.393c0-.934.758-1.69 1.692-1.69v-2.5a4.191 4.191 0 0 0-4.192 4.19h2.5Zm1.692-1.69h.392v-2.5h-.392v2.5Z",fill:"currentColor",mask:"url(#SendToBackIcon)"}),g("path",{d:"M12.108 3.125h2.45a2.316 2.316 0 0 1 2.317 2.316v2.451a2.316 2.316 0 0 1-2.316 2.316h-2.451a2.316 2.316 0 0 1-2.316-2.316v-2.45a2.316 2.316 0 0 1 2.316-2.317Z",stroke:"currentColor",strokeWidth:"1.25"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),pe),lf=P(B(De,{children:[B("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M3.333 3.333h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v7.083c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V8.125c0-.92-.746-1.667-1.666-1.667ZM6.875 6.458h-.417c-.92 0-1.666.747-1.666 1.667v3.75c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667v-3.75c0-.92-.747-1.667-1.667-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),pe),cf=P(B(De,{children:[B("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M6.875 3.125h-.417c-.92 0-1.666.746-1.666 1.667v7.083c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667V4.792c0-.92-.747-1.667-1.667-1.667ZM13.542 5.817h-.417c-.92 0-1.667.747-1.667 1.667v4.391c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V7.484c0-.92-.746-1.667-1.666-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),pe),df=P(B(De,{children:[B("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M15.208 4.792H8.125c-.92 0-1.667.746-1.667 1.666v.417c0 .92.747 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM12.516 11.458H8.125c-.92 0-1.667.746-1.667 1.667v.417c0 .92.747 1.666 1.667 1.666h4.391c.92 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.667-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),pe),mf=P(B(De,{children:[B("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M16.667 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M11.875 4.792H4.792c-.92 0-1.667.746-1.667 1.666v.417c0 .92.746 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM11.683 11.458H7.292c-.92 0-1.667.746-1.667 1.667v.417c0 .92.746 1.666 1.667 1.666h4.39c.921 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.666-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),pe),F4=P(B(De,{children:[B("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M16.667 3.333v13.334M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M14.375 10.208v-.416c0-.92-.746-1.667-1.667-1.667H7.292c-.92 0-1.667.746-1.667 1.667v.416c0 .92.746 1.667 1.667 1.667h5.416c.92 0 1.667-.746 1.667-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),pe),z4=P(B(De,{children:[B("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M3.333 3.333h13.334M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M10.208 5.625h-.416c-.92 0-1.667.746-1.667 1.667v5.416c0 .92.746 1.667 1.667 1.667h.416c.92 0 1.667-.746 1.667-1.667V7.292c0-.92-.746-1.667-1.667-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),pe),pf=P(B("g",{stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M1.667 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M8.333 10h3.334",strokeLinejoin:"round"}),g("path",{d:"M15.417 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M6.875 4.792h-.417c-.92 0-1.666.746-1.666 1.666v7.084c0 .92.746 1.666 1.666 1.666h.417c.92 0 1.667-.746 1.667-1.666V6.458c0-.92-.747-1.666-1.667-1.666ZM13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v3.75c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667v-3.75c0-.92-.746-1.667-1.666-1.667Z"})]}),pe),uf=P(B("g",{stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M10 18.333v-2.916",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M10 11.667V8.333",strokeLinejoin:"round"}),g("path",{d:"M10 4.583V1.667",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M4.792 13.125v.417c0 .92.746 1.666 1.666 1.666h7.084c.92 0 1.666-.746 1.666-1.666v-.417c0-.92-.746-1.667-1.666-1.667H6.458c-.92 0-1.666.746-1.666 1.667ZM6.458 6.458v.417c0 .92.747 1.667 1.667 1.667h3.75c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666h-3.75c-.92 0-1.667.746-1.667 1.666Z"})]}),pe),mp=P(B("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"9",cy:"7",r:"4"}),g("path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"}),g("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}),g("path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85"})]}),$),CG=P("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z"),TG=P("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z"),co=P(B(De,{children:[g("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:g("path",{d:"M15 5 5 15M5 5l10 10"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),pe),AG=P("M464 0c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48H176c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h288M176 416c-44.112 0-80-35.888-80-80V128H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48v-48H176z",{mirror:!0}),SG=P("M11.553 22.894a.998.998 0 00.894 0s3.037-1.516 5.465-4.097C19.616 16.987 21 14.663 21 12V5a1 1 0 00-.649-.936l-8-3a.998.998 0 00-.702 0l-8 3A1 1 0 003 5v7c0 2.663 1.384 4.987 3.088 6.797 2.428 2.581 5.465 4.097 5.465 4.097zm-1.303-8.481l6.644-6.644a.856.856 0 111.212 1.212l-7.25 7.25a.856.856 0 01-1.212 0l-3.75-3.75a.856.856 0 111.212-1.212l3.144 3.144z",{width:24}),IG=P("M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm32-48h224V288l-23.5-23.5c-4.7-4.7-12.3-4.7-17 0L176 352l-39.5-39.5c-4.7-4.7-12.3-4.7-17 0L80 352v64zm48-240c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z",{width:384,height:512}),hf=Ir.memo(({theme:e})=>P(B(De,{children:[g("path",{d:"M25 26H111V111H25",fill:Oo(e)}),g("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:Oo(e),strokeWidth:"2"}),g("path",{d:"M100 100H160V160H100",fill:Oo(e)}),g("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:Oo(e),strokeWidth:"2"}),B("g",{fill:s4(e),stroke:Oo(e),strokeWidth:"6",children:[g("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),g("rect",{x:"2.5",y:"149.5",width:"30",height:"30"}),g("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),g("rect",{x:"147.5",y:"2.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})),gf=Ir.memo(({theme:e})=>P(B(De,{children:[g("path",{d:"M25 26H111V111H25",fill:Oo(e)}),g("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:Oo(e),strokeWidth:"2"}),g("path",{d:"M100 100H160V160H100",fill:Oo(e)}),g("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:Oo(e),strokeWidth:"2"}),B("g",{fill:s4(e),stroke:Oo(e),strokeWidth:"6",children:[g("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),g("rect",{x:"78.5",y:"149.5",width:"30",height:"30"}),g("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),g("rect",{x:"147.5",y:"78.5",width:"30",height:"30"}),g("rect",{x:"105.5",y:"2.5",width:"30",height:"30"}),g("rect",{x:"2.5",y:"102.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})),H4=P(g("g",{strokeWidth:1.25,children:g("path",{d:"M5.879 2.625h8.242a3.27 3.27 0 0 1 3.254 3.254v8.242a3.27 3.27 0 0 1-3.254 3.254H5.88a3.27 3.27 0 0 1-3.254-3.254V5.88A3.27 3.27 0 0 1 5.88 2.626l-.001-.001ZM4.518 16.118l7.608-12.83m.198 13.934 5.051-9.897M2.778 9.675l9.348-6.387m-7.608 12.83 12.857-8.793"})}),pe),_4=P(B(De,{children:[g("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),g("mask",{id:"FillHachureIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:2,y:2,width:16,height:16,children:g("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"1.25"})}),g("g",{mask:"url(#FillHachureIcon)",children:g("path",{d:"M2.258 15.156 15.156 2.258M7.324 20.222 20.222 7.325m-20.444 5.35L12.675-.222m-8.157 18.34L17.416 5.22",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})})]}),pe),G4=P(B(De,{children:[B("g",{clipPath:"url(#a)",children:[g("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),g("mask",{id:"FillCrossHatchIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:-1,y:-1,width:22,height:22,children:g("path",{d:"M2.426 15.044 15.044 2.426M7.383 20 20 7.383M0 12.617 12.617 0m-7.98 17.941L17.256 5.324m-2.211 12.25L2.426 4.956M20 12.617 7.383 0m5.234 20L0 7.383m17.941 7.98L5.324 2.745",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),g("g",{mask:"url(#FillCrossHatchIcon)",children:g("path",{d:"M14.121 2H5.88A3.879 3.879 0 0 0 2 5.879v8.242A3.879 3.879 0 0 0 5.879 18h8.242A3.879 3.879 0 0 0 18 14.121V5.88A3.879 3.879 0 0 0 14.121 2Z",fill:"currentColor"})})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),pe),U4=P(B(De,{children:[g("g",{clipPath:"url(#a)",children:g("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z",stroke:"currentColor",strokeWidth:"1.25"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),{...pe,fill:"currentColor"}),ff=P(g(De,{children:g("path",{d:"M4.167 10h11.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),pe),W4=P(g("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),pe),Y4=P(g("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"3.75",strokeLinecap:"round",strokeLinejoin:"round"}),pe),MG=Ir.memo(({theme:e})=>P(g("path",{d:"M6 10H34",stroke:Oo(e),strokeWidth:2,fill:"none",strokeLinecap:"round"}),{width:40,height:20})),V4=P(B("g",{strokeWidth:"2",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 12h2"}),g("path",{d:"M17 12h2"}),g("path",{d:"M11 12h2"})]}),$),K4=P(B("g",{strokeWidth:"2",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 12v.01"}),g("path",{d:"M8 12v.01"}),g("path",{d:"M12 12v.01"}),g("path",{d:"M16 12v.01"}),g("path",{d:"M20 12v.01"})]}),$),X4=P(g("path",{d:"M2.5 12.038c1.655-.885 5.9-3.292 8.568-4.354 2.668-1.063.101 2.821 1.32 3.104 1.218.283 5.112-1.814 5.112-1.814",strokeWidth:"1.25"}),pe),Z4=P(g("path",{d:"M2.5 12.563c1.655-.886 5.9-3.293 8.568-4.355 2.668-1.062.101 2.822 1.32 3.105 1.218.283 5.112-1.814 5.112-1.814m-13.469 2.23c2.963-1.586 6.13-5.62 7.468-4.998 1.338.623-1.153 4.11-.132 5.595 1.02 1.487 6.133-1.43 6.133-1.43",strokeWidth:"1.25"}),pe),j4=P(g("path",{d:"M2.5 11.936c1.737-.879 8.627-5.346 10.42-5.268 1.795.078-.418 5.138.345 5.736.763.598 3.53-1.789 4.235-2.147M2.929 9.788c1.164-.519 5.47-3.28 6.987-3.114 1.519.165 1 3.827 2.121 4.109 1.122.281 3.839-2.016 4.606-2.42",strokeWidth:"1.25"}),pe),q4=P(B("svg",{strokeWidth:"1.5",children:[g("path",{d:"M3.33334 9.99998V6.66665C3.33334 6.04326 3.33403 4.9332 3.33539 3.33646C4.95233 3.33436 6.06276 3.33331 6.66668 3.33331H10"}),g("path",{d:"M13.3333 3.33331V3.34331"}),g("path",{d:"M16.6667 3.33331V3.34331"}),g("path",{d:"M16.6667 6.66669V6.67669"}),g("path",{d:"M16.6667 10V10.01"}),g("path",{d:"M3.33334 13.3333V13.3433"}),g("path",{d:"M16.6667 13.3333V13.3433"}),g("path",{d:"M3.33334 16.6667V16.6767"}),g("path",{d:"M6.66666 16.6667V16.6767"}),g("path",{d:"M10 16.6667V16.6767"}),g("path",{d:"M13.3333 16.6667V16.6767"}),g("path",{d:"M16.6667 16.6667V16.6767"})]}),pe),Q4=P(B("g",{strokeWidth:"1.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 12v-4a4 4 0 0 1 4 -4h4"}),g("line",{x1:"16",y1:"4",x2:"16",y2:"4.01"}),g("line",{x1:"20",y1:"4",x2:"20",y2:"4.01"}),g("line",{x1:"20",y1:"8",x2:"20",y2:"8.01"}),g("line",{x1:"20",y1:"12",x2:"20",y2:"12.01"}),g("line",{x1:"4",y1:"16",x2:"4",y2:"16.01"}),g("line",{x1:"20",y1:"16",x2:"20",y2:"16.01"}),g("line",{x1:"4",y1:"20",x2:"4",y2:"20.01"}),g("line",{x1:"8",y1:"20",x2:"8",y2:"20.01"}),g("line",{x1:"12",y1:"20",x2:"12",y2:"20.01"}),g("line",{x1:"16",y1:"20",x2:"16",y2:"20.01"}),g("line",{x1:"20",y1:"20",x2:"20",y2:"20.01"})]}),$),J4=P(g("path",{d:"M6 10H34",stroke:"currentColor",strokeWidth:2,fill:"none"}),{width:40,height:20}),$4=Ir.memo(({flip:e=!1})=>P(B("g",{transform:e?"translate(40, 0) scale(-1, 1)":"",stroke:"currentColor",strokeWidth:2,fill:"none",children:[g("path",{d:"M34 10H6M34 10L27 5M34 10L27 15"}),g("path",{d:"M27.5 5L34.5 10L27.5 15"})]}),{width:40,height:20})),bf=Ir.memo(({flip:e=!1})=>P(B("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",children:[g("path",{d:"M32 10L6 10",strokeWidth:2}),g("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})]}),{width:40,height:20})),ey=Ir.memo(({flip:e=!1})=>P(B("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeWidth:2,children:[g("path",{d:"M26 10L6 10"}),g("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})]}),{width:40,height:20})),ty=Ir.memo(({flip:e=!1})=>P(g("g",{transform:e?"translate(40, 0) scale(-1, 1)":"",children:g("path",{d:"M34 10H5.99996M34 10L34 5M34 10L34 15",stroke:"currentColor",strokeWidth:2,fill:"none"})}),{width:40,height:20})),ry=Ir.memo(({flip:e=!1})=>P(B("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",children:[g("path",{d:"M32 10L6 10",strokeWidth:2}),g("path",{d:"M27.5 5.5L34.5 10L27.5 14.5L27.5 5.5"})]}),{width:40,height:20})),oy=Ir.memo(({flip:e=!1})=>P(B("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeWidth:2,strokeLinejoin:"round",children:[g("path",{d:"M6,9.5H27"}),g("path",{d:"M27,5L34,10L27,14Z",fill:"none"})]}),{width:40,height:20})),ny=Ir.memo(({flip:e=!1})=>P(B("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeLinejoin:"round",strokeWidth:2,children:[g("path",{d:"M6,9.5H20"}),g("path",{d:"M27,5L34,10L27,14L20,9.5Z"})]}),{width:40,height:20})),iy=Ir.memo(({flip:e=!1})=>P(B("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeLinejoin:"round",strokeWidth:2,children:[g("path",{d:"M6,9.5H20"}),g("path",{d:"M27,5L34,10L27,14L20,9.5Z"})]}),{width:40,height:20})),ay=P(B(De,{children:[g("g",{clipPath:"url(#a)",children:g("path",{d:"M14.167 6.667a3.333 3.333 0 0 0-3.334-3.334H9.167a3.333 3.333 0 0 0 0 6.667h1.666a3.333 3.333 0 0 1 0 6.667H9.167a3.333 3.333 0 0 1-3.334-3.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),pe),sy=P(B(De,{children:[g("g",{clipPath:"url(#a)",children:g("path",{d:"M5 16.667V3.333L10 15l5-11.667v13.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),pe),ly=P(B(De,{children:[g("g",{clipPath:"url(#a)",children:g("path",{d:"M5.833 3.333v13.334h8.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),pe),cy=P(g(De,{children:g("path",{d:"m1.667 3.333 6.666 13.334M8.333 3.333 1.667 16.667M11.667 3.333v13.334h6.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),pe),xf=P(B("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 7v-2h13v2"}),g("path",{d:"M10 5v14"}),g("path",{d:"M12 19h-4"}),g("path",{d:"M15 13v-1h6v1"}),g("path",{d:"M18 12v7"}),g("path",{d:"M17 19h2"})]}),$),dy=P(g(De,{children:g("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:g("path",{d:"M5.833 16.667v-10a3.333 3.333 0 0 1 3.334-3.334h1.666a3.333 3.333 0 0 1 3.334 3.334v10M5.833 10.833h8.334"})})}),pe),my=P(B(De,{children:[g("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:g("path",{d:"M5.833 6.667 2.5 10l3.333 3.333M14.167 6.667 17.5 10l-3.333 3.333M11.667 3.333 8.333 16.667"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),pe),py=P(B("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),g("line",{x1:"4",y1:"12",x2:"12",y2:"12"}),g("line",{x1:"4",y1:"16",x2:"16",y2:"16"})]}),$),uy=P(B("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),g("line",{x1:"8",y1:"12",x2:"16",y2:"12"}),g("line",{x1:"6",y1:"16",x2:"18",y2:"16"})]}),$),hy=P(B("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),g("line",{x1:"10",y1:"12",x2:"20",y2:"12"}),g("line",{x1:"8",y1:"16",x2:"20",y2:"16"})]}),$),gy=Ir.memo(({theme:e})=>P(B("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"4",x2:"20",y2:"4"}),g("rect",{x:"9",y:"8",width:"6",height:"12",rx:"2"})]}),$)),fy=Ir.memo(({theme:e})=>P(B("g",{strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"20",x2:"20",y2:"20"}),g("rect",{x:"9",y:"4",width:"6",height:"12",rx:"2"})]}),$)),by=Ir.memo(({theme:e})=>P(B("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"12",x2:"9",y2:"12"}),g("line",{x1:"15",y1:"12",x2:"20",y2:"12"}),g("rect",{x:"9",y:"6",width:"6",height:"12",rx:"2"})]}),$)),xy=P(g("path",{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zM393.4 288H328v112c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V288h-65.4c-14.3 0-21.4-17.2-11.3-27.3l105.4-105.4c6.2-6.2 16.4-6.2 22.6 0l105.4 105.4c10.1 10.1 2.9 27.3-11.3 27.3z",fill:"currentColor"}),{width:640,height:512}),kG=P(g("path",{d:"M480 416C497.7 416 512 430.3 512 448C512 465.7 497.7 480 480 480H150.6C133.7 480 117.4 473.3 105.4 461.3L25.37 381.3C.3786 356.3 .3786 315.7 25.37 290.7L258.7 57.37C283.7 32.38 324.3 32.38 349.3 57.37L486.6 194.7C511.6 219.7 511.6 260.3 486.6 285.3L355.9 416H480zM265.4 416L332.7 348.7L195.3 211.3L70.63 336L150.6 416L265.4 416z"})),pp=P(B("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5"}),g("path",{d:"M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5"}),g("path",{d:"M14 5.5a1.5 1.5 0 0 1 3 0v6.5"}),g("path",{d:"M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47"})]}),$),Ef=P(B(De,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}),g("path",{d:"M7 11l5 5l5 -5"}),g("path",{d:"M12 4l0 12"})]}),$),up=P(B(De,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"}),g("path",{d:"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"})]}),$),Ey=P(B("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M7 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),g("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),g("path",{d:"M9.15 14.85l8.85 -10.85"}),g("path",{d:"M6 4l8.85 10.85"})]}),$),yy=P(B(De,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}),g("path",{d:"M12 17l0 .01"}),g("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),$),LG=P(B(De,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M7 4v16l13 -8z"})]}),$),PG=P(B(De,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M17 4h-10a3 3 0 0 0 -3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3 -3v-10a3 3 0 0 0 -3 -3z",strokeWidth:"0",fill:"currentColor"})]}),$),DG=P(B(De,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 12l5 5l10 -10"})]}),$),wy=P(B(De,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10.24 3.957l-8.422 14.06a1.989 1.989 0 0 0 1.7 2.983h16.845a1.989 1.989 0 0 0 1.7 -2.983l-8.423 -14.06a1.989 1.989 0 0 0 -3.4 0z"}),g("path",{d:"M12 9v4"}),g("path",{d:"M12 17h.01"})]}),$),vy=P(B("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M11 7l6 6"}),g("path",{d:"M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z"})]}),$),Cy=P(B("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 3l-4 7h8z"}),g("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),g("path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"})]}),$),hp=P(B("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 7l16 0"}),g("path",{d:"M4 17l16 0"}),g("path",{d:"M7 4l0 16"}),g("path",{d:"M17 4l0 16"})]}),$),gp=P(g("path",{fill:"currentColor",d:"M407.48,111.18C335.587,108.103 269.573,152.338 245.08,220C220.587,152.338 154.573,108.103 82.68,111.18C80.285,168.229 107.577,222.632 154.74,254.82C178.908,271.419 193.35,298.951 193.27,328.27L193.27,379.13L296.9,379.13L296.9,328.27C296.816,298.953 311.255,271.42 335.42,254.82C382.596,222.644 409.892,168.233 407.48,111.18Z"})),zs=P(B("g",{strokeWidth:"1.25",children:[g("path",{d:"M4.16602 10H15.8327"}),g("path",{d:"M12.5 13.3333L15.8333 10"}),g("path",{d:"M12.5 6.66666L15.8333 9.99999"})]}),pe),fp=P(B("g",{fill:"none",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",transform:"rotate(90 10 10)",children:[g("path",{clipRule:"evenodd",d:"m9.644 13.69 7.774-7.773a2.357 2.357 0 0 0-3.334-3.334l-7.773 7.774L8 12l1.643 1.69Z"}),g("path",{d:"m13.25 3.417 3.333 3.333M10 10l2-2M5 15l3-3M2.156 17.894l1-1M5.453 19.029l-.144-1.407M2.377 11.887l.866 1.118M8.354 17.273l-1.194-.758M.953 14.652l1.408.13"})]}),20),Hs=P(B("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z"}),g("path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3"}),g("path",{d:"M15 6l3 3"}),g("path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"}),g("path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"})]}),$),RG=P(B("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z"}),g("path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3"}),g("path",{d:"M15 6l3 3"}),g("path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"}),g("path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"})]}),$),Cc=P(B("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M11.217 19.384a3.501 3.501 0 0 0 6.783 -1.217v-5.167l-6 -3.35"}),g("path",{d:"M5.214 15.014a3.501 3.501 0 0 0 4.446 5.266l4.34 -2.534v-6.946"}),g("path",{d:"M6 7.63c-1.391 -.236 -2.787 .395 -3.534 1.689a3.474 3.474 0 0 0 1.271 4.745l4.263 2.514l6 -3.348"}),g("path",{d:"M12.783 4.616a3.501 3.501 0 0 0 -6.783 1.217v5.067l6 3.45"}),g("path",{d:"M18.786 8.986a3.501 3.501 0 0 0 -4.446 -5.266l-4.34 2.534v6.946"}),g("path",{d:"M18 16.302c1.391 .236 2.787 -.395 3.534 -1.689a3.474 3.474 0 0 0 -1.271 -4.745l-4.308 -2.514l-5.955 3.42"})]}),$),Ty=P(B("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2"}),g("path",{d:"M4 16v2a2 2 0 0 0 2 2h2"}),g("path",{d:"M16 4h2a2 2 0 0 1 2 2v2"}),g("path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2"})]}),$),_s=P(B("g",{stroke:"currentColor",fill:"none",strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),g("path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6"})]}),$),Ay=P(B("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10.585 10.587a2 2 0 0 0 2.829 2.828"}),g("path",{d:"M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87"}),g("path",{d:"M3 3l18 18"})]}),$),Sy=P(B("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"}),g("path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"}),g("path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"}),g("path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"}),g("path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"}),g("path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"})]}),$),Iy=P(B("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"}),g("path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"}),g("path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"}),g("path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"}),g("path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"}),g("path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"})]}),$),bp=P(B("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"}),g("path",{d:"M21 21l-6 -6"})]}),$),My=P(B("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M20.984 12.53a9 9 0 1 0 -7.552 8.355"}),g("path",{d:"M12 7v5l3 3"}),g("path",{d:"M19 16l-2 3h4l-2 3"})]}),$),ky=P(B("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M9 2m0 3a3 3 0 0 1 3 -3h0a3 3 0 0 1 3 3v5a3 3 0 0 1 -3 3h0a3 3 0 0 1 -3 -3z"}),g("path",{d:"M5 10a7 7 0 0 0 14 0"}),g("path",{d:"M8 21l8 0"}),g("path",{d:"M12 17l0 4"})]}),$),Ly=P(B("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 3l18 18"}),g("path",{d:"M9 5a3 3 0 0 1 6 0v5a3 3 0 0 1 -.13 .874m-2 2a3 3 0 0 1 -3.87 -2.872v-1"}),g("path",{d:"M5 10a7 7 0 0 0 10.846 5.85m2 -2a6.967 6.967 0 0 0 1.152 -3.85"}),g("path",{d:"M8 21l8 0"}),g("path",{d:"M12 17l0 4"})]}),$),xp=P(B("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11"})]}),$),Py=P(B("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 8m0 1a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-6a1 1 0 0 1 -1 -1z"}),g("path",{d:"M12 20v.01"}),g("path",{d:"M16 20v.01"}),g("path",{d:"M8 20v.01"}),g("path",{d:"M4 20v.01"}),g("path",{d:"M4 16v.01"}),g("path",{d:"M4 12v.01"}),g("path",{d:"M4 8v.01"}),g("path",{d:"M4 4v.01"}),g("path",{d:"M8 4v.01"}),g("path",{d:"M12 4v.01"}),g("path",{d:"M16 4v.01"}),g("path",{d:"M20 4v.01"}),g("path",{d:"M20 8v.01"}),g("path",{d:"M20 12v.01"}),g("path",{d:"M20 16v.01"}),g("path",{d:"M20 20v.01"})]}),$),Dy=P(B("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 3v18"}),g("path",{d:"M19 21v-18"}),g("path",{d:"M5 7h14"}),g("path",{d:"M5 15h14"}),g("path",{d:"M8 13v4"}),g("path",{d:"M11 13v4"}),g("path",{d:"M16 13v4"}),g("path",{d:"M14 5v4"}),g("path",{d:"M11 5v4"}),g("path",{d:"M8 5v4"}),g("path",{d:"M3 21h18"})]}),$),Ry=P(B("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 12l18 0"}),g("path",{d:"M7 16l10 0l-10 5l0 -5"}),g("path",{d:"M7 8l10 0l-10 -5l0 5"})]}),$),Ny=P(B("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 3l0 18"}),g("path",{d:"M16 7l0 10l5 0l-5 -10"}),g("path",{d:"M8 7l0 10l-5 0l5 -10"})]}),$),yf=P(B("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z"}),g("path",{d:"M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2"}),g("path",{d:"M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"})]}),$),Ep=P(B("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15 15m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0"}),g("path",{d:"M22 22l-3 -3"}),g("path",{d:"M6 18h-1a2 2 0 0 1 -2 -2v-1"}),g("path",{d:"M3 11v-1"}),g("path",{d:"M3 6v-1a2 2 0 0 1 2 -2h1"}),g("path",{d:"M10 3h1"}),g("path",{d:"M15 3h1a2 2 0 0 1 2 2v1"})]}),$),Oy=P(B("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),g("path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"}),g("path",{d:"M4 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75"}),g("path",{d:"M10 15l2 6l2 -6"}),g("path",{d:"M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"})]}),$),By=P(B("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),g("path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"}),g("path",{d:"M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"}),g("path",{d:"M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6"}),g("path",{d:"M11 21v-6l3 6v-6"})]}),$),Fy=P(B("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 13v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a2 2 0 0 0 6 0v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a8 8 0 0 1 -16 0"}),g("path",{d:"M4 8l5 0"}),g("path",{d:"M15 8l4 0"})]}),$),zy=P(B("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 14c.83 .642 2.077 1.017 3.5 1c1.423 .017 2.67 -.358 3.5 -1c.83 -.642 2.077 -1.017 3.5 -1c1.423 -.017 2.67 .358 3.5 1"}),g("path",{d:"M8 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"}),g("path",{d:"M12 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"}),g("path",{d:"M3 10h14v5a6 6 0 0 1 -6 6h-2a6 6 0 0 1 -6 -6v-5z"}),g("path",{d:"M16.746 16.726a3 3 0 1 0 .252 -5.555"})]}),$),Hy=P(B("g",{stroke:"currentColor",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 5a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-16a1 1 0 0 1-1-1v-10zM7 20h10M9 16v4M15 16v4"})]}),{...$,strokeWidth:1.5}),NG=P(B("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10 12l10 0"}),g("path",{d:"M10 12l4 4"}),g("path",{d:"M10 12l4 -4"}),g("path",{d:"M4 4l0 16"})]}),$),_y=P(B("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M2 8a4 4 0 0 1 4 -4h12a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-12a4 4 0 0 1 -4 -4v-8z"}),g("path",{d:"M10 9l5 3l-5 3z"})]}),$),Gy=P(B("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 6h18"}),g("path",{d:"M3 12h18"}),g("path",{d:"M3 18h18"}),g("path",{d:"M6 3v18"}),g("path",{d:"M12 3v18"}),g("path",{d:"M18 3v18"})]}),$);Oe();import{jsx as qC}from"react/jsx-runtime";var jC=(e,t)=>{let r=new Set(ue(e.filter(o=>ee(o)),t).map(o=>o.id));return{elements:e.map(o=>t.selectedElementIds[o.id]?ie(o,{isDeleted:!0}):o.frameId&&r.has(o.frameId)?ie(o,{isDeleted:!0}):Ie(o)&&t.selectedElementIds[o.containerId]?ie(o,{isDeleted:!0}):o),appState:{...t,selectedElementIds:{},selectedGroupIds:{}}}},Uy=(e,t)=>{if(e.editingGroupId){let r=tt(Ee(t),e.editingGroupId);if(r.length)return{...e,selectedElementIds:{[r[0].id]:!0}}}return e},Tc=H({name:"deleteSelectedElements",label:"labels.delete",icon:Bo,trackEvent:{category:"element",action:"delete"},perform:(e,t,r,o)=>{if(t.editingLinearElement){let{elementId:a,selectedPointsIndices:s,startBindingElement:l,endBindingElement:c}=t.editingLinearElement,d=o.scene.getNonDeletedElementsMap(),m=Z.getElement(a,d);if(!m||s==null)return!1;if(m.points.length<2){let u=e.map(x=>x.id===m.id?ie(x,{isDeleted:!0}):x),h=Uy(t,u);return{elements:u,appState:{...h,editingLinearElement:null},storeAction:D.CAPTURE}}let p={startBindingElement:s?.includes(0)?null:l,endBindingElement:s?.includes(m.points.length-1)?null:c};return Z.deletePoints(m,s),{elements:e,appState:{...t,editingLinearElement:{...t.editingLinearElement,...p,selectedPointsIndices:s?.[0]>0?[s[0]-1]:[0]}},storeAction:D.CAPTURE}}let{elements:n,appState:i}=jC(e,t);return Kd(n,e.filter(({id:a})=>t.selectedElementIds[a])),i=Uy(i,n),{elements:n,appState:{...i,activeTool:Qe(t,{type:"selection"}),multiElement:null,activeEmbeddable:null},storeAction:Ye(Ee(e),t)?D.CAPTURE:D.NONE}},keyTest:(e,t,r)=>(e.key===T.BACKSPACE||e.key===T.DELETE)&&!e[T.CTRL_OR_CMD],PanelComponent:({elements:e,appState:t,updateData:r})=>qC(ce,{type:"button",icon:Bo,title:b("labels.delete"),"aria-label":b("labels.delete"),onClick:()=>r(null),visible:Ye(Ee(e),t)})});f();f();se();no();mr();Xe();ni();G();var wf=(e,t)=>e.frameId===t||e.id===t,Yy=(e,t,r)=>{let o=[],n=[],i=null,a=-1,s=X(r||ue(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0}));for(;++a<e.length;){let l=e[a];s.get(l.id)?(n.length&&(o=o.concat(n),n=[]),o.push(a),i=a+1):l.isDeleted&&i===a?(i=a+1,n.push(a)):n=[]}return o},QC=e=>{let t=0;return e.reduce((r,o,n)=>(n>0&&e[n-1]!==o-1&&(t=++t),(r[t]||(r[t]=[])).push(o),r),[])},Wy=(e,t,r)=>{if("containerId"in e&&e.containerId)if(r==="left"){let o=St.getScene(e).getElement(e.containerId);if(o)return t.indexOf(o)}else return t.indexOf(e);else{let o=e.boundElements?.find(n=>n.type!=="arrow")?.id;if(o){if(r==="left")return t.indexOf(e);let n=St.getScene(e).getElement(o);if(n)return t.indexOf(n)}}},JC=(e,t)=>{let r=-1,o=-1;return e.forEach((n,i)=>{wf(n,t)&&(r===-1&&(r=i),o=i)}),r===-1?[]:e.slice(r,o+1)},$C=(e,t,r,o,n)=>{let i=t[r],a=m=>m.isDeleted?!1:n?m.frameId===n:e.editingGroupId?m.groupIds.includes(e.editingGroupId):!0,s=o==="left"?mh(t,m=>a(m),Math.max(0,r-1)):dh(t,m=>a(m),r+1),l=t[s];if(!l)return-1;if(e.editingGroupId){if(i?.groupIds.join("")===l?.groupIds.join(""))return Wy(l,t,o)??s;if(!l?.groupIds.includes(e.editingGroupId))return-1}if(!n&&(l.frameId||ee(l))){let m=JC(t,l.frameId||l.id);return o==="left"?t.indexOf(m[0]):t.indexOf(m[m.length-1])}if(!l.groupIds.length)return Wy(l,t,o)??s;let c=e.editingGroupId?l.groupIds[l.groupIds.indexOf(e.editingGroupId)-1]:l.groupIds[l.groupIds.length-1],d=tt(t,c);return d.length?o==="left"?t.indexOf(d[0]):t.indexOf(d[d.length-1]):s},Vy=(e,t)=>t.reduce((r,o)=>{let n=e[o];return r.set(n.id,n),r},new Map),Ky=(e,t,r)=>{let o=Yy(e,t),n=Vy(e,o),i=QC(o);r==="right"&&(i=i.reverse());let a=new Set(o.filter(s=>ee(e[s])).map(s=>e[s].id));return i.forEach((s,l)=>{let c=s[0],d=s[s.length-1],m=r==="left"?c:d,p=s.some(y=>{let v=e[y];return v.frameId&&a.has(v.frameId)})?null:e[m]?.frameId,u=$C(t,e,m,r,p);if(u===-1||m===u)return;let h=r==="left"?e.slice(0,u):e.slice(0,c),x=e.slice(c,d+1),E=r==="left"?e.slice(u,c):e.slice(d+1,u+1),w=r==="left"?e.slice(d+1):e.slice(u+1);e=r==="left"?[...h,...x,...E,...w]:[...h,...E,...x,...w]}),Ft(e,n),e},Xy=(e,t,r,o,n)=>{let i=Yy(e,t,n),a=Vy(e,i),s=[],l,c;if(r==="left"){if(o)l=dh(e,h=>wf(h,o));else if(t.editingGroupId){let h=tt(e,t.editingGroupId);if(!h.length)return e;l=e.indexOf(h[0])}else l=0;c=i[i.length-1]}else{if(o)c=mh(e,h=>wf(h,o));else if(t.editingGroupId){let h=tt(e,t.editingGroupId);if(!h.length)return e;c=e.indexOf(h[h.length-1])}else c=e.length-1;l=i[0]}l===-1&&(l=0);for(let h=l;h<c+1;h++)i.includes(h)||s.push(e[h]);let d=Array.from(a.values()),m=e.slice(0,l),p=e.slice(c+1),u=r==="left"?[...m,...d,...s,...p]:[...m,...s,...d,...p];return Ft(u,a),u};function Zy(e,t,r,o){let n=X(ue(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0})),i={regularElements:[],frameChildren:new Map},a=new Set;for(let c of e)n.has(c.id)&&ee(c)&&a.add(c.id);for(let c of e)if(n.has(c.id))if(ee(c)||c.frameId&&a.has(c.frameId))i.regularElements.push(c);else if(!c.frameId)i.regularElements.push(c);else{let d=i.frameChildren.get(c.frameId)||[];d.push(c),i.frameChildren.set(c.frameId,d)}let s=e,l=Array.from(i.frameChildren.entries());for(let[c,d]of l)s=o(e,t,r,c,d);return o(s,t,r,null,i.regularElements)}var jy=(e,t)=>Ky(e,t,"left"),qy=(e,t)=>Ky(e,t,"right"),Qy=(e,t)=>Zy(e,t,"left",Xy),Jy=(e,t)=>Zy(e,t,"right",Xy);ge();G();Ze();V();Oe();import{jsx as yp}from"react/jsx-runtime";var vf=H({name:"sendBackward",label:"labels.sendBackward",icon:nf,trackEvent:{category:"element"},perform:(e,t)=>({elements:jy(e,t),appState:t,storeAction:D.CAPTURE}),keyPriority:40,keyTest:e=>e[T.CTRL_OR_CMD]&&!e.shiftKey&&e.code===fe.BRACKET_LEFT,PanelComponent:({updateData:e,appState:t})=>yp("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${b("labels.sendBackward")} \u2014 ${N("CtrlOrCmd+[")}`,children:nf})}),Cf=H({name:"bringForward",label:"labels.bringForward",icon:of,trackEvent:{category:"element"},perform:(e,t)=>({elements:qy(e,t),appState:t,storeAction:D.CAPTURE}),keyPriority:40,keyTest:e=>e[T.CTRL_OR_CMD]&&!e.shiftKey&&e.code===fe.BRACKET_RIGHT,PanelComponent:({updateData:e,appState:t})=>yp("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${b("labels.bringForward")} \u2014 ${N("CtrlOrCmd+]")}`,children:of})}),Tf=H({name:"sendToBack",label:"labels.sendToBack",icon:sf,trackEvent:{category:"element"},perform:(e,t)=>({elements:Qy(e,t),appState:t,storeAction:D.CAPTURE}),keyTest:e=>ar?e[T.CTRL_OR_CMD]&&e.altKey&&e.code===fe.BRACKET_LEFT:e[T.CTRL_OR_CMD]&&e.shiftKey&&e.code===fe.BRACKET_LEFT,PanelComponent:({updateData:e,appState:t})=>yp("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${b("labels.sendToBack")} \u2014 ${ar?N("CtrlOrCmd+Alt+["):N("CtrlOrCmd+Shift+[")}`,children:sf})}),Af=H({name:"bringToFront",label:"labels.bringToFront",icon:af,trackEvent:{category:"element"},perform:(e,t)=>({elements:Jy(e,t),appState:t,storeAction:D.CAPTURE}),keyTest:e=>ar?e[T.CTRL_OR_CMD]&&e.altKey&&e.code===fe.BRACKET_RIGHT:e[T.CTRL_OR_CMD]&&e.shiftKey&&e.code===fe.BRACKET_RIGHT,PanelComponent:({updateData:e,appState:t})=>yp("button",{type:"button",className:"zIndexButton",onClick:r=>e(null),title:`${b("labels.bringToFront")} \u2014 ${ar?N("CtrlOrCmd+Alt+]"):N("CtrlOrCmd+Shift+]")}`,children:af})});f();ge();Ze();mr();be();se();Zt();ii();Oe();var Sf=H({name:"selectAll",label:"labels.selectAll",icon:Py,trackEvent:{category:"canvas"},viewMode:!1,perform:(e,t,r,o)=>{if(t.editingLinearElement)return!1;let n=Aa(e.filter(i=>!i.isDeleted&&!(U(i)&&i.containerId)&&!i.locked)).reduce((i,a)=>(i[a.id]=!0,i),{});return{appState:{...t,...qt({editingGroupId:null,selectedElementIds:n},Ee(e),t,o),selectedLinearElement:Object.keys(n).length===1&&ne(e[0])?new Z(e[0]):null},storeAction:D.CAPTURE}},keyTest:e=>e[T.CTRL_OR_CMD]&&e.key===T.A});f();ge();Ze();be();Xe();G();Zt();mr();io();V();lt();se();f();G();var eT=e=>{let t=e.slice(),r=new Set,o=i=>{let a=i[0]?.groupIds?.join(""),s=[i[0]],l=[];for(let c of i.slice(1))c.groupIds?.join("")===a?s.push(c):l.push(c);return l.length?[...s,...o(l)]:s},n=new Map;return t.forEach((i,a)=>{if(!n.has(i.id))if(i.groupIds?.length){let s=i.groupIds[i.groupIds.length-1],l=t.slice(a).filter(c=>{let d=c?.groupIds?.some(m=>m===s);return d&&n.set(c.id,!0),d});for(let c of o(l))r.add(c)}else r.add(i)}),r.size!==e.length?(console.error("normalizeGroupElementOrder: lost some elements... bailing!"),e):[...r]},tT=e=>{let t=_0(e),r=e.slice(),o=new Set;return r.forEach((n,i)=>{n&&(n.boundElements?.length?(o.add(n),r[i]=null,n.boundElements.forEach(a=>{let s=t.get(a.id);s&&a.type==="text"&&(o.add(s[0]),r[s[1]]=null)})):n.type==="text"&&n.containerId&&t.get(n.containerId)?.[0].boundElements?.find(s=>s.id===n.id)||(o.add(n),r[i]=null))}),o.size!==e.length?(console.error("normalizeBoundElementsOrder: lost some elements... bailing!"),e):[...o]},$y=e=>tT(eT(e));nr();ii();no();Oe();import{jsx as oT}from"react/jsx-runtime";var If=H({name:"duplicateSelection",label:"labels.duplicateSelection",icon:Ec,trackEvent:{category:"element"},perform:(e,t,r,o)=>{let n=o.scene.getNonDeletedElementsMap();if(t.editingLinearElement){let i=Z.duplicateSelectedPoints(t,n);return i?{elements:e,appState:i.appState,storeAction:D.CAPTURE}:!1}return{...rT(e,t),storeAction:D.CAPTURE}},keyTest:e=>e[T.CTRL_OR_CMD]&&e.key===T.D,PanelComponent:({elements:e,appState:t,updateData:r})=>oT(ce,{type:"button",icon:Ec,title:`${b("labels.duplicateSelection")} \u2014 ${N("CtrlOrCmd+D")}`,"aria-label":b("labels.duplicateSelection"),onClick:()=>r(null),visible:Ye(Ee(e),t)})}),rT=(e,t)=>{let r=$y(e),o=new Map,n=[],i=[],a=new Map,s=new Map,l=y=>{let v=Zl(t.editingGroupId,o,y,{x:y.x+En/2,y:y.y+En/2});return s.set(v.id,v),a.set(y.id,v.id),i.push(y),n.push(v),v},c=X(ue(r,t,{includeBoundTextElement:!0,includeElementsInFrames:!0})),d=new Map,m=y=>{for(let v of y)d.set(v.id,!0);return y},p=[],u=-1;for(;++u<r.length;){let y=r[u];if(d.get(y.id))continue;let v=me(y,X(e)),A=ee(y);if(c.get(y.id)){if(y.groupIds.length||v||A){let L=Jh(t,y);if(L){let S=tt(r,L).flatMap(k=>ee(k)?[...Vr(e,k.id),k]:[k]);p.push(...m([...S,...S.map(k=>l(k))]));continue}if(v){p.push(...m([y,v,l(y),l(v)]));continue}if(A){let S=Vr(r,y.id);p.push(...m([...S,y,...S.map(k=>l(k)),l(y)]));continue}}(!y.frameId||!c.has(y.frameId))&&p.push(...m([y,l(y)]))}else p.push(...m([y]))}let h=[],x=new Map;for(u=p.length;--u>=0;){let y=p[u];x.get(y.id)||(x.set(y.id,!0),h.push(y))}let E=Ft(h.reverse(),X(n));jd(p,i,a),Vd(p,i,a),Vm(E,i,a);let w=Aa(n);return{elements:E,appState:{...t,...qt({editingGroupId:t.editingGroupId,selectedElementIds:w.reduce((y,v)=>(Ie(v)||(y[v.id]=!0),y),{})},Ee(E),t,null)}}};f();$t();f();var nT=["ai","command_palette"],xe=(e,t,r,o)=>{try{if(typeof window>"u"||C.VITE_WORKER_ID||C.PROD||!nT.includes(e))return;C.PROD||console.info("trackEvent",{category:e,action:t,label:r,value:o}),window.sa_event&&window.sa_event(t,{category:e,label:r,value:o})}catch(n){console.error("error during analytics",n)}};f();import e3 from"clsx";import{jsx as Mf,jsxs as iT}from"react/jsx-runtime";var on=e=>Mf("div",{className:"buttonList buttonListIcon",children:e.options.map(t=>e.type==="button"?Mf("button",{onClick:r=>e.onClick(t.value,r),className:e3({active:t.active??e.value===t.value}),"data-testid":t.testId,title:t.text,children:t.icon},t.text):iT("label",{className:e3({active:e.value===t.value}),title:t.text,children:[Mf("input",{type:"radio",name:e.group,onChange:()=>e.onChange(t.value),checked:e.value===t.value,"data-testid":t.testId}),t.icon]},t.text))});f();G();f();$t();import aT from"clsx";import{jsx as kf}from"react/jsx-runtime";var t3=({onChange:e,type:t,activeColor:r,topPicks:o})=>{let n;return t==="elementStroke"&&(n=sd),t==="elementBackground"&&(n=ld),t==="canvasBackground"&&(n=cd),o&&(n=o),n?kf("div",{className:"color-picker__top-picks",children:n.map(i=>kf("button",{className:aT("color-picker__button",{active:i===r,"is-transparent":i==="transparent"||!i}),style:{"--swatch-color":i},type:"button",title:i,onClick:()=>e(i),"data-testid":`color-top-pick-${i}`,children:kf("div",{className:"color-picker__button-outline"})},i))}):(console.error("Invalid type for TopPicks"),null)};f();import d3,{useEffect as m3,useState as MT}from"react";f();import dT from"clsx";import{useAtom as mT}from"jotai";import{useEffect as pT,useRef as uT}from"react";f();$t();import{atom as sT}from"jotai";var Ci=({palette:e,color:t})=>{for(let[r,o]of Object.entries(e))if(Array.isArray(o)){let n=o.indexOf(t);if(n>-1)return{colorName:r,shade:n}}else if(o===t)return{colorName:r,shade:null};return null},Ac=[["q","w","e","r","t"],["a","s","d","f","g"],["z","x","c","v","b"]].flat(),Lf=({color:e,palette:t})=>!Object.values(t).flat().includes(e),o3=(e,t,r)=>{let o={elementBackground:"backgroundColor",elementStroke:"strokeColor"},n=e.filter(a=>{if(a.isDeleted)return!1;let s=a[o[t]];return Lf({color:s,palette:r})}),i=new Map;return n.forEach(a=>{let s=a[o[t]];i.has(s)?i.set(s,i.get(s)+1):i.set(s,1)}),[...i.entries()].sort((a,s)=>s[1]-a[1]).map(a=>a[0]).slice(0,J2)},mo=sT(null),r3=(e,t,r)=>(e*299+t*587+r*114)/1e3>=160?"black":"white",n3=(e,t)=>{if(t){let i=new Option().style;if(i.color=e,i.color){let a=i.color.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(","),s=parseInt(a[0]),l=parseInt(a[1]),c=parseInt(a[2]);return r3(s,l,c)}}if(e==="transparent")return"black";let r=parseInt(e.substring(1,3),16),o=parseInt(e.substring(3,5),16),n=parseInt(e.substring(5,7),16);return r3(r,o,n)};f();import{jsxs as cT}from"react/jsx-runtime";var lT=({color:e,keyLabel:t,isCustomColor:r=!1,isShade:o=!1})=>cT("div",{className:"color-picker__button__hotkey-label",style:{color:n3(e,r)},children:[o&&"\u21E7",t]}),Gs=lT;import{jsx as Sc,jsxs as i3}from"react/jsx-runtime";var a3=({hex:e,onChange:t,palette:r})=>{let o=Ci({color:e||"transparent",palette:r}),[n,i]=mT(mo),a=uT(null);if(pT(()=>{a.current&&n==="shades"&&a.current.focus()},[o,n]),o){let{colorName:s,shade:l}=o,c=r[s];if(Array.isArray(c))return Sc("div",{className:"color-picker-content--default shades",children:c.map((d,m)=>i3("button",{ref:m===l&&n==="shades"?a:void 0,tabIndex:-1,type:"button",className:dT("color-picker__button color-picker__button--large",{active:m===l}),"aria-label":"Shade",title:`${s} - ${m+1}`,style:d?{"--swatch-color":d}:void 0,onClick:()=>{t(d),i("shades")},children:[Sc("div",{className:"color-picker__button-outline"}),Sc(Gs,{color:d,keyLabel:m+1,isShade:!0})]},m))})}return i3("div",{className:"color-picker-content--default",style:{position:"relative"},tabIndex:-1,children:[Sc("button",{type:"button",tabIndex:-1,className:"color-picker__button color-picker__button--large color-picker__button--no-focus-visible"}),Sc("div",{tabIndex:-1,style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",fontSize:"0.75rem"},children:b("colorPicker.noShades")})]})};f();import hT from"clsx";import{useAtom as gT}from"jotai";import{useEffect as fT,useRef as bT}from"react";import{jsx as Pf,jsxs as ET}from"react/jsx-runtime";var xT=({palette:e,color:t,onChange:r,label:o,activeShade:n})=>{let i=Ci({color:t||"transparent",palette:e}),[a,s]=gT(mo),l=bT(null);return fT(()=>{l.current&&a==="baseColors"&&l.current.focus()},[i?.colorName,a]),Pf("div",{className:"color-picker-content--default",children:Object.entries(e).map(([c,d],m)=>{let p=(Array.isArray(d)?d[n]:d)||"transparent",u=Ac[m],h=b(`colors.${c.replace(/\d+/,"")}`,null,"");return ET("button",{ref:i?.colorName===c?l:void 0,tabIndex:-1,type:"button",className:hT("color-picker__button color-picker__button--large",{active:i?.colorName===c,"is-transparent":p==="transparent"||!p}),onClick:()=>{r(p),s("baseColors")},title:`${h}${p.startsWith("#")?` ${p}`:""} \u2014 ${u}`,"aria-label":`${h} \u2014 ${u}`,style:p?{"--swatch-color":p}:void 0,"data-testid":`color-${c}`,children:[Pf("div",{className:"color-picker__button-outline"}),Pf(Gs,{color:p,keyLabel:u})]},c)})})},s3=xT;import{useAtom as kT}from"jotai";f();import yT from"clsx";import{useAtom as wT}from"jotai";import{useEffect as vT,useRef as CT}from"react";import{jsx as Df,jsxs as TT}from"react/jsx-runtime";var l3=({colors:e,color:t,onChange:r,label:o})=>{let[n,i]=wT(mo),a=CT(null);return vT(()=>{a.current&&a.current.focus()},[t,n]),Df("div",{className:"color-picker-content--default",children:e.map((s,l)=>TT("button",{ref:t===s?a:void 0,tabIndex:-1,type:"button",className:yT("color-picker__button color-picker__button--large",{active:t===s,"is-transparent":s==="transparent"||!s}),onClick:()=>{r(s),i("custom")},title:s,"aria-label":o,style:{"--swatch-color":s},children:[Df("div",{className:"color-picker__button-outline"}),Df(Gs,{color:s,keyLabel:l+1,isCustomColor:!0})]},l))})};f();ge();$t();var Rf=(e,t,r)=>{let o=Math.ceil(r/Vi);switch(t=t??-1,e){case"ArrowLeft":{let n=t-1;return n<0?r-1:n}case"ArrowRight":return(t+1)%r;case"ArrowDown":{let n=t+Vi;return n>=r?t%Vi:n}case"ArrowUp":{let n=t-Vi,i=n<0?Vi*o+n:n;return i>=r?void 0:i}}},AT=({e,colorObj:t,onChange:r,palette:o,customColors:n,setActiveColorPickerSection:i,activeShade:a})=>{if(t?.shade!=null&&["Digit1","Digit2","Digit3","Digit4","Digit5"].includes(e.code)&&e.shiftKey){let s=Number(e.code.slice(-1))-1;return r(o[t.colorName][s]),i("shades"),!0}if(["1","2","3","4","5"].includes(e.key)&&n[Number(e.key)-1])return r(n[Number(e.key)-1]),i("custom"),!0;if(Ac.includes(e.key)){let s=Ac.indexOf(e.key),l=Object.keys(o)[s],c=o[l],d=Array.isArray(c)?c[a]:c;return r(d),i("baseColors"),!0}return!1},c3=({event:e,activeColorPickerSection:t,palette:r,color:o,onChange:n,customColors:i,setActiveColorPickerSection:a,updateData:s,activeShade:l,onEyeDropperToggle:c,onEscape:d})=>{if(e[T.CTRL_OR_CMD])return!1;if(e.key===T.ESCAPE)return d(e),!0;if(e.key===T.ALT)return c(!0),!0;if(e.key===T.I)return c(),!0;let m=Ci({color:o,palette:r});if(e.key===T.TAB){let p={custom:!!i.length,baseColors:!0,shades:m?.shade!=null,hex:!0},u=Object.entries(p).reduce((y,[v,A])=>(A&&y.push(v),y),[]),h=u.indexOf(t),x=e.shiftKey?-1:1,E=h+x>u.length-1?0:h+x<0?u.length-1:h+x,w=u[E];return w&&a(w),w==="custom"?n(i[0]):w==="baseColors"&&(Object.entries(r).find(([v,A])=>Array.isArray(A)?A.includes(o):A===o?v:null)||n(de.black)),e.preventDefault(),e.stopPropagation(),!0}if(AT({e,colorObj:m,onChange:n,palette:r,customColors:i,setActiveColorPickerSection:a,activeShade:l}))return!0;if(t==="shades"&&m){let{shade:p}=m,u=Rf(e.key,p,Vi);if(u!==void 0)return n(r[m.colorName][u]),!0}if(t==="baseColors"&&m){let{colorName:p}=m,u=Object.keys(r),h=u.indexOf(p),x=Rf(e.key,h,u.length);if(x!==void 0){let E=u[x],w=r[E];return n(Array.isArray(w)?w[l]:w),!0}}if(t==="custom"){let p=i.indexOf(o),u=Rf(e.key,p,i.length);if(u!==void 0){let h=i[u];return n(h),!0}}return!1};f();import{jsx as IT}from"react/jsx-runtime";var ST=({children:e})=>IT("div",{className:"color-picker__heading",children:e}),Us=ST;$t();ge();V();import{jsx as ka,jsxs as wp}from"react/jsx-runtime";var p3=({color:e,onChange:t,label:r,type:o,elements:n,palette:i,updateData:a,children:s,onEyeDropperToggle:l,onEscape:c})=>{let[d]=d3.useState(()=>o==="canvasBackground"?[]:o3(n,o,i)),[m,p]=kT(mo),u=Ci({color:e,palette:i});m3(()=>{if(!m){let w=Lf({color:e,palette:i}),y=w&&!d.includes(e);p(y?"hex":w?"custom":u?.shade!=null?"shades":"baseColors")}},[m,e,i,p,u,d]);let[h,x]=MT(u?.shade??(o==="elementBackground"?Xa:Ka));m3(()=>{u?.shade!=null&&x(u.shade);let w=y=>{y.key===T.ALT&&l(!1)};return document.addEventListener("keyup",w,{capture:!0}),()=>{document.removeEventListener("keyup",w,{capture:!0})}},[u,l]);let E=d3.useRef(null);return ka("div",{role:"dialog","aria-modal":"true","aria-label":b("labels.colorPicker"),children:wp("div",{ref:E,onKeyDown:w=>{c3({event:w,activeColorPickerSection:m,palette:i,color:e,onChange:t,onEyeDropperToggle:l,customColors:d,setActiveColorPickerSection:p,updateData:a,activeShade:h,onEscape:c})&&(w.preventDefault(),w.stopPropagation())},className:"color-picker-content",tabIndex:-1,children:[!!d.length&&wp("div",{children:[ka(Us,{children:b("colorPicker.mostUsedCustomColors")}),ka(l3,{colors:d,color:e,label:b("colorPicker.mostUsedCustomColors"),onChange:t})]}),wp("div",{children:[ka(Us,{children:b("colorPicker.colors")}),ka(s3,{color:e,label:r,palette:i,onChange:t,activeShade:h})]}),wp("div",{children:[ka(Us,{children:b("colorPicker.shades")}),ka(a3,{hex:e,onChange:t,palette:i})]}),s]})})};import*as nn from"@radix-ui/react-popover";import{useAtom as w3}from"jotai";$t();import UT from"clsx";f();import{useCallback as zT,useEffect as Of,useRef as f3,useState as HT}from"react";import{useAtom as b3}from"jotai";ge();f();$t();V();import{atom as RT}from"jotai";import{useEffect as NT,useRef as OT}from"react";import{createPortal as BT}from"react-dom";f();import u3 from"react";var Nf=u3.createContext(null),Re=()=>u3.useContext(Nf);f();import{useState as LT,useLayoutEffect as h3}from"react";V();var vp=e=>{let[t,r]=LT(null),o=ke(),{theme:n}=Re(),{container:i}=Gt();return h3(()=>{t&&(t.className="",t.classList.add("excalidraw",...e?.className?.split(/\s+/)||[]),t.classList.toggle("excalidraw--mobile",o.editor.isMobile),t.classList.toggle("theme--dark",n===ae.DARK))},[t,n,o.editor.isMobile,e?.className]),h3(()=>{let a=e?.parentSelector?i?.querySelector(e.parentSelector):document.body;if(!a)return;let s=document.createElement("div");return a.appendChild(s),r(s),()=>{a.removeChild(s)}},[i,e?.parentSelector]),t};f();V();import{useEffect as PT}from"react";function Ws(e,t,r){PT(()=>{function o(n){let i=n;if(!e.current)return;let a=r?.(i,e.current);if(a===!0)return;if(a===!1)return t(i);e.current.contains(i.target)||!document.documentElement.contains(i.target)||i.target.closest("[data-radix-portal]")||i.target===document.documentElement&&document.body.style.pointerEvents==="none"||i.target.closest("[data-prevent-outside-click]")||t(i)}return document.addEventListener("pointerdown",o),document.addEventListener("touchstart",o),()=>{document.removeEventListener("pointerdown",o),document.removeEventListener("touchstart",o)}},[e,t,r])}ge();Xe();f();import{useRef as DT}from"react";var Ys=e=>{let t=DT(e);return Object.assign(t.current,e),t.current};import{jsx as FT}from"react/jsx-runtime";var Ti=RT(null),g3=({onCancel:e,onChange:t,onSelect:r,colorPickerType:o})=>{let n=vp({className:"excalidraw-eye-dropper-backdrop",parentSelector:".excalidraw-eye-dropper-container"}),i=Re(),a=Ai(),s=Mr(),l=ue(a,i),c=Ys({app:s,onCancel:e,onChange:t,onSelect:r,selectedElements:l}),{container:d}=Gt();NT(()=>{let p=m.current;if(!p||!s.canvas||!n)return;let u=!1,h=s.canvas.getContext("2d"),x=({clientX:S,clientY:k})=>{let R=h.getImageData((S-i.offsetLeft)*window.devicePixelRatio,(k-i.offsetTop)*window.devicePixelRatio,1,1).data;return n0(R[0],R[1],R[2])},E=({clientX:S,clientY:k,altKey:R})=>{p.style.top=`${k+20}px`,p.style.left=`${S+20}px`;let _=x({clientX:S,clientY:k});u&&c.onChange(o,_,c.selectedElements,{altKey:R}),p.style.background=_},w=()=>{c.onCancel()},y=(S,k)=>{c.onSelect(S,k)},v=S=>{u=!0,S.stopImmediatePropagation()},A=S=>{u=!1,d?.focus(),S.stopImmediatePropagation(),S.preventDefault(),y(x(S),S)},L=S=>{S.key===T.ESCAPE&&(S.preventDefault(),S.stopImmediatePropagation(),w())};return n.tabIndex=-1,n.focus(),E({clientX:c.app.lastViewportPosition.x,clientY:c.app.lastViewportPosition.y,altKey:!1}),n.addEventListener("keydown",L),n.addEventListener("pointerdown",v),n.addEventListener("pointerup",A),window.addEventListener("pointermove",E,{passive:!0}),window.addEventListener("blur",w),()=>{u=!1,n.removeEventListener("keydown",L),n.removeEventListener("pointerdown",v),n.removeEventListener("pointerup",A),window.removeEventListener("pointermove",E),window.removeEventListener("blur",w)}},[c,s.canvas,n,o,d,i.offsetLeft,i.offsetTop]);let m=OT(null);return Ws(m,()=>{e()},p=>!!p.target.closest(".excalidraw-eye-dropper-trigger, .excalidraw-eye-dropper-backdrop")),n?BT(FT("div",{ref:m,className:"excalidraw-eye-dropper-preview"}),n):null};import _T from"clsx";G();import{Fragment as GT,jsx as Cp,jsxs as x3}from"react/jsx-runtime";var E3=({color:e,onChange:t,label:r,colorPickerType:o})=>{let n=ke(),[i,a]=HT(e),[s,l]=b3(mo);Of(()=>{a(e)},[e]);let c=zT(h=>{let x=h.toLowerCase(),E=y3(x);E&&t(E),a(x)},[t]),d=f3(null),m=f3(null);Of(()=>{d.current&&d.current.focus()},[s]);let[p,u]=b3(Ti,He);return Of(()=>()=>{u(null)},[u]),x3("div",{className:"color-picker__input-label",children:[Cp("div",{className:"color-picker__input-hash",children:"#"}),Cp("input",{ref:s==="hex"?d:void 0,style:{border:0,padding:0},spellCheck:!1,className:"color-picker-input","aria-label":r,onChange:h=>{c(h.target.value)},value:(i||"").replace(/^#/,""),onBlur:()=>{a(e)},tabIndex:-1,onFocus:()=>l("hex"),onKeyDown:h=>{h.key!==T.TAB&&(h.key===T.ESCAPE&&m.current?.focus(),h.stopPropagation())}}),!n.editor.isMobile&&x3(GT,{children:[Cp("div",{style:{width:"1px",height:"1.25rem",backgroundColor:"var(--default-border-color)"}}),Cp("div",{ref:m,className:_T("excalidraw-eye-dropper-trigger",{selected:p}),onClick:()=>u(h=>h?null:{keepOpenOnAlt:!1,onSelect:x=>t(x),colorPickerType:o}),title:`${b("labels.eyeDropper")} \u2014 ${T.I.toLocaleUpperCase()} or ${N("Alt")} `,children:vy})]})]})};import{useRef as WT}from"react";import{jsx as po,jsxs as Tp}from"react/jsx-runtime";var v3=e=>{let t=new Option().style;return t.color=e,!!t.color},y3=e=>sr(e)?e:v3(`#${e}`)?`#${e}`:v3(e)?e:null,YT=({type:e,color:t,onChange:r,label:o,elements:n,palette:i=de,updateData:a})=>{let[,s]=w3(mo),[l,c]=w3(Ti,He),{container:d}=Gt(),m=ke(),p=Tp("div",{children:[po(Us,{children:b("colorPicker.hexCode")}),po(E3,{color:t,label:o,onChange:x=>{r(x)},colorPickerType:e})]}),u=WT(null),h=()=>{u.current?.querySelector(".color-picker-content")?.focus()};return po(nn.Portal,{container:d,children:Tp(nn.Content,{ref:u,className:"focus-visible-none","data-prevent-outside-click":!0,onFocusOutside:x=>{h(),x.preventDefault()},onPointerDownOutside:x=>{l&&x.preventDefault()},onCloseAutoFocus:x=>{x.stopPropagation(),x.preventDefault(),d&&!R0(document.activeElement)&&d.focus(),a({openPopup:null}),s(null)},side:m.editor.isMobile&&!m.viewport.isLandscape?"bottom":"right",align:m.editor.isMobile&&!m.viewport.isLandscape?"center":"start",alignOffset:-16,sideOffset:20,style:{zIndex:"var(--zIndex-layerUI)",backgroundColor:"var(--popup-bg-color)",maxWidth:"208px",maxHeight:window.innerHeight,padding:"12px",borderRadius:"8px",boxSizing:"border-box",overflowY:"auto",boxShadow:"0px 7px 14px rgba(0, 0, 0, 0.05), 0px 0px 3.12708px rgba(0, 0, 0, 0.0798), 0px 0px 0.931014px rgba(0, 0, 0, 0.1702)"},children:[i?po(p3,{palette:i,color:t,onChange:x=>{r(x)},onEyeDropperToggle:x=>{c(E=>x?(E=E||{keepOpenOnAlt:!0,onSelect:r,colorPickerType:e},E.keepOpenOnAlt=!0,E):x===!1||E?null:{keepOpenOnAlt:!1,onSelect:r,colorPickerType:e})},onEscape:x=>{l?c(null):eo(x.target)?h():a({openPopup:null})},label:o,type:e,elements:n,updateData:a,children:p}):p,po(nn.Arrow,{width:20,height:10,style:{fill:"var(--popup-bg-color)",filter:"drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)"}})]})})},VT=({label:e,color:t,type:r})=>po(nn.Trigger,{type:"button",className:UT("color-picker__button active-color",{"is-transparent":t==="transparent"||!t}),"aria-label":e,style:t?{"--swatch-color":t}:void 0,title:r==="elementStroke"?b("labels.showStroke"):b("labels.showBackground"),children:po("div",{className:"color-picker__button-outline"})}),Ic=({type:e,color:t,onChange:r,label:o,elements:n,palette:i=de,topPicks:a,updateData:s,appState:l})=>po("div",{children:Tp("div",{role:"dialog","aria-modal":"true",className:"color-picker-container",children:[po(t3,{activeColor:t,onChange:r,type:e,topPicks:a}),po("div",{style:{width:1,height:"100%",backgroundColor:"var(--default-border-color)",margin:"0 auto"}}),Tp(nn.Root,{open:l.openPopup===e,onOpenChange:c=>{s({openPopup:c?e:null})},children:[po(VT,{color:t,label:o,type:e}),l.openPopup===e&&po(YT,{type:e,color:t,onChange:r,label:o,elements:n,palette:i,updateData:s})]})]})});f();import La from"react";f();import{useLayoutEffect as KT,useRef as C3,useEffect as T3}from"react";G();ge();import{unstable_batchedUpdates as XT}from"react-dom";import{jsx as ZT}from"react/jsx-runtime";var Ap=({children:e,left:t,top:r,onCloseRequest:o,fitInViewport:n=!1,offsetLeft:i=0,offsetTop:a=0,viewportWidth:s=window.innerWidth,viewportHeight:l=window.innerHeight})=>{let c=C3(null);T3(()=>{let m=c.current;if(!m)return;m.contains(document.activeElement)||m.focus();let p=u=>{if(u.key===T.TAB){let h=Cl(m),{activeElement:x}=document,E=h.findIndex(w=>w===x);x===m?(u.shiftKey?h[h.length-1]?.focus():h[0].focus(),u.preventDefault(),u.stopImmediatePropagation()):E===0&&u.shiftKey?(h[h.length-1]?.focus(),u.preventDefault(),u.stopImmediatePropagation()):E===h.length-1&&!u.shiftKey&&(h[0]?.focus(),u.preventDefault(),u.stopImmediatePropagation())}};return m.addEventListener("keydown",p),()=>m.removeEventListener("keydown",p)},[]);let d=C3(null);return KT(()=>{if(n&&c.current&&r!=null&&t!=null){let m=c.current,{width:p,height:u}=m.getBoundingClientRect();if(d.current?.top===r&&d.current?.left===t)return;d.current={top:r,left:t},p>=s?(m.style.width=`${s}px`,m.style.left="0px",m.style.overflowX="scroll"):t+p-i>s?m.style.left=`${s-p-10}px`:m.style.left=`${t}px`,u>=l?(m.style.height=`${l-20}px`,m.style.top="10px",m.style.overflowY="scroll"):r+u-a>l?m.style.top=`${l-u}px`:m.style.top=`${r}px`}},[r,t,n,s,l,i,a]),T3(()=>{if(o){let m=p=>{c.current?.contains(p.target)||XT(()=>o(p))};return document.addEventListener("pointerdown",m,!1),()=>document.removeEventListener("pointerdown",m,!1)}},[o]),ZT("div",{className:"popover",ref:c,tabIndex:-1,children:e})};ge();import jT from"clsx";import{Fragment as QT,jsx as Si,jsxs as Bf}from"react/jsx-runtime";function qT({options:e,value:t,label:r,onChange:o,onClose:n}){let i=La.useRef(),a=La.useRef(),s=La.useRef(null);return La.useEffect(()=>{a.current?a.current.focus():s.current&&s.current.focus()},[]),Si("div",{className:"picker",role:"dialog","aria-modal":"true","aria-label":r,onKeyDown:c=>{let d=e.find(m=>m.keyBinding===c.key.toLowerCase());if(!(c.metaKey||c.altKey||c.ctrlKey)&&d){let m=e.indexOf(d);s.current.children[m].focus(),c.preventDefault()}else if(c.key===T.TAB)setTimeout(()=>{let m=a.current,p=document.activeElement;m!==p&&n()},0);else if(ls(c.key)){let{activeElement:m}=document,p=fn().rtl,u=Array.prototype.indexOf.call(s.current.children,m);if(u!==-1){let h=e.length,x=u;switch(c.key){case(p?T.ARROW_LEFT:T.ARROW_RIGHT):case T.ARROW_DOWN:{x=(u+1)%h;break}case(p?T.ARROW_RIGHT:T.ARROW_LEFT):case T.ARROW_UP:{x=(h+u-1)%h;break}}s.current.children[x].focus()}c.preventDefault()}else(c.key===T.ESCAPE||c.key===T.ENTER)&&(c.preventDefault(),n());c.nativeEvent.stopImmediatePropagation(),c.stopPropagation()},children:Si("div",{className:"picker-content",ref:s,children:e.map((c,d)=>Bf("button",{className:jT("picker-option",{active:t===c.value}),onClick:m=>{m.currentTarget.focus(),o(c.value)},title:`${c.text} ${c.keyBinding&&`\u2014 ${c.keyBinding.toUpperCase()}`}`,"aria-label":c.text||"none","aria-keyshortcuts":c.keyBinding||void 0,ref:m=>{m&&d===0&&(i.current=m),m&&c.value===t&&(a.current=m)},onFocus:()=>{o(c.value)},children:[c.icon,c.keyBinding&&Si("span",{className:"picker-keybinding",children:c.keyBinding})]},c.text))})})}function Ff({value:e,label:t,options:r,onChange:o,group:n=""}){let[i,a]=La.useState(!1),s=La.useRef(null),l=fn().rtl;return Bf("div",{children:[Si("button",{name:n,className:i?"active":"","aria-label":t,onClick:()=>a(!i),ref:s,children:r.find(c=>c.value===e)?.icon}),Si(La.Suspense,{fallback:"",children:i?Bf(QT,{children:[Si(Ap,{onCloseRequest:c=>c.target!==s.current&&a(!1),...l?{right:5.5}:{left:-5.5},children:Si(qT,{options:r.filter(c=>c.showInPicker!==!1),value:e,label:t,onChange:o,onClose:()=>{a(!1),s.current?.focus()}})}),Si("div",{className:"picker-triangle"})]}):null})]})}V();be();Ge();lt();se();ge();So();Xe();Bl();G();Ze();Oe();import{Fragment as I3,jsx as Se,jsxs as Kr}from"react/jsx-runtime";var S3=.1,Xr=(e,t,r,o=!1)=>{let n=X(ue(e,t,{includeBoundTextElement:o}));return e.map(i=>n.get(i.id)||i.id===t.editingElement?.id?r(i):i)},kr=function(e,t,r,o,n){let i=t.editingElement,a=Ee(e),s=null;return i&&(s=r(i)),s||(Ye(a,t)?s=Zg(o===!0?a:a.filter(c=>o(c)),t,r)??(typeof n=="function"?n(!0):n):s=typeof n=="function"?n(!1):n),s},JT=(e,t)=>Ie(t)?t:z(t,{x:e.textAlign==="left"?e.x:e.x+(e.width-t.width)/(e.textAlign==="center"?2:1),y:e.y+(e.height-t.height)/2},!1),zf=(e,t,r,o,n)=>{let i=new Set;return{elements:Xr(e,t,a=>{if(U(a)){let s=o(a);i.add(s);let l=ie(a,{fontSize:s});return Nt(l,r.scene.getContainerElement(a),r.scene.getNonDeletedElementsMap()),l=JT(a,l),l}return a},!0),appState:{...t,currentItemFontSize:i.size===1?[...i][0]:n??t.currentItemFontSize},storeAction:D.CAPTURE}},$T=H({name:"changeStrokeColor",label:"labels.stroke",trackEvent:!1,perform:(e,t,r)=>({...r.currentItemStrokeColor&&{elements:Xr(e,t,o=>Ol(o.type)?ie(o,{strokeColor:r.currentItemStrokeColor}):o,!0)},appState:{...t,...r},storeAction:r.currentItemStrokeColor?D.CAPTURE:D.NONE}),PanelComponent:({elements:e,appState:t,updateData:r,appProps:o})=>Kr(I3,{children:[Se("h3",{"aria-hidden":"true",children:b("labels.stroke")}),Se(Ic,{topPicks:sd,palette:t0,type:"elementStroke",label:b("labels.stroke"),color:kr(e,t,n=>n.strokeColor,!0,t.currentItemStrokeColor),onChange:n=>r({currentItemStrokeColor:n}),elements:e,appState:t,updateData:r})]})}),e9=H({name:"changeBackgroundColor",label:"labels.changeBackground",trackEvent:!1,perform:(e,t,r)=>({...r.currentItemBackgroundColor&&{elements:Xr(e,t,o=>ie(o,{backgroundColor:r.currentItemBackgroundColor}))},appState:{...t,...r},storeAction:r.currentItemBackgroundColor?D.CAPTURE:D.NONE}),PanelComponent:({elements:e,appState:t,updateData:r,appProps:o})=>Kr(I3,{children:[Se("h3",{"aria-hidden":"true",children:b("labels.background")}),Se(Ic,{topPicks:ld,palette:r0,type:"elementBackground",label:b("labels.background"),color:kr(e,t,n=>n.backgroundColor,!0,t.currentItemBackgroundColor),onChange:n=>r({currentItemBackgroundColor:n}),elements:e,appState:t,updateData:r})]})}),t9=H({name:"changeFillStyle",label:"labels.fill",trackEvent:!1,perform:(e,t,r,o)=>(xe("element","changeFillStyle",`${r} (${o.device.editor.isMobile?"mobile":"desktop"})`),{elements:Xr(e,t,n=>ie(n,{fillStyle:r})),appState:{...t,currentItemFillStyle:r},storeAction:D.CAPTURE}),PanelComponent:({elements:e,appState:t,updateData:r})=>{let o=ue(e,t),n=o.length>0&&o.every(i=>i.fillStyle==="zigzag");return Kr("fieldset",{children:[Se("legend",{children:b("labels.fill")}),Se(on,{type:"button",options:[{value:"hachure",text:`${n?b("labels.zigzag"):b("labels.hachure")} (${N("Alt-Click")})`,icon:n?H4:_4,active:n?!0:void 0,testId:"fill-hachure"},{value:"cross-hatch",text:b("labels.crossHatch"),icon:G4,testId:"fill-cross-hatch"},{value:"solid",text:b("labels.solid"),icon:U4,testId:"fill-solid"}],value:kr(e,t,i=>i.fillStyle,i=>i.hasOwnProperty("fillStyle"),i=>i?null:t.currentItemFillStyle),onClick:(i,a)=>{let s=a.altKey&&i==="hachure"&&o.every(l=>l.fillStyle==="hachure")?"zigzag":i;r(s)}})]})}}),r9=H({name:"changeStrokeWidth",label:"labels.strokeWidth",trackEvent:!1,perform:(e,t,r)=>({elements:Xr(e,t,o=>ie(o,{strokeWidth:r})),appState:{...t,currentItemStrokeWidth:r},storeAction:D.CAPTURE}),PanelComponent:({elements:e,appState:t,updateData:r})=>Kr("fieldset",{children:[Se("legend",{children:b("labels.strokeWidth")}),Se(on,{group:"stroke-width",options:[{value:Ed.thin,text:b("labels.thin"),icon:ff,testId:"strokeWidth-thin"},{value:Ed.bold,text:b("labels.bold"),icon:W4,testId:"strokeWidth-bold"},{value:Ed.extraBold,text:b("labels.extraBold"),icon:Y4,testId:"strokeWidth-extraBold"}],value:kr(e,t,o=>o.strokeWidth,o=>o.hasOwnProperty("strokeWidth"),o=>o?null:t.currentItemStrokeWidth),onChange:o=>r(o)})]})}),o9=H({name:"changeSloppiness",label:"labels.sloppiness",trackEvent:!1,perform:(e,t,r)=>({elements:Xr(e,t,o=>ie(o,{seed:oo(),roughness:r})),appState:{...t,currentItemRoughness:r},storeAction:D.CAPTURE}),PanelComponent:({elements:e,appState:t,updateData:r})=>Kr("fieldset",{children:[Se("legend",{children:b("labels.sloppiness")}),Se(on,{group:"sloppiness",options:[{value:0,text:b("labels.architect"),icon:X4},{value:1,text:b("labels.artist"),icon:Z4},{value:2,text:b("labels.cartoonist"),icon:j4}],value:kr(e,t,o=>o.roughness,o=>o.hasOwnProperty("roughness"),o=>o?null:t.currentItemRoughness),onChange:o=>r(o)})]})}),PK=H({name:"changeStrokeStyle",label:"labels.strokeStyle",trackEvent:!1,perform:(e,t,r)=>({elements:Xr(e,t,o=>ie(o,{strokeStyle:r})),appState:{...t,currentItemStrokeStyle:r},storeAction:D.CAPTURE}),PanelComponent:({elements:e,appState:t,updateData:r})=>Kr("fieldset",{children:[Se("legend",{children:b("labels.strokeStyle")}),Se(on,{group:"strokeStyle",options:[{value:"solid",text:b("labels.strokeStyle_solid"),icon:ff},{value:"dashed",text:b("labels.strokeStyle_dashed"),icon:V4},{value:"dotted",text:b("labels.strokeStyle_dotted"),icon:K4}],value:kr(e,t,o=>o.strokeStyle,o=>o.hasOwnProperty("strokeStyle"),o=>o?null:t.currentItemStrokeStyle),onChange:o=>r(o)})]})}),n9=H({name:"changeOpacity",label:"labels.opacity",trackEvent:!1,perform:(e,t,r)=>({elements:Xr(e,t,o=>ie(o,{opacity:r}),!0),appState:{...t,currentItemOpacity:r},storeAction:D.CAPTURE}),PanelComponent:({elements:e,appState:t,updateData:r})=>Kr("label",{className:"control-label",children:[b("labels.opacity"),Se("input",{type:"range",min:"0",max:"100",step:"10",onChange:o=>r(+o.target.value),value:kr(e,t,o=>o.opacity,!0,t.currentItemOpacity)??void 0})]})}),i9=H({name:"changeFontSize",label:"labels.fontSize",trackEvent:!1,perform:(e,t,r,o)=>zf(e,t,o,()=>r,r),PanelComponent:({elements:e,appState:t,updateData:r,app:o})=>Kr("fieldset",{children:[Se("legend",{children:b("labels.fontSize")}),Se(on,{group:"font-size",options:[{value:16,text:b("labels.small"),icon:ay,testId:"fontSize-small"},{value:20,text:b("labels.medium"),icon:sy,testId:"fontSize-medium"},{value:28,text:b("labels.large"),icon:ly,testId:"fontSize-large"},{value:36,text:b("labels.veryLarge"),icon:cy,testId:"fontSize-veryLarge"}],value:kr(e,t,n=>{if(U(n))return n.fontSize;let i=me(n,o.scene.getNonDeletedElementsMap());return i?i.fontSize:null},n=>U(n)||me(n,o.scene.getNonDeletedElementsMap())!==null,n=>n?null:t.currentItemFontSize||Lt),onChange:n=>r(n)})]})}),Hf=H({name:"decreaseFontSize",label:"labels.decreaseFontSize",icon:xf,trackEvent:!1,perform:(e,t,r,o)=>zf(e,t,o,n=>Math.round(1/(1+S3)*n.fontSize)),keyTest:e=>e[T.CTRL_OR_CMD]&&e.shiftKey&&(e.key===T.CHEVRON_LEFT||e.key===T.COMMA)}),_f=H({name:"increaseFontSize",label:"labels.increaseFontSize",icon:xf,trackEvent:!1,perform:(e,t,r,o)=>zf(e,t,o,n=>Math.round(n.fontSize*(1+S3))),keyTest:e=>e[T.CTRL_OR_CMD]&&e.shiftKey&&(e.key===T.CHEVRON_RIGHT||e.key===T.PERIOD)}),a9=H({name:"changeFontFamily",label:"labels.fontFamily",trackEvent:!1,perform:(e,t,r,o)=>({elements:Xr(e,t,n=>{if(U(n)){let i=ie(n,{fontFamily:r,lineHeight:_r(r)});return Nt(i,o.scene.getContainerElement(n),o.scene.getNonDeletedElementsMap()),i}return n},!0),appState:{...t,currentItemFontFamily:r},storeAction:D.CAPTURE}),PanelComponent:({elements:e,appState:t,updateData:r,app:o})=>{let n=[{value:mt.Virgil,text:b("labels.handDrawn"),icon:Os,testId:"font-family-virgil"},{value:mt.Helvetica,text:b("labels.normal"),icon:dy,testId:"font-family-normal"},{value:mt.Cascadia,text:b("labels.code"),icon:my,testId:"font-family-code"}];return Kr("fieldset",{children:[Se("legend",{children:b("labels.fontFamily")}),Se(on,{group:"font-family",options:n,value:kr(e,t,i=>{if(U(i))return i.fontFamily;let a=me(i,o.scene.getNonDeletedElementsMap());return a?a.fontFamily:null},i=>U(i)||me(i,o.scene.getNonDeletedElementsMap())!==null,i=>i?null:t.currentItemFontFamily||Kt),onChange:i=>r(i)})]})}}),s9=H({name:"changeTextAlign",label:"Change text alignment",trackEvent:!1,perform:(e,t,r,o)=>({elements:Xr(e,t,n=>{if(U(n)){let i=ie(n,{textAlign:r});return Nt(i,o.scene.getContainerElement(n),o.scene.getNonDeletedElementsMap()),i}return n},!0),appState:{...t,currentItemTextAlign:r},storeAction:D.CAPTURE}),PanelComponent:({elements:e,appState:t,updateData:r,app:o})=>{let n=o.scene.getNonDeletedElementsMap();return Kr("fieldset",{children:[Se("legend",{children:b("labels.textAlign")}),Se(on,{group:"text-align",options:[{value:"left",text:b("labels.left"),icon:py,testId:"align-left"},{value:"center",text:b("labels.center"),icon:uy,testId:"align-horizontal-center"},{value:"right",text:b("labels.right"),icon:hy,testId:"align-right"}],value:kr(e,t,i=>{if(U(i))return i.textAlign;let a=me(i,n);return a?a.textAlign:null},i=>U(i)||me(i,n)!==null,i=>i?null:t.currentItemTextAlign),onChange:i=>r(i)})]})}}),l9=H({name:"changeVerticalAlign",label:"Change vertical alignment",trackEvent:{category:"element"},perform:(e,t,r,o)=>({elements:Xr(e,t,n=>{if(U(n)){let i=ie(n,{verticalAlign:r});return Nt(i,o.scene.getContainerElement(n),o.scene.getNonDeletedElementsMap()),i}return n},!0),appState:{...t},storeAction:D.CAPTURE}),PanelComponent:({elements:e,appState:t,updateData:r,app:o})=>Se("fieldset",{children:Se(on,{group:"text-align",options:[{value:yt.TOP,text:b("labels.alignTop"),icon:Se(gy,{theme:t.theme}),testId:"align-top"},{value:yt.MIDDLE,text:b("labels.centerVertically"),icon:Se(by,{theme:t.theme}),testId:"align-middle"},{value:yt.BOTTOM,text:b("labels.alignBottom"),icon:Se(fy,{theme:t.theme}),testId:"align-bottom"}],value:kr(e,t,n=>{if(U(n)&&n.containerId)return n.verticalAlign;let i=me(n,o.scene.getNonDeletedElementsMap());return i?i.verticalAlign:null},n=>U(n)||me(n,o.scene.getNonDeletedElementsMap())!==null,n=>n?null:yt.MIDDLE),onChange:n=>r(n)})})}),DK=H({name:"changeRoundness",label:"Change edge roundness",trackEvent:!1,perform:(e,t,r)=>({elements:Xr(e,t,o=>ie(o,{roundness:r==="round"?{type:Ko(o.type)?at.ADAPTIVE_RADIUS:at.PROPORTIONAL_RADIUS}:null})),appState:{...t,currentItemRoundness:r},storeAction:D.CAPTURE}),PanelComponent:({elements:e,appState:t,updateData:r})=>{let n=Sa(Ee(e),t).some(i=>i.roundness?.type===at.LEGACY);return Kr("fieldset",{children:[Se("legend",{children:b("labels.edges")}),Se(on,{group:"edges",options:[{value:"sharp",text:b("labels.sharp"),icon:q4},{value:"round",text:b("labels.round"),icon:Q4}],value:kr(e,t,i=>n?null:i.roundness?"round":"sharp",i=>i.hasOwnProperty("roundness"),i=>i?null:t.currentItemRoundness),onChange:i=>r(i)})]})}}),A3=e=>[{value:null,text:b("labels.arrowhead_none"),keyBinding:"q",icon:J4},{value:"arrow",text:b("labels.arrowhead_arrow"),keyBinding:"w",icon:Se($4,{flip:e})},{value:"bar",text:b("labels.arrowhead_bar"),keyBinding:"e",icon:Se(ty,{flip:e})},{value:"dot",text:b("labels.arrowhead_circle"),keyBinding:null,icon:Se(bf,{flip:e}),showInPicker:!1},{value:"circle",text:b("labels.arrowhead_circle"),keyBinding:"r",icon:Se(bf,{flip:e}),showInPicker:!1},{value:"circle_outline",text:b("labels.arrowhead_circle_outline"),keyBinding:null,icon:Se(ey,{flip:e}),showInPicker:!1},{value:"triangle",text:b("labels.arrowhead_triangle"),icon:Se(ry,{flip:e}),keyBinding:"t"},{value:"triangle_outline",text:b("labels.arrowhead_triangle_outline"),icon:Se(oy,{flip:e}),keyBinding:null,showInPicker:!1},{value:"diamond",text:b("labels.arrowhead_diamond"),icon:Se(ny,{flip:e}),keyBinding:null,showInPicker:!1},{value:"diamond_outline",text:b("labels.arrowhead_diamond_outline"),icon:Se(iy,{flip:e}),keyBinding:null,showInPicker:!1}],RK=H({name:"changeArrowhead",label:"Change arrowheads",trackEvent:!1,perform:(e,t,r)=>({elements:Xr(e,t,o=>{if(ne(o)){let{position:n,type:i}=r;if(n==="start")return ie(o,{startArrowhead:i});if(n==="end")return ie(o,{endArrowhead:i})}return o}),appState:{...t,[r.position==="start"?"currentItemStartArrowhead":"currentItemEndArrowhead"]:r.type},storeAction:D.CAPTURE}),PanelComponent:({elements:e,appState:t,updateData:r})=>{let o=fn().rtl;return Kr("fieldset",{children:[Se("legend",{children:b("labels.arrowheads")}),Kr("div",{className:"iconSelectList buttonList",children:[Se(Ff,{label:"arrowhead_start",options:A3(!o),value:kr(e,t,n=>ne(n)&&$i(n.type)?n.startArrowhead:t.currentItemStartArrowhead,!0,t.currentItemStartArrowhead),onChange:n=>r({position:"start",type:n})}),Se(Ff,{label:"arrowhead_end",group:"arrowheads",options:A3(!!o),value:kr(e,t,n=>ne(n)&&$i(n.type)?n.endArrowhead:t.currentItemEndArrowhead,!0,t.currentItemEndArrowhead),onChange:n=>r({position:"end",type:n})})]})]})}});f();V();be();ge();Xe();qg();ip();G();Ze();f();import{useEffect as c9}from"react";import{jsx as m9}from"react/jsx-runtime";var Vs=()=>{let e=document.querySelector(".excalidraw-tooltip");if(e)return e;let t=document.createElement("div");return document.body.appendChild(t),t.classList.add("excalidraw-tooltip"),t},Gf=(e,t,r="bottom")=>{let o=e.getBoundingClientRect(),n=window.innerWidth,i=window.innerHeight,a=5,s=t.left+t.width/2-o.width/2;s<0?s=a:s+o.width>=n&&(s=n-o.width-a);let l;r==="bottom"?(l=t.top+t.height+a,l+o.height>=i&&(l=t.top-o.height-a)):(l=t.top-o.height-a,l<0&&(l=t.top+t.height+a)),Object.assign(e.style,{top:`${l}px`,left:`${s}px`})},d9=(e,t,r,o)=>{t.classList.add("excalidraw-tooltip--visible"),t.style.minWidth=o?"50ch":"10ch",t.style.maxWidth=o?"50ch":"15ch",t.textContent=r;let n=e.getBoundingClientRect();Gf(t,n)},Zr=({children:e,label:t,long:r=!1,style:o,disabled:n})=>(c9(()=>()=>Vs().classList.remove("excalidraw-tooltip--visible"),[]),n?null:m9("div",{className:"excalidraw-tooltip-wrapper",onPointerEnter:i=>d9(i.currentTarget,Vs(),t,r),onPointerLeave:()=>Vs().classList.remove("excalidraw-tooltip--visible"),style:o,children:e}));Ge();Ar();$t();hs();Oe();import{jsx as Mp,jsxs as f9}from"react/jsx-runtime";var p9=H({name:"changeViewBackgroundColor",label:"labels.canvasBackground",paletteName:"Change canvas background color",trackEvent:!1,predicate:(e,t,r,o)=>!!o.props.UIOptions.canvasActions.changeViewBackgroundColor&&!t.viewModeEnabled,perform:(e,t,r)=>({appState:{...t,...r},storeAction:r.viewBackgroundColor?D.CAPTURE:D.NONE}),PanelComponent:({elements:e,appState:t,updateData:r,appProps:o})=>Mp(Ic,{palette:null,topPicks:cd,label:b("labels.canvasBackground"),type:"canvasBackground",color:t.viewBackgroundColor,onChange:n=>r({viewBackgroundColor:n}),"data-testid":"canvas-background-picker",elements:e,appState:t,updateData:r})}),_n=H({name:"clearCanvas",label:"labels.clearCanvas",paletteName:"Clear canvas",icon:Bo,trackEvent:{category:"canvas"},predicate:(e,t,r,o)=>!!o.props.UIOptions.canvasActions.clearCanvas&&!t.viewModeEnabled,perform:(e,t,r,o)=>(o.imageCache.clear(),{elements:e.map(n=>ie(n,{isDeleted:!0})),appState:{...jt(),files:{},theme:t.theme,penMode:t.penMode,penDetected:t.penDetected,exportBackground:t.exportBackground,exportEmbedScene:t.exportEmbedScene,gridSize:t.gridSize,showStats:t.showStats,pasteDialog:t.pasteDialog,activeTool:t.activeTool.type==="image"?{...t.activeTool,type:"selection"}:t.activeTool},storeAction:D.CAPTURE})}),Sp=H({name:"zoomIn",label:"buttons.zoomIn",viewMode:!0,icon:Jg,trackEvent:{category:"canvas"},perform:(e,t,r,o)=>({appState:{...t,...Hn({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:rn(t.zoom.value+Zi)},t),userToFollow:null},storeAction:D.NONE}),PanelComponent:({updateData:e,appState:t})=>Mp(ce,{type:"button",className:"zoom-in-button zoom-button",icon:Jg,title:`${b("buttons.zoomIn")} \u2014 ${N("CtrlOrCmd++")}`,"aria-label":b("buttons.zoomIn"),disabled:t.zoom.value>=oh,onClick:()=>{e(null)}}),keyTest:e=>(e.code===fe.EQUAL||e.code===fe.NUM_ADD)&&(e[T.CTRL_OR_CMD]||e.shiftKey)}),Ip=H({name:"zoomOut",label:"buttons.zoomOut",icon:$g,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,r,o)=>({appState:{...t,...Hn({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:rn(t.zoom.value-Zi)},t),userToFollow:null},storeAction:D.NONE}),PanelComponent:({updateData:e,appState:t})=>Mp(ce,{type:"button",className:"zoom-out-button zoom-button",icon:$g,title:`${b("buttons.zoomOut")} \u2014 ${N("CtrlOrCmd+-")}`,"aria-label":b("buttons.zoomOut"),disabled:t.zoom.value<=ja,onClick:()=>{e(null)}}),keyTest:e=>(e.code===fe.MINUS||e.code===fe.NUM_SUBTRACT)&&(e[T.CTRL_OR_CMD]||e.shiftKey)}),u9=H({name:"resetZoom",label:"buttons.resetZoom",icon:T4,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,r,o)=>({appState:{...t,...Hn({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:rn(1)},t),userToFollow:null},storeAction:D.NONE}),PanelComponent:({updateData:e,appState:t})=>Mp(Zr,{label:b("buttons.resetZoom"),style:{height:"100%"},children:f9(ce,{type:"button",className:"reset-zoom-button zoom-button",title:b("buttons.resetZoom"),"aria-label":b("buttons.resetZoom"),onClick:()=>{e(null)},children:[(t.zoom.value*100).toFixed(0),"%"]})}),keyTest:e=>(e.code===fe.ZERO||e.code===fe.NUM_ZERO)&&(e[T.CTRL_OR_CMD]||e.shiftKey)}),h9=(e,t)=>{let[r,o,n,i]=e,a=n-r,s=t.width/a,l=i-o,c=t.height/l,d=Math.min(s,c),m=Math.floor(d/Zi)*Zi;return Math.min(Math.max(m,ja),1)},M3=({bounds:e,appState:t,fitToViewport:r=!1,viewportZoomFactor:o=.7})=>{let[n,i,a,s]=e,l=(n+a)/2,c=(i+s)/2,d,m,p;if(r){let u=a-n,h=s-i;d=Math.min(t.width/u,t.height/h)*Math.min(1,Math.max(o,.1)),d=Math.min(Math.max(d,ja),oh);let x=t.width;if(t.openSidebar){let w=document.querySelector(".sidebar")?.offsetWidth??0;x=document.documentElement.getAttribute("dir")==="rtl"?t.width+w:t.width-w}m=x/2*(1/d)-l,p=t.height/2*(1/d)-c}else{d=h9(e,{width:t.width,height:t.height});let u=jg({scenePoint:{x:l,y:c},viewportDimensions:{width:t.width,height:t.height},zoom:{value:d}});m=u.scrollX,p=u.scrollY}return{appState:{...t,scrollX:m,scrollY:p,zoom:{value:d}},storeAction:D.NONE}},Mc=({targetElements:e,appState:t,fitToViewport:r,viewportZoomFactor:o})=>{let n=Te(Ee(e));return M3({bounds:n,appState:t,fitToViewport:r,viewportZoomFactor:o})},cX=H({name:"zoomToFitSelectionInViewport",label:"labels.zoomToFitViewport",icon:Ep,trackEvent:{category:"canvas"},perform:(e,t,r,o)=>{let n=o.scene.getSelectedElements(t);return Mc({targetElements:n.length?n:e,appState:{...t,userToFollow:null},fitToViewport:!1})},keyTest:e=>e.code===fe.TWO&&e.shiftKey&&!e.altKey&&!e[T.CTRL_OR_CMD]}),dX=H({name:"zoomToFitSelection",label:"helpDialog.zoomToSelection",icon:Ep,trackEvent:{category:"canvas"},perform:(e,t,r,o)=>{let n=o.scene.getSelectedElements(t);return Mc({targetElements:n.length?n:e,appState:{...t,userToFollow:null},fitToViewport:!0})},keyTest:e=>e.code===fe.THREE&&e.shiftKey&&!e.altKey&&!e[T.CTRL_OR_CMD]}),g9=H({name:"zoomToFit",label:"helpDialog.zoomToFit",icon:Ep,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t)=>Mc({targetElements:e,appState:{...t,userToFollow:null},fitToViewport:!1}),keyTest:e=>e.code===fe.ONE&&e.shiftKey&&!e.altKey&&!e[T.CTRL_OR_CMD]}),Pa=H({name:"toggleTheme",label:(e,t)=>t.theme===ae.DARK?"buttons.lightMode":"buttons.darkMode",keywords:["toggle","dark","light","mode","theme"],icon:e=>e.theme===ae.LIGHT?yc:wc,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,r)=>({appState:{...t,theme:r||(t.theme===ae.LIGHT?ae.DARK:ae.LIGHT)},storeAction:D.NONE}),keyTest:e=>e.altKey&&e.shiftKey&&e.code===fe.D,predicate:(e,t,r,o)=>!!o.props.UIOptions.canvasActions.toggleTheme}),mX=H({name:"toggleEraserTool",label:"toolBar.eraser",trackEvent:{category:"toolbar"},perform:(e,t)=>{let r;return Tr(t)?r=Qe(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):r=Qe(t,{type:"eraser",lastActiveToolBeforeEraser:t.activeTool}),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:r},storeAction:D.CAPTURE}},keyTest:e=>e.key===T.E}),k3=H({name:"toggleHandTool",label:"toolBar.hand",paletteName:"Toggle hand tool",trackEvent:{category:"toolbar"},icon:pp,viewMode:!1,perform:(e,t,r,o)=>{let n;return Do(t)?n=Qe(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):(n=Qe(t,{type:"hand",lastActiveToolBeforeEraser:t.activeTool}),We(o.interactiveCanvas,Le.GRAB)),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:n},storeAction:D.CAPTURE}},keyTest:e=>!e.altKey&&!e[T.CTRL_OR_CMD]&&e.key===T.H});f();ge();be();G();Ze();Ge();zt();Zt();io();se();hs();Oe();import{jsx as b9}from"react/jsx-runtime";var uo=H({name:"finalize",label:"",trackEvent:!1,perform:(e,t,r,o)=>{let{interactiveCanvas:n,focusContainer:i,scene:a}=o,s=a.getNonDeletedElementsMap();if(t.editingLinearElement){let{elementId:p,startBindingElement:u,endBindingElement:h}=t.editingLinearElement,x=Z.getElement(p,s);if(x)return wr(x)&&la(x,u,h,s),{elements:x.points.length<2||so(x)?e.filter(E=>E.id!==x.id):void 0,appState:{...t,cursorButton:"up",editingLinearElement:null,selectedLinearElement:null},storeAction:D.CAPTURE}}let l=e,c=t.pendingImageElementId&&a.getElement(t.pendingImageElementId);c&&z(c,{isDeleted:!0},!1),window.document.activeElement instanceof HTMLElement&&i();let d=t.multiElement?t.multiElement:t.editingElement?.type==="freedraw"?t.editingElement:null;if(d){if(d.type!=="freedraw"&&t.lastPointerDownWith!=="touch"){let{points:u,lastCommittedPoint:h}=d;(!h||u[u.length-1]!==h)&&z(d,{points:d.points.slice(0,-1)})}so(d)&&(l=l.filter(u=>u.id!==d.id));let p=dr(d.points,t.zoom.value);if((d.type==="line"||d.type==="freedraw")&&p){let u=d.points,h=u[0];z(d,{points:u.map((x,E)=>E===u.length-1?[h[0],h[1]]:x)})}if(wr(d)&&!p&&d.points.length>1){let[u,h]=Z.getPointAtIndexGlobalCoordinates(d,-1,X(e));Gl(d,t,{x:u,y:h},o)}}(!t.activeTool.locked&&t.activeTool.type!=="freedraw"||!d)&&Ur(n);let m;return t.activeTool.type==="eraser"?m=Qe(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):m=Qe(t,{type:"selection"}),{elements:l,appState:{...t,cursorButton:"up",activeTool:(t.activeTool.locked||t.activeTool.type==="freedraw")&&d?t.activeTool:m,activeEmbeddable:null,draggingElement:null,multiElement:null,editingElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:d&&!t.activeTool.locked&&t.activeTool.type!=="freedraw"?{...t.selectedElementIds,[d.id]:!0}:t.selectedElementIds,selectedLinearElement:d&&ne(d)?new Z(d):t.selectedLinearElement,pendingImageElementId:null},storeAction:D.CAPTURE}},keyTest:(e,t)=>e.key===T.ESCAPE&&(t.editingLinearElement!==null||!t.draggingElement&&t.multiElement===null)||(e.key===T.ESCAPE||e.key===T.ENTER)&&t.multiElement!==null,PanelComponent:({appState:e,updateData:t,data:r})=>b9(ce,{type:"button",icon:N4,title:b("buttons.done"),"aria-label":b("buttons.done"),onClick:t,visible:e.multiElement!=null,size:r?.size||"medium"})});f();f();G();import{useState as x9}from"react";ge();import{jsx as L3,jsxs as E9}from"react/jsx-runtime";var P3=e=>{let{id:t}=Gt(),[r,o]=x9(e.value),n=a=>{e.ignoreFocus||F0(a.target);let s=a.target.value;s!==e.value&&e.onChange(s)},i=a=>{if(a.key===T.ENTER){if(a.preventDefault(),a.nativeEvent.isComposing||a.keyCode===229)return;a.currentTarget.blur()}};return E9("div",{className:"ProjectName",children:[L3("label",{className:"ProjectName-label",htmlFor:"filename",children:`${e.label}:`}),L3("input",{type:"text",className:"TextInput",onBlur:n,onKeyDown:i,id:`${t}-filename`,value:r,onChange:a=>o(a.target.value)})]})};f();V();import{jsx as kc}from"react/jsx-runtime";var R3=e=>{let t=e.title||(e.value===ae.DARK?b("buttons.lightMode"):b("buttons.darkMode"));return kc(ce,{type:"icon",icon:e.value===ae.LIGHT?D3.MOON:D3.SUN,title:t,"aria-label":t,onClick:()=>e.onChange(e.value===ae.DARK?ae.LIGHT:ae.DARK),"data-testid":"toggle-dark-mode"})},D3={SUN:kc("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:kc("path",{fill:"currentColor",d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"})}),MOON:kc("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:kc("path",{fill:"currentColor",d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"})})};f();wi();V();be();se();Xe();mc();G();Sr();Dn();On();nr();Sr();On();var Da=(e,{selectedElementIds:t},r)=>{e=Ee(e);let o=r&&Ye(e,{selectedElementIds:t}),n=null,i=o?ue(e,{selectedElementIds:t},{includeBoundTextElement:!0}):e;return o&&(i.length===1&&ee(i[0])?(n=i[0],i=Ss(e,n)):i.length>1&&(i=ue(e,{selectedElementIds:t},{includeBoundTextElement:!0,includeElementsInFrames:!0}))),{exportingFrame:n,exportedElements:Yo(i)}},Ra=async(e,t,r,o,{exportBackground:n,exportPadding:i=Co,viewBackgroundColor:a,name:s=r.name||wd,fileHandle:l=null,exportingFrame:c=null})=>{if(t.length===0)throw new Error(b("alerts.cannotExportEmptyCanvas"));if(e==="svg"||e==="clipboard-svg"){let m=As(t,{exportBackground:n,exportWithDarkMode:r.exportWithDarkMode,viewBackgroundColor:a,exportPadding:i,exportScale:r.exportScale,exportEmbedScene:r.exportEmbedScene&&e==="svg"},o,{exportingFrame:c});if(e==="svg")return xs(m.then(p=>new Blob([p.outerHTML],{type:te.svg})),{description:"Export to SVG",name:s,extension:r.exportEmbedScene?"excalidraw.svg":"svg",fileHandle:l});if(e==="clipboard-svg"){let p=await m.then(u=>u.outerHTML);try{await Fn(p)}catch{throw new Error(b("errors.copyToSystemClipboardFailed"))}return}}let d=Bm(t,r,o,{exportBackground:n,viewBackgroundColor:a,exportPadding:i,exportingFrame:c});if(e==="png"){let m=Nn(d);return r.exportEmbedScene&&(m=m.then(p=>Promise.resolve().then(()=>(ws(),ic)).then(({encodePngMetadata:u})=>u({blob:p,metadata:Ei(t,r,o,"local")})))),xs(m,{description:"Export to PNG",name:s,extension:"png",fileHandle:l})}else if(e==="clipboard")try{let m=Nn(d);await Um(m)}catch(m){throw console.warn(m),m.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(b("canvasError.canvasTooBig")):bn&&m.name==="TypeError"?new Error(`${b("alerts.couldNotCopyToClipboard")}

${b("hints.firefox_clipboard_write")}`):new Error(b("alerts.couldNotCopyToClipboard"))}else throw new Error("Unsupported export type")};f();Sr();var N3=async(e,t,r,o)=>{let{exportBackground:n,viewBackgroundColor:i,fileHandle:a}=t,s=dg(a);if(!a||!Gx(s))throw new Error("fileHandle should exist and should be of type svg or png when resaving");t={...t,exportEmbedScene:!0};let{exportedElements:l,exportingFrame:c}=Da(e,t,!1);return await Ra(s,l,t,r,{exportBackground:n,viewBackgroundColor:i,name:o,fileHandle:a,exportingFrame:c}),{fileHandle:a}};ge();Ze();f();import y9 from"clsx";import{jsx as O3,jsxs as w9}from"react/jsx-runtime";var Na=({children:e,checked:t,onChange:r,className:o})=>w9("div",{className:y9("Checkbox",o,{"is-checked":t}),onClick:n=>{r(!t,n),n.currentTarget.querySelector(".Checkbox-box").focus()},children:[O3("button",{className:"Checkbox-box",role:"checkbox","aria-checked":t,children:k4}),O3("div",{className:"Checkbox-label",children:e})]});mc();V();Xe();be();Sr();Dn();Oe();import{Fragment as v9,jsx as Gn,jsxs as C9}from"react/jsx-runtime";var Uf=H({name:"changeProjectName",label:"labels.fileTitle",trackEvent:!1,perform:(e,t,r)=>({appState:{...t,name:r},storeAction:D.NONE}),PanelComponent:({appState:e,updateData:t,appProps:r,data:o,app:n})=>Gn(P3,{label:b("labels.fileTitle"),value:n.getName(),onChange:i=>t(i),ignoreFocus:o?.ignoreFocus??!1})}),B3=H({name:"changeExportScale",label:"imageExportDialog.scale",trackEvent:{category:"export",action:"scale"},perform:(e,t,r)=>({appState:{...t,exportScale:r},storeAction:D.NONE}),PanelComponent:({elements:e,appState:t,updateData:r})=>{let o=Ee(e),i=Ye(o,t)?ue(o,t):o;return Gn(v9,{children:Ja.map(a=>{let[s,l]=mE(i,Co,a),c=`${b("imageExportDialog.label.scale")} ${a}x (${s}x${l})`;return Gn(ce,{size:"small",type:"radio",icon:`${a}x`,name:"export-canvas-scale",title:c,"aria-label":c,id:"export-canvas-scale",checked:a===t.exportScale,onChange:()=>r(a)},a)})})}}),Wf=H({name:"changeExportBackground",label:"imageExportDialog.label.withBackground",trackEvent:{category:"export",action:"toggleBackground"},perform:(e,t,r)=>({appState:{...t,exportBackground:r},storeAction:D.NONE}),PanelComponent:({appState:e,updateData:t})=>Gn(Na,{checked:e.exportBackground,onChange:r=>t(r),children:b("imageExportDialog.label.withBackground")})}),kp=H({name:"changeExportEmbedScene",label:"imageExportDialog.tooltip.embedScene",trackEvent:{category:"export",action:"embedScene"},perform:(e,t,r)=>({appState:{...t,exportEmbedScene:r},storeAction:D.NONE}),PanelComponent:({appState:e,updateData:t})=>C9(Na,{checked:e.exportEmbedScene,onChange:r=>t(r),children:[b("imageExportDialog.label.embedScene"),Gn(Zr,{label:b("imageExportDialog.tooltip.embedScene"),long:!0,children:Gn("div",{className:"excalidraw-tooltip-icon",children:O4})})]})}),Lp=H({name:"saveToActiveFile",label:"buttons.save",icon:Ma,trackEvent:{category:"export"},predicate:(e,t,r,o)=>!!o.props.UIOptions.canvasActions.saveToActiveFile&&!!t.fileHandle&&!t.viewModeEnabled,perform:async(e,t,r,o)=>{let n=!!t.fileHandle;try{let{fileHandle:i}=vs(t.fileHandle)?await N3(e,t,o.files,o.getName()):await vm(e,t,o.files,o.getName());return{storeAction:D.NONE,appState:{...t,fileHandle:i,toast:n?{message:i?.name?b("toast.fileSavedToFilename").replace("{filename}",`"${i.name}"`):b("toast.fileSaved")}:null}}}catch(i){return i?.name!=="AbortError"?console.error(i):console.warn(i),{storeAction:D.NONE}}},keyTest:e=>e.key===T.S&&e[T.CTRL_OR_CMD]&&!e.shiftKey}),Lc=H({name:"saveFileToDisk",label:"exportDialog.disk_title",icon:Ma,viewMode:!0,trackEvent:{category:"export"},perform:async(e,t,r,o)=>{try{let{fileHandle:n}=await vm(e,{...t,fileHandle:null},o.files,o.getName());return{storeAction:D.NONE,appState:{...t,openDialog:null,fileHandle:n,toast:{message:b("toast.fileSaved")}}}}catch(n){return n?.name!=="AbortError"?console.error(n):console.warn(n),{storeAction:D.NONE}}},keyTest:e=>e.key===T.S&&e.shiftKey&&e[T.CTRL_OR_CMD],PanelComponent:({updateData:e})=>Gn(ce,{type:"button",icon:P4,title:b("buttons.saveAs"),"aria-label":b("buttons.saveAs"),showAriaLabel:ke().editor.isMobile,hidden:!fi,onClick:()=>e(null),"data-testid":"save-as-button"})}),Ks=H({name:"loadScene",label:"buttons.load",trackEvent:{category:"export"},predicate:(e,t,r,o)=>!!o.props.UIOptions.canvasActions.loadScene&&!t.viewModeEnabled,perform:async(e,t,r,o)=>{try{let{elements:n,appState:i,files:a}=await gg(t,e);return{elements:n,appState:i,files:a,storeAction:D.CAPTURE}}catch(n){return n?.name==="AbortError"?(console.warn(n),!1):{elements:e,appState:{...t,errorMessage:n.message},files:o.files,storeAction:D.NONE}}},keyTest:e=>e[T.CTRL_OR_CMD]&&e.key===T.O}),F3=H({name:"exportWithDarkMode",label:"imageExportDialog.label.darkMode",trackEvent:{category:"export",action:"toggleTheme"},perform:(e,t,r)=>({appState:{...t,exportWithDarkMode:r},storeAction:D.NONE}),PanelComponent:({appState:e,updateData:t})=>Gn("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"-45px",marginBottom:"10px"},children:Gn(R3,{value:e.exportWithDarkMode?ae.DARK:ae.LIGHT,onChange:r=>{t(r===ae.DARK)},title:b("imageExportDialog.label.darkMode")})})});f();be();ge();Ze();Ge();V();lt();se();Xe();Oe();var z3="{}",Yf=H({name:"copyStyles",label:"labels.copyStyles",icon:yf,trackEvent:{category:"element"},perform:(e,t,r,o)=>{let n=[],i=e.find(a=>t.selectedElementIds[a.id]);if(n.push(i),i&&tr(i)){let a=me(i,o.scene.getNonDeletedElementsMap());n.push(a)}return i&&(z3=JSON.stringify(n)),{appState:{...t,toast:{message:b("toast.copyStyles")}},storeAction:D.NONE}},keyTest:e=>e[T.CTRL_OR_CMD]&&e.altKey&&e.code===fe.C}),Vf=H({name:"pasteStyles",label:"labels.pasteStyles",icon:yf,trackEvent:{category:"element"},perform:(e,t,r,o)=>{let n=JSON.parse(z3),i=n[0],a=n[1];if(!Il(i))return{elements:e,storeAction:D.NONE};let s=ue(e,t,{includeBoundTextElement:!0}),l=s.map(c=>c.id);return{elements:e.map(c=>{if(l.includes(c.id)){let d=i;if(U(c)&&c.containerId&&(d=a),!d)return c;let m=ie(c,{backgroundColor:d?.backgroundColor,strokeWidth:d?.strokeWidth,strokeColor:d?.strokeColor,strokeStyle:d?.strokeStyle,fillStyle:d?.fillStyle,opacity:d?.opacity,roughness:d?.roughness,roundness:d.roundness?K0(d.roundness.type,c)?d.roundness:X0(c):null});if(U(m)){let p=d.fontSize||Lt,u=d.fontFamily||Kt;m=ie(m,{fontSize:p,fontFamily:u,textAlign:d.textAlign||Qn,lineHeight:d.lineHeight||_r(u)});let h=null;m.containerId&&(h=s.find(x=>U(m)&&x.id===m.containerId)||null),Nt(m,h,o.scene.getNonDeletedElementsMap())}return m.type==="arrow"&&we(d)&&(m=ie(m,{startArrowhead:d.startArrowhead,endArrowhead:d.endArrowhead})),ee(c)&&(m=ie(m,{roundness:null,backgroundColor:"transparent"})),m}return c}),storeAction:D.CAPTURE}},keyTest:e=>e[T.CTRL_OR_CMD]&&e.altKey&&e.code===fe.V});f();be();Ze();ge();Oe();import{jsx as H3}from"react/jsx-runtime";var T9=H({name:"toggleCanvasMenu",label:"buttons.menu",trackEvent:{category:"menu"},perform:(e,t)=>({appState:{...t,openMenu:t.openMenu==="canvas"?null:"canvas"},storeAction:D.NONE}),PanelComponent:({appState:e,updateData:t})=>H3(ce,{type:"button",icon:sp,"aria-label":b("buttons.menu"),onClick:t,selected:e.openMenu==="canvas"})}),A9=H({name:"toggleEditMenu",label:"buttons.edit",trackEvent:{category:"menu"},perform:(e,t)=>({appState:{...t,openMenu:t.openMenu==="shape"?null:"shape"},storeAction:D.NONE}),PanelComponent:({elements:e,appState:t,updateData:r})=>H3(ce,{visible:Ta(t,Ee(e)),type:"button",icon:D4,"aria-label":b("buttons.edit"),onClick:r,selected:t.openMenu==="shape"})}),Oa=H({name:"toggleShortcuts",label:"welcomeScreen.defaults.helpHint",icon:S4,viewMode:!0,trackEvent:{category:"menu",action:"toggleHelpDialog"},perform:(e,t,r,{focusContainer:o})=>(t.openDialog?.name==="help"&&o(),{appState:{...t,openDialog:t.openDialog?.name==="help"?null:{name:"help"}},storeAction:D.NONE}),keyTest:e=>e.key===T.QUESTION_MARK});f();ge();G();Ze();Ge();Xe();mr();be();So();se();nr();no();Oe();import{jsx as Xs}from"react/jsx-runtime";var S9=e=>{if(e.length>=2){let t=e[0].groupIds;for(let r of t)if(e.reduce((o,n)=>o&&ua(n,r),!0))return!0}return!1},_3=(e,t,r)=>{let o=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0});return o.length>=2&&!S9(o)},Kf=H({name:"group",label:"labels.group",icon:e=>Xs(hf,{theme:e.theme}),trackEvent:{category:"element"},perform:(e,t,r,o)=>{let n=o.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0});if(n.length<2)return{appState:t,elements:e,storeAction:D.NONE};let i=Sn(t);if(i.length===1){let E=i[0],w=new Set(tt(e,E).map(A=>A.id)),y=new Set(n.map(A=>A.id));if(new Set([...Array.from(w),...Array.from(y)]).size===w.size)return{appState:t,elements:e,storeAction:D.NONE}}let a=[...e];new Set(n.map(E=>E.frameId)).size>1&&OE(n).forEach((w,y)=>{Ps(w,o.scene.getNonDeletedElementsMap())});let l=Rt(),c=X(n);a=a.map(E=>c.get(E.id)?ie(E,{groupIds:ax(E.groupIds,l,t.editingGroupId)}):E);let d=tt(a,l),m=d[d.length-1],p=a.lastIndexOf(m),u=a.slice(p+1),h=a.slice(0,p).filter(E=>!ua(E,l)),x=Ft([...h,...d,...u],X(d));return{appState:{...t,...Qh(l,{...t,selectedGroupIds:{}},Ee(a))},elements:x,storeAction:D.CAPTURE}},predicate:(e,t,r,o)=>_3(e,t,o),keyTest:e=>!e.shiftKey&&e[T.CTRL_OR_CMD]&&e.key===T.G,PanelComponent:({elements:e,appState:t,updateData:r,app:o})=>Xs(ce,{hidden:!_3(e,t,o),type:"button",icon:Xs(hf,{theme:t.theme}),onClick:()=>r(null),title:`${b("labels.group")} \u2014 ${N("CtrlOrCmd+G")}`,"aria-label":b("labels.group"),visible:Ye(Ee(e),t)})}),Xf=H({name:"ungroup",label:"labels.ungroup",icon:e=>Xs(gf,{theme:e.theme}),trackEvent:{category:"element"},perform:(e,t,r,o)=>{let n=Sn(t),i=X(e);if(n.length===0)return{appState:t,elements:e,storeAction:D.NONE};let a=[...e],s=[];a=a.map(p=>{Ie(p)&&s.push(p.id);let u=sx(p.groupIds,t.selectedGroupIds);return u.length===p.groupIds.length?p:ie(p,{groupIds:u})});let l=qt(t,Ee(a),t,null),c=o.scene.getSelectedElements(t),d=new Set(c.filter(p=>p.frameId).map(p=>p.frameId));return pc(e).filter(p=>d.has(p.id)).forEach(p=>{p&&(a=Km(a,Ls(a,p,t,i),p,o))}),l.selectedElementIds=Object.entries(l.selectedElementIds).reduce((p,[u,h])=>(h&&!s.includes(u)&&(p[u]=!0),p),{}),{appState:{...t,...l},elements:a,storeAction:D.CAPTURE}},keyTest:e=>e.shiftKey&&e[T.CTRL_OR_CMD]&&e.key===T.G.toUpperCase(),predicate:(e,t)=>Sn(t).length>0,PanelComponent:({elements:e,appState:t,updateData:r})=>Xs(ce,{type:"button",hidden:Sn(t).length===0,icon:Xs(gf,{theme:t.theme}),onClick:()=>r(null),title:`${b("labels.ungroup")} \u2014 ${N("CtrlOrCmd+Shift+G")}`,"aria-label":b("labels.ungroup"),visible:Ye(Ee(e),t)})});f();f();V();f();var Pp=(e,t,r,o,n,i,a)=>{e.beginPath(),e.moveTo(t+i,r),e.lineTo(t+o-i,r),e.quadraticCurveTo(t+o,r,t+o,r+i),e.lineTo(t+o,r+n-i),e.quadraticCurveTo(t+o,r+n,t+o-i,r+n),e.lineTo(t+i,r+n),e.quadraticCurveTo(t,r+n,t,r+n-i),e.lineTo(t,r+i),e.quadraticCurveTo(t,r,t+i,r),e.closePath(),e.fill(),a&&(e.strokeStyle=a),e.stroke()};f();function I9(e){let t=0;if(e.length===0)return t;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);t=(t<<5)-t+o}return t}var Ba=(e,t)=>`hsl(${Math.abs(I9(t?.id||e))%37*10}, 100%, 83%)`,G3=e=>{let t=e?.trim()?.codePointAt(0);return(t?String.fromCodePoint(t):"?").toUpperCase()},U3=({context:e,renderConfig:t,appState:r,normalizedWidth:o,normalizedHeight:n})=>{for(let[i,a]of t.remotePointerViewportCoords){let{x:s,y:l}=a,c=r.collaborators.get(i);s-=r.offsetLeft,l-=r.offsetTop;let d=11,m=14,p=s<0||s>o-d||l<0||l>n-m;s=Math.max(s,0),s=Math.min(s,o-d),l=Math.max(l,0),l=Math.min(l,n-m);let u=Ba(i,c);e.save(),e.strokeStyle=u,e.fillStyle=u;let h=t.remotePointerUserStates.get(i),x=p||h==="idle"||h==="away";x&&(e.globalAlpha=.3),t.remotePointerButton.get(i)==="down"&&(e.beginPath(),e.arc(s,l,15,0,2*Math.PI,!1),e.lineWidth=3,e.strokeStyle="#ffffff88",e.stroke(),e.closePath(),e.beginPath(),e.arc(s,l,15,0,2*Math.PI,!1),e.lineWidth=1,e.strokeStyle=u,e.stroke(),e.closePath());let E=r.theme===ae.DARK?"#2f6330":m0,w=c?.isSpeaking;w&&(e.fillStyle=E,e.strokeStyle=E,e.lineWidth=10,e.lineJoin="round",e.beginPath(),e.moveTo(s,l),e.lineTo(s+0,l+14),e.lineTo(s+4,l+9),e.lineTo(s+11,l+8),e.closePath(),e.stroke(),e.fill()),e.fillStyle=xl,e.strokeStyle=xl,e.lineWidth=6,e.lineJoin="round",e.beginPath(),e.moveTo(s,l),e.lineTo(s+0,l+14),e.lineTo(s+4,l+9),e.lineTo(s+11,l+8),e.closePath(),e.stroke(),e.fill(),e.fillStyle=u,e.strokeStyle=u,e.lineWidth=2,e.lineJoin="round",e.beginPath(),x?(e.moveTo(s-1,l-1),e.lineTo(s-1,l+15),e.lineTo(s+5,l+10),e.lineTo(s+12,l+9),e.closePath(),e.fill()):(e.moveTo(s,l),e.lineTo(s+0,l+14),e.lineTo(s+4,l+9),e.lineTo(s+11,l+8),e.closePath(),e.fill(),e.stroke());let y=t.remotePointerUsernames.get(i)||"";if(!p&&y){e.font="600 12px sans-serif";let v=(w?s+0:s)+d/2,A=(w?l+0:l)+m+2,L=5,S=3,k=e.measureText(y),R=k.actualBoundingBoxDescent+k.actualBoundingBoxAscent,_=Math.max(R,12),M=v-1,O=A-1,I=k.width+2+L*2+2,F=_+2+S*2+2;if(e.roundRect?(e.beginPath(),e.roundRect(M,O,I,F,8),e.fillStyle=u,e.fill(),e.strokeStyle=xl,e.stroke(),w&&(e.beginPath(),e.roundRect(M-2,O-2,I+4,F+4,8),e.strokeStyle=E,e.stroke())):Pp(e,M,O,I,F,8,xl),e.fillStyle=d0,e.fillText(y,v+L+1,A+S+k.actualBoundingBoxAscent+Math.floor((_-R)/2)+2),w){e.fillStyle=E;let Q=8,j=8,oe=5;e.fillRect(M+I+j,O+(F/2-Q/2),2,Q),e.fillRect(M+I+j+oe,O+(F/2-Q*2/2),2,Q*2),e.fillRect(M+I+j+oe*2,O+(F/2-Q/2),2,Q)}}e.restore(),e.closePath()}};f();import{useState as M9}from"react";import k9 from"clsx";import{jsx as W3}from"react/jsx-runtime";var Zf=({color:e,onClick:t,name:r,src:o,className:n})=>{let i=G3(r),[a,s]=M9(!1),l=!a&&o,c=l?void 0:{background:e};return W3("div",{className:k9("Avatar",n),style:c,onClick:t,children:l?W3("img",{className:"Avatar-img",src:o,alt:i,referrerPolicy:"no-referrer",onError:()=>s(!0)}):i})};Oe();Ze();import L9 from"clsx";import{jsx as an,jsxs as Dp}from"react/jsx-runtime";var P9=H({name:"goToCollaborator",label:"Go to a collaborator",viewMode:!0,trackEvent:{category:"collab"},perform:(e,t,r)=>!r.socketId||t.userToFollow?.socketId===r.socketId||r.isCurrentUser?{appState:{...t,userToFollow:null},storeAction:D.NONE}:{appState:{...t,userToFollow:{socketId:r.socketId,username:r.username||""},openMenu:t.openMenu==="canvas"?null:t.openMenu},storeAction:D.NONE},PanelComponent:({updateData:e,data:t,appState:r})=>{let{socketId:o,collaborator:n,withName:i,isBeingFollowed:a}=t,s=Ba(o,n),l=L9({"is-followed":a,"is-current-user":n.isCurrentUser===!0,"is-speaking":n.isSpeaking,"is-in-call":n.isInCall,"is-muted":n.isMuted}),c=n.isInCall?n.isSpeaking?Dp("div",{className:"UserList__collaborator-status-icon-speaking-indicator",title:b("userList.hint.isSpeaking"),children:[an("div",{}),an("div",{}),an("div",{})]}):n.isMuted?an("div",{className:"UserList__collaborator-status-icon-microphone-muted",title:b("userList.hint.micMuted"),children:Ly}):an("div",{title:b("userList.hint.inCall"),children:ky}):null;return i?Dp("div",{className:`dropdown-menu-item dropdown-menu-item-base UserList__collaborator ${l}`,style:{"--avatar-size":"1.5rem"},onClick:()=>e(n),children:[an(Zf,{color:s,onClick:()=>{},name:n.username||"",src:n.avatarUrl,className:l}),an("div",{className:"UserList__collaborator-name",children:n.username}),Dp("div",{className:"UserList__collaborator-status-icons","aria-hidden":!0,children:[a&&an("div",{className:"UserList__collaborator-status-icon-is-followed",title:b("userList.hint.followStatus"),children:_s}),c]})]}):Dp("div",{className:`UserList__collaborator UserList__collaborator--avatar-only ${l}`,children:[an(Zf,{color:s,onClick:()=>{e(n)},name:n.username||"",src:n.avatarUrl,className:l}),c&&an("div",{className:"UserList__collaborator-status-icon",children:c})]})}});f();Ze();kn();So();V();Oe();var jf=H({name:"addToLibrary",trackEvent:{category:"element"},perform:(e,t,r,o)=>{let n=o.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});for(let i of yd)if(n.some(a=>a.type===i))return{storeAction:D.NONE,appState:{...t,errorMessage:b(`errors.libraryElementTypeError.${i}`)}};return o.library.getLatestLibrary().then(i=>o.library.setLibrary([{id:Rt(),status:"unpublished",elements:n.map(Mn),created:Date.now()},...i])).then(()=>({storeAction:D.NONE,appState:{...t,toast:{message:b("toast.addedToLibrary")}}})).catch(i=>({storeAction:D.NONE,appState:{...t,errorMessage:i.message}}))},label:"labels.addToLibrary"});f();f();Ge();st();mr();var Y3=(e,t,r)=>{let o=ha(e,t),n=Cr(e);return o.flatMap(i=>{let a=D9(i,n,r);return i.map(s=>ie(s,{x:s.x+a.x,y:s.y+a.y}))})},D9=(e,t,{axis:r,position:o})=>{let n=Cr(e),[i,a]=r==="x"?["minX","maxX"]:["minY","maxY"],s={x:0,y:0};return o==="start"?{...s,[r]:t[i]-n[i]}:o==="end"?{...s,[r]:t[a]-n[a]}:{...s,[r]:(t[i]+t[a])/2-(n[i]+n[a])/2}};be();se();nr();ge();Xe();Oe();G();Ze();import{jsx as js}from"react/jsx-runtime";var ho=(e,t,r,o)=>{let n=o.scene.getSelectedElements(t);return n.length>1&&!n.some(i=>ee(i))},Zs=(e,t,r,o)=>{let n=r.scene.getSelectedElements(t),i=X(e),a=Y3(n,i,o),s=X(a);return tn(e.map(l=>s.get(l.id)||l),t,r)},R9=H({name:"alignTop",label:"labels.alignTop",icon:lf,trackEvent:{category:"element"},predicate:ho,perform:(e,t,r,o)=>({appState:t,elements:Zs(e,t,o,{position:"start",axis:"y"}),storeAction:D.CAPTURE}),keyTest:e=>e[T.CTRL_OR_CMD]&&e.shiftKey&&e.key===T.ARROW_UP,PanelComponent:({elements:e,appState:t,updateData:r,app:o})=>js(ce,{hidden:!ho(e,t,null,o),type:"button",icon:lf,onClick:()=>r(null),title:`${b("labels.alignTop")} \u2014 ${N("CtrlOrCmd+Shift+Up")}`,"aria-label":b("labels.alignTop"),visible:Ye(Ee(e),t)})}),N9=H({name:"alignBottom",label:"labels.alignBottom",icon:cf,trackEvent:{category:"element"},predicate:ho,perform:(e,t,r,o)=>({appState:t,elements:Zs(e,t,o,{position:"end",axis:"y"}),storeAction:D.CAPTURE}),keyTest:e=>e[T.CTRL_OR_CMD]&&e.shiftKey&&e.key===T.ARROW_DOWN,PanelComponent:({elements:e,appState:t,updateData:r,app:o})=>js(ce,{hidden:!ho(e,t,null,o),type:"button",icon:cf,onClick:()=>r(null),title:`${b("labels.alignBottom")} \u2014 ${N("CtrlOrCmd+Shift+Down")}`,"aria-label":b("labels.alignBottom"),visible:Ye(Ee(e),t)})}),O9=H({name:"alignLeft",label:"labels.alignLeft",icon:df,trackEvent:{category:"element"},predicate:ho,perform:(e,t,r,o)=>({appState:t,elements:Zs(e,t,o,{position:"start",axis:"x"}),storeAction:D.CAPTURE}),keyTest:e=>e[T.CTRL_OR_CMD]&&e.shiftKey&&e.key===T.ARROW_LEFT,PanelComponent:({elements:e,appState:t,updateData:r,app:o})=>js(ce,{hidden:!ho(e,t,null,o),type:"button",icon:df,onClick:()=>r(null),title:`${b("labels.alignLeft")} \u2014 ${N("CtrlOrCmd+Shift+Left")}`,"aria-label":b("labels.alignLeft"),visible:Ye(Ee(e),t)})}),B9=H({name:"alignRight",label:"labels.alignRight",icon:mf,trackEvent:{category:"element"},predicate:ho,perform:(e,t,r,o)=>({appState:t,elements:Zs(e,t,o,{position:"end",axis:"x"}),storeAction:D.CAPTURE}),keyTest:e=>e[T.CTRL_OR_CMD]&&e.shiftKey&&e.key===T.ARROW_RIGHT,PanelComponent:({elements:e,appState:t,updateData:r,app:o})=>js(ce,{hidden:!ho(e,t,null,o),type:"button",icon:mf,onClick:()=>r(null),title:`${b("labels.alignRight")} \u2014 ${N("CtrlOrCmd+Shift+Right")}`,"aria-label":b("labels.alignRight"),visible:Ye(Ee(e),t)})}),F9=H({name:"alignVerticallyCentered",label:"labels.centerVertically",icon:pf,trackEvent:{category:"element"},predicate:ho,perform:(e,t,r,o)=>({appState:t,elements:Zs(e,t,o,{position:"center",axis:"y"}),storeAction:D.CAPTURE}),PanelComponent:({elements:e,appState:t,updateData:r,app:o})=>js(ce,{hidden:!ho(e,t,null,o),type:"button",icon:pf,onClick:()=>r(null),title:b("labels.centerVertically"),"aria-label":b("labels.centerVertically"),visible:Ye(Ee(e),t)})}),z9=H({name:"alignHorizontallyCentered",label:"labels.centerHorizontally",icon:uf,trackEvent:{category:"element"},predicate:ho,perform:(e,t,r,o)=>({appState:t,elements:Zs(e,t,o,{position:"center",axis:"x"}),storeAction:D.CAPTURE}),PanelComponent:({elements:e,appState:t,updateData:r,app:o})=>js(ce,{hidden:!ho(e,t,null,o),type:"button",icon:uf,onClick:()=>r(null),title:b("labels.centerHorizontally"),"aria-label":b("labels.centerHorizontally"),visible:Ye(Ee(e),t)})});f();f();Ge();mr();st();var V3=(e,t,r)=>{let[o,n,i,a]=r.axis==="x"?["minX","midX","maxX","width"]:["minY","midY","maxY","height"],s=Cr(e),l=ha(e,t).map(p=>[p,Cr(p)]).sort((p,u)=>p[1][n]-u[1][n]),c=0;for(let p of l)c+=p[1][a];let d=(s[a]-c)/(l.length-1);if(d<0){let p=l.findIndex(E=>E[1][o]===s[o]),u=l.findIndex(E=>E[1][i]===s[i]),h=(l[u][1][n]-l[p][1][n])/(l.length-1),x=l[p][1][n];return l.flatMap(([E,w],y)=>{let v={x:0,y:0};return y!==p&&y!==u&&(x+=h,v[r.axis]=x-w[n]),E.map(A=>ie(A,{x:A.x+v.x,y:A.y+v.y}))})}let m=s[o];return l.flatMap(([p,u])=>{let h={x:0,y:0};return h[r.axis]=m-u[o],m+=d,m+=u[a],p.map(x=>ie(x,{x:x.x+h.x,y:x.y+h.y}))})};be();se();nr();ge();Xe();Oe();G();Ze();import{jsx as Z3}from"react/jsx-runtime";var K3=(e,t)=>{let r=t.scene.getSelectedElements(e);return r.length>1&&!r.some(o=>ee(o))},X3=(e,t,r,o)=>{let n=r.scene.getSelectedElements(t),i=V3(n,r.scene.getNonDeletedElementsMap(),o),a=X(i);return tn(e.map(s=>a.get(s.id)||s),t,r)},H9=H({name:"distributeHorizontally",label:"labels.distributeHorizontally",trackEvent:{category:"element"},perform:(e,t,r,o)=>({appState:t,elements:X3(e,t,o,{space:"between",axis:"x"}),storeAction:D.CAPTURE}),keyTest:e=>!e[T.CTRL_OR_CMD]&&e.altKey&&e.code===fe.H,PanelComponent:({elements:e,appState:t,updateData:r,app:o})=>Z3(ce,{hidden:!K3(t,o),type:"button",icon:F4,onClick:()=>r(null),title:`${b("labels.distributeHorizontally")} \u2014 ${N("Alt+H")}`,"aria-label":b("labels.distributeHorizontally"),visible:Ye(Ee(e),t)})}),_9=H({name:"distributeVertically",label:"labels.distributeVertically",trackEvent:{category:"element"},perform:(e,t,r,o)=>({appState:t,elements:X3(e,t,o,{space:"between",axis:"y"}),storeAction:D.CAPTURE}),keyTest:e=>!e[T.CTRL_OR_CMD]&&e.altKey&&e.code===fe.V,PanelComponent:({elements:e,appState:t,updateData:r,app:o})=>Z3(ce,{hidden:!K3(t,o),type:"button",icon:z4,onClick:()=>r(null),title:`${b("labels.distributeVertically")} \u2014 ${N("Alt+V")}`,"aria-label":b("labels.distributeVertically"),visible:Ye(Ee(e),t)})});f();Ze();Xe();be();Ug();G();ge();st();io();nr();Oe();se();var qf=H({name:"flipHorizontal",label:"labels.flipHorizontal",icon:Ny,trackEvent:{category:"element"},perform:(e,t,r,o)=>({elements:tn(j3(e,o.scene.getNonDeletedElementsMap(),t,"horizontal",o),t,o),appState:t,storeAction:D.CAPTURE}),keyTest:e=>e.shiftKey&&e.code===fe.H}),Qf=H({name:"flipVertical",label:"labels.flipVertical",icon:Ry,trackEvent:{category:"element"},perform:(e,t,r,o)=>({elements:tn(j3(e,o.scene.getNonDeletedElementsMap(),t,"vertical",o),t,o),appState:t,storeAction:D.CAPTURE}),keyTest:e=>e.shiftKey&&e.code===fe.V&&!e[T.CTRL_OR_CMD]}),j3=(e,t,r,o,n)=>{let i=ue(Ee(e),r,{includeBoundTextElement:!0,includeElementsInFrames:!0}),a=G9(i,t,r,o,n),s=X(a);return e.map(l=>s.get(l.id)||l)},G9=(e,t,r,o,n)=>{let{minX:i,minY:a,maxX:s,maxY:l}=Cr(e);return Hg(t,e,t,"nw",!0,!0,o==="horizontal"?s:i,o==="horizontal"?a:l),_l(e.filter(ne),n,qo(r),[]),e};f();ge();Ze();wi();be();V();Oe();var qs=H({name:"copy",label:"labels.copy",icon:Ec,trackEvent:{category:"element"},perform:async(e,t,r,o)=>{let n=o.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});try{await _m(n,o.files,r)}catch(i){return{storeAction:D.NONE,appState:{...t,errorMessage:i.message}}}return{storeAction:D.NONE}},keyTest:void 0}),Jf=H({name:"paste",label:"labels.paste",trackEvent:{category:"element"},perform:async(e,t,r,o)=>{let n;try{n=await yE()}catch(i){return i.name==="AbortError"||i.name==="NotAllowedError"?!1:(console.error(`actionPaste ${i.name}: ${i.message}`),bn?{storeAction:D.NONE,appState:{...t,errorMessage:b("hints.firefox_clipboard_write")}}:{storeAction:D.NONE,appState:{...t,errorMessage:b("errors.asyncPasteFailedOnRead")}})}try{o.pasteFromClipboard(xE({types:n}))}catch(i){return console.error(i),{storeAction:D.NONE,appState:{...t,errorMessage:b("errors.asyncPasteFailedOnParse")}}}return{storeAction:D.NONE}},keyTest:void 0}),Rp=H({name:"cut",label:"labels.cut",icon:Ey,trackEvent:{category:"element"},perform:(e,t,r,o)=>(qs.perform(e,t,r,o),Tc.perform(e,t,null,o)),keyTest:e=>e[T.CTRL_OR_CMD]&&e.key===T.X}),Np=H({name:"copyAsSvg",label:"labels.copyAsSvg",icon:Oy,trackEvent:{category:"element"},perform:async(e,t,r,o)=>{if(!o.canvas)return{storeAction:D.NONE};let{exportedElements:n,exportingFrame:i}=Da(e,t,!0);try{return await Ra("clipboard-svg",n,t,o.files,{...t,exportingFrame:i,name:o.getName()}),{storeAction:D.NONE}}catch(a){return console.error(a),{appState:{...t,errorMessage:a.message},storeAction:D.NONE}}},predicate:e=>Hm&&e.length>0,keywords:["svg","clipboard","copy"]}),Op=H({name:"copyAsPng",label:"labels.copyAsPng",icon:By,trackEvent:{category:"element"},perform:async(e,t,r,o)=>{if(!o.canvas)return{storeAction:D.NONE};let n=o.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0}),{exportedElements:i,exportingFrame:a}=Da(e,t,!0);try{return await Ra("clipboard",i,t,o.files,{...t,exportingFrame:a,name:o.getName()}),{appState:{...t,toast:{message:b("toast.copyToClipboardAsPng",{exportSelection:n.length?b("toast.selection"):b("toast.canvas"),exportColorScheme:t.exportWithDarkMode?b("buttons.darkMode"):b("buttons.lightMode")})}},storeAction:D.NONE}}catch(s){return console.error(s),{appState:{...t,errorMessage:s.message},storeAction:D.NONE}}},predicate:e=>Ms&&e.length>0,keyTest:e=>e.code===fe.C&&e.altKey&&e.shiftKey,keywords:["png","clipboard","copy"]}),Bp=H({name:"copyText",label:"labels.copyText",trackEvent:{category:"element"},perform:(e,t,r,o)=>{let i=o.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0}).reduce((a,s)=>(U(s)&&a.push(s.text),a),[]).join(`

`);try{Fn(i)}catch{throw new Error(b("errors.copyToSystemClipboardFailed"))}return{storeAction:D.NONE}},predicate:(e,t,r,o)=>Hm&&o.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0}).some(U),keywords:["text","clipboard","copy"]});f();ge();Ze();V();Oe();var Fp=H({name:"gridMode",icon:Gy,keywords:["snap"],label:"labels.toggleGrid",viewMode:!0,trackEvent:{category:"canvas",predicate:e=>!e.gridSize},perform(e,t){return{appState:{...t,gridSize:this.checked(t)?null:En,objectsSnapModeEnabled:!1},storeAction:D.NONE}},checked:e=>e.gridSize!==null,predicate:(e,t,r)=>typeof r.gridModeEnabled>"u",keyTest:e=>e[T.CTRL_OR_CMD]&&e.code===fe.QUOTE});f();ge();Oe();Ze();var Qs=H({name:"zenMode",label:"buttons.zenMode",icon:zy,paletteName:"Toggle zen mode",viewMode:!0,trackEvent:{category:"canvas",predicate:e=>!e.zenModeEnabled},perform(e,t){return{appState:{...t,zenModeEnabled:!this.checked(t)},storeAction:D.NONE}},checked:e=>e.zenModeEnabled,predicate:(e,t,r)=>typeof r.zenModeEnabled>"u",keyTest:e=>!e[T.CTRL_OR_CMD]&&e.altKey&&e.code===fe.Z});f();ge();Oe();Ze();var $f=H({name:"objectsSnapMode",label:"buttons.objectsSnapMode",icon:Fy,viewMode:!1,trackEvent:{category:"canvas",predicate:e=>!e.objectsSnapModeEnabled},perform(e,t){return{appState:{...t,objectsSnapModeEnabled:!this.checked(t),gridSize:null},storeAction:D.NONE}},checked:e=>e.objectsSnapModeEnabled,predicate:(e,t,r)=>typeof r.objectsSnapModeEnabled>"u",keyTest:e=>!e[T.CTRL_OR_CMD]&&e.altKey&&e.code===fe.S});f();Ze();ge();Oe();var Ii=H({name:"stats",label:"stats.title",icon:Dy,paletteName:"Toggle stats",viewMode:!0,trackEvent:{category:"menu"},perform(e,t){return{appState:{...t,showStats:!this.checked(t)},storeAction:D.NONE}},checked:e=>e.showStats,keyTest:e=>!e[T.CTRL_OR_CMD]&&e.altKey&&e.code===fe.SLASH});f();V();be();Ge();lt();Zd();se();G();Ze();no();Oe();var e1=H({name:"unbindText",label:"labels.unbindText",trackEvent:{category:"element"},predicate:(e,t,r,o)=>o.scene.getSelectedElements(t).some(i=>tr(i)),perform:(e,t,r,o)=>{let n=o.scene.getSelectedElements(t),i=o.scene.getNonDeletedElementsMap();return n.forEach(a=>{let s=me(a,i);if(s){let{width:l,height:c}=Lo(s.originalText,Ve(s),s.lineHeight),d=Wb(a.id);Xd(a.id);let{x:m,y:p}=ps(a,s,i);z(s,{containerId:null,width:l,height:c,text:s.originalText,x:m,y:p}),z(a,{boundElements:a.boundElements?.filter(u=>u.id!==s.id),height:d||a.height})}}),{elements:e,appState:t,storeAction:D.CAPTURE}}}),t1=H({name:"bindText",label:"labels.bindText",trackEvent:{category:"element"},predicate:(e,t,r,o)=>{let n=o.scene.getSelectedElements(t);if(n.length===2){let i=U(n[0])||U(n[1]),a;if(Vo(n[0])?a=n[0]:Vo(n[1])&&(a=n[1]),i&&a&&me(a,o.scene.getNonDeletedElementsMap())===null)return!0}return!1},perform:(e,t,r,o)=>{let n=o.scene.getSelectedElements(t),i,a;U(n[0])&&Vo(n[1])?(i=n[0],a=n[1]):(i=n[1],a=n[0]),z(i,{containerId:a.id,verticalAlign:yt.MIDDLE,textAlign:$n.CENTER}),z(a,{boundElements:(a.boundElements||[]).concat({type:"text",id:i.id})});let s=a.height;return Nt(i,a,o.scene.getNonDeletedElementsMap()),ma(a.id,s),{elements:U9(e,a,i),appState:{...t,selectedElementIds:{[a.id]:!0}},storeAction:D.CAPTURE}}}),U9=(e,t,r)=>{let o=e.slice(),n=o.findIndex(a=>a.id===r.id);o.splice(n,1);let i=o.findIndex(a=>a.id===t.id);return o.splice(i+1,0,r),Ft(o,X([t,r])),o},W9=(e,t,r)=>{let o=e.slice(),n=o.findIndex(a=>a.id===t.id);o.splice(n,1);let i=o.findIndex(a=>a.id===r.id);return o.splice(i,0,t),Ft(o,X([t,r])),o},q3=H({name:"wrapTextInContainer",label:"labels.createContainerFromText",trackEvent:{category:"element"},predicate:(e,t,r,o)=>{let n=o.scene.getSelectedElements(t),i=n.every(a=>U(a));return n.length>0&&i},perform:(e,t,r,o)=>{let n=o.scene.getSelectedElements(t),i=e.slice(),a={};for(let s of n)if(U(s)){let l=Yr({type:"rectangle",backgroundColor:t.currentItemBackgroundColor,boundElements:[...s.boundElements||[],{id:s.id,type:"text"}],angle:s.angle,fillStyle:t.currentItemFillStyle,strokeColor:t.currentItemStrokeColor,roughness:t.currentItemRoughness,strokeWidth:t.currentItemStrokeWidth,strokeStyle:t.currentItemStrokeStyle,roundness:t.currentItemRoundness==="round"?{type:Ko("rectangle")?at.ADAPTIVE_RADIUS:at.PROPORTIONAL_RADIUS}:null,opacity:100,locked:!1,x:s.x-bt,y:s.y-bt,width:An(s.width,"rectangle"),height:An(s.height,"rectangle"),groupIds:s.groupIds,frameId:s.frameId});if(s.boundElements?.length){let c=s.boundElements.filter(m=>m.type==="arrow").map(m=>m.id);i.filter(m=>c.includes(m.id)).forEach(m=>{let p=m.startBinding,u=m.endBinding;p?.elementId===s.id&&(p={...p,elementId:l.id}),u?.elementId===s.id&&(u={...u,elementId:l.id}),(p||u)&&z(m,{startBinding:p,endBinding:u},!1)})}z(s,{containerId:l.id,verticalAlign:yt.MIDDLE,boundElements:null,textAlign:$n.CENTER},!1),Nt(s,l,o.scene.getNonDeletedElementsMap()),i=W9([...i,l],l,s),a[l.id]=!0}return{elements:i,appState:{...t,selectedElementIds:a},storeAction:D.CAPTURE}}});f();f();G();ec();Ge();ge();V();st();import{useCallback as Q3,useEffect as Y9,useLayoutEffect as V9,useRef as K9,useState as X9}from"react";import Z9 from"clsx";Xe();Mm();ga();se();Lm();import{jsx as Pc,jsxs as J3}from"react/jsx-runtime";var n1=320,$3=85,r1=5,j9=42,q9=500,o1=!1,zp=new Map,ew=({element:e,elementsMap:t,setAppState:r,onLinkOpen:o,setToast:n,updateEmbedValidationStatus:i})=>{let a=Js(),s=Mi(),l=e.link||"",[c,d]=X9(l),m=K9(null),p=a.showHyperlinkPopup==="editor",u=Q3(()=>{if(!m.current)return;let y=pr(m.current.value)||null;if(!e.link&&y&&xe("hyperlink","create"),At(e)){if(a.activeEmbeddable?.element===e&&r({activeEmbeddable:null}),!y){z(e,{link:null}),i(e,!1);return}if(!fs(y,s.validateEmbeddable))y&&n({message:b("toast.unableToEmbed"),closable:!0}),e.link&&zp.set(e.id,e.link),z(e,{link:y}),i(e,!1);else{let{width:v,height:A}=e,L=Pn(y);L?.error instanceof URIError&&n({message:b("toast.unrecognizedLinkFormat"),closable:!0});let S=L?L.intrinsicSize.w/L.intrinsicSize.h:1,k=zp.get(e.id)!==e.link;z(e,{...k?{width:L?.type==="video"?v>A?v:A*S:v,height:L?.type==="video"&&v>A?v/S:A}:{},link:y}),i(e,!0),zp.has(e.id)&&zp.delete(e.id)}}else z(e,{link:y})},[e,n,s.validateEmbeddable,a.activeEmbeddable,r,i]);V9(()=>()=>{u()},[u]),Y9(()=>{let y=null,v=A=>{if(p)return;y&&clearTimeout(y),J9(e,t,a,[A.clientX,A.clientY])&&(y=window.setTimeout(()=>{r({showHyperlinkPopup:!1})},q9))};return window.addEventListener("pointermove",v,!1),()=>{window.removeEventListener("pointermove",v,!1),y&&clearTimeout(y)}},[a,e,p,r,t]);let h=Q3(()=>{xe("hyperlink","delete"),z(e,{link:null}),p&&(m.current.value=""),r({showHyperlinkPopup:!1})},[r,e,p]),x=()=>{xe("hyperlink","edit","popup-ui"),r({showHyperlinkPopup:"editor"})},{x:E,y:w}=tw(e,a,t);return a.contextMenu||a.draggingElement||a.resizingElement||a.isRotating||a.openMenu||a.viewModeEnabled?null:J3("div",{className:"excalidraw-hyperlinkContainer",style:{top:`${w}px`,left:`${E}px`,width:n1,padding:r1},onClick:()=>{!e.link&&!p&&r({showHyperlinkPopup:"editor"})},children:[p?Pc("input",{className:Z9("excalidraw-hyperlinkContainer-input"),placeholder:"Type or paste your link here",ref:m,value:c,onChange:y=>d(y.target.value),autoFocus:!0,onKeyDown:y=>{y.stopPropagation(),y[T.CTRL_OR_CMD]&&y.key===T.K&&y.preventDefault(),(y.key===T.ENTER||y.key===T.ESCAPE)&&(u(),r({showHyperlinkPopup:"info"}))}}):e.link?Pc("a",{href:pr(e.link||""),className:"excalidraw-hyperlinkContainer-link",target:im(e.link)?"_self":"_blank",onClick:y=>{if(e.link&&o){let v=Id("excalidraw-link",y.nativeEvent);o({...e,link:pr(e.link)},v),v.defaultPrevented&&y.preventDefault()}},rel:"noopener noreferrer",children:e.link}):Pc("div",{className:"excalidraw-hyperlinkContainer-link",children:b("labels.link.empty")}),J3("div",{className:"excalidraw-hyperlinkContainer__buttons",children:[!p&&Pc(ce,{type:"button",title:b("buttons.edit"),"aria-label":b("buttons.edit"),label:b("buttons.edit"),onClick:x,className:"excalidraw-hyperlinkContainer--edit",icon:Os}),l&&!At(e)&&Pc(ce,{type:"button",title:b("buttons.remove"),"aria-label":b("buttons.remove"),label:b("buttons.remove"),onClick:h,className:"excalidraw-hyperlinkContainer--remove",icon:Bo})]})]})},tw=(e,t,r)=>{let[o,n]=re(e,r),{x:i,y:a}=Bt({sceneX:o+e.width/2,sceneY:n},t),s=i-t.offsetLeft-n1/2,l=a-t.offsetTop-$3;return{x:s,y:l}},i1=(e,t)=>{let r=ue(e,t);return r[0]?.link?At(r[0])?"labels.link.editEmbed":"labels.link.edit":At(r[0])?"labels.link.createEmbed":"labels.link.create"},Dc=null,rw=(e,t,r)=>{Dc&&clearTimeout(Dc),Dc=window.setTimeout(()=>Q9(e,t,r),b0)},Q9=(e,t,r)=>{if(!e.link)return;let o=Vs();o.classList.add("excalidraw-tooltip--visible"),o.style.maxWidth="20rem",o.textContent=e.link;let[n,i,a,s]=re(e,r),[l,c,d,m]=cc([n,i,a,s],e.angle,t),p=Bt({sceneX:l,sceneY:c},t);Gf(o,{left:p.x,top:p.y,width:d,height:m},"top"),xe("hyperlink","tooltip","link-icon"),o1=!0},ow=()=>{Dc&&clearTimeout(Dc),o1&&(o1=!1,Vs().classList.remove("excalidraw-tooltip--visible"))},J9=(e,t,r,[o,n])=>{let{x:i,y:a}=Ke({clientX:o,clientY:n},r),s=15/r.zoom.value;if(lc(i,a,e,t))return!1;let[l,c,d]=re(e,t);if(i>=l&&i<=d&&a>=c-$3&&a<=c)return!1;let{x:m,y:p}=tw(e,r,t);return!(o>=m-s&&o<=m+n1+r1*2+s&&n>=p-s&&n<=p+s+r1*2+j9)};se();ge();Xe();Oe();G();Ze();import{jsx as $9}from"react/jsx-runtime";var Rc=H({name:"hyperlink",label:(e,t)=>i1(e,t),icon:vc,perform:(e,t)=>t.showHyperlinkPopup==="editor"?!1:{elements:e,appState:{...t,showHyperlinkPopup:"editor",openMenu:null},storeAction:D.CAPTURE},trackEvent:{category:"hyperlink",action:"click"},keyTest:e=>e[T.CTRL_OR_CMD]&&e.key===T.K,predicate:(e,t)=>ue(e,t).length===1,PanelComponent:({elements:e,appState:t,updateData:r})=>{let o=ue(e,t);return $9(ce,{type:"button",icon:vc,"aria-label":b(i1(e,t)),title:`${At(e[0])?b("labels.link.labelEmbed"):b("labels.link.label")} - ${N("CtrlOrCmd+K")}`,onClick:()=>r(null),selected:o.length===1&&!!o[0].link})}});f();Ge();se();ge();Xe();Oe();G();Ze();var a1=e=>e.every(t=>!t.locked),s1=H({name:"toggleElementLock",label:(e,t,r)=>{let o=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1});return o.length===1&&!ee(o[0])?o[0].locked?"labels.elementLock.unlock":"labels.elementLock.lock":a1(o)?"labels.elementLock.lockAll":"labels.elementLock.unlockAll"},icon:(e,t)=>{let r=ue(t,e);return a1(r)?Ns:Ia},trackEvent:{category:"element"},predicate:(e,t,r,o)=>{let n=o.scene.getSelectedElements(t);return n.length>0&&!n.some(i=>i.locked&&i.frameId)},perform:(e,t,r,o)=>{let n=o.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});if(!n.length)return!1;let i=a1(n),a=X(n);return{elements:e.map(s=>a.has(s.id)?ie(s,{locked:i}):s),appState:{...t,selectedLinearElement:i?null:t.selectedLinearElement},storeAction:D.CAPTURE}},keyTest:(e,t,r,o)=>e.key.toLocaleLowerCase()===T.L&&e[T.CTRL_OR_CMD]&&e.shiftKey&&o.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1}).length>0}),nw=H({name:"unlockAllElements",paletteName:"Unlock all elements",trackEvent:{category:"canvas"},viewMode:!1,icon:Ia,predicate:(e,t)=>ue(e,t).length===0&&e.some(o=>o.locked),perform:(e,t)=>{let r=e.filter(o=>o.locked);return{elements:e.map(o=>o.locked?ie(o,{locked:!1}):o),appState:{...t,selectedElementIds:Object.fromEntries(r.map(o=>[o.id,!0]))},storeAction:D.CAPTURE}},label:"labels.elementLock.unlockAll"});f();f();import{useEffect as lu,useRef as lI,useState as su}from"react";ge();f();import DS from"clsx";import{useEffect as RS,useState as NS}from"react";f();import{useCallback as eA,useState as tA}from"react";var iw=()=>{let[e,t]=tA(null),r=eA(o=>t(o),[]);return[e,r]};ge();f();import rA from"react";import oA from"clsx";import{jsx as nA}from"react/jsx-runtime";var Qt=rA.forwardRef(({children:e,padding:t,className:r,style:o},n)=>nA("div",{className:oA("Island",r),style:{"--padding":t,...o},ref:n,children:e}));f();ge();import{createPortal as iA}from"react-dom";import aA from"clsx";import{useRef as sA}from"react";import{jsx as aw,jsxs as lA}from"react/jsx-runtime";var sw=e=>{let{closeOnClickOutside:t=!0}=e,r=vp({className:"excalidraw-modal-container"}),o=sA(document.body.classList.contains("excalidraw-animations-disabled"));if(!r)return null;let n=i=>{i.key===T.ESCAPE&&(i.nativeEvent.stopImmediatePropagation(),i.stopPropagation(),e.onCloseRequest())};return iA(lA("div",{className:aA("Modal",e.className,{"animations-disabled":o.current}),role:"dialog","aria-modal":"true",onKeyDown:n,"aria-labelledby":e.labelledBy,"data-prevent-outside-click":!0,children:[aw("div",{className:"Modal__background",onClick:t?e.onCloseRequest:void 0}),aw("div",{className:"Modal__content",style:{"--max-width":`${e.maxWidth}px`},tabIndex:0,children:e.children})]}),r)};G();import{useSetAtom as OS}from"jotai";f();import{useState as IS,useCallback as C1,useMemo as Zw,useRef as v1}from"react";f();Sr();ys();import{atom as uA}from"jotai";st();oi();V();import{useEffect as dw,useRef as mw}from"react";f();$t();import{atom as cA,useAtom as dA}from"jotai";import{useEffect as mA,useState as pA}from"react";ya();var l1=cA(new Map),lw=async e=>await ks({elements:e,appState:{exportBackground:!1,viewBackgroundColor:de.white},files:null,renderEmbeddables:!1}),cw=(e,t,r)=>{let[o,n]=pA();return mA(()=>{if(t)if(e){let i=r.get(e);i?n(i):(async()=>{let a=await lw(t);a.querySelector(".style-fonts")?.remove(),a&&(r.set(e,a),n(a))})()}else(async()=>{let i=await lw(t);n(i)})()},[e,t,r,n]),o},Hp=()=>{let[e]=dA(l1,He);return{clearLibraryCache:()=>e.clear(),deleteItemsFromLibraryCache:o=>{o.forEach(n=>e.delete(n))},svgCache:e}};G();Jl();f();G();var _p=class{jobs=[];running=!1;tick(){if(this.running)return;let t=this.jobs.shift();t?(this.running=!0,t.promise.resolve(Al(t.jobFactory,...t.args).finally(()=>{this.running=!1,this.tick()}))):this.running=!1}push(t,...r){let o=Sd();return this.jobs.push({jobFactory:t,promise:o,args:r}),this.tick(),o}};be();var uw=new or,Fa=uA({status:"loaded",isInitialized:!1,libraryItems:[]}),Nc=e=>Yo(e),hA=(e,t)=>!e.find(r=>r.elements.length!==t.elements.length?!1:r.elements.every((o,n)=>o.id===t.elements[n].id&&o.versionNonce===t.elements[n].versionNonce)),hw=(e,t)=>{let r=[];for(let o of t)hA(e,o)&&r.push(o);return[...r,...e]},gw=(e,t)=>{let r=X(t),o={deletedItems:new Map,addedItems:new Map};for(let i of e)r.has(i.id)||o.deletedItems.set(i.id,i);let n=X(e);for(let i of t)n.has(i.id)||o.addedItems.set(i.id,i);return o},c1=class{currLibraryItems=[];prevLibraryItems=Nc(this.currLibraryItems);app;constructor(t){this.app=t}updateQueue=[];getLastUpdateTask=()=>this.updateQueue[this.updateQueue.length-1];notifyListeners=()=>{if(this.updateQueue.length>0)Jt.set(Fa,t=>({status:"loading",libraryItems:this.currLibraryItems,isInitialized:t.isInitialized}));else{Jt.set(Fa,{status:"loaded",libraryItems:this.currLibraryItems,isInitialized:!0});try{let t=this.prevLibraryItems;this.prevLibraryItems=Nc(this.currLibraryItems);let r=Nc(this.currLibraryItems);this.app.props.onLibraryChange?.(r),uw.trigger(gw(t,r),r)}catch(t){console.error(t)}}};destroy=()=>{this.updateQueue=[],this.currLibraryItems=[],Jt.set(l1,new Map)};resetLibrary=()=>this.setLibrary([]);getLatestLibrary=()=>new Promise(async t=>{try{let r=await(this.getLastUpdateTask()||this.currLibraryItems);this.updateQueue.length>0?t(this.getLatestLibrary()):t(Nc(r))}catch{return t(this.currLibraryItems)}});updateLibrary=async({libraryItems:t,prompt:r=!1,merge:o=!1,openLibraryMenu:n=!1,defaultStatus:i="unpublished"})=>(n&&this.app.setState({openSidebar:{name:Or.name,tab:wl}}),this.setLibrary(()=>new Promise(async(a,s)=>{try{let l=await(typeof t=="function"&&!(t instanceof Blob)?t(this.currLibraryItems):t),c;l instanceof Blob?c=await pg(l,i):c=fa(l,i),!r||window.confirm(b("alerts.confirmAddLibrary",{numShapes:c.length}))?(r&&this.app.focusContainer(),a(o?hw(this.currLibraryItems,c):c)):s(new Xo)}catch(l){s(l)}})));setLibrary=t=>{let r=new Promise(async(o,n)=>{try{await this.getLastUpdateTask(),typeof t=="function"&&(t=t(this.currLibraryItems)),this.currLibraryItems=Nc(await t),o(this.currLibraryItems)}catch(i){n(i)}}).catch(o=>{if(o.name==="AbortError")return console.warn("Library update aborted by user"),this.currLibraryItems;throw o}).finally(()=>{this.updateQueue=this.updateQueue.filter(o=>o!==r),this.notifyListeners()});return this.updateQueue.push(r),this.notifyListeners(),r}},fw=c1,Wp=e=>{let r=Math.ceil(Math.sqrt(e.length)),o=[],n=u=>e.slice(u*r,u*r+r).reduce((x,E)=>{let{height:w}=Cr(E.elements);return Math.max(x,w)},0),i=u=>{let h=0,x=0,E=0;for(let w of e){if(h%r===0&&(x=0),x===u){let{width:y}=Cr(w.elements);E=Math.max(E,y)}h++,x++}return E},a=0,s=0,l=0,c=0,d=0,m=0,p=0;for(let u of e){d&&d%r===0&&(s+=l+50,a=0,m=0,p++),m===0&&(l=n(p)),c=i(m);let{minX:h,minY:x,width:E,height:w}=Cr(u.elements),y=(c-E)/2,v=(l-w)/2;o.push(...u.elements.map(A=>({...A,x:A.x+a+y-h,y:A.y+s+v-x}))),a+=c+50,d++,m++}return o},d1=()=>{let e=new URLSearchParams(window.location.hash.slice(1)).get(bd.addLibrary)||new URLSearchParams(window.location.search).get(fd.addLibrary),t=e?new URLSearchParams(window.location.hash.slice(1)).get("token"):null;return e?{libraryUrl:e,idToken:t}:null},$s=class e{static queue=new _p;static async getLibraryItems(t,r,o=!0){let n=()=>new Promise(async(i,a)=>{try{let s=await t.load({source:r});i(fa(s?.libraryItems||[],"published"))}catch(s){a(s)}});return o?e.queue.push(n):n()}static run=async(t,r)=>{let o=new e(t);return e.queue.push(()=>r(o))};adapter;constructor(t){this.adapter=t}getLibraryItems(t){return e.getLibraryItems(this.adapter,t,!1)}},Oc=0,Gp=0,Up=e=>Kg(e.map(t=>`${t.id}:${Vg(t.elements)}`).sort().join()),pw=async(e,t)=>{try{return Gp++,await $s.run(e,async r=>{let o=X(await r.getLibraryItems("save"));for(let[s]of t.deletedItems)o.delete(s);let n=[];for(let[s,l]of t.addedItems)o.has(s)?o.set(s,l):n.push(l);let i=n.concat(Array.from(o.values())),a=Up(i);return a!==Oc&&await e.save({libraryItems:i}),Oc=a,i})}finally{Gp--}},gA=e=>{let{excalidrawAPI:t}=e,r=mw(e);r.current=e;let o=mw(!1);dw(()=>{if(!t)return;o.current=!1;let n=async({libraryUrl:s,idToken:l})=>{let c=new Promise(async(m,p)=>{try{let h=await(await fetch(decodeURIComponent(s))).blob();m(h)}catch(u){p(u)}}),d=l!==t.id;await(d&&document.hidden?new Promise(m=>{window.addEventListener("focus",()=>m(),{once:!0})}):null);try{await t.updateLibrary({libraryItems:c,prompt:d,merge:!0,defaultStatus:"published",openLibraryMenu:!0})}catch(m){throw m}finally{if(window.location.hash.includes(bd.addLibrary)){let m=new URLSearchParams(window.location.hash.slice(1));m.delete(bd.addLibrary),window.history.replaceState({},fl,`#${m.toString()}`)}else if(window.location.search.includes(fd.addLibrary)){let m=new URLSearchParams(window.location.search);m.delete(fd.addLibrary),window.history.replaceState({},fl,`?${m.toString()}`)}}},i=s=>{s.preventDefault();let l=d1();l&&(s.stopImmediatePropagation(),window.history.replaceState({},"",s.oldURL),n(l))},a=d1();if(a&&n(a),"getInitialLibraryItems"in r.current&&r.current.getInitialLibraryItems&&(console.warn("useHandleLibrar `opts.getInitialLibraryItems` is deprecated. Use `opts.adapter` instead."),Promise.resolve(r.current.getInitialLibraryItems()).then(s=>{t.updateLibrary({libraryItems:s,merge:!0})}).catch(s=>{console.error(`UseHandeLibrary getInitialLibraryItems failed: ${s?.message}`)})),"adapter"in r.current&&r.current.adapter){let s=r.current.adapter,l=r.current.migrationAdapter,c=Sd();l?c.resolve(Al(l.load).then(async d=>{let m=null;try{if(!d)return $s.getLibraryItems(s,"load");m=fa(d.libraryItems||[],"published");let p=await pw(s,gw([],m));try{await l.clear()}catch(u){console.error(`couldn't delete legacy library data: ${u.message}`)}return p}catch(p){return console.error(`couldn't migrate legacy library data: ${p.message}`),m}}).catch(d=>(console.error(`error during library migration: ${d.message}`),$s.getLibraryItems(s,"load")))):c.resolve(Al($s.getLibraryItems,s,"load")),t.updateLibrary({libraryItems:c.then(d=>{let m=d||[];return Oc=Up(m),m}),merge:!0}).finally(()=>{o.current=!0})}return window.addEventListener("hashchange",i),()=>{window.removeEventListener("hashchange",i)}},[t]),dw(()=>{let n=uw.on(async(a,s)=>{let l=o.current,c="adapter"in r.current&&r.current.adapter||null;try{c&&Oc!==Up(s)&&await pw(c,a)}catch(d){console.error(`couldn't persist library update: ${d.message}`,a),l&&r.current.excalidrawAPI&&r.current.excalidrawAPI.updateScene({appState:{errorMessage:b("errors.saveLibraryError")}})}}),i=a=>{Gp&&z0(a)};return window.addEventListener("beforeunload",i),()=>{window.removeEventListener("beforeunload",i),n(),Oc=0,Gp=0}},[])};So();f();On();import{useCallback as ol,useEffect as vS,useMemo as Yw,useRef as CS,useState as TS}from"react";G();f();import{forwardRef as bw}from"react";import xw from"clsx";import{jsx as Ew}from"react/jsx-runtime";var fA=bw(({children:e,gap:t,align:r,justifyContent:o,className:n,style:i},a)=>Ew("div",{className:xw("Stack Stack_horizontal",n),style:{"--gap":t,alignItems:r,justifyContent:o,...i},ref:a,children:e})),bA=bw(({children:e,gap:t,align:r,justifyContent:o,className:n,style:i},a)=>Ew("div",{className:xw("Stack Stack_vertical",n),style:{"--gap":t,justifyItems:r,justifyContent:o,...i},ref:a,children:e})),Ut={Row:fA,Col:bA};V();kn();f();f();V();import{jsx as EA}from"react/jsx-runtime";var xA=({theme:e,id:t,libraryReturnUrl:r})=>{let o=r||window.location.origin+window.location.pathname;return EA("a",{className:"library-menu-browse-button",href:`${C.VITE_APP_LIBRARY_URL}?target=${window.name||"_blank"}&referrer=${o}&useHash=true&token=${t}&theme=${e}&version=${ji.excalidrawLibrary}`,target:"_excalidraw_libraries",children:b("labels.libraries")})},yw=xA;import yA from"clsx";import{jsx as wA,jsxs as vA}from"react/jsx-runtime";var Yp=({libraryReturnUrl:e,theme:t,id:r,style:o,children:n,className:i})=>vA("div",{className:yA("library-menu-control-buttons",i),style:o,children:[wA(yw,{id:r,libraryReturnUrl:e,theme:t}),n]});f();import{useCallback as tS,useState as b1}from"react";f();import Vp from"react";var CA=/({{[\w-]+}})|(<[\w-]+>)|(<\/[\w-]+>)/g,TA=/{{([\w-]+)}}/,AA=/<([\w-]+)>/,SA=/<\/([\w-]+)>/,IA=(e,t)=>{let r=[{name:"",children:[]}];return e.split(CA).filter(Boolean).forEach(o=>{let n=o.match(AA),i=o.match(SA),a=o.match(TA);if(n!==null){let s=n[1];t.hasOwnProperty(s)?r.push({name:s,children:[]}):console.warn(`Trans: missed to pass in prop ${s} for interpolating ${e}`)}else if(i!==null)if(i[1]===r[r.length-1].name){let l=r.pop(),c=Vp.createElement(Vp.Fragment,{},...l.children),d=t[l.name];typeof d=="function"&&r[r.length-1].children.push(d(c))}else console.warn(`Trans: unexpected end tag ${o} for interpolating ${e}`);else if(a!==null){let s=a[1];t.hasOwnProperty(s)?r[r.length-1].children.push(t[s]):console.warn(`Trans: key ${s} not in props for interpolating ${e}`)}else r[r.length-1].children.push(o)}),r.length!==1&&console.warn(`Trans: stack not empty for interpolating ${e}`),r[0].children},MA=({i18nKey:e,children:t,...r})=>{let{t:o}=Tt();return Vp.createElement(Vp.Fragment,{},...IA(o(e),r))},ur=MA;On();Dn();G();import{useAtom as x1}from"jotai";f();f();import kA from"clsx";import{jsx as Kp,jsxs as PA}from"react/jsx-runtime";var LA=({label:e,onClick:t,className:r,children:o,actionType:n,type:i="button",isLoading:a,...s})=>{let l=n?`Dialog__action-button--${n}`:"";return PA("button",{className:kA("Dialog__action-button",l,r),type:i,"aria-label":e,onClick:t,...s,children:[o&&Kp("div",{style:a?{visibility:"hidden"}:{},children:o}),Kp("div",{style:a?{visibility:"hidden"}:{},children:e}),a&&Kp("div",{style:{position:"absolute",inset:0},children:Kp(Vt,{})})]})},el=LA;import{useSetAtom as DA}from"jotai";import{jsx as ww,jsxs as vw}from"react/jsx-runtime";var RA=e=>{let{onConfirm:t,onCancel:r,children:o,confirmText:n=b("buttons.confirm"),cancelText:i=b("buttons.cancel"),className:a="",...s}=e,l=Be(),c=DA(tl,He),{container:d}=Gt();return vw(ut,{onCloseRequest:r,size:"small",...s,className:`confirm-dialog ${a}`,children:[o,vw("div",{className:"confirm-dialog-buttons",children:[ww(el,{label:i,onClick:()=>{l({openMenu:null}),c(!1),r(),d?.focus()}}),ww(el,{label:n,onClick:()=>{l({openMenu:null}),c(!1),t(),d?.focus()},actionType:"danger"})]})]})},Xp=RA;f();import{useCallback as NA,useEffect as p1,useRef as Cw,useState as m1}from"react";import Zp from"open-color";ya();V();Sr();G();f();var Lr=class{static has(t){try{return!!window.localStorage.getItem(t)}catch(r){return console.warn(`localStorage.getItem error: ${r.message}`),!1}}static get(t){try{let r=window.localStorage.getItem(t);return r?JSON.parse(r):null}catch(r){return console.warn(`localStorage.getItem error: ${r.message}`),null}}static set=(t,r)=>{try{return window.localStorage.setItem(t,JSON.stringify(r)),!0}catch(o){return console.warn(`localStorage.setItem error: ${o.message}`),!1}};static delete=t=>{try{window.localStorage.removeItem(t)}catch(r){console.warn(`localStorage.removeItem error: ${r.message}`)}}};import{jsx as ve,jsxs as ir}from"react/jsx-runtime";var OA=async e=>{let o=Math.round(8),n=Math.max(Math.round(128/64),2),i=O0(e,6),a=document.createElement("canvas");a.width=i[0].length*128+(i[0].length+1)*(o*2)-o*2,a.height=i.length*128+(i.length+1)*(o*2)-o*2;let s=a.getContext("2d");s.fillStyle=Zp.white,s.fillRect(0,0,a.width,a.height);for(let[l,c]of e.entries()){let d=await vi({elements:c.elements,files:null,maxWidthOrHeight:128}),{width:m,height:p}=d,u=Math.floor(l/6)*(128+o*2),h=l%6*(128+o*2);s.drawImage(d,h+(128-m)/2+o,u+(128-p)/2+o),s.lineWidth=n,s.strokeStyle=Zp.gray[4],s.strokeRect(h+o/2,u+o/2,128+o,128+o)}return await ac(new File([await Nn(a)],"preview",{type:te.png}),{outputType:te.jpg,maxWidthOrHeight:5e3})},BA=({libItem:e,appState:t,index:r,onChange:o,onRemove:n})=>{let i=Cw(null),a=Cw(null);return p1(()=>{let s=i.current;s&&(async()=>{let l=await ks({elements:e.elements,appState:{...t,viewBackgroundColor:Zp.white,exportBackground:!0},files:null});s.innerHTML=l.outerHTML})()},[e.elements,t]),ir("div",{className:"single-library-item",children:[e.status==="published"&&ve("span",{className:"single-library-item-status",children:b("labels.statusPublished")}),ve("div",{ref:i,className:"single-library-item__svg"}),ve(ce,{"aria-label":b("buttons.remove"),type:"button",icon:co,className:"single-library-item--remove",onClick:n.bind(null,e.id),title:b("buttons.remove")}),ir("div",{style:{display:"flex",margin:"0.8rem 0",width:"100%",fontSize:"14px",fontWeight:500,flexDirection:"column"},children:[ir("label",{style:{display:"flex",justifyContent:"space-between",flexDirection:"column"},children:[ir("div",{style:{padding:"0.5em 0"},children:[ve("span",{style:{fontWeight:500,color:Zp.gray[6]},children:b("publishDialog.itemName")}),ve("span",{"aria-hidden":"true",className:"required",children:"*"})]}),ve("input",{type:"text",ref:a,style:{width:"80%",padding:"0.2rem"},defaultValue:e.name,placeholder:"Item name",onChange:s=>{o(s.target.value,r)}})]}),ve("span",{className:"error",children:e.error})]})]})},FA=({onClose:e,libraryItems:t,appState:r,onSuccess:o,onError:n,updateItemsInStorage:i,onRemove:a})=>{let[s,l]=m1({authorName:"",githubHandle:"",name:"",description:"",twitterHandle:"",website:""}),[c,d]=m1(!1);p1(()=>{let v=Lr.get($r.PUBLISH_LIBRARY);v&&l(v)},[]);let[m,p]=m1(t.slice());p1(()=>{p(t.slice())},[t]);let u=v=>{l({...s,[v.target.name]:v.target.value})},h=async v=>{v.preventDefault(),d(!0);let A=[],L=!1;if(m.forEach(O=>{let I="";O.name||(I=b("publishDialog.errors.required"),L=!0),A.push({...O,error:I})}),L){p(A),d(!1);return}let S=await OA(m),k={type:er.excalidrawLibrary,version:ji.excalidrawLibrary,source:yl,libraryItems:m},R=JSON.stringify(k,null,2),_=new Blob([R],{type:"application/json"}),M=new FormData;M.append("excalidrawLib",_),M.append("previewImage",S),M.append("previewImageType",S.type),M.append("title",s.name),M.append("authorName",s.authorName),M.append("githubHandle",s.githubHandle),M.append("name",s.name),M.append("description",s.description),M.append("twitterHandle",s.twitterHandle),M.append("website",s.website),fetch(`${C.VITE_APP_LIBRARY_BACKEND}/submit`,{method:"post",body:M}).then(O=>O.ok?O.json().then(({url:I})=>{Lr.delete($r.PUBLISH_LIBRARY),o({url:I,authorName:s.authorName,items:m})}):O.json().catch(()=>{throw new Error(O.statusText||"something went wrong")}).then(I=>{throw new Error(I.message||O.statusText||"something went wrong")}),O=>{console.error(O),n(O),d(!1)}).catch(O=>{console.error(O),n(O),d(!1)})},x=()=>{let v=[];return m.forEach((A,L)=>{v.push(ve("div",{className:"single-library-item-wrapper",children:ve(BA,{libItem:A,appState:r,index:L,onChange:(S,k)=>{let R=m.slice();R[k].name=S,p(R)},onRemove:a})},L))}),ve("div",{className:"selected-library-items",children:v})},E=NA(()=>{i(m),Lr.set($r.PUBLISH_LIBRARY,s),e()},[m,e,i,s]),w=!!t.length,y=t.some(v=>v.status==="published");return ve(ut,{onCloseRequest:E,title:b("publishDialog.title"),className:"publish-library",children:w?ir("form",{onSubmit:h,children:[ve("div",{className:"publish-library-note",children:ve(ur,{i18nKey:"publishDialog.noteDescription",link:v=>ve("a",{href:"https://libraries.excalidraw.com",target:"_blank",rel:"noopener noreferrer",children:v})})}),ve("span",{className:"publish-library-note",children:ve(ur,{i18nKey:"publishDialog.noteGuidelines",link:v=>ve("a",{href:"https://github.com/excalidraw/excalidraw-libraries#guidelines",target:"_blank",rel:"noopener noreferrer",children:v})})}),ve("div",{className:"publish-library-note",children:b("publishDialog.noteItems")}),y&&ve("span",{className:"publish-library-note publish-library-warning",children:b("publishDialog.republishWarning")}),x(),ir("div",{className:"publish-library__fields",children:[ir("label",{children:[ir("div",{children:[ve("span",{children:b("publishDialog.libraryName")}),ve("span",{"aria-hidden":"true",className:"required",children:"*"})]}),ve("input",{type:"text",name:"name",required:!0,value:s.name,onChange:u,placeholder:b("publishDialog.placeholder.libraryName")})]}),ir("label",{style:{alignItems:"flex-start"},children:[ir("div",{children:[ve("span",{children:b("publishDialog.libraryDesc")}),ve("span",{"aria-hidden":"true",className:"required",children:"*"})]}),ve("textarea",{name:"description",rows:4,required:!0,value:s.description,onChange:u,placeholder:b("publishDialog.placeholder.libraryDesc")})]}),ir("label",{children:[ir("div",{children:[ve("span",{children:b("publishDialog.authorName")}),ve("span",{"aria-hidden":"true",className:"required",children:"*"})]}),ve("input",{type:"text",name:"authorName",required:!0,value:s.authorName,onChange:u,placeholder:b("publishDialog.placeholder.authorName")})]}),ir("label",{children:[ve("span",{children:b("publishDialog.githubUsername")}),ve("input",{type:"text",name:"githubHandle",value:s.githubHandle,onChange:u,placeholder:b("publishDialog.placeholder.githubHandle")})]}),ir("label",{children:[ve("span",{children:b("publishDialog.twitterUsername")}),ve("input",{type:"text",name:"twitterHandle",value:s.twitterHandle,onChange:u,placeholder:b("publishDialog.placeholder.twitterHandle")})]}),ir("label",{children:[ve("span",{children:b("publishDialog.website")}),ve("input",{type:"text",name:"website",pattern:"https?://.+",title:b("publishDialog.errors.website"),value:s.website,onChange:u,placeholder:b("publishDialog.placeholder.website")})]}),ve("span",{className:"publish-library-note",children:ve(ur,{i18nKey:"publishDialog.noteLicense",link:v=>ve("a",{href:"https://github.com/excalidraw/excalidraw-libraries/blob/main/LICENSE",target:"_blank",rel:"noopener noreferrer",children:v})})})]}),ir("div",{className:"publish-library__buttons",children:[ve(el,{label:b("buttons.cancel"),onClick:E,"data-testid":"cancel-clear-canvas-button"}),ve(el,{type:"submit",label:b("buttons.submit"),actionType:"primary",isLoading:c})]})]}):ve("p",{style:{padding:"1em",textAlign:"center",fontWeight:500},children:b("publishDialog.atleastOneLibItem")})})},Tw=FA;f();f();import zA from"clsx";import{jsx as HA}from"react/jsx-runtime";var Aw=({className:e="",children:t,onToggle:r,title:o,...n})=>{let i=ke(),a=zA(`dropdown-menu-button ${e}`,"zen-mode-transition",{"dropdown-menu-button--mobile":i.editor.isMobile}).trim();return HA("button",{"data-prevent-outside-click":!0,className:a,onClick:r,type:"button","data-testid":"dropdown-menu-button",title:o,...n,children:t})},Sw=Aw;Aw.displayName="DropdownMenuTrigger";f();f();V();G();import _A,{useContext as GA}from"react";var u1=_A.createContext({}),jp=(e="",t=!1)=>`dropdown-menu-item dropdown-menu-item-base ${e} ${t?"dropdown-menu-item--selected":""}`.trim(),qp=(e,t)=>{let r=GA(u1);return ti(e,o=>{let n=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});t?.(n),n.defaultPrevented||r.onSelect?.(n)})};f();import{Fragment as WA,jsx as h1,jsxs as YA}from"react/jsx-runtime";var UA=({icon:e,shortcut:t,children:r})=>{let o=ke();return YA(WA,{children:[h1("div",{className:"dropdown-menu-item__icon",children:e}),h1("div",{className:"dropdown-menu-item__text",children:r}),t&&!o.editor.isMobile&&h1("div",{className:"dropdown-menu-item__shortcut",children:t})]})},Qp=UA;import{jsx as g1}from"react/jsx-runtime";var f1=({icon:e,onSelect:t,children:r,shortcut:o,className:n,selected:i,...a})=>{let s=qp(a.onClick,t);return g1("button",{...a,onClick:s,type:"button",className:jp(n,i),title:a.title??a["aria-label"],children:g1(Qp,{icon:e,shortcut:o,children:r})})};f1.displayName="DropdownMenuItem";var Iw=({children:e})=>g1("div",{style:{display:"inline-flex",marginLeft:"auto",padding:"2px 4px",background:"pink",borderRadius:6,fontSize:9,color:"black",fontFamily:"Cascadia, monospace"},children:e});Iw.displayName="DropdownMenuItemBadge";f1.Badge=Iw;var go=f1;f();import{jsx as VA}from"react/jsx-runtime";var Mw=()=>VA("div",{style:{height:"1px",backgroundColor:"var(--default-border-color)",margin:".5rem 0"}}),kw=Mw;Mw.displayName="DropdownMenuSeparator";f();import{jsx as KA,jsxs as XA}from"react/jsx-runtime";var Lw=({children:e,className:t="",style:r,title:o})=>XA("div",{className:`dropdown-menu-group ${t}`,style:r,children:[o&&KA("p",{className:"dropdown-menu-group-title",children:o}),e]}),Pw=Lw;Lw.displayName="DropdownMenuGroup";f();import ZA from"clsx";import{useEffect as jA,useRef as qA}from"react";ge();V();import{jsx as Jp}from"react/jsx-runtime";var Dw=({children:e,onClickOutside:t,className:r="",onSelect:o,style:n})=>{let i=ke(),a=qA(null),s=Ys({onClickOutside:t});Ws(a,()=>{s.onClickOutside?.()}),jA(()=>{let c=m=>{m.key===T.ESCAPE&&(m.stopImmediatePropagation(),s.onClickOutside?.())},d={capture:!0};return document.addEventListener("keydown",c,d),()=>{document.removeEventListener("keydown",c,d)}},[s]);let l=ZA(`dropdown-menu ${r}`,{"dropdown-menu--mobile":i.editor.isMobile}).trim();return Jp(u1.Provider,{value:{onSelect:o},children:Jp("div",{ref:a,className:l,style:n,"data-testid":"dropdown-menu",children:i.editor.isMobile?Jp(Ut.Col,{className:"dropdown-menu-container",children:e}):Jp(Qt,{className:"dropdown-menu-container",padding:2,style:{zIndex:2},children:e})})})};Dw.displayName="DropdownMenuContent";var Rw=Dw;f();import{jsx as Nw}from"react/jsx-runtime";var Ow=({icon:e,shortcut:t,href:r,children:o,onSelect:n,className:i="",selected:a,...s})=>{let l=qp(s.onClick,n);return Nw("a",{...s,href:r,target:"_blank",rel:"noreferrer",className:jp(i,a),title:s.title??s["aria-label"],onClick:l,children:Nw(Qp,{icon:e,shortcut:t,children:o})})},rl=Ow;Ow.displayName="DropdownMenuItemLink";f();import{jsx as JA}from"react/jsx-runtime";var QA=({children:e,className:t="",selected:r,...o})=>JA("div",{...o,className:`dropdown-menu-item-base dropdown-menu-item-custom ${t} ${r?"dropdown-menu-item--selected":""}`.trim(),children:e}),Bw=QA;f();import $p from"react";var Fw=e=>{let t=$p.Children.toArray(e).find(r=>$p.isValidElement(r)&&typeof r.type!="string"&&r?.type.displayName&&r.type.displayName==="DropdownMenuTrigger");return t||null},zw=e=>{let t=$p.Children.toArray(e).find(r=>$p.isValidElement(r)&&typeof r.type!="string"&&r?.type.displayName&&r.type.displayName==="DropdownMenuContent");return t||null};import{Fragment as $A,jsxs as eS}from"react/jsx-runtime";var Un=({children:e,open:t})=>{let r=Fw(e),o=zw(e);return eS($A,{children:[r,t&&o]})};Un.Trigger=Sw;Un.Content=Rw;Un.Item=go;Un.ItemLink=rl;Un.ItemCustom=Bw;Un.Group=Pw;Un.Separator=kw;var ze=Un;Un.displayName="DropdownMenu";import rS from"clsx";import{jsx as Pr,jsxs as eu}from"react/jsx-runtime";var oS=(e,t)=>e.filter(r=>t.includes(r.id)),nS=({setAppState:e,selectedItems:t,library:r,onRemoveFromLibrary:o,resetLibrary:n,onSelectItems:i,appState:a,className:s})=>{let[l]=x1(Fa,He),[c,d]=x1(tl,He),m=()=>{let M=t.length?b("alerts.removeItemsFromsLibrary",{count:t.length}):b("alerts.resetLibrary"),O=t.length?b("confirmDialog.removeItemsFromLib"):b("confirmDialog.resetLibrary");return Pr(Xp,{onConfirm:()=>{t.length?o():n(),u(!1)},onCancel:()=>{u(!1)},title:O,children:Pr("p",{children:M})})},[p,u]=b1(!1),h=!!t.length,x=h?l.libraryItems.filter(M=>t.includes(M.id)):l.libraryItems,E=h?b("buttons.remove"):b("buttons.resetLibrary"),[w,y]=b1(!1),[v,A]=b1(null),L=tS(()=>eu(ut,{onCloseRequest:()=>A(null),title:b("publishSuccessDialog.title"),className:"publish-library-success",size:"small",children:[Pr("p",{children:Pr(ur,{i18nKey:"publishSuccessDialog.content",authorName:v.authorName,link:M=>Pr("a",{href:v?.url,target:"_blank",rel:"noopener noreferrer",children:M})})}),Pr(ce,{type:"button",title:b("buttons.close"),"aria-label":b("buttons.close"),label:b("buttons.close"),onClick:()=>A(null),"data-testid":"publish-library-success-close",className:"publish-library-success-close"})]}),[A,v]),S=(M,O)=>{y(!1),A({url:M.url,authorName:M.authorName});let I=O.slice();I.forEach(F=>{t.includes(F.id)&&(F.status="published")}),r.setLibrary(I)},k=async()=>{try{await r.updateLibrary({libraryItems:bs({description:"Excalidraw library files"}),merge:!0,openLibraryMenu:!0})}catch(M){if(M?.name==="AbortError"){console.warn(M);return}e({errorMessage:b("errors.importLibraryError")})}},R=async()=>{let M=h?x:await r.getLatestLibrary();Xx(M).catch(Ad).catch(O=>{e({errorMessage:O.message})})},_=()=>eu(ze,{open:c,children:[Pr(ze.Trigger,{onToggle:()=>d(!c),children:c4}),eu(ze.Content,{onClickOutside:()=>d(!1),onSelect:()=>d(!1),className:"library-menu",children:[!h&&Pr(ze.Item,{onSelect:k,icon:Fs,"data-testid":"lib-dropdown--load",children:b("buttons.load")}),!!x.length&&Pr(ze.Item,{onSelect:R,icon:Ma,"data-testid":"lib-dropdown--export",children:b("buttons.export")}),!!x.length&&Pr(ze.Item,{onSelect:()=>u(!0),icon:Bo,children:E}),h&&Pr(ze.Item,{icon:xy,onSelect:()=>y(!0),"data-testid":"lib-dropdown--remove",children:b("buttons.publishLibrary")})]})]});return eu("div",{className:rS("library-menu-dropdown-container",s),children:[_(),t.length>0&&Pr("div",{className:"library-actions-counter",children:t.length}),p&&m(),w&&Pr(Tw,{onClose:()=>y(!1),libraryItems:oS(l.libraryItems,t),appState:a,onSuccess:M=>S(M,l.libraryItems),onError:M=>window.alert(M),updateItemsInStorage:()=>r.setLibrary(l.libraryItems),onRemove:M=>i(t.filter(O=>O!==M))}),v&&L()]})},E1=({selectedItems:e,onSelectItems:t,className:r})=>{let{library:o}=Mr(),{clearLibraryCache:n,deleteItemsFromLibraryCache:i}=Hp(),a=Re(),s=Be(),[l]=x1(Fa,He),c=async m=>{let p=m.filter(u=>!e.includes(u.id));o.setLibrary(p).catch(()=>{s({errorMessage:b("alerts.errorRemovingFromLibrary")})}),i(e),t([])};return Pr(nS,{appState:a,setAppState:s,selectedItems:e,onSelectItems:t,library:o,onRemoveFromLibrary:()=>c(l.libraryItems),resetLibrary:()=>{o.resetLibrary(),n()},className:r})};f();import{memo as uS,useEffect as hS,useState as gS}from"react";f();import Hw from"clsx";import{memo as iS,useEffect as aS,useRef as sS,useState as lS}from"react";import{jsx as tu,jsxs as cS}from"react/jsx-runtime";var _w=iS(({id:e,elements:t,isPending:r,onClick:o,selected:n,onToggle:i,onDrag:a,svgCache:s})=>{let l=sS(null),c=cw(e,t,s);aS(()=>{let h=l.current;if(h)return c&&(h.innerHTML=c.outerHTML),()=>{h.innerHTML=""}},[c]);let[d,m]=lS(!1),p=ke().editor.isMobile,u=r&&tu("div",{className:"library-unit__adder",children:l4});return cS("div",{className:Hw("library-unit",{"library-unit__active":t,"library-unit--hover":t&&d,"library-unit--selected":n,"library-unit--skeleton":!c}),onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:[tu("div",{className:Hw("library-unit__dragger",{"library-unit__pulse":!!r}),ref:l,draggable:!!t,onClick:t||r?h=>{e&&h.shiftKey?i(e,h):o(e)}:void 0,onDragStart:h=>{if(!e){h.preventDefault();return}m(!1),a(e,h)}}),u,e&&t&&(d||p||n)&&tu(Na,{checked:n,onChange:(h,x)=>i(e,x),className:"library-unit__checkbox"})]})}),Gw=()=>tu("div",{className:"library-unit library-unit--skeleton"});f();import dS,{useCallback as mS}from"react";function pS(){return[!1,mS(t=>t(),[])]}var Uw=dS.useTransition||pS;import{Fragment as fS,jsx as ru}from"react/jsx-runtime";var y1=({children:e})=>ru("div",{className:"library-menu-items-container__grid",children:e}),ou=uS(({items:e,onItemSelectToggle:t,onItemDrag:r,isItemSelected:o,onClick:n,svgCache:i,itemsRenderedPerBatch:a})=>{let[,s]=Uw(),[l,c]=gS(0);return hS(()=>{l<e.length&&s(()=>{c(l+a)})},[l,e.length,s,a]),ru(fS,{children:e.map((d,m)=>m<l?ru(_w,{elements:d?.elements,isPending:!d?.id&&!!d?.elements,onClick:n,svgCache:i,id:d?.id,selected:o(d.id),onToggle:t,onDrag:r},d?.id??m):ru(Gw,{},m))})});f();import{useEffect as bS}from"react";import{atom as xS,useAtom as ES}from"jotai";import yS from"lodash.throttle";var wS=xS(0),Ww=e=>{let[t,r]=ES(wS);return bS(()=>{let{current:o}=e;if(!o)return;let n=yS(()=>{let{scrollTop:i}=o;r(i)},200);return o.addEventListener("scroll",n),()=>{n.cancel(),o.removeEventListener("scroll",n)}},[e,r]),t};import{Fragment as Vw,jsx as Dr,jsxs as nl}from"react/jsx-runtime";var AS=17,SS=64;function w1({isLoading:e,libraryItems:t,onAddToLibrary:r,onInsertLibraryItems:o,pendingElements:n,theme:i,id:a,libraryReturnUrl:s,onSelectItems:l,selectedItems:c}){let d=CS(null),m=Ww(d);vS(()=>{m>0&&d.current?.scrollTo(0,m)},[]);let{svgCache:p}=Hp(),u=Yw(()=>t.filter(M=>M.status!=="published"),[t]),h=Yw(()=>t.filter(M=>M.status==="published"),[t]),x=!t.length&&!n.length,E=!n.length&&!u.length&&!h.length,[w,y]=TS(null),v=ol((M,O)=>{let I=!c.includes(M),F=[...u,...h];if(I){if(O.shiftKey&&w){let Q=F.findIndex(Y=>Y.id===w),j=F.findIndex(Y=>Y.id===M);if(Q===-1||j===-1){l([...c,M]);return}let oe=X(c),Ce=F.reduce((Y,W,he)=>((he>=Q&&he<=j||oe.has(W.id))&&Y.push(W.id),Y),[]);l(Ce)}else l([...c,M]);y(M)}else y(null),l(c.filter(Q=>Q!==M))},[w,l,h,c,u]),A=ol(M=>{let O;return c.includes(M)?O=t.filter(I=>c.includes(I.id)):O=t.filter(I=>I.id===M),O.map(I=>({...I,elements:pm(I.elements,{randomizeSeed:!0})}))},[t,c]),L=ol((M,O)=>{O.dataTransfer.setData(te.excalidrawlib,Cm(A(M)))},[A]),S=ol(M=>M?c.includes(M):!1,[c]),k=ol(()=>{r(n)},[n,r]),R=ol(M=>{M&&o(A(M))},[A,o]),_=p.size>=t.length?SS:AS;return nl("div",{className:"library-menu-items-container",style:n.length||u.length||h.length?{justifyContent:"flex-start"}:{borderBottom:0},children:[!E&&Dr(E1,{selectedItems:c,onSelectItems:l,className:"library-menu-dropdown-container--in-heading"}),nl(Ut.Col,{className:"library-menu-items-container__items",align:"start",gap:1,style:{flex:h.length>0?1:"0 1 auto",marginBottom:0},ref:d,children:[nl(Vw,{children:[!E&&Dr("div",{className:"library-menu-items-container__header",children:b("labels.personalLib")}),e&&Dr("div",{style:{position:"absolute",top:"var(--container-padding-y)",right:"var(--container-padding-x)",transform:"translateY(50%)"},children:Dr(Vt,{})}),!n.length&&!u.length?nl("div",{className:"library-menu-items__no-items",children:[Dr("div",{className:"library-menu-items__no-items__label",children:b("library.noItems")}),Dr("div",{className:"library-menu-items__no-items__hint",children:h.length>0?b("library.hint_emptyPrivateLibrary"):b("library.hint_emptyLibrary")})]}):nl(y1,{children:[n.length>0&&Dr(ou,{itemsRenderedPerBatch:_,items:[{id:null,elements:n}],onItemSelectToggle:v,onItemDrag:L,onClick:k,isItemSelected:S,svgCache:p}),Dr(ou,{itemsRenderedPerBatch:_,items:u,onItemSelectToggle:v,onItemDrag:L,onClick:R,isItemSelected:S,svgCache:p})]})]}),nl(Vw,{children:[(h.length>0||n.length>0||u.length>0)&&Dr("div",{className:"library-menu-items-container__header library-menu-items-container__header--excal",children:b("labels.excalidrawLib")}),h.length>0?Dr(y1,{children:Dr(ou,{itemsRenderedPerBatch:_,items:h,onItemSelectToggle:v,onItemDrag:L,onClick:R,isItemSelected:S,svgCache:p})}):u.length>0?Dr("div",{style:{margin:"1rem 0",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",fontSize:".9rem"},children:b("library.noItems")}):null]}),x&&Dr(Yp,{style:{padding:"16px 0",width:"100%"},id:a,libraryReturnUrl:s,theme:i,children:Dr(E1,{selectedItems:c,onSelectItems:l})})]})]})}import{atom as MS,useAtom as kS}from"jotai";Xe();G();V();import{jsx as ki,jsxs as Xw}from"react/jsx-runtime";var tl=MS(!1),Kw=({children:e})=>ki("div",{className:"layer-ui__library",children:e}),LS=({onInsertLibraryItems:e,pendingElements:t,onAddToLibrary:r,setAppState:o,libraryReturnUrl:n,library:i,id:a,theme:s,selectedItems:l,onSelectItems:c})=>{let[d]=kS(Fa,He),m=C1(h=>{(async(E,w)=>{xe("element","addToLibrary","ui");for(let v of yd)if(E.some(A=>A.type===v))return o({errorMessage:b(`errors.libraryElementTypeError.${v}`)});let y=[{status:"unpublished",elements:E,id:Rt(),created:Date.now()},...w];r(),i.setLibrary(y).catch(()=>{o({errorMessage:b("alerts.errorAddingToLibrary")})})})(h,d.libraryItems)},[r,i,o,d.libraryItems]),p=Zw(()=>d.libraryItems,[d]);if(d.status==="loading"&&!d.isInitialized)return ki(Kw,{children:ki("div",{className:"layer-ui__library-message",children:Xw("div",{children:[ki(Vt,{size:"2em"}),ki("span",{children:b("labels.libraryLoadingMessage")})]})})});let u=d.libraryItems.length>0||t.length>0;return Xw(Kw,{children:[ki(w1,{isLoading:d.status==="loading",libraryItems:p,onAddToLibrary:m,onInsertLibraryItems:e,pendingElements:t,id:a,libraryReturnUrl:n,theme:s,onSelectItems:c,selectedItems:l}),u&&ki(Yp,{className:"library-menu-control-buttons--at-bottom",style:{padding:"16px 12px 0 12px"},id:a,libraryReturnUrl:n,theme:s})]})},PS=(e,t)=>{let r=()=>ue(t,e,{includeBoundTextElement:!0,includeElementsInFrames:!0}),o=v1(r()),n=v1(e),i=v1(t);return(!Je(e.selectedElementIds,n.current.selectedElementIds)||!Je(t,i.current))&&(o.current=r(),n.current=e,i.current=t),o.current},jw=()=>{let{library:e,id:t,onInsertElements:r}=Mr(),o=Mi(),n=Re(),i=Be(),a=Ai(),[s,l]=IS([]),c=Zw(()=>e,[e]),d=PS(n,a),m=C1(u=>{r(Wp(u))},[r]),p=C1(()=>{i({selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null})},[i]);return ki(LS,{pendingElements:d,onInsertLibraryItems:m,onAddToLibrary:p,setAppState:i,libraryReturnUrl:o.libraryReturnUrl,library:c,id:t,theme:n.theme,selectedItems:s,onSelectItems:l})};import{jsx as Bc,jsxs as FS}from"react/jsx-runtime";function BS(e){if(e&&typeof e=="number")return e;switch(e){case"small":return 550;case"wide":return 1024;case"regular":default:return 800}}var ut=e=>{let[t,r]=iw(),[o]=NS(document.activeElement),{id:n}=Gt(),i=ke().viewport.isMobile;RS(()=>{if(!t)return;let c=Cl(t);setTimeout(()=>{c.length>0&&e.autofocus!==!1&&(c[1]||c[0]).focus()});let d=m=>{if(m.key===T.TAB){let p=Cl(t),{activeElement:u}=document,h=p.findIndex(x=>x===u);h===0&&m.shiftKey?(p[p.length-1].focus(),m.preventDefault()):h===p.length-1&&!m.shiftKey&&(p[0].focus(),m.preventDefault())}};return t.addEventListener("keydown",d),()=>t.removeEventListener("keydown",d)},[t,e.autofocus]);let a=Be(),s=OS(tl,He),l=()=>{a({openMenu:null}),s(!1),o.focus(),e.onCloseRequest()};return Bc(sw,{className:DS("Dialog",e.className,{"Dialog--fullscreen":i}),labelledBy:"dialog-title",maxWidth:BS(e.size),onCloseRequest:l,closeOnClickOutside:e.closeOnClickOutside,children:FS(Qt,{ref:r,children:[e.title&&Bc("h2",{id:`${n}-dialog-title`,className:"Dialog__title",children:Bc("span",{className:"Dialog__titleContent",children:e.title})}),i&&Bc("button",{className:"Dialog__close",onClick:l,title:b("buttons.close"),"aria-label":b("buttons.close"),children:co}),Bc("div",{className:"Dialog__content",children:e.children})]})})};f();import{forwardRef as _S,useRef as GS,useImperativeHandle as US,useLayoutEffect as WS,useState as YS}from"react";import T1 from"clsx";f();G();import zS from"clsx";import{jsx as HS}from"react/jsx-runtime";var sn=({type:e="button",onSelect:t,selected:r,children:o,className:n="",...i})=>HS("button",{onClick:ti(i.onClick,a=>{t()}),type:e,className:zS("excalidraw-button",n,{selected:r}),...i,children:o});import{jsx as A1,jsxs as qw}from"react/jsx-runtime";var nu=_S(({onChange:e,label:t,fullWidth:r,placeholder:o,readonly:n,selectOnRender:i,onKeyDown:a,isRedacted:s=!1,...l},c)=>{let d=GS(null);US(c,()=>d.current),WS(()=>{i&&d.current?.select()},[i]);let[m,p]=YS(!1);return qw("div",{className:T1("ExcTextField",{"ExcTextField--fullWidth":r}),onClick:()=>{d.current?.focus()},children:[A1("div",{className:"ExcTextField__label",children:t}),qw("div",{className:T1("ExcTextField__input",{"ExcTextField__input--readonly":n}),children:[A1("input",{className:T1({"is-redacted":"value"in l&&l.value&&s&&!m}),readOnly:n,value:"value"in l?l.value:void 0,defaultValue:"defaultValue"in l?l.defaultValue:void 0,placeholder:o,ref:d,onChange:u=>e?.(u.target.value),onKeyDown:a}),s&&A1(sn,{onSelect:()=>p(!m),style:{border:0,userSelect:"none"},children:m?Ay:_s})]})]})});Xe();import i6 from"clsx";f();V();G();var VS={toggleTheme:[N("Shift+Alt+D")],saveScene:[N("CtrlOrCmd+S")],loadScene:[N("CtrlOrCmd+O")],clearCanvas:[N("CtrlOrCmd+Delete")],imageExport:[N("CtrlOrCmd+Shift+E")],commandPalette:[N("CtrlOrCmd+/"),N("CtrlOrCmd+Shift+P")],cut:[N("CtrlOrCmd+X")],copy:[N("CtrlOrCmd+C")],paste:[N("CtrlOrCmd+V")],copyStyles:[N("CtrlOrCmd+Alt+C")],pasteStyles:[N("CtrlOrCmd+Alt+V")],selectAll:[N("CtrlOrCmd+A")],deleteSelectedElements:[N("Delete")],duplicateSelection:[N("CtrlOrCmd+D"),N(`Alt+${b("helpDialog.drag")}`)],sendBackward:[N("CtrlOrCmd+[")],bringForward:[N("CtrlOrCmd+]")],sendToBack:[ar?N("CtrlOrCmd+Alt+["):N("CtrlOrCmd+Shift+[")],bringToFront:[ar?N("CtrlOrCmd+Alt+]"):N("CtrlOrCmd+Shift+]")],copyAsPng:[N("Shift+Alt+C")],copyAsSvg:[],group:[N("CtrlOrCmd+G")],ungroup:[N("CtrlOrCmd+Shift+G")],gridMode:[N("CtrlOrCmd+'")],zenMode:[N("Alt+Z")],objectsSnapMode:[N("Alt+S")],stats:[N("Alt+/")],addToLibrary:[],flipHorizontal:[N("Shift+H")],flipVertical:[N("Shift+V")],viewMode:[N("Alt+R")],hyperlink:[N("CtrlOrCmd+K")],toggleElementLock:[N("CtrlOrCmd+Shift+L")],resetZoom:[N("CtrlOrCmd+0")],zoomOut:[N("CtrlOrCmd+-")],zoomIn:[N("CtrlOrCmd++")],zoomToFitSelection:[N("Shift+3")],zoomToFit:[N("Shift+1")],zoomToFitSelectionInViewport:[N("Shift+2")],toggleEraserTool:[N("E")],toggleHandTool:[N("H")],setFrameAsActiveTool:[N("F")],saveFileToDisk:[N("CtrlOrCmd+S")],saveToActiveFile:[N("CtrlOrCmd+S")],toggleShortcuts:[N("?")]},Mt=(e,t=0)=>{let r=VS[e];return r&&r.length>0?r[t]||r[0]:""};V();import cI from"fuzzy";G();import{atom as dI,useAtom as mI}from"jotai";f();var KS="\\u0300-\\u036f",XS="\\ufe20-\\ufe2f",ZS="\\u20d0-\\u20ff",jS=KS+XS+ZS,qS=`[${jS}]`,QS=RegExp(qS,"g"),JS=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,$S={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"E",\u00E6:"e",\u00DE:"T",\u00FE:"t",\u00DF:"s",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"I",\u0133:"i",\u0152:"E",\u0153:"e",\u0149:"n",\u017F:"s"},S1=e=>e.replace(JS,t=>$S[t]||t).replace(QS,"");f();import{jsx as eI}from"react/jsx-runtime";var Li=({icon:e})=>eI("span",{style:{width:"1em",margin:"0 0.5ex 0 0.5ex",display:"inline-block",lineHeight:0,verticalAlign:"middle"},children:e});f();ge();var Fc=[{icon:h4,value:"selection",key:T.V,numericKey:T[1],fillable:!0},{icon:g4,value:"rectangle",key:T.R,numericKey:T[2],fillable:!0},{icon:f4,value:"diamond",key:T.D,numericKey:T[3],fillable:!0},{icon:b4,value:"ellipse",key:T.O,numericKey:T[4],fillable:!0},{icon:x4,value:"arrow",key:T.A,numericKey:T[5],fillable:!0},{icon:E4,value:"line",key:T.L,numericKey:T[6],fillable:!0},{icon:Os,value:"freedraw",key:[T.P,T.X],numericKey:T[7],fillable:!1},{icon:w4,value:"text",key:T.T,numericKey:T[8],fillable:!1},{icon:v4,value:"image",key:null,numericKey:T[9],fillable:!1},{icon:C4,value:"eraser",key:T.E,numericKey:T[0],fillable:!1}],Qw=e=>Fc.find((r,o)=>r.numericKey!=null&&e===r.numericKey.toString()||r.key&&(typeof r.key=="string"?r.key===e:r.key.includes(e)))?.value||null;f();import{useState as tI}from"react";Xe();G();Bl();se();import k1 from"clsx";lt();ge();f();import I1 from"react";import ln from"tunnel-rat";var M1=I1.createContext(null),ot=()=>I1.useContext(M1),Jw=()=>I1.useMemo(()=>({MainMenuTunnel:ln(),WelcomeScreenMenuHintTunnel:ln(),WelcomeScreenToolbarHintTunnel:ln(),WelcomeScreenHelpHintTunnel:ln(),WelcomeScreenCenterTunnel:ln(),FooterCenterTunnel:ln(),DefaultSidebarTriggerTunnel:ln(),DefaultSidebarTabTriggersTunnel:ln(),OverwriteConfirmDialogTunnel:ln(),TTDDialogTriggerTunnel:ln(),jotaiScope:Symbol()}),[]);import{Fragment as Pi,jsx as ct,jsxs as Ct}from"react/jsx-runtime";var L1=(e,t)=>{let r=t[0]?.type||null;for(let o of t)if(o.type!==r){r=null;break}return Ol(e.activeTool.type)&&e.activeTool.type!=="image"&&r!=="image"&&r!=="frame"&&r!=="magicframe"||t.some(o=>Ol(o.type))},P1=(e,t)=>vn(e.activeTool.type)||t.some(r=>vn(r.type)),iu=({appState:e,elementsMap:t,renderAction:r})=>{let o=Sa(t,e),n=!1;o.length===2&&(tr(o[0])||tr(o[1]))&&(n=!0);let i=!!e.editingElement,a=ke(),s=document.documentElement.getAttribute("dir")==="rtl",l=vn(e.activeTool.type)&&!sr(e.currentItemBackgroundColor)||o.some(d=>vn(d.type)&&!sr(d.backgroundColor)),c=o.length===1||n;return Ct("div",{className:"panelColumn",children:[ct("div",{children:L1(e,o)&&r("changeStrokeColor")}),P1(e,o)&&ct("div",{children:r("changeBackgroundColor")}),l&&r("changeFillStyle"),(Od(e.activeTool.type)||o.some(d=>Od(d.type)))&&r("changeStrokeWidth"),(e.activeTool.type==="freedraw"||o.some(d=>d.type==="freedraw"))&&r("changeStrokeShape"),(Bd(e.activeTool.type)||o.some(d=>Bd(d.type)))&&Ct(Pi,{children:[r("changeStrokeStyle"),r("changeSloppiness")]}),(rs(e.activeTool.type)||o.some(d=>rs(d.type)))&&ct(Pi,{children:r("changeRoundness")}),(e.activeTool.type==="text"||o.some(U))&&Ct(Pi,{children:[r("changeFontSize"),r("changeFontFamily"),(e.activeTool.type==="text"||qb(o,t))&&r("changeTextAlign")]}),jb(o,t)&&r("changeVerticalAlign"),($i(e.activeTool.type)||o.some(d=>$i(d.type)))&&ct(Pi,{children:r("changeArrowhead")}),r("changeOpacity"),Ct("fieldset",{children:[ct("legend",{children:b("labels.layers")}),Ct("div",{className:"buttonList",children:[r("sendToBack"),r("sendBackward"),r("bringToFront"),r("bringForward")]})]}),o.length>1&&!n&&Ct("fieldset",{children:[ct("legend",{children:b("labels.align")}),Ct("div",{className:"buttonList",children:[s?Ct(Pi,{children:[r("alignRight"),r("alignHorizontallyCentered"),r("alignLeft")]}):Ct(Pi,{children:[r("alignLeft"),r("alignHorizontallyCentered"),r("alignRight")]}),o.length>2&&r("distributeHorizontally"),ct("div",{style:{flexBasis:"100%",height:0}}),Ct("div",{style:{display:"flex",flexWrap:"wrap",gap:".5rem",marginTop:"-0.5rem"},children:[r("alignTop"),r("alignVerticallyCentered"),r("alignBottom"),o.length>2&&r("distributeVertically")]})]})]}),!i&&o.length>0&&Ct("fieldset",{children:[ct("legend",{children:b("labels.actions")}),Ct("div",{className:"buttonList",children:[!a.editor.isMobile&&r("duplicateSelection"),!a.editor.isMobile&&r("deleteSelectedElements"),r("group"),r("ungroup"),c&&r("hyperlink")]})]})]})},au=({activeTool:e,appState:t,app:r,UIOptions:o})=>{let[n,i]=tI(!1),a=e.type==="frame",s=e.type==="laser",l=e.type==="embeddable",{TTDDialogTriggerTunnel:c}=ot();return Ct(Pi,{children:[Fc.map(({value:d,icon:m,key:p,numericKey:u,fillable:h},x)=>{if(o.tools?.[d]===!1)return null;let E=b(`toolBar.${d}`),w=p&&ei(typeof p=="string"?p:p[0]),y=w?`${w} ${b("helpDialog.or")} ${u}`:`${u}`;return ct(ce,{className:k1("Shape",{fillable:h}),type:"radio",icon:m,checked:e.type===d,name:"editor-current-shape",title:`${ei(E)} \u2014 ${y}`,keyBindingLabel:u||w,"aria-label":ei(E),"aria-keyshortcuts":y,"data-testid":`toolbar-${d}`,onPointerDown:({pointerType:v})=>{!t.penDetected&&v==="pen"&&r.togglePenMode(!0)},onChange:({pointerType:v})=>{t.activeTool.type!==d&&xe("toolbar",d,"ui"),d==="image"?r.setActiveTool({type:d,insertOnCanvasDirectly:v!=="mouse"}):r.setActiveTool({type:d})}},d)}),ct("div",{className:"App-toolbar__divider"}),Ct(ze,{open:n,children:[Ct(ze.Trigger,{className:k1("App-toolbar__extra-tools-trigger",{"App-toolbar__extra-tools-trigger--selected":a||l||s&&!r.props.isCollaborating}),onToggle:()=>i(!n),title:b("toolBar.extraTools"),children:[Cy,r.props.aiEnabled!==!1&&ct("div",{style:{display:"inline-flex",marginLeft:"auto",padding:"2px 4px",borderRadius:6,fontSize:8,fontFamily:"Cascadia, monospace",position:"absolute",background:"pink",color:"black",bottom:3,right:4},children:"AI"})]}),Ct(ze.Content,{onClickOutside:()=>i(!1),onSelect:()=>i(!1),className:"App-toolbar__extra-tools-dropdown",children:[ct(ze.Item,{onSelect:()=>r.setActiveTool({type:"frame"}),icon:hp,shortcut:T.F.toLocaleUpperCase(),"data-testid":"toolbar-frame",selected:a,children:b("toolBar.frame")}),ct(ze.Item,{onSelect:()=>r.setActiveTool({type:"embeddable"}),icon:A4,"data-testid":"toolbar-embeddable",selected:l,children:b("toolBar.embeddable")}),ct(ze.Item,{onSelect:()=>r.setActiveTool({type:"laser"}),icon:fp,"data-testid":"toolbar-laser",selected:s,shortcut:T.K.toLocaleUpperCase(),children:b("toolBar.laser")}),ct("div",{style:{margin:"6px 0",fontSize:14,fontWeight:600},children:"Generate"}),r.props.aiEnabled!==!1&&ct(c.Out,{}),ct(ze.Item,{onSelect:()=>r.setOpenDialog({name:"ttd",tab:"mermaid"}),icon:gp,"data-testid":"toolbar-embeddable",children:b("toolBar.mermaidToExcalidraw")}),r.props.aiEnabled!==!1&&Ct(Pi,{children:[Ct(ze.Item,{onSelect:()=>r.onMagicframeToolSelect(),icon:Hs,"data-testid":"toolbar-magicframe",children:[b("toolBar.magicframe"),ct(ze.Item.Badge,{children:"AI"})]}),ct(ze.Item,{onSelect:()=>{xe("ai","open-settings","d2c"),r.setOpenDialog({name:"settings",source:"settings",tab:"diagram-to-code"})},icon:Cc,"data-testid":"toolbar-magicSettings",children:b("toolBar.magicSettings")})]})]})]})]})},$w=({renderAction:e,zoom:t})=>ct(Ut.Col,{gap:1,className:"zoom-actions",children:Ct(Ut.Row,{align:"center",children:[e("zoomOut"),e("resetZoom"),e("zoomIn")]})}),e6=({renderAction:e,className:t})=>Ct("div",{className:`undo-redo-buttons ${t}`,children:[ct("div",{className:"undo-button-container",children:ct(Zr,{label:b("buttons.undo"),children:e("undo")})}),ct("div",{className:"redo-button-container",children:Ct(Zr,{label:b("buttons.redo"),children:[" ",e("redo")]})})]}),t6=({actionManager:e,showExitZenModeBtn:t})=>ct("button",{className:k1("disable-zen-mode",{"disable-zen-mode--visible":t}),onClick:()=>e.executeAction(Qs),children:b("buttons.exitZenMode")}),r6=({renderAction:e,className:t})=>ct("div",{className:`finalize-button ${t}`,children:e("finalize",{size:"small"})});f();import{useRef as rI}from"react";var D1=e=>{let t=rI({userFn:e});return t.current.userFn=e,t.current.stableFn||(t.current.stableFn=(...r)=>t.current.userFn(...r)),t.current.stableFn};f();import{atom as oI,useAtom as nI}from"jotai";import{jsx as aI,jsxs as iI}from"react/jsx-runtime";var za=oI(null),o6=()=>{let[e,t]=nI(za,He),r=Ot();return e&&e==="clearCanvas"?aI(Xp,{onConfirm:()=>{r.executeAction(_n),t(null)},onCancel:()=>t(null),title:b("clearCanvasDialog.title"),children:iI("p",{className:"clear-canvas__content",children:[" ",b("alerts.clearReset")]})}):null};var R1={};Qu(R1,{toggleTheme:()=>sI});f();var sI={...Pa,category:"App",label:"Toggle theme",perform:({actionManager:e})=>{e.executeAction(Pa,"commandPalette")}};import{jsx as hr,jsxs as cn}from"react/jsx-runtime";var pI=dI(null),Et={app:"App",export:"Export",tools:"Tools",editor:"Editor",elements:"Elements",links:"Links"},uI=e=>{switch(e){case Et.app:return 1;case Et.export:return 2;case Et.editor:return 3;case Et.tools:return 4;case Et.elements:return 5;case Et.links:return 6;default:return 10}},cu=({shortcut:e,className:t,children:r})=>{let o=e.replace("++","+$").split("+");return cn("div",{className:i6("shortcut",t),children:[o.map((n,i)=>hr("div",{className:"shortcut-wrapper",children:hr("div",{className:"shortcut-key",children:n==="$"?"+":n})},n)),hr("div",{className:"shortcut-desc",children:r})]})},a6=e=>!e.altKey&&e[T.CTRL_OR_CMD]&&(e.shiftKey&&e.key.toLowerCase()===T.P||e.key===T.SLASH),Uae=Object.assign(e=>{let t=Re(),r=Be();return lu(()=>{let o=n=>{a6(n)&&(n.preventDefault(),n.stopPropagation(),r(i=>{let a=i.openDialog?.name==="commandPalette"?null:{name:"commandPalette"};return a&&xe("command_palette","open","shortcut"),{openDialog:a}}))};return window.addEventListener("keydown",o,{capture:!0}),()=>window.removeEventListener("keydown",o,{capture:!0})},[r]),t.openDialog?.name!=="commandPalette"?null:hr(hI,{...e})},{defaultItems:R1});function hI({customCommandPaletteItems:e}){let t=Mr(),r=Re(),o=Be(),n=Mi(),i=Ot(),[a,s]=mI(pI),[l,c]=su(null),d=lI(null),m=Ys({uiAppState:r,customCommandPaletteItems:e,appProps:n});lu(()=>{let{uiAppState:S,customCommandPaletteItems:k,appProps:R}=m,_=F=>{let Q="";return F.label&&(typeof F.label=="function"?Q=b(F.label(t.scene.getNonDeletedElements(),S,t)):Q=b(F.label)),Q},M=F=>typeof F.icon=="function"?F.icon(S,t.scene.getNonDeletedElements()):F.icon,O=[],I=(F,Q,j)=>{let oe={label:_(F),icon:M(F),category:Q,shortcut:Mt(F.name),keywords:F.keywords,predicate:F.predicate,viewMode:F.viewMode,perform:()=>{i.executeAction(F,"commandPalette")}};return j?j(oe,F):oe};if(S&&t.scene&&i){let F=[i.actions.group,i.actions.ungroup,i.actions.cut,i.actions.copy,i.actions.deleteSelectedElements,i.actions.copyStyles,i.actions.pasteStyles,i.actions.sendBackward,i.actions.sendToBack,i.actions.bringForward,i.actions.bringToFront,i.actions.alignTop,i.actions.alignBottom,i.actions.alignLeft,i.actions.alignRight,i.actions.alignVerticallyCentered,i.actions.alignHorizontallyCentered,i.actions.duplicateSelection,i.actions.flipHorizontal,i.actions.flipVertical,i.actions.zoomToFitSelection,i.actions.zoomToFitSelectionInViewport,i.actions.increaseFontSize,i.actions.decreaseFontSize,i.actions.toggleLinearEditor,Rc].map(W=>I(W,Et.elements,(he,Ae)=>({...he,predicate:Ae.predicate?Ae.predicate:(it,Me,Jr,Xn)=>ue(it,Me).length>0}))),Q=[i.actions.toggleHandTool,i.actions.setFrameAsActiveTool].map(W=>I(W,Et.tools)),j=[i.actions.undo,i.actions.redo,i.actions.zoomIn,i.actions.zoomOut,i.actions.resetZoom,i.actions.zoomToFit,i.actions.zenMode,i.actions.viewMode,i.actions.gridMode,i.actions.objectsSnapMode,i.actions.toggleShortcuts,i.actions.selectAll,i.actions.toggleElementLock,i.actions.unlockAllElements,i.actions.stats].map(W=>I(W,Et.editor)),oe=[i.actions.saveToActiveFile,i.actions.saveFileToDisk,i.actions.copyAsPng,i.actions.copyAsSvg].map(W=>I(W,Et.export));O=[...F,...j,{label:_(_n),icon:M(_n),shortcut:Mt(_n.name),category:Et.editor,keywords:["delete","destroy"],viewMode:!1,perform:()=>{Jt.set(za,"clearCanvas")}},{label:b("buttons.exportImage"),category:Et.export,icon:dp,shortcut:Mt("imageExport"),keywords:["export","image","png","jpeg","svg","clipboard","picture"],perform:()=>{o({openDialog:{name:"imageExport"}})}},...oe];let Ce=[{label:b("toolBar.library"),category:Et.app,icon:ap,viewMode:!1,perform:()=>{S.openSidebar?o({openSidebar:null}):o({openSidebar:{name:Or.name,tab:Or.defaultTab}})}},{label:b("labels.changeStroke"),keywords:["color","outline"],category:Et.elements,icon:cp,viewMode:!1,predicate:(W,he)=>{let Ae=ue(W,he);return Ae.length>0&&L1(he,Ae)},perform:()=>{o(W=>({openMenu:W.openMenu==="shape"?null:"shape",openPopup:"elementStroke"}))}},{label:b("labels.changeBackground"),keywords:["color","fill"],icon:cp,category:Et.elements,viewMode:!1,predicate:(W,he)=>{let Ae=ue(W,he);return Ae.length>0&&P1(he,Ae)},perform:()=>{o(W=>({openMenu:W.openMenu==="shape"?null:"shape",openPopup:"elementBackground"}))}},{label:b("labels.canvasBackground"),keywords:["color"],icon:cp,category:Et.editor,viewMode:!1,perform:()=>{o(W=>({openMenu:W.openMenu==="canvas"?null:"canvas",openPopup:"canvasBackground"}))}},...Fc.reduce((W,he)=>{let{value:Ae,icon:it,key:Me,numericKey:Jr}=he;if(R.UIOptions.tools?.[Ae]===!1)return W;let Ho=Me&&ei(typeof Me=="string"?Me:Me[0])||Jr,gn={label:b(`toolBar.${Ae}`),category:Et.tools,shortcut:Ho,icon:it,keywords:["toolbar"],viewMode:!1,perform:({event:Zn})=>{Ae==="image"?t.setActiveTool({type:Ae,insertOnCanvasDirectly:Zn.type==="keydown"}):t.setActiveTool({type:Ae})}};return W.push(gn),W},[]),...Q,{label:b("toolBar.lock"),category:Et.tools,icon:S.activeTool.locked?Ns:Ia,shortcut:T.Q.toLocaleUpperCase(),viewMode:!1,perform:()=>{t.toggleLock()}},{label:`${b("labels.textToDiagram")}...`,category:Et.tools,icon:Iy,viewMode:!1,predicate:R.aiEnabled,perform:()=>{o(W=>({...W,openDialog:{name:"ttd",tab:"text-to-diagram"}}))}},{label:`${b("toolBar.mermaidToExcalidraw")}...`,category:Et.tools,icon:gp,viewMode:!1,predicate:R.aiEnabled,perform:()=>{o(W=>({...W,openDialog:{name:"ttd",tab:"mermaid"}}))}}],Y=[...O,...Ce,...k||[]].map(W=>({...W,icon:W.icon||xp,order:W.order??uI(W.category),haystack:`${S1(W.label)} ${W.keywords?.join(" ")||""}`}));c(Y),s(Y.find(W=>W.label===a?.label)??null)}},[m,t,i,c,a?.label,s,o]);let[p,u]=su(""),[h,x]=su(null),[E,w]=su({}),y=S=>{o({openDialog:null},S),u("")},v=(S,k)=>{r.openDialog?.name==="commandPalette"&&(k.stopPropagation(),k.preventDefault(),document.body.classList.add("excalidraw-animations-disabled"),y(()=>{S.perform({actionManager:i,event:k}),s(S),requestAnimationFrame(()=>{document.body.classList.remove("excalidraw-animations-disabled")})}))},A=D1(S=>S.viewMode===!1&&r.viewModeEnabled?!1:typeof S.predicate=="function"?S.predicate(t.scene.getNonDeletedElements(),r,n,t):S.predicate===void 0||S.predicate),L=D1(S=>{let k=eo(S.target)||a6(S)||S.key===T.ESCAPE;if(k&&S.key!==T.ARROW_UP&&S.key!==T.ARROW_DOWN&&S.key!==T.ENTER)return;let R=Object.values(E).flat(),_=a&&!p&&A(a);if(S.key===T.ARROW_UP){S.preventDefault();let M=R.findIndex(F=>F.label===h?.label);if(_){if(M===0){x(a);return}if(h===a){let F=R[R.length-1];F&&x(F);return}}let O;M===-1?O=R.length-1:O=M===0?R.length-1:(M-1)%R.length;let I=R[O];I&&x(I);return}if(S.key===T.ARROW_DOWN){S.preventDefault();let M=R.findIndex(F=>F.label===h?.label);if(_){if(!h||M===R.length-1){x(a);return}if(h===a){let F=R[0];F&&x(F);return}}let O=(M+1)%R.length,I=R[O];I&&x(I);return}if(S.key===T.ENTER&&h&&setTimeout(()=>{v(h,S)}),!k){if(S.stopPropagation(),/^[a-zA-Z0-9]$/.test(S.key)){d?.current?.focus();return}S.preventDefault()}});return lu(()=>(window.addEventListener("keydown",L,{capture:!0}),()=>window.removeEventListener("keydown",L,{capture:!0})),[L]),lu(()=>{if(!l)return;let S=M=>{let O={};for(let I of M)O[I.category]?O[I.category].push(I):O[I.category]=[I];return O},k=l.filter(A).sort((M,O)=>M.order-O.order),R=!p&&a&&A(a);if(!p){w(S(R?k.filter(M=>M.label!==a?.label):k)),x(R?a:k[0]||null);return}let _=S1(p.replace(/[<>-_| ]/g,""));k=cI.filter(_,k,{extract:M=>M.haystack}).sort((M,O)=>O.score-M.score).map(M=>M.original),w(S(k)),x(k[0]??null)},[p,l,A,a]),cn(ut,{onCloseRequest:()=>y(),closeOnClickOutside:!0,title:!1,size:720,autofocus:!0,className:"command-palette-dialog",children:[hr(nu,{value:p,placeholder:b("commandPalette.search.placeholder"),onChange:S=>{u(S)},selectOnRender:!0,ref:d}),!t.device.viewport.isMobile&&cn("div",{className:"shortcuts-wrapper",children:[hr(cu,{shortcut:"\u2191\u2193",children:b("commandPalette.shortcuts.select")}),hr(cu,{shortcut:"\u21B5",children:b("commandPalette.shortcuts.confirm")}),hr(cu,{shortcut:N("Esc"),children:b("commandPalette.shortcuts.close")})]}),cn("div",{className:"commands",children:[a&&!p&&cn("div",{className:"command-category",children:[cn("div",{className:"command-category-title",children:[b("commandPalette.recents"),hr("div",{className:"icon",style:{marginLeft:"6px"},children:My})]}),hr(n6,{command:a,isSelected:a.label===h?.label,onClick:S=>v(a,S),disabled:!A(a),onMouseMove:()=>x(a),showShortcut:!t.device.viewport.isMobile,appState:r})]}),Object.keys(E).length>0?Object.keys(E).map((S,k)=>cn("div",{className:"command-category",children:[hr("div",{className:"command-category-title",children:S}),E[S].map(R=>hr(n6,{command:R,isSelected:R.label===h?.label,onClick:_=>v(R,_),onMouseMove:()=>x(R),showShortcut:!t.device.viewport.isMobile,appState:r},R.label))]},S)):l?cn("div",{className:"no-match",children:[hr("div",{className:"icon",children:bp})," ",b("commandPalette.search.noMatch")]}):null]})]})}var n6=({command:e,isSelected:t,disabled:r,onMouseMove:o,onClick:n,showShortcut:i,appState:a})=>{let s=()=>{};return cn("div",{className:i6("command-item",{"item-selected":t,"item-disabled":r}),ref:l=>{t&&!r&&l?.scrollIntoView?.({block:"nearest"})},onClick:r?s:n,onMouseMove:r?s:o,title:r?b("commandPalette.itemNotAvailable"):"",children:[cn("div",{className:"name",children:[e.icon&&hr(Li,{icon:typeof e.icon=="function"?e.icon(a):e.icon}),e.label]}),i&&e.shortcut&&hr(cu,{shortcut:e.shortcut})]})};Zt();se();Oe();Ze();var N1=H({name:"toggleLinearEditor",category:Et.elements,label:(e,t,r)=>{let o=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0})[0];return t.editingLinearElement?.elementId===o?.id?"labels.lineEditor.exit":"labels.lineEditor.edit"},trackEvent:{category:"element"},predicate:(e,t,r,o)=>{let n=o.scene.getSelectedElements(t);return!!(n.length===1&&ne(n[0]))},perform(e,t,r,o){let n=o.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0})[0],i=t.editingLinearElement?.elementId===n.id?null:new Z(n);return{appState:{...t,editingLinearElement:i},storeAction:D.CAPTURE}}});f();f();Jl();var Ha=class{constructor(t=!0,r=!0){this.isUndoStackEmpty=t;this.isRedoStackEmpty=r}},zc=class e{onHistoryChangedEmitter=new or;undoStack=[];redoStack=[];get isUndoStackEmpty(){return this.undoStack.length===0}get isRedoStackEmpty(){return this.redoStack.length===0}clear(){this.undoStack.length=0,this.redoStack.length=0}record(t,r){let o=O1.create(r,t);o.isEmpty()||(this.undoStack.push(o.inverse()),o.elementsChange.isEmpty()||(this.redoStack.length=0),this.onHistoryChangedEmitter.trigger(new Ha(this.isUndoStackEmpty,this.isRedoStackEmpty)))}undo(t,r,o){return this.perform(t,r,o,()=>e.pop(this.undoStack),n=>e.push(this.redoStack,n,t))}redo(t,r,o){return this.perform(t,r,o,()=>e.pop(this.redoStack),n=>e.push(this.undoStack,n,t))}perform(t,r,o,n,i){try{let a=n();if(a===null)return;let s=t,l=r,c=!1;for(;a;){try{[s,l,c]=a.applyTo(s,l,o)}finally{i(a)}if(c)break;a=n()}return[s,l]}finally{this.onHistoryChangedEmitter.trigger(new Ha(this.isUndoStackEmpty,this.isRedoStackEmpty))}}static pop(t){if(!t.length)return null;let r=t.pop();return r!==void 0?r:null}static push(t,r,o){let n=r.inverse().applyLatestChanges(o);return t.push(n)}},O1=class e{constructor(t,r){this.appStateChange=t;this.elementsChange=r}static create(t,r){return new e(t,r)}inverse(){return new e(this.appStateChange.inverse(),this.elementsChange.inverse())}applyTo(t,r,o){let[n,i]=this.elementsChange.applyTo(t,o.elements),[a,s]=this.appStateChange.applyTo(r,n);return[n,a,i||s]}applyLatestChanges(t){let r=this.elementsChange.applyLatestChanges(t);return e.create(this.appStateChange,r)}isEmpty(){return this.appStateChange.isEmpty()&&this.elementsChange.isEmpty()}};ge();G();V();Oe();f();import{useEffect as gI,useState as fI}from"react";var B1=(e,t)=>{let[r,o]=fI(t);return gI(()=>{let n=e.on(i=>{o(i)});return()=>{n()}},[e]),r};import{jsx as d6}from"react/jsx-runtime";var s6=(e,t)=>{if(!e.multiElement&&!e.resizingElement&&!e.editingElement&&!e.draggingElement){let r=t();if(!r)return{storeAction:D.NONE};let[o,n]=r,i=Array.from(o.values());return{appState:n,elements:i,storeAction:D.UPDATE}}return{storeAction:D.NONE}},l6=(e,t)=>({name:"undo",label:"buttons.undo",icon:tf,trackEvent:{category:"history"},viewMode:!1,perform:(r,o)=>s6(o,()=>e.undo(X(r),o,t.snapshot)),keyTest:r=>r[T.CTRL_OR_CMD]&&r.key.toLowerCase()===T.Z&&!r.shiftKey,PanelComponent:({updateData:r,data:o})=>{let{isUndoStackEmpty:n}=B1(e.onHistoryChangedEmitter,new Ha);return d6(ce,{type:"button",icon:tf,"aria-label":b("buttons.undo"),onClick:r,size:o?.size||"medium",disabled:n})}}),c6=(e,t)=>({name:"redo",label:"buttons.redo",icon:rf,trackEvent:{category:"history"},viewMode:!1,perform:(r,o)=>s6(o,()=>e.redo(X(r),o,t.snapshot)),keyTest:r=>r[T.CTRL_OR_CMD]&&r.shiftKey&&r.key.toLowerCase()===T.Z||dd&&r.ctrlKey&&!r.shiftKey&&r.key===T.Y,PanelComponent:({updateData:r,data:o})=>{let{isRedoStackEmpty:n}=B1(e.onHistoryChangedEmitter,new Ha);return d6(ce,{type:"button",icon:rf,"aria-label":b("buttons.redo"),onClick:r,size:o?.size||"medium",disabled:n})}});f();G();import{jsx as bI}from"react/jsx-runtime";var F1=(e,t,r,o,n,i)=>{if(e.trackEvent)try{typeof e.trackEvent=="object"&&(!e.trackEvent.predicate||e.trackEvent.predicate(r,o,i))&&xe(e.trackEvent.category,e.trackEvent.action||e.name,`${t} (${n.device.editor.isMobile?"mobile":"desktop"})`)}catch(a){console.error("error while logging action:",a)}},du=class{actions={};updater;getAppState;getElementsIncludingDeleted;app;constructor(t,r,o,n){this.updater=i=>{if(Wo(i))i.then(a=>t(a));else return t(i)},this.getAppState=r,this.getElementsIncludingDeleted=o,this.app=n}registerAction(t){this.actions[t.name]=t}registerAll(t){t.forEach(r=>this.registerAction(r))}handleKeyDown(t){let r=this.app.props.UIOptions.canvasActions,o=Object.values(this.actions).sort((l,c)=>(c.keyPriority||0)-(l.keyPriority||0)).filter(l=>(l.name in r?r[l.name]:!0)&&l.keyTest&&l.keyTest(t,this.getAppState(),this.getElementsIncludingDeleted(),this.app));if(o.length!==1)return o.length>1&&console.warn("Canceling as multiple actions match this shortcut",o),!1;let n=o[0];if(this.getAppState().viewModeEnabled&&n.viewMode!==!0)return!1;let i=this.getElementsIncludingDeleted(),a=this.getAppState(),s=null;return F1(n,"keyboard",a,i,this.app,null),t.preventDefault(),t.stopPropagation(),this.updater(o[0].perform(i,a,s,this.app)),!0}executeAction(t,r="api",o=null){let n=this.getElementsIncludingDeleted(),i=this.getAppState();F1(t,r,i,n,this.app,o),this.updater(t.perform(n,i,o,this.app))}renderAction=(t,r)=>{let o=this.app.props.UIOptions.canvasActions;if(this.actions[t]&&"PanelComponent"in this.actions[t]&&(!(t in o)||o[t])){let n=this.actions[t],i=n.PanelComponent;i.displayName="PanelComponent";let a=this.getElementsIncludingDeleted(),s=this.getAppState(),l=c=>{F1(n,"ui",s,a,this.app,c),this.updater(n.perform(this.getElementsIncludingDeleted(),this.getAppState(),c,this.app))};return bI(i,{elements:this.getElementsIncludingDeleted(),appState:this.getAppState(),updateData:l,appProps:this.app.props,app:this.app,data:r})}return null};isActionEnabled=t=>{let r=this.getElementsIncludingDeleted(),o=this.getAppState();return!t.predicate||t.predicate(r,o,this.app.props,this.app)}};Ze();Ar();wi();V();ys();be();io();Zt();Ge();kn();se();f();var z1=e=>{let t=Array.from(e.values());return{x:m6(t,r=>r.x)/t.length,y:m6(t,r=>r.y)/t.length}},H1=([e,t])=>Math.hypot(e.x-t.x,e.y-t.y),m6=(e,t)=>e.reduce((r,o)=>r+t(o),0);mr();ge();va();zt();Xe();ni();ip();xg();_d();G();ec();f();import xI from"clsx";import EI from"react";import{jsx as il,jsxs as yI}from"react/jsx-runtime";var gr="separator",p6=EI.memo(({actionManager:e,items:t,top:r,left:o,onClose:n})=>{let i=Js(),a=Ai(),s=t.reduce((l,c)=>(c&&(c===gr||!c.predicate||c.predicate(a,i,e.app.props,e.app))&&l.push(c),l),[]);return il(Ap,{onCloseRequest:()=>{n()},top:r,left:o,fitInViewport:!0,offsetLeft:i.offsetLeft,offsetTop:i.offsetTop,viewportWidth:i.width,viewportHeight:i.height,children:il("ul",{className:"context-menu",onContextMenu:l=>l.preventDefault(),children:s.map((l,c)=>{if(l===gr)return!s[c-1]||s[c-1]===gr?null:il("hr",{className:"context-menu-item-separator"},c);let d=l.name,m="";return l.label&&(typeof l.label=="function"?m=b(l.label(a,i,e.app)):m=b(l.label)),il("li",{"data-testid":d,onClick:()=>{n(()=>{e.executeAction(l,"contextMenu")})},children:yI("button",{className:xI("context-menu-item",{dangerous:d==="deleteSelectedElements",checkmark:l.checked?.(i)}),children:[il("div",{className:"context-menu-item__label",children:m}),il("kbd",{className:"context-menu-item__shortcut",children:d?Mt(d):""})]})},c)})})})});f();V();be();import Zc from"clsx";import gk from"react";Xe();G();f();import wI,{useState as vI}from"react";import{Fragment as CI,jsx as _1}from"react/jsx-runtime";var u6=({children:e,onClose:t})=>{let[r,o]=vI(!!e),{container:n}=Gt(),i=wI.useCallback(()=>{o(!1),t&&t(),n?.focus()},[t,n]);return _1(CI,{children:r&&_1(ut,{size:"small",onCloseRequest:i,title:b("errorDialog.title"),children:_1("div",{style:{whiteSpace:"pre-wrap"},children:e})})})};f();import{useEffect as PI,useRef as DI,useState as Di}from"react";wi();V();Sr();Dn();Xe();ya();f();import TI from"clsx";import{jsx as h6,jsxs as AI}from"react/jsx-runtime";var mu=function({onChange:e,value:t,choices:r,name:o}){return h6("div",{className:"RadioGroup",children:r.map(n=>AI("div",{className:TI("RadioGroup__choice",{active:n.value===t}),title:n.ariaLabel,children:[h6("input",{name:o,type:"radio",checked:n.value===t,onChange:()=>e(n.value),"aria-label":n.ariaLabel}),n.label]},String(n.value)))})};f();import SI from"clsx";import{jsx as g6}from"react/jsx-runtime";var Hc=({title:e,name:t,checked:r,onChange:o,disabled:n=!1})=>g6("div",{className:SI("Switch",{toggled:r,disabled:n}),children:g6("input",{name:t,id:t,title:e,type:"checkbox",checked:r,disabled:n,onChange:()=>o(!r),onKeyDown:i=>{i.key===" "&&o(!r)}})});f();import{forwardRef as II,useState as MI}from"react";import kI from"clsx";oi();G();import{jsx as G1,jsxs as LI}from"react/jsx-runtime";var dn=II(({children:e,icon:t,onClick:r,label:o,variant:n="filled",color:i="primary",size:a="medium",fullWidth:s,className:l},c)=>{let[d,m]=MI(!1),p=async u=>{let h=r?.(u);if(Wo(h))try{m(!0),await h}catch(x){if(x instanceof Xo)console.warn(x);else throw x}finally{m(!1)}};return G1("button",{className:kI("ExcButton",`ExcButton--color-${i}`,`ExcButton--variant-${n}`,`ExcButton--size-${a}`,{"ExcButton--fullWidth":s},l),onClick:p,type:"button","aria-label":o,ref:c,disabled:d,children:LI("div",{className:"ExcButton__contents",children:[d&&G1(Vt,{}),t&&G1("div",{className:"ExcButton__icon","aria-hidden":!0,children:t}),n!=="icon"&&(e??o)]})})});G();import{jsx as nt,jsxs as Ri}from"react/jsx-runtime";var RI="filter"in document.createElement("canvas").getContext("2d"),NI=()=>Ri("div",{children:[nt("h3",{children:b("canvasError.cannotShowPreview")}),nt("p",{children:nt("span",{children:b("canvasError.canvasTooBig")})}),Ri("em",{children:["(",b("canvasError.canvasTooBigTip"),")"]})]}),OI=({appStateSnapshot:e,elementsSnapshot:t,files:r,actionManager:o,onExportImage:n,name:i})=>{let a=Ye(t,e),[s,l]=Di(i),[c,d]=Di(a),[m,p]=Di(e.exportBackground),[u,h]=Di(e.exportWithDarkMode),[x,E]=Di(e.exportEmbedScene),[w,y]=Di(e.exportScale),v=DI(null),[A,L]=Di(null),{exportedElements:S,exportingFrame:k}=Da(t,e,c);return PI(()=>{let R=v.current;if(!R)return;let _=R.offsetWidth,M=R.offsetHeight;_&&vi({elements:S,appState:{...e,name:s,exportBackground:m,exportWithDarkMode:u,exportScale:w,exportEmbedScene:x},files:r,exportPadding:Co,maxWidthOrHeight:Math.max(_,M),exportingFrame:k}).then(O=>(L(null),Nn(O).then(()=>{R.replaceChildren(O)}).catch(I=>{throw I.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(b("canvasError.canvasTooBig")):I}))).catch(O=>{console.error(O),L(O)})},[e,r,S,k,s,m,u,w,x]),Ri("div",{className:"ImageExportModal",children:[nt("h3",{children:b("imageExportDialog.header")}),Ri("div",{className:"ImageExportModal__preview",children:[nt("div",{className:"ImageExportModal__preview__canvas",ref:v,children:A&&nt(NI,{})}),nt("div",{className:"ImageExportModal__preview__filename",children:!fi&&nt("input",{type:"text",className:"TextInput",value:s,style:{width:"30ch"},onChange:R=>{l(R.target.value),o.executeAction(Uf,"ui",R.target.value)}})})]}),Ri("div",{className:"ImageExportModal__settings",children:[nt("h3",{children:b("imageExportDialog.header")}),a&&nt(_c,{label:b("imageExportDialog.label.onlySelected"),name:"exportOnlySelected",children:nt(Hc,{name:"exportOnlySelected",checked:c,onChange:R=>{d(R)}})}),nt(_c,{label:b("imageExportDialog.label.withBackground"),name:"exportBackgroundSwitch",children:nt(Hc,{name:"exportBackgroundSwitch",checked:m,onChange:R=>{p(R),o.executeAction(Wf,"ui",R)}})}),RI&&nt(_c,{label:b("imageExportDialog.label.darkMode"),name:"exportDarkModeSwitch",children:nt(Hc,{name:"exportDarkModeSwitch",checked:u,onChange:R=>{h(R),o.executeAction(F3,"ui",R)}})}),nt(_c,{label:b("imageExportDialog.label.embedScene"),tooltip:b("imageExportDialog.tooltip.embedScene"),name:"exportEmbedSwitch",children:nt(Hc,{name:"exportEmbedSwitch",checked:x,onChange:R=>{E(R),o.executeAction(kp,"ui",R)}})}),nt(_c,{label:b("imageExportDialog.label.scale"),name:"exportScale",children:nt(mu,{name:"exportScale",value:w,onChange:R=>{y(R),o.executeAction(B3,"ui",R)},choices:Ja.map(R=>({value:R,label:`${R}\xD7`}))})}),Ri("div",{className:"ImageExportModal__settings__buttons",children:[nt(dn,{className:"ImageExportModal__settings__buttons__button",label:b("imageExportDialog.title.exportToPng"),onClick:()=>n(gd.png,S,{exportingFrame:k}),icon:Ef,children:b("imageExportDialog.button.exportToPng")}),nt(dn,{className:"ImageExportModal__settings__buttons__button",label:b("imageExportDialog.title.exportToSvg"),onClick:()=>n(gd.svg,S,{exportingFrame:k}),icon:Ef,children:b("imageExportDialog.button.exportToSvg")}),(Ms||bn)&&nt(dn,{className:"ImageExportModal__settings__buttons__button",label:b("imageExportDialog.title.copyPngToClipboard"),onClick:()=>n(gd.clipboard,S,{exportingFrame:k}),icon:up,children:b("imageExportDialog.button.copyPngToClipboard")})]})]})]})},_c=({label:e,children:t,tooltip:r,name:o})=>Ri("div",{className:"ImageExportModal__settings__setting",title:e,children:[Ri("label",{htmlFor:o,className:"ImageExportModal__settings__setting__label",children:[e,r&&nt(Zr,{label:r,long:!0,children:yy})]}),nt("div",{className:"ImageExportModal__settings__setting__content",children:t})]}),f6=({elements:e,appState:t,files:r,actionManager:o,onExportImage:n,onCloseRequest:i,name:a})=>{let[{appStateSnapshot:s,elementsSnapshot:l}]=Di(()=>({appStateSnapshot:Yo(t),elementsSnapshot:Yo(e)}));return nt(ut,{onCloseRequest:i,size:"wide",title:!1,children:nt(OI,{elementsSnapshot:l,appStateSnapshot:s,files:r,actionManager:o,onExportImage:n,name:a})})};f();import BI from"clsx";import{jsx as FI}from"react/jsx-runtime";var pu=({children:e,side:t,className:r})=>FI("div",{className:BI("FixedSideContainer",`FixedSideContainer_side_${t}`,r),children:e});f();import zI from"clsx";import{jsx as x6,jsxs as _I}from"react/jsx-runtime";var HI="medium",b6={CHECKED:Ns,UNCHECKED:Ia},uu=e=>_I("label",{className:zI("ToolIcon ToolIcon__lock",`ToolIcon_size_${HI}`,{"is-mobile":e.isMobile}),title:`${e.title} \u2014 Q`,children:[x6("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title,"data-testid":"toolbar-lock"}),x6("div",{className:"ToolIcon__icon",children:e.checked?b6.CHECKED:b6.UNCHECKED})]});f();be();f();se();G();Ar();import{jsx as E6}from"react/jsx-runtime";var GI=({appState:e,isMobile:t,device:r,app:o})=>{let{activeTool:n,isResizing:i,isRotating:a,lastPointerDownWith:s}=e,l=e.multiElement!==null;if(e.openSidebar&&!r.editor.canFitSidebar)return null;if(Tr(e))return b("hints.eraserRevert");if(n.type==="arrow"||n.type==="line")return l?b("hints.linearElementMulti"):b("hints.linearElement");if(n.type==="freedraw")return b("hints.freeDraw");if(n.type==="text")return b("hints.text");if(n.type==="embeddable")return b("hints.embeddable");if(e.activeTool.type==="image"&&e.pendingImageElementId)return b("hints.placeImage");let c=o.scene.getSelectedElements(e);if(i&&s==="mouse"&&c.length===1){let d=c[0];return ne(d)&&d.points.length===2?b("hints.lockAngle"):to(d)?b("hints.resizeImage"):b("hints.resize")}if(a&&s==="mouse")return b("hints.rotate");if(c.length===1&&U(c[0]))return b("hints.text_selected");if(e.editingElement&&U(e.editingElement))return b("hints.text_editing");if(n.type==="selection"){if(e.draggingElement?.type==="selection"&&!c.length&&!e.editingElement&&!e.editingLinearElement)return b("hints.deepBoxSelect");if(e.gridSize&&e.draggingElement)return b("hints.disableSnapping");if(!c.length&&!t)return b("hints.canvasPanning");if(c.length===1){if(ne(c[0]))return e.editingLinearElement?e.editingLinearElement.selectedPointsIndices?b("hints.lineEditor_pointSelected"):b("hints.lineEditor_nothingSelected"):b("hints.lineEditor_info");if(!e.draggingElement&&Vo(c[0]))return b("hints.bindTextToElement")}}return null},y6=({appState:e,isMobile:t,device:r,app:o})=>{let n=GI({appState:e,isMobile:t,device:r,app:o});return n?(n=N(n),E6("div",{className:"HintViewer",children:E6("span",{children:n})})):null};Xe();f();import{Fragment as UI,jsx as w6,jsxs as WI}from"react/jsx-runtime";var Ni=({heading:e,children:t,...r})=>{let{id:o}=Gt(),n=w6("h2",{className:"visually-hidden",id:`${o}-${e}-title`,children:b(`headings.${e}`)});return w6("section",{...r,"aria-labelledby":`${o}-${e}-title`,children:typeof t=="function"?t(n):WI(UI,{children:[n,t]})})};f();be();G();var Fo=4,mn=6,v6="rgba(0,0,0,0.3)",C6=(e,t,r,o)=>{if(!e.length)return{horizontal:null,vertical:null};let[n,i,a,s]=Te(e),l=t/o.zoom.value,c=r/o.zoom.value,d=t-l,m=r-c,p={top:parseInt(vl("sat"))||0,bottom:parseInt(vl("sab"))||0,left:parseInt(vl("sal"))||0,right:parseInt(vl("sar"))||0},u=fn().rtl,h=-o.scrollX+d/2+p.left,x=-o.scrollY+m/2+p.top,E=h+l-p.right,w=x+c-p.bottom,y=Math.min(n,h),v=Math.min(i,x),A=Math.max(a,E),L=Math.max(s,w);return{horizontal:h===y&&E===A?null:{x:Math.max(p.left,Fo)+(h-y)/(A-y)*t,y:r-mn-Math.max(Fo,p.bottom),width:(E-h)/(A-y)*t-Math.max(Fo*2,p.left+p.right),height:mn},vertical:x===v&&w===L?null:{x:u?Math.max(p.left,Fo):t-mn-Math.max(p.right,Fo),y:(x-v)/(L-v)*r+Math.max(p.top,Fo),width:mn,height:(w-x)/(L-v)*r-Math.max(Fo*2,p.top+p.bottom)}}},U1=(e,t,r)=>{let[o,n]=[e.horizontal,e.vertical].map(a=>a!=null&&a.x<=t&&t<=a.x+a.width&&a.y<=r&&r<=a.y+a.height);return{isOverEither:o||n,isOverHorizontal:o,isOverVertical:n}};f();import YI from"clsx";import{jsx as T6,jsxs as KI}from"react/jsx-runtime";var VI="medium",hu=e=>e.penDetected?KI("label",{className:YI("ToolIcon ToolIcon__penMode",`ToolIcon_size_${VI}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[T6("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title}),T6("div",{className:"ToolIcon__icon",children:y4})]}):null;f();st();Xe();import{Fragment as A6,jsx as et,jsxs as jr}from"react/jsx-runtime";var gu=e=>{let t=Te(e.elements),r=Sa(e.elements,e.appState),o=Te(r);return et("div",{className:"Stats",children:jr(Qt,{padding:2,children:[et("div",{className:"close",onClick:e.onClose,children:co}),et("h3",{children:b("stats.title")}),et("table",{children:jr("tbody",{children:[et("tr",{children:et("th",{colSpan:2,children:b("stats.scene")})}),jr("tr",{children:[et("td",{children:b("stats.elements")}),et("td",{children:e.elements.length})]}),jr("tr",{children:[et("td",{children:b("stats.width")}),et("td",{children:Math.round(t[2])-Math.round(t[0])})]}),jr("tr",{children:[et("td",{children:b("stats.height")}),et("td",{children:Math.round(t[3])-Math.round(t[1])})]}),r.length===1&&et("tr",{children:et("th",{colSpan:2,children:b("stats.element")})}),r.length>1&&jr(A6,{children:[et("tr",{children:et("th",{colSpan:2,children:b("stats.selected")})}),jr("tr",{children:[et("td",{children:b("stats.elements")}),et("td",{children:r.length})]})]}),r.length>0&&jr(A6,{children:[jr("tr",{children:[et("td",{children:"x"}),et("td",{children:Math.round(o[0])})]}),jr("tr",{children:[et("td",{children:"y"}),et("td",{children:Math.round(o[1])})]}),jr("tr",{children:[et("td",{children:b("stats.width")}),et("td",{children:Math.round(o[2]-o[0])})]}),jr("tr",{children:[et("td",{children:b("stats.height")}),et("td",{children:Math.round(o[3]-o[1])})]})]}),r.length===1&&jr("tr",{children:[et("td",{children:b("stats.angle")}),et("td",{children:`${Math.round(r[0].angle*180/Math.PI)}\xB0`})]}),e.renderCustomStats?.(e.elements,e.appState)]})})]})})};f();import XI from"clsx";ge();import{jsx as ZI}from"react/jsx-runtime";var fu=e=>ZI(ce,{className:XI("Shape",{fillable:!1}),type:"radio",icon:pp,name:"editor-current-shape",checked:e.checked,title:`${e.title} \u2014 H`,keyBindingLabel:e.isMobile?void 0:T.H.toLocaleUpperCase(),"aria-label":`${e.title} \u2014 H`,"aria-keyshortcuts":T.H,"data-testid":"toolbar-hand",onChange:()=>e.onChange?.()});Ar();import{Fragment as jI,jsx as Wt,jsxs as Oi}from"react/jsx-runtime";var S6=({appState:e,elements:t,actionManager:r,setAppState:o,onLockToggle:n,onHandToolToggle:i,onPenModeToggle:a,renderTopRightUI:s,renderCustomStats:l,renderSidebars:c,device:d,renderWelcomeScreen:m,UIOptions:p,app:u})=>{let{WelcomeScreenCenterTunnel:h,MainMenuTunnel:x,DefaultSidebarTriggerTunnel:E}=ot(),w=()=>Oi(pu,{side:"top",className:"App-top-bar",children:[m&&Wt(h.Out,{}),Wt(Ni,{heading:"shapes",children:v=>Wt(Ut.Col,{gap:4,align:"center",children:Oi(Ut.Row,{gap:1,className:"App-toolbar-container",children:[Oi(Qt,{padding:1,className:"App-toolbar App-toolbar--mobile",children:[v,Wt(Ut.Row,{gap:1,children:Wt(au,{appState:e,activeTool:e.activeTool,UIOptions:p,app:u})})]}),s&&s(!0,e),Oi("div",{className:"mobile-misc-tools-container",children:[!e.viewModeEnabled&&Wt(E.Out,{}),Wt(hu,{checked:e.penMode,onChange:()=>a(null),title:b("toolBar.penMode"),isMobile:!0,penDetected:e.penDetected}),Wt(uu,{checked:e.activeTool.locked,onChange:n,title:b("toolBar.lock"),isMobile:!0}),Wt(fu,{checked:Do(e),onChange:()=>i(),title:b("toolBar.hand"),isMobile:!0})]})]})})}),Wt(y6,{appState:e,isMobile:!0,device:d,app:u})]}),y=()=>e.viewModeEnabled?Wt("div",{className:"App-toolbar-content",children:Wt(x.Out,{})}):Oi("div",{className:"App-toolbar-content",children:[Wt(x.Out,{}),r.renderAction("toggleEditMenu"),r.renderAction("undo"),r.renderAction("redo"),r.renderAction(e.multiElement?"finalize":"duplicateSelection"),r.renderAction("deleteSelectedElements")]});return Oi(jI,{children:[c(),!e.viewModeEnabled&&w(),!e.openMenu&&e.showStats&&Wt(gu,{appState:e,setAppState:o,elements:t,onClose:()=>{r.executeAction(Ii)},renderCustomStats:l}),Wt("div",{className:"App-bottom-bar",style:{marginBottom:mn+Fo*2,marginLeft:mn+Fo*2,marginRight:mn+Fo*2},children:Oi(Qt,{padding:0,children:[e.openMenu==="shape"&&!e.viewModeEnabled&&Ta(e,t)?Wt(Ni,{className:"App-mobile-menu",heading:"selectedShapeActions",children:Wt(iu,{appState:e,elementsMap:u.scene.getNonDeletedElementsMap(),renderAction:r.renderAction})}):null,Oi("footer",{className:"App-toolbar",children:[y(),e.scrolledOutside&&!e.openMenu&&!e.openSidebar&&Wt("button",{className:"scroll-back-to-content",onClick:()=>{o(v=>({...$o(t,v)}))},children:b("buttons.scrollBackToContent")})]})]})})]})};f();import qI from"open-color";import QI,{useLayoutEffect as JI,useRef as $I,useState as eM}from"react";Sg();mc();import{jsx as Gc,jsxs as tM}from"react/jsx-runtime";var I6=e=>{let t=$I(null),[r,o]=eM(null);return JI(()=>{if(!e.spreadsheet)return;let n=bE(e.chartType,e.spreadsheet,0,0);o(n);let i,a=t.current;return(async()=>(i=await As(n,{exportBackground:!1,viewBackgroundColor:qI.white},null),i.querySelector(".style-fonts")?.remove(),a.replaceChildren(),a.appendChild(i),e.selected&&a.parentNode.focus()))(),()=>{a.replaceChildren()}},[e.spreadsheet,e.chartType,e.selected]),Gc("button",{className:"ChartPreview",onClick:()=>{r&&e.onClick(e.chartType,r)},children:Gc("div",{ref:t})})},M6=({setAppState:e,appState:t,onClose:r})=>{let{onInsertElements:o}=Mr(),n=QI.useCallback(()=>{r&&r()},[r]),i=(a,s)=>{o(s),xe("paste","chart",a),e({currentChartType:a,pasteDialog:{shown:!1,data:null}})};return Gc(ut,{size:"small",onCloseRequest:n,title:b("labels.pasteCharts"),className:"PasteChartDialog",autofocus:!1,children:tM("div",{className:"container",children:[Gc(I6,{chartType:"bar",spreadsheet:t.pasteDialog.data,selected:t.currentChartType==="bar",onClick:i}),Gc(I6,{chartType:"line",spreadsheet:t.pasteDialog.data,selected:t.currentChartType==="line",onClick:i})]})})};f();import rM from"react";ge();G();wi();V();import{Fragment as L6,jsx as K,jsxs as qr}from"react/jsx-runtime";var oM=()=>qr("div",{className:"HelpDialog__header",children:[qr("a",{className:"HelpDialog__btn",href:"https://docs.excalidraw.com",target:"_blank",rel:"noopener noreferrer",children:[K("div",{className:"HelpDialog__link-icon",children:ef}),b("helpDialog.documentation")]}),qr("a",{className:"HelpDialog__btn",href:"https://blog.excalidraw.com",target:"_blank",rel:"noopener noreferrer",children:[K("div",{className:"HelpDialog__link-icon",children:ef}),b("helpDialog.blog")]}),qr("a",{className:"HelpDialog__btn",href:"https://github.com/excalidraw/excalidraw/issues",target:"_blank",rel:"noopener noreferrer",children:[K("div",{className:"HelpDialog__link-icon",children:lp}),b("helpDialog.github")]}),qr("a",{className:"HelpDialog__btn",href:"https://youtube.com/@excalidraw",target:"_blank",rel:"noopener noreferrer",children:[K("div",{className:"HelpDialog__link-icon",children:_y}),"YouTube"]})]}),nM=e=>qr(L6,{children:[K("h3",{children:e.title}),K("div",{className:"HelpDialog__islands-container",children:e.children})]}),W1=e=>qr("div",{className:`HelpDialog__island ${e.className}`,children:[K("h4",{className:"HelpDialog__island-title",children:e.caption}),K("div",{className:"HelpDialog__island-content",children:e.children})]});function*iM(e,t){let r=!0;for(let o of e)r||(yield t),r=!1,yield o}var aM=e=>e.replace(/\b[a-z]\b/,t=>t.toUpperCase()),J=({label:e,shortcuts:t,isOr:r=!0})=>{let o=t.map(n=>(n.endsWith("++")?[...n.slice(0,-2).split("+"),"+"]:n.split("+")).map(a=>K(sM,{children:aM(a)},a)));return qr("div",{className:"HelpDialog__shortcut",children:[K("div",{children:e}),K("div",{className:"HelpDialog__key-container",children:[...iM(o,r?b("helpDialog.or"):null)]})]})},sM=e=>K("kbd",{className:"HelpDialog__key",...e}),k6=({onClose:e})=>{let t=rM.useCallback(()=>{e&&e()},[e]);return K(L6,{children:qr(ut,{onCloseRequest:t,title:b("helpDialog.title"),className:"HelpDialog",children:[K(oM,{}),qr(nM,{title:b("helpDialog.shortcuts"),children:[qr(W1,{className:"HelpDialog__island--tools",caption:b("helpDialog.tools"),children:[K(J,{label:b("toolBar.hand"),shortcuts:[T.H]}),K(J,{label:b("toolBar.selection"),shortcuts:[T.V,T[1]]}),K(J,{label:b("toolBar.rectangle"),shortcuts:[T.R,T[2]]}),K(J,{label:b("toolBar.diamond"),shortcuts:[T.D,T[3]]}),K(J,{label:b("toolBar.ellipse"),shortcuts:[T.O,T[4]]}),K(J,{label:b("toolBar.arrow"),shortcuts:[T.A,T[5]]}),K(J,{label:b("toolBar.line"),shortcuts:[T.L,T[6]]}),K(J,{label:b("toolBar.freedraw"),shortcuts:[T.P,T[7]]}),K(J,{label:b("toolBar.text"),shortcuts:[T.T,T[8]]}),K(J,{label:b("toolBar.image"),shortcuts:[T[9]]}),K(J,{label:b("toolBar.eraser"),shortcuts:[T.E,T[0]]}),K(J,{label:b("toolBar.frame"),shortcuts:[T.F]}),K(J,{label:b("toolBar.laser"),shortcuts:[T.K]}),K(J,{label:b("labels.eyeDropper"),shortcuts:[T.I,"Shift+S","Shift+G"]}),K(J,{label:b("helpDialog.editLineArrowPoints"),shortcuts:[N("CtrlOrCmd+Enter")]}),K(J,{label:b("helpDialog.editText"),shortcuts:[N("Enter")]}),K(J,{label:b("helpDialog.textNewLine"),shortcuts:[N("Enter"),N("Shift+Enter")]}),K(J,{label:b("helpDialog.textFinish"),shortcuts:[N("Esc"),N("CtrlOrCmd+Enter")]}),K(J,{label:b("helpDialog.curvedArrow"),shortcuts:["A",b("helpDialog.click"),b("helpDialog.click"),b("helpDialog.click")],isOr:!1}),K(J,{label:b("helpDialog.curvedLine"),shortcuts:["L",b("helpDialog.click"),b("helpDialog.click"),b("helpDialog.click")],isOr:!1}),K(J,{label:b("toolBar.lock"),shortcuts:[T.Q]}),K(J,{label:b("helpDialog.preventBinding"),shortcuts:[N("CtrlOrCmd")]}),K(J,{label:b("toolBar.link"),shortcuts:[N("CtrlOrCmd+K")]})]}),qr(W1,{className:"HelpDialog__island--view",caption:b("helpDialog.view"),children:[K(J,{label:b("buttons.zoomIn"),shortcuts:[N("CtrlOrCmd++")]}),K(J,{label:b("buttons.zoomOut"),shortcuts:[N("CtrlOrCmd+-")]}),K(J,{label:b("buttons.resetZoom"),shortcuts:[N("CtrlOrCmd+0")]}),K(J,{label:b("helpDialog.zoomToFit"),shortcuts:["Shift+1"]}),K(J,{label:b("helpDialog.zoomToSelection"),shortcuts:["Shift+2"]}),K(J,{label:b("helpDialog.movePageUpDown"),shortcuts:["PgUp/PgDn"]}),K(J,{label:b("helpDialog.movePageLeftRight"),shortcuts:["Shift+PgUp/PgDn"]}),K(J,{label:b("buttons.zenMode"),shortcuts:[N("Alt+Z")]}),K(J,{label:b("buttons.objectsSnapMode"),shortcuts:[N("Alt+S")]}),K(J,{label:b("labels.toggleGrid"),shortcuts:[N("CtrlOrCmd+'")]}),K(J,{label:b("labels.viewMode"),shortcuts:[N("Alt+R")]}),K(J,{label:b("labels.toggleTheme"),shortcuts:[N("Alt+Shift+D")]}),K(J,{label:b("stats.title"),shortcuts:[N("Alt+/")]}),K(J,{label:b("commandPalette.title"),shortcuts:bn?[Mt("commandPalette")]:[Mt("commandPalette"),Mt("commandPalette",1)]})]}),qr(W1,{className:"HelpDialog__island--editor",caption:b("helpDialog.editor"),children:[K(J,{label:b("labels.moveCanvas"),shortcuts:[N(`Space+${b("helpDialog.drag")}`),N(`Wheel+${b("helpDialog.drag")}`)],isOr:!0}),K(J,{label:b("buttons.clearReset"),shortcuts:[N("CtrlOrCmd+Delete")]}),K(J,{label:b("labels.delete"),shortcuts:[N("Delete")]}),K(J,{label:b("labels.cut"),shortcuts:[N("CtrlOrCmd+X")]}),K(J,{label:b("labels.copy"),shortcuts:[N("CtrlOrCmd+C")]}),K(J,{label:b("labels.paste"),shortcuts:[N("CtrlOrCmd+V")]}),K(J,{label:b("labels.pasteAsPlaintext"),shortcuts:[N("CtrlOrCmd+Shift+V")]}),K(J,{label:b("labels.selectAll"),shortcuts:[N("CtrlOrCmd+A")]}),K(J,{label:b("labels.multiSelect"),shortcuts:[N(`Shift+${b("helpDialog.click")}`)]}),K(J,{label:b("helpDialog.deepSelect"),shortcuts:[N(`CtrlOrCmd+${b("helpDialog.click")}`)]}),K(J,{label:b("helpDialog.deepBoxSelect"),shortcuts:[N(`CtrlOrCmd+${b("helpDialog.drag")}`)]}),(Ms||bn)&&K(J,{label:b("labels.copyAsPng"),shortcuts:[N("Shift+Alt+C")]}),K(J,{label:b("labels.copyStyles"),shortcuts:[N("CtrlOrCmd+Alt+C")]}),K(J,{label:b("labels.pasteStyles"),shortcuts:[N("CtrlOrCmd+Alt+V")]}),K(J,{label:b("labels.sendToBack"),shortcuts:[ar?N("CtrlOrCmd+Alt+["):N("CtrlOrCmd+Shift+[")]}),K(J,{label:b("labels.bringToFront"),shortcuts:[ar?N("CtrlOrCmd+Alt+]"):N("CtrlOrCmd+Shift+]")]}),K(J,{label:b("labels.sendBackward"),shortcuts:[N("CtrlOrCmd+[")]}),K(J,{label:b("labels.bringForward"),shortcuts:[N("CtrlOrCmd+]")]}),K(J,{label:b("labels.alignTop"),shortcuts:[N("CtrlOrCmd+Shift+Up")]}),K(J,{label:b("labels.alignBottom"),shortcuts:[N("CtrlOrCmd+Shift+Down")]}),K(J,{label:b("labels.alignLeft"),shortcuts:[N("CtrlOrCmd+Shift+Left")]}),K(J,{label:b("labels.alignRight"),shortcuts:[N("CtrlOrCmd+Shift+Right")]}),K(J,{label:b("labels.duplicateSelection"),shortcuts:[N("CtrlOrCmd+D"),N(`Alt+${b("helpDialog.drag")}`)]}),K(J,{label:b("helpDialog.toggleElementLock"),shortcuts:[N("CtrlOrCmd+Shift+L")]}),K(J,{label:b("buttons.undo"),shortcuts:[N("CtrlOrCmd+Z")]}),K(J,{label:b("buttons.redo"),shortcuts:dd?[N("CtrlOrCmd+Y"),N("CtrlOrCmd+Shift+Z")]:[N("CtrlOrCmd+Shift+Z")]}),K(J,{label:b("labels.group"),shortcuts:[N("CtrlOrCmd+G")]}),K(J,{label:b("labels.ungroup"),shortcuts:[N("CtrlOrCmd+Shift+G")]}),K(J,{label:b("labels.flipHorizontal"),shortcuts:[N("Shift+H")]}),K(J,{label:b("labels.flipVertical"),shortcuts:[N("Shift+V")]}),K(J,{label:b("labels.showStroke"),shortcuts:[N("S")]}),K(J,{label:b("labels.showBackground"),shortcuts:[N("G")]}),K(J,{label:b("labels.decreaseFontSize"),shortcuts:[N("CtrlOrCmd+Shift+<")]}),K(J,{label:b("labels.increaseFontSize"),shortcuts:[N("CtrlOrCmd+Shift+>")]})]})]})]})})};f();import Uc,{useLayoutEffect as lM}from"react";import P6 from"clsx";import*as sl from"@radix-ui/react-popover";G();V();import{jsx as Wn,jsxs as al}from"react/jsx-runtime";var cM=4,dM=8,mM=({shouldWrap:e,children:t,username:r})=>e?Wn(Zr,{label:r||"Unknown user",children:t}):Wn(Uc.Fragment,{children:t}),Y1=({actionManager:e,collaborator:t,socketId:r,withName:o=!1,shouldWrapWithTooltip:n=!1,isBeingFollowed:i})=>{let a={socketId:r,collaborator:t,withName:o,isBeingFollowed:i},s=e.renderAction("goToCollaborator",a);return Wn(mM,{username:t.username,shouldWrap:n,children:s},r)},pM=["avatarUrl","id","socketId","username","isInCall","isSpeaking","isMuted"],bu=Uc.memo(({className:e,mobile:t,collaborators:r,userToFollow:o})=>{let n=Ot(),i=new Map;r.forEach((E,w)=>{let y=E.id||w;i.set(y,{...E,socketId:w})});let a=Array.from(i.values()).filter(E=>E.username?.trim()),[s,l]=Uc.useState(""),c=Uc.useRef(null);lM(()=>{if(c.current){let E=y=>{let v=Math.max(1,Math.min(8,Math.floor(y/38)));m(v)};if(E(c.current.clientWidth),!gl)return;let w=new ResizeObserver(y=>{for(let v of y){let{width:A}=v.contentRect;E(A)}});return w.observe(c.current),()=>{w.disconnect()}}},[]);let[d,m]=Uc.useState(cM),u=s.trim().toLowerCase()?a.filter(E=>E.username?.toLowerCase().includes(s)):a,x=a.slice(0,d-1).map(E=>Y1({actionManager:n,collaborator:E,socketId:E.socketId,shouldWrapWithTooltip:!0,isBeingFollowed:E.socketId===o}));return t?Wn("div",{className:P6("UserList UserList_mobile",e),children:a.map(E=>Y1({actionManager:n,collaborator:E,socketId:E.socketId,shouldWrapWithTooltip:!0,isBeingFollowed:E.socketId===o}))}):Wn("div",{className:"UserList-wrapper",ref:c,children:al("div",{className:P6("UserList",e),style:{"--max-avatars":d},children:[x,a.length>d-1&&al(sl.Root,{onOpenChange:E=>{E||l("")},children:[al(sl.Trigger,{className:"UserList__more",children:["+",a.length-d+1]}),Wn(sl.Content,{style:{zIndex:2,width:"15rem",textAlign:"left"},align:"end",sideOffset:10,children:al(Qt,{style:{overflow:"hidden"},children:[a.length>=dM&&al("div",{className:"UserList__search-wrapper",children:[bp,Wn("input",{className:"UserList__search",type:"text",placeholder:b("userList.search.placeholder"),value:s,onChange:E=>{l(E.target.value)}})]}),al("div",{className:"dropdown-menu UserList__collaborators",children:[u.length===0&&Wn("div",{className:"UserList__collaborators__empty",children:b("userList.search.empty")}),Wn("div",{className:"UserList__hint",children:b("userList.hint.text")}),u.map(E=>Y1({actionManager:n,collaborator:E,socketId:E.socketId,withName:!0,isBeingFollowed:E.socketId===o}))]})]})})]})]})})},(e,t)=>{if(e.collaborators.size!==t.collaborators.size||e.mobile!==t.mobile||e.className!==t.className||e.userToFollow!==t.userToFollow)return!1;let r=t.collaborators.keys();for(let[o,n]of e.collaborators){let i=t.collaborators.get(o);if(!i||o!==r.next().value||!Je(n,i,pM))return!1}return!0});f();import hM from"react";f();import V1 from"open-color";import{jsx as uM}from"react/jsx-runtime";var K1=({children:e,color:t})=>uM("div",{className:"Card",style:{"--card-color":t==="primary"?"var(--color-primary)":V1[t][7],"--card-color-darker":t==="primary"?"var(--color-primary-darker)":V1[t][8],"--card-color-darkest":t==="primary"?"var(--color-primary-darkest)":V1[t][9]},children:e});Dn();G();import{Fragment as fM,jsx as zo,jsxs as xu}from"react/jsx-runtime";var gM=({elements:e,appState:t,setAppState:r,files:o,actionManager:n,exportOpts:i,canvas:a,onCloseRequest:s})=>{let{onExportToBackend:l}=i;return zo("div",{className:"ExportDialog ExportDialog--json",children:xu("div",{className:"ExportDialog-cards",children:[i.saveFileToDisk&&xu(K1,{color:"lime",children:[zo("div",{className:"Card-icon",children:R4}),zo("h2",{children:b("exportDialog.disk_title")}),xu("div",{className:"Card-details",children:[b("exportDialog.disk_details"),!fi&&n.renderAction("changeProjectName")]}),zo(ce,{className:"Card-button",type:"button",title:b("exportDialog.disk_button"),"aria-label":b("exportDialog.disk_button"),showAriaLabel:!0,onClick:()=>{n.executeAction(Lc,"ui")}})]}),l&&xu(K1,{color:"pink",children:[zo("div",{className:"Card-icon",children:vc}),zo("h2",{children:b("exportDialog.link_title")}),zo("div",{className:"Card-details",children:b("exportDialog.link_details")}),zo(ce,{className:"Card-button",type:"button",title:b("exportDialog.link_button"),"aria-label":b("exportDialog.link_button"),showAriaLabel:!0,onClick:async()=>{try{xe("export","link",`ui (${U0()})`),await l(e,t,o),s()}catch(c){r({errorMessage:c.message})}}})]}),i.renderCustomUI&&i.renderCustomUI(e,t,o,a)]})})},D6=({elements:e,appState:t,files:r,actionManager:o,exportOpts:n,canvas:i,setAppState:a})=>{let s=hM.useCallback(()=>{a({openDialog:null})},[a]);return zo(fM,{children:t.openDialog?.name==="jsonExport"&&zo(ut,{onCloseRequest:s,title:b("buttons.export"),children:zo(gM,{elements:e,appState:t,setAppState:a,files:r,actionManager:o,onCloseRequest:s,exportOpts:n,canvas:i})})})};f();import Eu from"clsx";f();import{jsx as bM}from"react/jsx-runtime";var R6=e=>bM("button",{className:"help-icon",onClick:e.onClick,type:"button",title:`${b("helpDialog.title")} \u2014 ?`,"aria-label":b("helpDialog.title"),children:Bs});import{jsx as pn,jsxs as X1}from"react/jsx-runtime";var N6=({appState:e,actionManager:t,showExitZenModeBtn:r,renderWelcomeScreen:o})=>{let{FooterCenterTunnel:n,WelcomeScreenHelpHintTunnel:i}=ot(),a=ke(),s=!e.viewModeEnabled&&e.multiElement&&a.isTouchScreen;return X1("footer",{role:"contentinfo",className:"layer-ui__wrapper__footer App-menu App-menu_bottom",children:[pn("div",{className:Eu("layer-ui__wrapper__footer-left zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":e.zenModeEnabled}),children:pn(Ut.Col,{gap:2,children:X1(Ni,{heading:"canvasActions",children:[pn($w,{renderAction:t.renderAction,zoom:e.zoom}),!e.viewModeEnabled&&pn(e6,{renderAction:t.renderAction,className:Eu("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-bottom":e.zenModeEnabled})}),s&&pn(r6,{renderAction:t.renderAction,className:Eu("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":e.zenModeEnabled})})]})})}),pn(n.Out,{}),pn("div",{className:Eu("layer-ui__wrapper__footer-right zen-mode-transition",{"transition-right":e.zenModeEnabled}),children:X1("div",{style:{position:"relative"},children:[o&&pn(i.Out,{}),pn(R6,{onClick:()=>t.executeAction(Oa)})]})}),pn(t6,{actionManager:t,showExitZenModeBtn:r})]})},O6=N6;N6.displayName="Footer";f();import{useEffect as V6,useLayoutEffect as K6,useRef as r2,useState as AM,forwardRef as X6,useImperativeHandle as SM,useCallback as W6}from"react";import{atom as IM,useSetAtom as MM}from"jotai";f();import xM from"react";var yu=xM.createContext({});f();import EM from"clsx";import{useContext as yM}from"react";import{jsx as Z1,jsxs as B6}from"react/jsx-runtime";var j1=({children:e,className:t})=>{let r=ke(),o=yM(yu),n=!!(r.editor.canFitSidebar&&o.shouldRenderDockButton);return B6("div",{className:EM("sidebar__header",t),"data-testid":"sidebar-header",children:[e,B6("div",{className:"sidebar__header__buttons",children:[n&&Z1(Zr,{label:b("labels.sidebarLock"),children:Z1(sn,{onSelect:()=>o.onDock?.(!o.docked),selected:!!o.docked,className:"sidebar__dock","data-testid":"sidebar-dock","aria-label":b("labels.sidebarLock"),children:d4})}),Z1(sn,{"data-testid":"sidebar-close",className:"sidebar__close",onSelect:o.onCloseRequest,"aria-label":b("buttons.close"),children:co})]})]})};j1.displayName="SidebarHeader";import kM from"clsx";G();ge();V();f();import wM from"clsx";import{jsx as q1,jsxs as F6}from"react/jsx-runtime";var Q1=({name:e,tab:t,icon:r,title:o,children:n,onToggle:i,className:a,style:s})=>{let l=Be(),c=Re();return F6("label",{title:o,className:"sidebar-trigger__label-element",children:[q1("input",{className:"ToolIcon_type_checkbox",type:"checkbox",onChange:d=>{document.querySelector(".layer-ui__wrapper")?.classList.remove("animate");let m=d.target.checked;l({openSidebar:m?{name:e,tab:t}:null}),i?.(m)},checked:c.openSidebar?.name===e,"aria-label":o,"aria-keyshortcuts":"0"}),F6("div",{className:wM("sidebar-trigger",a),style:s,children:[r&&q1("div",{children:r}),n&&q1("div",{className:"sidebar-trigger__label",children:n})]})]})};Q1.displayName="SidebarTrigger";f();import*as z6 from"@radix-ui/react-tabs";import{jsx as vM}from"react/jsx-runtime";var J1=({children:e,...t})=>vM(z6.List,{className:"sidebar-triggers",...t,children:e});J1.displayName="SidebarTabTriggers";f();import*as _6 from"@radix-ui/react-tabs";import{jsx as H6}from"react/jsx-runtime";var $1=({children:e,tab:t,onSelect:r,...o})=>H6(_6.Trigger,{value:t,asChild:!0,onSelect:r,children:H6("button",{type:"button",className:"excalidraw-button sidebar-tab-trigger",...o,children:e})});$1.displayName="SidebarTabTrigger";f();import*as G6 from"@radix-ui/react-tabs";import{jsx as CM}from"react/jsx-runtime";var e2=({children:e,...t})=>{let r=Re(),o=Be();if(!r.openSidebar)return null;let{name:n}=r.openSidebar;return CM(G6.Root,{className:"sidebar-tabs-root",value:r.openSidebar.tab,onValueChange:i=>o(a=>({...a,openSidebar:{...a.openSidebar,name:n,tab:i}})),...t,children:e})};e2.displayName="SidebarTabs";f();import*as U6 from"@radix-ui/react-tabs";import{jsx as TM}from"react/jsx-runtime";var t2=({tab:e,children:t,...r})=>TM(U6.Content,{...r,value:e,"data-testid":e,children:t});t2.displayName="SidebarTab";import{jsx as Y6}from"react/jsx-runtime";import{createElement as LM}from"react";var Wc=IM(!1),Z6=X6(({name:e,children:t,onDock:r,docked:o,className:n,...i},a)=>{C.DEV&&r&&o==null&&console.warn("Sidebar: `docked` must be set when `onDock` is supplied for the sidebar to be user-dockable. To hide this message, either pass `docked` or remove `onDock`");let s=Be(),l=MM(Wc,He);K6(()=>(l(!!o),()=>{l(!1)}),[l,o]);let c=r2({});c.current.onCloseRequest=()=>{s({openSidebar:null})},c.current.onDock=u=>r?.(u),c.current=ts(c.current,{docked:o,shouldRenderDockButton:!!r&&o!=null});let d=r2(null);SM(a,()=>d.current);let m=ke(),p=W6(()=>{document.querySelector(".Dialog")||s({openSidebar:null})},[s]);return Ws(d,W6(u=>{u.target.closest(".sidebar-trigger")||(!o||!m.editor.canFitSidebar)&&p()},[p,o,m.editor.canFitSidebar])),V6(()=>{let u=h=>{h.key===T.ESCAPE&&(!o||!m.editor.canFitSidebar)&&p()};return document.addEventListener("keydown",u),()=>{document.removeEventListener("keydown",u)}},[p,o,m.editor.canFitSidebar]),Y6(Qt,{...i,className:kM("sidebar",{"sidebar--docked":o},n),ref:d,children:Y6(yu.Provider,{value:c.current,children:t})})});Z6.displayName="SidebarInner";var Yn=Object.assign(X6((e,t)=>{let r=Re(),{onStateChange:o}=e,n=r2(r.openSidebar);V6(()=>{(!r.openSidebar&&n?.current?.name===e.name||r.openSidebar?.name===e.name&&n?.current?.name!==e.name||n.current?.name===e.name)&&r.openSidebar!==n.current&&o?.(r.openSidebar?.name!==e.name?null:r.openSidebar),n.current=r.openSidebar},[r.openSidebar,o,e.name]);let[i,a]=AM(!1);return K6(()=>(a(!0),()=>a(!1)),[]),i&&r.openSidebar?.name===e.name?LM(Z6,{...e,ref:t,key:e.name}):null}),{Header:j1,TabTriggers:J1,TabTrigger:$1,Tabs:e2,Tab:t2,Trigger:Q1});Yn.displayName="Sidebar";import{Provider as fk,useAtom as bk,useAtomValue as xk}from"jotai";f();var i2={};Qu(i2,{ChangeCanvasBackground:()=>a5,ClearCanvas:()=>n5,CommandPalette:()=>r5,Export:()=>s5,Help:()=>o5,LiveCollaborationTrigger:()=>c5,LoadScene:()=>$6,SaveAsImage:()=>t5,SaveToActiveFile:()=>e5,Socials:()=>l5,ToggleTheme:()=>i5});f();import RM from"clsx";import{useSetAtom as NM}from"jotai";f();import{atom as PM}from"jotai";var o2=PM({active:!1});async function j6({title:e,description:t,actionLabel:r,color:o}){return new Promise(n=>{Jt.set(o2,{active:!0,onConfirm:()=>n(!0),onClose:()=>n(!1),onReject:()=>n(!1),title:e,description:t,actionLabel:r,color:o})})}f();import{Fragment as DM,jsx as n2,jsxs as q6}from"react/jsx-runtime";var Q6=({value:e,shortcut:t,onChange:r,choices:o,children:n,name:i})=>{let a=ke();return q6(DM,{children:[q6("div",{className:"dropdown-menu-item-base dropdown-menu-item-bare",children:[n2("label",{className:"dropdown-menu-item__text",htmlFor:i,children:n}),n2(mu,{name:i,value:e,onChange:r,choices:o})]}),t&&!a.editor.isMobile&&n2("div",{className:"dropdown-menu-item__shortcut dropdown-menu-item__shortcut--orphaned",children:t})]})};Q6.displayName="DropdownMenuItemContentRadio";var J6=Q6;V();import{Fragment as OM,jsx as Yt,jsxs as d5}from"react/jsx-runtime";var $6=()=>{let{t:e}=Tt(),t=Ot(),r=Ai();return t.isActionEnabled(Ks)?Yt(go,{icon:Fs,onSelect:async()=>{(!r.length||await j6({title:e("overwriteConfirm.modal.loadFromFile.title"),actionLabel:e("overwriteConfirm.modal.loadFromFile.button"),color:"warning",description:Yt(ur,{i18nKey:"overwriteConfirm.modal.loadFromFile.description",bold:n=>Yt("strong",{children:n}),br:()=>Yt("br",{})})}))&&t.executeAction(Ks)},"data-testid":"load-button",shortcut:Mt("loadScene"),"aria-label":e("buttons.load"),children:e("buttons.load")}):null};$6.displayName="LoadScene";var e5=()=>{let{t:e}=Tt(),t=Ot();return t.isActionEnabled(Lp)?Yt(go,{shortcut:Mt("saveScene"),"data-testid":"save-button",onSelect:()=>t.executeAction(Lp),icon:L4,"aria-label":`${e("buttons.save")}`,children:`${e("buttons.save")}`}):null};e5.displayName="SaveToActiveFile";var t5=()=>{let e=Be(),{t}=Tt();return Yt(go,{icon:dp,"data-testid":"image-export-button",onSelect:()=>e({openDialog:{name:"imageExport"}}),shortcut:Mt("imageExport"),"aria-label":t("buttons.exportImage"),children:t("buttons.exportImage")})};t5.displayName="SaveAsImage";var r5=e=>{let t=Be(),{t:r}=Tt();return Yt(go,{icon:xp,"data-testid":"command-palette-button",onSelect:()=>{xe("command_palette","open","menu"),t({openDialog:{name:"commandPalette"}})},shortcut:Mt("commandPalette"),"aria-label":r("commandPalette.title"),className:e?.className,children:r("commandPalette.title")})};r5.displayName="CommandPalette";var o5=()=>{let{t:e}=Tt(),t=Ot();return Yt(go,{"data-testid":"help-menu-item",icon:Bs,onSelect:()=>t.executeAction(Oa),shortcut:"?","aria-label":e("helpDialog.title"),children:e("helpDialog.title")})};o5.displayName="Help";var n5=()=>{let{t:e}=Tt(),t=NM(za,He);return Ot().isActionEnabled(_n)?Yt(go,{icon:Bo,onSelect:()=>t("clearCanvas"),"data-testid":"clear-canvas-button","aria-label":e("buttons.clearReset"),children:e("buttons.clearReset")}):null};n5.displayName="ClearCanvas";var i5=e=>{let{t}=Tt(),r=Re(),o=Ot(),n=Mt("toggleTheme");return o.isActionEnabled(Pa)?e?.allowSystemTheme?Yt(J6,{name:"theme",value:e.theme,onChange:i=>e.onSelect(i),choices:[{value:ae.LIGHT,label:wc,ariaLabel:`${t("buttons.lightMode")} - ${n}`},{value:ae.DARK,label:yc,ariaLabel:`${t("buttons.darkMode")} - ${n}`},{value:"system",label:Hy,ariaLabel:t("buttons.systemMode")}],children:t("labels.theme")}):Yt(go,{onSelect:i=>{if(i.preventDefault(),e?.onSelect)e.onSelect(r.theme===ae.DARK?ae.LIGHT:ae.DARK);else return o.executeAction(Pa)},icon:r.theme===ae.DARK?wc:yc,"data-testid":"toggle-dark-mode",shortcut:n,"aria-label":r.theme===ae.DARK?t("buttons.lightMode"):t("buttons.darkMode"),children:r.theme===ae.DARK?t("buttons.lightMode"):t("buttons.darkMode")}):null};i5.displayName="ToggleTheme";var a5=()=>{let{t:e}=Tt(),t=Re(),r=Ot(),o=Mi();return t.viewModeEnabled||!o.UIOptions.canvasActions.changeViewBackgroundColor?null:d5("div",{style:{marginTop:"0.5rem"},children:[Yt("div",{"data-testid":"canvas-background-label",style:{fontSize:".75rem",marginBottom:".5rem"},children:e("labels.canvasBackground")}),Yt("div",{style:{padding:"0 0.625rem"},children:r.renderAction("changeViewBackgroundColor")})]})};a5.displayName="ChangeCanvasBackground";var s5=()=>{let{t:e}=Tt(),t=Be();return Yt(go,{icon:Ma,onSelect:()=>{t({openDialog:{name:"jsonExport"}})},"data-testid":"json-export-button","aria-label":e("buttons.export"),children:e("buttons.export")})};s5.displayName="Export";var l5=()=>{let{t:e}=Tt();return d5(OM,{children:[Yt(rl,{icon:lp,href:"https://github.com/excalidraw/excalidraw","aria-label":"GitHub",children:"GitHub"}),Yt(rl,{icon:M4,href:"https://x.com/excalidraw","aria-label":"X",children:e("labels.followUs")}),Yt(rl,{icon:I4,href:"https://discord.gg/UexuTaE","aria-label":"Discord",children:e("labels.discordChat")})]})};l5.displayName="Socials";var c5=({onSelect:e,isCollaborating:t})=>{let{t:r}=Tt();return Yt(go,{"data-testid":"collab-button",icon:mp,className:RM({"active-collab":t}),onSelect:e,children:r("labels.liveCollaboration")})};c5.displayName="LiveCollaborationTrigger";f();import{atom as BM,useAtom as FM}from"jotai";import{useLayoutEffect as zM,useRef as HM}from"react";import{jsx as _M}from"react/jsx-runtime";var Vn=(e,t)=>{let r=BM(0),o=n=>{let{jotaiScope:i}=ot(),[,a]=FM(r,i),s=HM({preferHost:!1,counter:0});return zM(()=>{let l=s.current;return a(c=>{let d=c+1;return l.counter=d,d}),()=>{a(c=>{let d=c-1;return l.counter=d,d||(l.preferHost=!1),d})}},[a]),n.__fallback||(s.current.preferHost=!0),!s.current.counter&&n.__fallback&&s.current.preferHost||s.current.counter>1&&n.__fallback?null:_M(t,{...n})};return o.displayName=e,o};G();import{jsx as wu,jsxs as a2}from"react/jsx-runtime";var GM=Object.assign(Vn("MainMenu",({children:e,onSelect:t})=>{let{MainMenuTunnel:r}=ot(),o=ke(),n=Re(),i=Be(),a=o.editor.isMobile?void 0:()=>i({openMenu:null});return wu(r.In,{children:a2(ze,{open:n.openMenu==="canvas",children:[wu(ze.Trigger,{onToggle:()=>{i({openMenu:n.openMenu==="canvas"?null:"canvas"})},"data-testid":"main-menu-trigger",className:"main-menu-trigger",children:sp}),a2(ze.Content,{onClickOutside:a,onSelect:ti(t,()=>{i({openMenu:null})}),children:[e,o.editor.isMobile&&n.collaborators.size>0&&a2("fieldset",{className:"UserList-Wrapper",children:[wu("legend",{children:b("labels.collaborators")}),wu(bu,{mobile:!0,collaborators:n.collaborators,userToFollow:n.userToFollow?.socketId||null})]})]})]})})}),{Trigger:ze.Trigger,Item:ze.Item,ItemLink:ze.ItemLink,ItemCustom:ze.ItemCustom,Group:ze.Group,Separator:ze.Separator,DefaultItems:i2}),fr=GM;f();import{useAtom as VM}from"jotai";f();import{jsx as ll,jsxs as YM}from"react/jsx-runtime";var vu=({title:e,children:t,actionLabel:r,onClick:o})=>YM("div",{className:"OverwriteConfirm__Actions__Action",children:[ll("h4",{children:e}),ll("div",{className:"OverwriteConfirm__Actions__Action__content",children:t}),ll(dn,{variant:"outlined",color:"muted",label:r,size:"large",fullWidth:!0,onClick:o})]}),UM=()=>{let{t:e}=Tt(),t=Ot(),r=Be();return ll(vu,{title:e("overwriteConfirm.action.exportToImage.title"),actionLabel:e("overwriteConfirm.action.exportToImage.button"),onClick:()=>{t.executeAction(kp,"ui",!0),r({openDialog:{name:"imageExport"}})},children:e("overwriteConfirm.action.exportToImage.description")})},WM=()=>{let{t:e}=Tt(),t=Ot();return ll(vu,{title:e("overwriteConfirm.action.saveToDisk.title"),actionLabel:e("overwriteConfirm.action.saveToDisk.button"),onClick:()=>{t.executeAction(Lc,"ui")},children:e("overwriteConfirm.action.saveToDisk.description")})},s2=Object.assign(({children:e})=>ll("div",{className:"OverwriteConfirm__Actions",children:e}),{ExportToImage:UM,SaveToDisk:WM});import{jsx as Bi,jsxs as m5}from"react/jsx-runtime";var Cu=Object.assign(Vn("OverwriteConfirmDialog",({children:e})=>{let{OverwriteConfirmDialogTunnel:t}=ot(),[r,o]=VM(o2,He);if(!r.active)return null;let n=()=>{r.onClose(),o(a=>({...a,active:!1}))},i=()=>{r.onConfirm(),o(a=>({...a,active:!1}))};return Bi(t.In,{children:Bi(ut,{onCloseRequest:n,title:!1,size:916,children:m5("div",{className:"OverwriteConfirm",children:[Bi("h3",{children:r.title}),m5("div",{className:`OverwriteConfirm__Description OverwriteConfirm__Description--color-${r.color}`,children:[Bi("div",{className:"OverwriteConfirm__Description__icon",children:wy}),Bi("div",{children:r.description}),Bi("div",{className:"OverwriteConfirm__Description__spacer"}),Bi(dn,{color:r.color,size:"large",label:r.actionLabel,onClick:i})]}),Bi(s2,{children:e})]})})})}),{Actions:s2,Action:vu});Ar();f();V();import KM from"clsx";G();import{jsx as Fi,jsxs as p5}from"react/jsx-runtime";import{createElement as XM}from"react";var u5=Vn("DefaultSidebarTrigger",e=>{let{DefaultSidebarTriggerTunnel:t}=ot();return Fi(t.In,{children:Fi(Yn.Trigger,{...e,className:"default-sidebar-trigger",name:Or.name})})});u5.displayName="DefaultSidebarTrigger";var h5=({children:e,...t})=>{let{DefaultSidebarTabTriggersTunnel:r}=ot();return Fi(r.In,{children:Fi(Yn.TabTriggers,{...t,children:e})})};h5.displayName="DefaultTabTriggers";var Tu=Object.assign(Vn("DefaultSidebar",({children:e,className:t,onDock:r,docked:o,...n})=>{let i=Re(),a=Be(),{DefaultSidebarTabTriggersTunnel:s}=ot();return XM(Yn,{...n,name:"default",key:"default",className:KM("default-sidebar",t),docked:o??i.defaultSidebarDockedPreference,onDock:r===!1||!r&&o!=null?void 0:ti(r,l=>{a({defaultSidebarDockedPreference:l})})},p5(Yn.Tabs,{children:[p5(Yn.Header,{children:[n.__fallback&&Fi("div",{style:{color:"var(--color-primary)",fontSize:"1.2em",fontWeight:"bold",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",paddingRight:"1em"},children:b("toolBar.library")}),Fi(s.Out,{})]}),Fi(Yn.Tab,{tab:wl,children:Fi(jw,{})}),e]}))}),{Trigger:u5,TabTriggers:h5});Ge();Zo();ni();f();import ZM from"clsx";import{jsx as g5,jsxs as qM}from"react/jsx-runtime";var jM="small",f5=e=>qM("label",{className:ZM("ToolIcon ToolIcon__LaserPointer",`ToolIcon_size_${jM}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[g5("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title,"data-testid":"toolbar-LaserPointer"}),g5("div",{className:"ToolIcon__icon",children:fp})]});f();import{useState as w5}from"react";ge();f();import{jsx as QM}from"react/jsx-runtime";var cl=e=>QM("p",{className:"excalidraw__paragraph",style:e.style,children:e.children});f();import*as x5 from"@radix-ui/react-tabs";import{useRef as b5}from"react";G();import{jsx as JM}from"react/jsx-runtime";var E5=e=>{let t=Be(),r=b5(null),o=b5(0);return JM(x5.Root,{ref:r,className:"ttd-dialog-tabs-root",value:e.tab,onValueChange:n=>{if(!n)return;let i=r.current?.closest(".Modal__content");if(i){let a=i.offsetHeight||0;a>o.current&&(o.current=a,i.style.minHeight=`min(${o.current}px, 100%)`)}e.dialog==="settings"&&Tl(["text-to-diagram","diagram-to-code"],n)?t({openDialog:{name:e.dialog,tab:n,source:"settings"}}):e.dialog==="ttd"&&Tl(["text-to-diagram","mermaid"],n)&&t({openDialog:{name:e.dialog,tab:n}})},children:e.children})};E5.displayName="TTDDialogTabs";var Au=E5;f();import*as y5 from"@radix-ui/react-tabs";import{jsx as $M}from"react/jsx-runtime";var dl=({tab:e,children:t,...r})=>$M(y5.Content,{...r,value:e,children:t});dl.displayName="TTDDialogTab";import{jsx as Rr,jsxs as Yc}from"react/jsx-runtime";var v5=e=>{let[t,r]=w5(e.openAIKey||""),[o,n]=w5(e.isPersisted),i=Re(),a=()=>{e.onConfirm(t.trim(),o)};return i.openDialog?.name!=="settings"?null:Rr(ut,{onCloseRequest:()=>{e.onClose(),e.onConfirm(t.trim(),o)},title:Yc("div",{style:{display:"flex"},children:["Wireframe to Code (AI)"," ",Rr("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"0.1rem 0.5rem",marginLeft:"1rem",fontSize:14,borderRadius:"12px",color:"#000",background:"pink"},children:"Experimental"})]}),className:"MagicSettings",autofocus:!1,children:Rr(Au,{dialog:"settings",tab:i.openDialog.tab,children:Yc(dl,{tab:"diagram-to-code",children:[Yc(cl,{children:["For the diagram-to-code feature we use"," ",Rr(Li,{icon:Cc}),"OpenAI."]}),Yc(cl,{children:["While the OpenAI API is in beta, its use is strictly limited \u2014 as such we require you use your own API key. You can create an"," ",Rr("a",{href:"https://platform.openai.com/login?launch",rel:"noopener noreferrer",target:"_blank",children:"OpenAI account"}),", add a small credit (5 USD minimum), and"," ",Rr("a",{href:"https://platform.openai.com/api-keys",rel:"noopener noreferrer",target:"_blank",children:"generate your own API key"}),"."]}),Rr(cl,{children:"Your OpenAI key does not leave the browser, and you can also set your own limit in your OpenAI account dashboard if needed."}),Rr(nu,{isRedacted:!0,value:t,placeholder:"Paste your API key here",label:"OpenAI API key",onChange:s=>{r(s),e.onChange(s.trim(),o)},selectOnRender:!0,onKeyDown:s=>s.key===T.ENTER&&a()}),Rr(cl,{children:"By default, your API token is not persisted anywhere so you'll need to insert it again after reload. But, you can persist locally in your browser below."}),Rr(Na,{checked:o,onChange:n,children:"Persist API key in browser storage"}),Yc(cl,{children:["Once API key is set, you can use the ",Rr(Li,{icon:Hs})," ","tool to wrap your elements in a frame that will then allow you to turn it into code. This dialog can be accessed using the"," ",Rr("b",{children:"AI Settings"})," ",Rr(Li,{icon:Cc}),"."]}),Rr(dn,{className:"MagicSettings__confirm",size:"large",label:"Confirm",onClick:a})]})})})};f();f();import{useState as I5,useRef as M5,useEffect as k5,useDeferredValue as ak}from"react";f();V();Sr();var ek=({canvasRef:e,setError:t})=>{let r=e.current;if(!r)return;let o=r.parentElement;o&&(o.style.background="",t(null),r.replaceChildren())},Su=async({canvasRef:e,mermaidToExcalidrawLib:t,mermaidDefinition:r,setError:o,data:n})=>{let i=e.current,a=i?.parentElement;if(!(!i||!a)){if(!r){ek({canvasRef:e,setError:o});return}try{let s=await t.api,l;try{l=await s.parseMermaidToExcalidraw(r,{fontSize:Lt})}catch{l=await s.parseMermaidToExcalidraw(r.replace(/"/g,"'"),{fontSize:Lt})}let{elements:c,files:d}=l;o(null),n.current={elements:Kc(c,{regenerateIds:!0}),files:d};let m=await vi({elements:n.current.elements,files:n.current.files,exportPadding:Co,maxWidthOrHeight:Math.max(a.offsetWidth,a.offsetHeight)*window.devicePixelRatio});try{await Nn(m)}catch(p){throw p.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(b("canvasError.canvasTooBig")):p}a.style.background="var(--default-bg-color)",i.replaceChildren(m)}catch(s){throw a.style.background="var(--default-bg-color)",r&&o(s),s}}},Vc=e=>{Lr.set($r.MERMAID_TO_EXCALIDRAW,e)},Iu=({app:e,data:t,text:r,shouldSaveMermaidDataToStorage:o})=>{let{elements:n,files:i}=t.current;n.length&&(e.addElementsFromPasteOrLibrary({elements:n,files:i,position:"center",fitToContent:!0}),e.setOpenDialog(null),o&&r&&Vc(r))};f();import{jsx as tk}from"react/jsx-runtime";var Mu=({children:e})=>tk("div",{className:"ttd-dialog-panels",children:e});f();import C5 from"clsx";import{jsx as l2,jsxs as Xc}from"react/jsx-runtime";var ml=({label:e,children:t,panelAction:r,panelActionDisabled:o=!1,onTextSubmitInProgess:n,renderTopRight:i,renderSubmitShortcut:a,renderBottomRight:s})=>Xc("div",{className:"ttd-dialog-panel",children:[Xc("div",{className:"ttd-dialog-panel__header",children:[l2("label",{children:e}),i?.()]}),t,Xc("div",{className:C5("ttd-dialog-panel-button-container",{invisible:!r}),style:{display:"flex",alignItems:"center"},children:[Xc(sn,{className:"ttd-dialog-panel-button",onSelect:r?r.action:()=>{},disabled:o||n,children:[Xc("div",{className:C5({invisible:n}),children:[r?.label,r?.icon&&l2("span",{children:r.icon})]}),n&&l2(Vt,{})]}),!o&&!n&&a?.(),s?.()]})]});f();V();ge();import{useEffect as rk,useRef as T5}from"react";import{jsx as ok}from"react/jsx-runtime";var ku=({input:e,placeholder:t,onChange:r,onKeyboardSubmit:o})=>{let n=T5(null),i=T5(o);return i.current=o,rk(()=>{if(!i.current)return;let a=n.current;if(a){let s=l=>{l[T.CTRL_OR_CMD]&&l.key===T.ENTER&&(l.preventDefault(),i.current?.())};return a.addEventListener("keydown",s),()=>{a.removeEventListener("keydown",s)}}},[]),ok("textarea",{className:"ttd-dialog-input",onChange:r,value:e,placeholder:t,autoFocus:!0,ref:n})};f();import{jsx as Lu,jsxs as A5}from"react/jsx-runtime";var nk=({error:e})=>A5("div",{"data-testid":"ttd-dialog-output-error",className:"ttd-dialog-output-error",children:["Error! ",Lu("p",{children:e})]}),Pu=({error:e,canvasRef:t,loaded:r})=>A5("div",{className:"ttd-dialog-output-wrapper",children:[e&&Lu(nk,{error:e.message}),r?Lu("div",{ref:t,style:{opacity:e?"0.15":1},className:"ttd-dialog-output-canvas-container"}):Lu(Vt,{size:"2rem"})]});V();G();f();G();import{jsx as S5,jsxs as ik}from"react/jsx-runtime";var Du=()=>ik("div",{className:"ttd-dialog-submit-shortcut",children:[S5("div",{className:"ttd-dialog-submit-shortcut__key",children:N("CtrlOrCmd")}),S5("div",{className:"ttd-dialog-submit-shortcut__key",children:N("Enter")})]});import{Fragment as ck,jsx as un,jsxs as P5}from"react/jsx-runtime";var sk=`flowchart TD
 A[Christmas] -->|Get money| B(Go shopping)
 B --> C{Let me think}
 C -->|One| D[Laptop]
 C -->|Two| E[iPhone]
 C -->|Three| F[Car]`,L5=qi(Vc,300),lk=({mermaidToExcalidrawLib:e})=>{let[t,r]=I5(()=>Lr.get($r.MERMAID_TO_EXCALIDRAW)||sk),o=ak(t.trim()),[n,i]=I5(null),a=M5(null),s=M5({elements:[],files:null}),l=Mr();k5(()=>{Su({canvasRef:a,data:s,mermaidToExcalidrawLib:e,setError:i,mermaidDefinition:o}).catch(d=>{G0()&&console.error("Failed to parse mermaid definition",d)}),L5(o)},[o,e]),k5(()=>()=>{L5.flush()},[]);let c=()=>{Iu({app:l,data:s,text:t,shouldSaveMermaidDataToStorage:!0})};return P5(ck,{children:[un("div",{className:"ttd-dialog-desc",children:un(ur,{i18nKey:"mermaid.description",flowchartLink:d=>un("a",{href:"https://mermaid.js.org/syntax/flowchart.html",children:d}),sequenceLink:d=>un("a",{href:"https://mermaid.js.org/syntax/sequenceDiagram.html",children:d}),classLink:d=>un("a",{href:"https://mermaid.js.org/syntax/classDiagram.html",children:d})})}),P5(Mu,{children:[un(ml,{label:b("mermaid.syntax"),children:un(ku,{input:t,placeholder:"Write Mermaid diagram defintion here...",onChange:d=>r(d.target.value),onKeyboardSubmit:()=>{c()}})}),un(ml,{label:b("mermaid.preview"),panelAction:{action:()=>{c()},label:b("mermaid.button"),icon:zs},renderSubmitShortcut:()=>un(Du,{}),children:un(Pu,{canvasRef:a,loaded:e.loaded,error:n})})]})]})},D5=lk;import{useEffect as mk,useRef as d2,useState as Nu}from"react";f();import*as R5 from"@radix-ui/react-tabs";import{jsx as dk}from"react/jsx-runtime";var c2=({children:e,...t})=>dk(R5.List,{className:"ttd-dialog-triggers",...t,children:e});c2.displayName="TTDDialogTabTriggers";f();import*as O5 from"@radix-ui/react-tabs";import{jsx as N5}from"react/jsx-runtime";var Ru=({children:e,tab:t,onSelect:r,...o})=>N5(O5.Trigger,{value:t,asChild:!0,onSelect:r,children:N5("button",{type:"button",className:"ttd-dialog-tab-trigger",...o,children:e})});Ru.displayName="TTDDialogTabTrigger";G();import{atom as F5,useAtom as B5}from"jotai";import{jsx as br,jsxs as zi}from"react/jsx-runtime";var m2=3,pl=1e3,pk=F5(null),uk=F5(null),p2=e=>{let t=Re();return t.openDialog?.name!=="ttd"?null:br(hk,{...e,tab:t.openDialog.tab})},hk=Vn("TTDDialogBase",({tab:e,...t})=>{let r=Mr(),o=Be(),n=d2(null),[i,a]=B5(uk),[s,l]=Nu(i?.prompt??""),c=s.trim(),d=S=>{l(S.target.value),a(k=>({generatedResponse:k?.generatedResponse??null,prompt:S.target.value}))},[m,p]=Nu(!1),[u,h]=B5(pk),x=async()=>{if(c.length>pl||c.length<m2||m||u?.rateLimitRemaining===0||"__fallback"in t){c.length<m2&&L(new Error(`Prompt is too short (min ${m2} characters)`)),c.length>pl&&L(new Error(`Prompt is too long (max ${pl} characters)`));return}try{p(!0),xe("ai","generate","ttd");let{generatedResponse:S,error:k,rateLimit:R,rateLimitRemaining:_}=await t.onTextSubmit(c);if(typeof S=="string"&&a(M=>({generatedResponse:S,prompt:M?.prompt??null})),ph(R)&&ph(_)&&h({rateLimit:R,rateLimitRemaining:_}),k){L(k);return}if(!S){L(new Error("Generation failed"));return}try{await Su({canvasRef:n,data:v,mermaidToExcalidrawLib:w,setError:L,mermaidDefinition:S}),xe("ai","mermaid parse success","ttd")}catch(M){console.info(`%cTTD mermaid render errror: ${M.message}`,"color: red"),console.info(`>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
TTD mermaid definition render errror: ${M.message}`,"color: yellow"),xe("ai","mermaid parse failed","ttd"),L(new Error("Generated an invalid diagram :(. You may also try a different prompt."))}}catch(S){let k=S.message;(!k||k==="Failed to fetch")&&(k="Request failed"),L(new Error(k))}finally{p(!1)}},E=d2(x);E.current=x;let[w,y]=Nu({loaded:!1,api:import("@excalidraw/mermaid-to-excalidraw")});mk(()=>{(async()=>{await w.api,y(k=>({...k,loaded:!0}))})()},[w.api]);let v=d2({elements:[],files:null}),[A,L]=Nu(null);return br(ut,{className:"ttd-dialog",onCloseRequest:()=>{r.setOpenDialog(null)},size:1200,title:!1,...t,autofocus:!1,children:zi(Au,{dialog:"ttd",tab:e,children:["__fallback"in t&&t.__fallback?br("p",{className:"dialog-mermaid-title",children:b("mermaid.title")}):zi(c2,{children:[br(Ru,{tab:"text-to-diagram",children:zi("div",{style:{display:"flex",alignItems:"center"},children:[b("labels.textToDiagram"),br("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"1px 6px",marginLeft:"10px",fontSize:10,borderRadius:"12px",background:"pink",color:"#000"},children:"AI Beta"})]})}),br(Ru,{tab:"mermaid",children:"Mermaid"})]}),br(dl,{className:"ttd-dialog-content",tab:"mermaid",children:br(D5,{mermaidToExcalidrawLib:w})}),!("__fallback"in t)&&zi(dl,{className:"ttd-dialog-content",tab:"text-to-diagram",children:[br("div",{className:"ttd-dialog-desc",children:"Currently we use Mermaid as a middle step, so you'll get best results if you describe a diagram, workflow, flow chart, and similar."}),zi(Mu,{children:[br(ml,{label:b("labels.prompt"),panelAction:{action:x,label:"Generate",icon:zs},onTextSubmitInProgess:m,panelActionDisabled:c.length>pl||u?.rateLimitRemaining===0,renderTopRight:()=>u?zi("div",{className:"ttd-dialog-rate-limit",style:{fontSize:12,marginLeft:"auto",color:u.rateLimitRemaining===0?"var(--color-danger)":void 0},children:[u.rateLimitRemaining," requests left today"]}):null,renderSubmitShortcut:()=>br(Du,{}),renderBottomRight:()=>{if(typeof i?.generatedResponse=="string")return zi("div",{className:"excalidraw-link",style:{marginLeft:"auto",fontSize:14},onClick:()=>{typeof i?.generatedResponse=="string"&&(Vc(i.generatedResponse),o({openDialog:{name:"ttd",tab:"mermaid"}}))},children:["View as Mermaid",br(Li,{icon:zs})]});let S=c.length/pl;return S>.8?zi("div",{style:{marginLeft:"auto",fontSize:12,fontFamily:"monospace",color:S>1?"var(--color-danger)":void 0},children:["Length: ",c.length,"/",pl]}):null},children:br(ku,{onChange:d,input:s,placeholder:"Describe what you want to see...",onKeyboardSubmit:()=>{E.current()}})}),br(ml,{label:"Preview",panelAction:{action:()=>{console.info("Panel action clicked"),Iu({app:r,data:v})},label:"Insert",icon:zs},children:br(Pu,{canvasRef:n,error:A,loaded:w.loaded})})]})]})]})})});import{Fragment as H5,jsx as le,jsxs as Qr}from"react/jsx-runtime";var Ek=({UIOptions:e})=>Qr(fr,{__fallback:!0,children:[le(fr.DefaultItems.LoadScene,{}),le(fr.DefaultItems.SaveToActiveFile,{}),e.canvasActions.export&&le(fr.DefaultItems.Export,{}),e.canvasActions.saveAsImage&&le(fr.DefaultItems.SaveAsImage,{}),le(fr.DefaultItems.Help,{}),le(fr.DefaultItems.ClearCanvas,{}),le(fr.Separator,{}),le(fr.Group,{title:"Excalidraw links",children:le(fr.DefaultItems.Socials,{})}),le(fr.Separator,{}),le(fr.DefaultItems.ToggleTheme,{}),le(fr.DefaultItems.ChangeCanvasBackground,{})]}),yk=()=>Qr(Cu,{__fallback:!0,children:[le(Cu.Actions.SaveToDisk,{}),le(Cu.Actions.ExportToImage,{})]}),wk=({actionManager:e,appState:t,files:r,setAppState:o,elements:n,canvas:i,onLockToggle:a,onHandToolToggle:s,onPenModeToggle:l,showExitZenModeBtn:c,renderTopRightUI:d,renderCustomStats:m,UIOptions:p,onExportImage:u,renderWelcomeScreen:h,children:x,app:E,isCollaborating:w,openAIKey:y,isOpenAIKeyPersisted:v,onOpenAIAPIKeyChange:A,onMagicSettingsConfirm:L})=>{let S=ke(),k=Jw(),[R,_]=bk(Ti,He),M=()=>p.canvasActions.export?le(D6,{elements:n,appState:t,files:r,actionManager:e,exportOpts:p.canvasActions.export,canvas:i,setAppState:o}):null,O=()=>!p.canvasActions.saveAsImage||t.openDialog?.name!=="imageExport"?null:le(f6,{elements:n,appState:t,files:r,actionManager:e,onExportImage:u,onCloseRequest:()=>o({openDialog:null}),name:E.getName()}),I=()=>Qr("div",{style:{position:"relative"},children:[le(k.MainMenuTunnel.Out,{}),h&&le(k.WelcomeScreenMenuHintTunnel.Out,{})]}),F=()=>le(Ni,{heading:"selectedShapeActions",className:Zc("selected-shape-actions zen-mode-transition",{"transition-left":t.zenModeEnabled}),children:le(Qt,{className:pd.SHAPE_ACTIONS_MENU,padding:2,style:{maxHeight:`${t.height-166}px`},children:le(iu,{appState:t,elementsMap:E.scene.getNonDeletedElementsMap(),renderAction:e.renderAction})})}),Q=()=>{let Y=Ta(t,n);return le(pu,{side:"top",children:Qr("div",{className:"App-menu App-menu_top",children:[Qr(Ut.Col,{gap:6,className:Zc("App-menu_top__left"),children:[I(),Y&&F()]}),!t.viewModeEnabled&&le(Ni,{heading:"shapes",className:"shapes-section",children:W=>Qr("div",{style:{position:"relative"},children:[h&&le(k.WelcomeScreenToolbarHintTunnel.Out,{}),le(Ut.Col,{gap:4,align:"start",children:Qr(Ut.Row,{gap:1,className:Zc("App-toolbar-container",{"zen-mode":t.zenModeEnabled}),children:[Qr(Qt,{padding:1,className:Zc("App-toolbar",{"zen-mode":t.zenModeEnabled}),children:[W,Qr(Ut.Row,{gap:1,children:[le(hu,{zenModeEnabled:t.zenModeEnabled,checked:t.penMode,onChange:()=>l(null),title:b("toolBar.penMode"),penDetected:t.penDetected}),le(uu,{checked:t.activeTool.locked,onChange:a,title:b("toolBar.lock")}),le("div",{className:"App-toolbar__divider"}),le(fu,{checked:Do(t),onChange:()=>s(),title:b("toolBar.hand"),isMobile:!0}),le(au,{appState:t,activeTool:t.activeTool,UIOptions:p,app:E})]})]}),w&&le(Qt,{style:{marginLeft:8,alignSelf:"center",height:"fit-content"},children:le(f5,{title:b("toolBar.laser"),checked:t.activeTool.type===wt.laser,onChange:()=>E.setActiveTool({type:wt.laser}),isMobile:!0})})]})})]})}),Qr("div",{className:Zc("layer-ui__wrapper__top-right zen-mode-transition",{"transition-right":t.zenModeEnabled}),children:[t.collaborators.size>0&&le(bu,{collaborators:t.collaborators,userToFollow:t.userToFollow?.socketId||null}),d?.(S.editor.isMobile,t),!t.viewModeEnabled&&(!oe||t.openSidebar?.name!==Or.name)&&le(k.DefaultSidebarTriggerTunnel.Out,{})]})]})})},j=()=>le(Tu,{__fallback:!0,onDock:Y=>{xe("sidebar",`toggleDock (${Y?"dock":"undock"})`,`(${S.editor.isMobile?"mobile":"desktop"})`)}}),oe=xk(Wc,He),Ce=Qr(H5,{children:[x,le(Ek,{UIOptions:p}),le(Tu.Trigger,{__fallback:!0,icon:ap,title:ei(b("toolBar.library")),onToggle:Y=>{Y&&xe("sidebar",`${Or.name} (open)`,`button (${S.editor.isMobile?"mobile":"desktop"})`)},tab:Or.defaultTab,children:b("toolBar.library")}),le(yk,{}),t.openDialog?.name==="ttd"&&le(p2,{__fallback:!0}),t.isLoading&&le(vd,{delay:250}),t.errorMessage&&le(u6,{onClose:()=>o({errorMessage:null}),children:t.errorMessage}),R&&!S.editor.isMobile&&le(g3,{colorPickerType:R.colorPickerType,onCancel:()=>{_(null)},onChange:(Y,W,he,{altKey:Ae})=>{if(!(Y!=="elementBackground"&&Y!=="elementStroke"))if(he.length){for(let it of he)z(it,{[Ae&&R.swapPreviewOnAlt?Y==="elementBackground"?"strokeColor":"backgroundColor":Y==="elementBackground"?"backgroundColor":"strokeColor"]:W},!1),Pe.delete(it);St.getScene(he[0])?.informMutation()}else o(Y==="elementBackground"?{currentItemBackgroundColor:W}:{currentItemStrokeColor:W})},onSelect:(Y,W)=>{_(he=>he?.keepOpenOnAlt&&W.altKey?he:null),R?.onSelect?.(Y,W)}}),t.openDialog?.name==="help"&&le(k6,{onClose:()=>{o({openDialog:null})}}),t.openDialog?.name==="settings"&&le(v5,{openAIKey:y,isPersisted:v,onChange:A,onConfirm:(Y,W)=>{let he=t.openDialog?.name==="settings"?t.openDialog?.source:"settings";o({openDialog:null},()=>{L(Y,W,he)})},onClose:()=>{o({openDialog:null})}}),le(o6,{}),le(k.OverwriteConfirmDialogTunnel.Out,{}),O(),M(),t.pasteDialog.shown&&le(M6,{setAppState:o,appState:t,onClose:()=>o({pasteDialog:{shown:!1,data:null}})}),S.editor.isMobile&&le(S6,{app:E,appState:t,elements:n,actionManager:e,renderJSONExportDialog:M,renderImageExportDialog:O,setAppState:o,onLockToggle:a,onHandToolToggle:s,onPenModeToggle:l,renderTopRightUI:d,renderCustomStats:m,renderSidebars:j,device:S,renderWelcomeScreen:h,UIOptions:p}),!S.editor.isMobile&&Qr(H5,{children:[Qr("div",{className:"layer-ui__wrapper",style:t.openSidebar&&oe&&S.editor.canFitSidebar?{width:`calc(100% - ${v0}px)`}:{},children:[h&&le(k.WelcomeScreenCenterTunnel.Out,{}),Q(),le(O6,{appState:t,actionManager:e,showExitZenModeBtn:c,renderWelcomeScreen:h}),t.showStats&&le(gu,{appState:t,setAppState:o,elements:n,onClose:()=>{e.executeAction(Ii)},renderCustomStats:m}),t.scrolledOutside&&le("button",{className:"scroll-back-to-content",onClick:()=>{o(Y=>({...$o(n,Y)}))},children:b("buttons.scrollBackToContent")})]}),j()]})]});return le(Nf.Provider,{value:t,children:le(fk,{scope:k.jotaiScope,children:le(M1.Provider,{value:k,children:Ce})})})},z5=e=>{let{suggestedBindings:t,startBoundElement:r,cursorButton:o,scrollX:n,scrollY:i,...a}=e;return a},vk=(e,t)=>{if(e.children!==t.children)return!1;let{canvas:r,appState:o,...n}=e,{canvas:i,appState:a,...s}=t;return Je(z5(o),z5(a),{selectedElementIds:Je,selectedGroupIds:Je})&&Je(n,s)},_5=gk.memo(wk,vk);f();import{useCallback as Ck,useEffect as Tk,useRef as Ak}from"react";import{jsx as G5,jsxs as Ik}from"react/jsx-runtime";var Sk=5e3,U5=({message:e,onClose:t,closable:r=!1,duration:o=Sk,style:n})=>{let i=Ak(0),a=o!==1/0,s=Ck(()=>{a&&(i.current=window.setTimeout(()=>t(),o))},[t,o,a]);return Tk(()=>{if(a)return s(),()=>clearTimeout(i.current)},[s,e,o,a]),Ik("div",{className:"Toast",onMouseEnter:a?()=>clearTimeout(i?.current):void 0,onMouseLeave:a?s:void 0,style:n,children:[G5("p",{className:"Toast__message",children:e}),r&&G5(ce,{icon:co,"aria-label":"close",type:"icon",onClick:t,className:"close"})]})};f();ge();Oe();Ze();var u2=H({name:"viewMode",label:"labels.viewMode",paletteName:"Toggle view mode",icon:_s,viewMode:!0,trackEvent:{category:"canvas",predicate:e=>!e.viewModeEnabled},perform(e,t){return{appState:{...t,viewModeEnabled:!this.checked(t)},storeAction:D.NONE}},checked:e=>e.viewModeEnabled,predicate:(e,t,r)=>typeof r.viewModeEnabled>"u",keyTest:e=>!e[T.CTRL_OR_CMD]&&e.altKey&&e.code===fe.R});Sr();bg();Dn();lt();import EL from"lodash.throttle";ga();fc();f();be();Ge();lt();se();G();Zo();var Ou=class e{scene;onSceneUpdated;constructor({scene:t,onSceneUpdated:r}){this.scene=t,this.onSceneUpdated=r}static loadedFontFaces=new Set;onFontsLoaded=t=>{if(t.every(o=>{let n=`${o.family}-${o.style}-${o.weight}`;return e.loadedFontFaces.has(n)?!0:(e.loadedFontFaces.add(n),!1)}))return!1;let r=!1;this.scene.mapElements(o=>U(o)&&!Ie(o)?(Pe.delete(o),r=!0,ie(o,{...gs(o,pt(o,this.scene.getNonDeletedElementsMap()),this.scene.getNonDeletedElementsMap())})):o),r&&this.onSceneUpdated()};loadFontsForElements=async t=>{let r=await Promise.all([...new Set(t.filter(o=>U(o)).map(o=>o.fontFamily))].map(o=>{let n=Ve({fontFamily:o,fontSize:16});if(!document.fonts?.check?.(n))return document.fonts?.load?.(n)}));this.onFontsLoaded(r.flat().filter(Boolean))}};nr();ii();f();be();nr();nr();ge();G();hs();Ze();se();Oe();var W5=(e,t)=>{let r=t.scene.getSelectedElements(e);return r.length===1&&ee(r[0])},Y5=H({name:"selectAllElementsInFrame",label:"labels.selectAllElementsInFrame",trackEvent:{category:"canvas"},perform:(e,t,r,o)=>{let n=o.scene.getSelectedElements(t).at(0)||null;if(ee(n)){let i=Vr(Ee(e),n.id).filter(a=>!(a.type==="text"&&a.containerId));return{elements:e,appState:{...t,selectedElementIds:i.reduce((a,s)=>(a[s.id]=!0,a),{})},storeAction:D.CAPTURE}}return{elements:e,appState:t,storeAction:D.NONE}},predicate:(e,t,r,o)=>W5(t,o)}),V5=H({name:"removeAllElementsFromFrame",label:"labels.removeAllElementsFromFrame",trackEvent:{category:"history"},perform:(e,t,r,o)=>{let n=o.scene.getSelectedElements(t).at(0)||null;return ee(n)?{elements:Dg(e,n),appState:{...t,selectedElementIds:{[n.id]:!0}},storeAction:D.CAPTURE}:{elements:e,appState:t,storeAction:D.NONE}},predicate:(e,t,r,o)=>W5(t,o)}),s0e=H({name:"updateFrameRendering",label:"labels.updateFrameRendering",viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t)=>({elements:e,appState:{...t,frameRendering:{...t.frameRendering,enabled:!t.frameRendering.enabled}},storeAction:D.NONE}),checked:e=>e.frameRendering.enabled}),l0e=H({name:"setFrameAsActiveTool",label:"toolBar.frame",trackEvent:{category:"toolbar"},icon:hp,viewMode:!1,perform:(e,t,r,o)=>{let n=Qe(t,{type:"frame"});return Wr(o.interactiveCanvas,{...t,activeTool:n}),{elements:e,appState:{...t,activeTool:Qe(t,{type:"frame"})},storeAction:D.NONE}},keyTest:e=>!e[T.CTRL_OR_CMD]&&!e.shiftKey&&!e.altKey&&e.key.toLocaleLowerCase()===T.F});oi();f();V();st();se();mr();ge();zt();ii();var Mk=8,K5=99999,Bu=e=>Mk/e,fo=class e{static referenceSnapPoints=null;static visibleGaps=null;static setReferenceSnapPoints=t=>{e.referenceSnapPoints=t};static getReferenceSnapPoints=()=>e.referenceSnapPoints;static setVisibleGaps=t=>{e.visibleGaps=t};static getVisibleGaps=()=>e.visibleGaps;static destroy=()=>{e.referenceSnapPoints=null,e.visibleGaps=null}},Kn=({event:e,appState:t,selectedElements:r})=>e?t.objectsSnapModeEnabled&&!e[T.CTRL_OR_CMD]||!t.objectsSnapModeEnabled&&e[T.CTRL_OR_CMD]&&t.gridSize===null:r.length===1&&r[0].type==="arrow"?!1:t.objectsSnapModeEnabled,kk=(e,t,r=.01)=>Math.abs(e-t)<=r,jc=(e,t,{omitCenter:r,boundingBoxCorners:o,dragOffset:n}={omitCenter:!1,boundingBoxCorners:!1})=>{let i=[];if(e.length===1){let a=e[0],[s,l,c,d,m,p]=re(a,t);n&&(s+=n.x,c+=n.x,m+=n.x,l+=n.y,d+=n.y,p+=n.y);let u=(c-s)/2,h=(d-l)/2;if((a.type==="diamond"||a.type==="ellipse")&&!o){let x=Ue([s,l+h],[m,p],a.angle),E=Ue([s+u,l],[m,p],a.angle),w=Ue([c,l+h],[m,p],a.angle),y=Ue([s+u,d],[m,p],a.angle);i=r?[x,E,w,y]:[x,E,w,y,[m,p]]}else{let x=Ue([s,l],[m,p],a.angle),E=Ue([c,l],[m,p],a.angle),w=Ue([s,d],[m,p],a.angle),y=Ue([c,d],[m,p],a.angle);i=r?[x,E,w,y]:[x,E,w,y,[m,p]]}}else if(e.length>1){let[a,s,l,c]=em(e,n??{x:0,y:0}),d=l-a,m=c-s,p=[a,s],u=[l,s],h=[a,c],x=[l,c],E=[a+d/2,s+m/2];i=r?[p,u,h,x]:[p,u,h,x,E]}return i.map(a=>[ht(a[0]),ht(a[1])])},j5=(e,t,r,o)=>{let n=t.filter(i=>ee(i)).map(i=>i.id);return Xg(e,t,r,o).filter(i=>!(i.frameId&&n.includes(i.frameId)))},q5=(e,t,r,o)=>{let n=j5(e,t,r,o),i=ha(n,o).filter(m=>!(m.length===1&&Ie(m[0]))).map(m=>Te(m).map(p=>ht(p))),a=i.sort((m,p)=>m[0]-p[0]),s=[],l=0;e:for(let m=0;m<a.length;m++){let p=a[m];for(let u=m+1;u<a.length;u++){if(++l>K5)break e;let h=a[u],[,x,E,w]=p,[y,v,,A]=h;E<y&&Dl([x,w],[v,A])&&s.push({startBounds:p,endBounds:h,startSide:[[E,x],[E,w]],endSide:[[y,v],[y,A]],length:y-E,overlap:Rl([x,w],[v,A])})}}let c=i.sort((m,p)=>m[1]-p[1]),d=[];l=0;e:for(let m=0;m<c.length;m++){let p=c[m];for(let u=m+1;u<c.length;u++){if(++l>K5)break e;let h=c[u],[x,,E,w]=p,[y,v,A]=h;w<v&&Dl([x,E],[y,A])&&d.push({startBounds:p,endBounds:h,startSide:[[x,w],[E,w]],endSide:[[y,v],[A,v]],length:v-w,overlap:Rl([x,E],[y,A])})}}return{horizontalGaps:s,verticalGaps:d}},X5=(e,t,r,o,n,i,a)=>{if(!Kn({appState:r,event:o,selectedElements:e}))return[];if(e.length===0)return[];let s=fo.getVisibleGaps();if(s){let{horizontalGaps:l,verticalGaps:c}=s,[d,m,p,u]=em(e,t).map(E=>ht(E)),h=(d+p)/2,x=(m+u)/2;for(let E of l){if(!Dl([m,u],E.overlap))continue;let w=E.startSide[0][0]+E.length/2,y=ht(w-h);if(E.length>p-d&&Math.abs(y)<=a.x){Math.abs(y)<a.x&&(n.length=0),a.x=Math.abs(y);let M={type:"gap",direction:"center_horizontal",gap:E,offset:y};n.push(M);continue}let[,,A]=E.endBounds,L=d-A,S=ht(E.length-L);if(Math.abs(S)<=a.x){Math.abs(S)<a.x&&(n.length=0),a.x=Math.abs(S);let M={type:"gap",direction:"side_right",gap:E,offset:S};n.push(M);continue}let[k,,,]=E.startBounds,R=k-p,_=ht(R-E.length);if(Math.abs(_)<=a.x){Math.abs(_)<a.x&&(n.length=0),a.x=Math.abs(_);let M={type:"gap",direction:"side_left",gap:E,offset:_};n.push(M);continue}}for(let E of c){if(!Dl([d,p],E.overlap))continue;let w=E.startSide[0][1]+E.length/2,y=ht(w-x);if(E.length>u-m&&Math.abs(y)<=a.y){Math.abs(y)<a.y&&(i.length=0),a.y=Math.abs(y);let M={type:"gap",direction:"center_vertical",gap:E,offset:y};i.push(M);continue}let[,A,,]=E.startBounds,L=A-u,S=ht(L-E.length);if(Math.abs(S)<=a.y){Math.abs(S)<a.y&&(i.length=0),a.y=Math.abs(S);let M={type:"gap",direction:"side_top",gap:E,offset:S};i.push(M);continue}let[,,,k]=E.endBounds,R=ht(m-k),_=E.length-R;if(Math.abs(_)<=a.y){Math.abs(_)<a.y&&(i.length=0),a.y=Math.abs(_);let M={type:"gap",direction:"side_bottom",gap:E,offset:_};i.push(M);continue}}}},Q5=(e,t,r,o)=>{let n=j5(e,t,r,o);return ha(n,o).filter(i=>!(i.length===1&&Ie(i[0]))).flatMap(i=>jc(i,o))},ul=(e,t,r,o,n,i,a)=>{if(!Kn({appState:r,event:o,selectedElements:e})||e.length===0&&t.length===0)return[];let s=fo.getReferenceSnapPoints();if(s)for(let l of t)for(let c of s){let d=c[0]-l[0],m=c[1]-l[1];Math.abs(d)<=a.x&&(Math.abs(d)<a.x&&(n.length=0),n.push({type:"point",points:[l,c],offset:d}),a.x=Math.abs(d)),Math.abs(m)<=a.y&&(Math.abs(m)<a.y&&(i.length=0),i.push({type:"point",points:[l,c],offset:m}),a.y=Math.abs(m))}},J5=(e,t,r,o,n)=>{let i=ue(e,r);if(!Kn({appState:r,event:o,selectedElements:i})||i.length===0)return{snapOffset:{x:0,y:0},snapLines:[]};t.x=ht(t.x),t.y=ht(t.y);let a=[],s=[],l=Bu(r.zoom.value),c={x:l,y:l},d=jc(i,n,{dragOffset:t});ul(i,d,r,o,a,s,c),X5(i,t,r,o,a,s,c);let m={x:a[0]?.offset??0,y:s[0]?.offset??0};c.x=0,c.y=0,a.length=0,s.length=0;let p={x:ht(t.x+m.x),y:ht(t.y+m.y)};ul(i,jc(i,n,{dragOffset:p}),r,o,a,s,c),X5(i,p,r,o,a,s,c);let u=h2(a,s),h=Pk(i,p,[...a,...s].filter(x=>x.type==="gap"));return{snapOffset:m,snapLines:[...u,...h]}},ht=e=>Math.round(e*10**6)/10**6,Z5=e=>{let t=new Map;for(let r of e){let o=r.join(",");t.has(o)||t.set(o,r)}return Array.from(t.values())},h2=(e,t)=>{let r={},o={};if(e.length>0){for(let n of e)if(n.type==="point"){let i=ht(n.points[0][0]);r[i]||(r[i]=[]),r[i].push(...n.points.map(a=>[ht(a[0]),ht(a[1])]))}}if(t.length>0){for(let n of t)if(n.type==="point"){let i=ht(n.points[0][1]);o[i]||(o[i]=[]),o[i].push(...n.points.map(a=>[ht(a[0]),ht(a[1])]))}}return Object.entries(r).map(([n,i])=>({type:"points",points:Z5(i.map(a=>[Number(n),a[1]]).sort((a,s)=>a[1]-s[1]))})).concat(Object.entries(o).map(([n,i])=>({type:"points",points:Z5(i.map(a=>[a[0],Number(n)]).sort((a,s)=>a[0]-s[0]))})))},Lk=e=>{let t=new Map;for(let r of e){let o=r.points.flat().map(n=>[ht(n)]).join(",");t.has(o)||t.set(o,r)}return Array.from(t.values())},Pk=(e,t,r)=>{let[o,n,i,a]=em(e,t),s=[];for(let l of r){let[c,d,m,p]=l.gap.startBounds,[u,h,x,E]=l.gap.endBounds,w=Rl([n,a],l.gap.overlap),y=Rl([o,i],l.gap.overlap);switch(l.direction){case"center_horizontal":{if(w){let v=(w[0]+w[1])/2;s.push({type:"gap",direction:"horizontal",points:[[l.gap.startSide[0][0],v],[o,v]]},{type:"gap",direction:"horizontal",points:[[i,v],[l.gap.endSide[0][0],v]]})}break}case"center_vertical":{if(y){let v=(y[0]+y[1])/2;s.push({type:"gap",direction:"vertical",points:[[v,l.gap.startSide[0][1]],[v,n]]},{type:"gap",direction:"vertical",points:[[v,a],[v,l.gap.endSide[0][1]]]})}break}case"side_right":{if(w){let v=(w[0]+w[1])/2;s.push({type:"gap",direction:"horizontal",points:[[m,v],[u,v]]},{type:"gap",direction:"horizontal",points:[[x,v],[o,v]]})}break}case"side_left":{if(w){let v=(w[0]+w[1])/2;s.push({type:"gap",direction:"horizontal",points:[[i,v],[c,v]]},{type:"gap",direction:"horizontal",points:[[m,v],[u,v]]})}break}case"side_top":{if(y){let v=(y[0]+y[1])/2;s.push({type:"gap",direction:"vertical",points:[[v,a],[v,d]]},{type:"gap",direction:"vertical",points:[[v,p],[v,h]]})}break}case"side_bottom":{if(y){let v=(y[0]+y[1])/2;s.push({type:"gap",direction:"vertical",points:[[v,p],[v,h]]},{type:"gap",direction:"vertical",points:[[v,E],[v,n]]})}break}}}return Lk(s.map(l=>({...l,points:l.points.map(c=>[ht(c[0]),ht(c[1])])})))},$5=(e,t,r,o,n,i)=>{if(!Kn({event:o,selectedElements:e,appState:r})||e.length===0||e.length===1&&!kk(e[0].angle,0))return{snapOffset:{x:0,y:0},snapLines:[]};let[a,s,l,c]=Te(t);i&&(i.includes("e")?l+=n.x:i.includes("w")&&(a+=n.x),i.includes("n")?s+=n.y:i.includes("s")&&(c+=n.y));let d=[];if(i)switch(i){case"e":{d.push([l,s],[l,c]);break}case"w":{d.push([a,s],[a,c]);break}case"n":{d.push([a,s],[l,s]);break}case"s":{d.push([a,c],[l,c]);break}case"ne":{d.push([l,s]);break}case"nw":{d.push([a,s]);break}case"se":{d.push([l,c]);break}case"sw":{d.push([a,c]);break}}let m=Bu(r.zoom.value),p={x:m,y:m},u=[],h=[];ul(t,d,r,o,u,h,p);let x={x:u[0]?.offset??0,y:h[0]?.offset??0};p.x=0,p.y=0,u.length=0,h.length=0;let[E,w,y,v]=Te(e).map(S=>ht(S));ul(e,[[E,w],[E,v],[y,w],[y,v]],r,o,u,h,p);let L=h2(u,h);return{snapOffset:x,snapLines:L}},ev=(e,t,r,o,n,i)=>{if(!Kn({event:r,selectedElements:[e],appState:t}))return{snapOffset:{x:0,y:0},snapLines:[]};let a=[[o.x+n.x,o.y+n.y]],s=Bu(t.zoom.value),l={x:s,y:s},c=[],d=[];ul([e],a,t,r,c,d,l);let m={x:c[0]?.offset??0,y:d[0]?.offset??0};l.x=0,l.y=0,c.length=0,d.length=0;let p=jc([e],i,{boundingBoxCorners:!0,omitCenter:!0});ul([e],p,t,r,c,d,l);let u=h2(c,d);return{snapOffset:m,snapLines:u}},tv=(e,t,r,o,n)=>{if(!Kn({event:o,selectedElements:[],appState:t}))return{originOffset:{x:0,y:0},snapLines:[]};let i=Xg(e,[],t,n),a=Bu(t.zoom.value),s={x:a,y:a},l=[],c=[];for(let d of i){let m=jc([d],n);for(let p of m){let u=p[0]-r.x;Math.abs(u)<=Math.abs(s.x)&&(Math.abs(u)<Math.abs(s.x)&&(c.length=0),c.push({type:"pointer",points:[p,[p[0],r.y]],direction:"vertical"}),s.x=u);let h=p[1]-r.y;Math.abs(h)<=Math.abs(s.y)&&(Math.abs(h)<Math.abs(s.y)&&(l.length=0),l.push({type:"pointer",points:[p,[r.x,p[1]]],direction:"horizontal"}),s.y=h)}}return{originOffset:{x:c.length>0?c[0].points[0][0]-r.x:0,y:l.length>0?l[0].points[0][1]-r.y:0},snapLines:[...c,...l]}},rv=e=>e===wt.rectangle||e===wt.ellipse||e===wt.diamond||e===wt.frame||e===wt.magicframe||e===wt.image;f();import{jsx as bo,jsxs as ov}from"react/jsx-runtime";var Dk=()=>ov("div",{"data-testid":"brave-measure-text-error",children:[bo("p",{children:bo(ur,{i18nKey:"errors.brave_measure_text_error.line1",bold:e=>bo("span",{style:{fontWeight:600},children:e})})}),bo("p",{children:bo(ur,{i18nKey:"errors.brave_measure_text_error.line2",bold:e=>bo("span",{style:{fontWeight:600},children:e})})}),bo("p",{children:bo(ur,{i18nKey:"errors.brave_measure_text_error.line3",link:e=>bo("a",{href:"http://docs.excalidraw.com/docs/@excalidraw/excalidraw/faq#turning-off-aggresive-block-fingerprinting-in-brave-browser",children:e})})}),bo("p",{children:bo(ur,{i18nKey:"errors.brave_measure_text_error.line4",issueLink:e=>bo("a",{href:"https://github.com/excalidraw/excalidraw/issues/new",children:e}),discordLink:e=>ov("a",{href:"https://discord.gg/UexuTaE",children:[e,"."]})})})]}),nv=Dk;f();V();be();io();kn();lt();G();Ll();So();no();var Fu={width:100,height:0},Hi=100,Rk=(e,t,r)=>{let o=Ht({x:0,y:0,textAlign:$n.CENTER,verticalAlign:yt.MIDDLE,...t,containerId:e.id,strokeColor:t.strokeColor||e.strokeColor});return Object.assign(e,{boundElements:(e.boundElements||[]).concat({type:"text",id:o.id})}),Nt(o,e,r),[e,o]},iv=(e,t,r,o,n)=>{let i,a;if(Object.assign(e,{startBinding:e?.startBinding||null,endBinding:e.endBinding||null}),t){let d=t?.width??Hi,m=t?.height??Hi,p;t.id&&(p=o.getElement(t.id),p||console.error(`No element for start binding with id ${t.id} found`));let u=t.x||e.x-d,h=t.y||e.y-m/2,x=p?p.type:t.type;if(x){if(x==="text"){let E="";p&&p.type==="text"?E=p.text:t.type==="text"&&(E=t.text),E||console.error(`No text found for start binding text element for ${e.id}`),i=Ht({x:u,y:h,type:"text",...p,...t,text:E}),Object.assign(i,{x:t.x||e.x-i.width,y:t.y||e.y-i.height/2})}else switch(x){case"rectangle":case"ellipse":case"diamond":{i=Yr({x:u,y:h,width:d,height:m,...p,...t,type:x});break}default:Ao(e,`Unhandled element start type "${t.type}"`,!0)}sa(e,i,"start",n)}}if(r){let d=r?.height??Hi,m=r?.width??Hi,p;r.id&&(p=o.getElement(r.id),p||console.error(`No element for end binding with id ${r.id} found`));let u=r.x||e.x+e.width,h=r.y||e.y-d/2,x=p?p.type:r.type;if(x){if(x==="text"){let E="";p&&p.type==="text"?E=p.text:r.type==="text"&&(E=r.text),E||console.error(`No text found for end binding text element for ${e.id}`),a=Ht({x:u,y:h,type:"text",...p,...r,text:E}),Object.assign(a,{y:r.y||e.y-a.height/2})}else switch(x){case"rectangle":case"ellipse":case"diamond":{a=Yr({x:u,y:h,width:m,height:d,...p,...r,type:x});break}default:Ao(e,`Unhandled element end type "${x}"`,!0)}sa(e,a,"end",n)}}if(e.points.length<2)return{linearElement:e,startBoundElement:i,endBoundElement:a};let s=e.points.length-1,l=.5,c=Yo(e.points);return e.points[s][0]>e.points[s-1][0]&&(c[0][0]=l,c[s][0]-=l),e.points[s][0]<e.points[s-1][0]&&(c[0][0]=-l,c[s][0]+=l),e.points[s][1]>e.points[s-1][1]&&(c[0][1]=l,c[s][1]-=l),e.points[s][1]<e.points[s-1][1]&&(c[0][1]=-l,c[s][1]+=l),Object.assign(e,{points:c}),{linearElement:e,startBoundElement:i,endBoundElement:a}},g2=class{excalidrawElements=new Map;add=t=>{t&&this.excalidrawElements.set(t.id,t)};getElements=()=>cr(Array.from(this.excalidrawElements.values()));getElementsMap=()=>Fr(X(this.getElements()));getElement=t=>this.excalidrawElements.get(t)},Kc=(e,t)=>{if(!e)return[];let r=Yo(e),o=new g2,n=new Map,i=new Map;for(let s of r){let l,c=s.id;switch(t?.regenerateIds!==!1&&Object.assign(s,{id:Rt()}),s.type){case"rectangle":case"ellipse":case"diamond":{let m=s?.label?.text&&s.width===void 0?0:s?.width||Hi,p=s?.label?.text&&s.height===void 0?0:s?.height||Hi;l=Yr({...s,width:m,height:p});break}case"line":{let m=s.width||Fu.width,p=s.height||Fu.height;l=ao({width:m,height:p,points:[[0,0],[m,p]],...s});break}case"arrow":{let m=s.width||Fu.width,p=s.height||Fu.height;l=ao({width:m,height:p,endArrowhead:"arrow",points:[[0,0],[m,p]],...s}),Object.assign(l,Rd(l.points));break}case"text":{let m=s?.fontFamily||Kt,p=s?.fontSize||Lt,u=s?.lineHeight||_r(m),h=s.text??"",x=pi(h),E=Lo(x,Ve({fontFamily:m,fontSize:p}),u);l=Ht({width:E.width,height:E.height,fontFamily:m,fontSize:p,...s});break}case"image":{l=Xl({width:s?.width||Hi,height:s?.height||Hi,...s});break}case"frame":{l=mm({x:0,y:0,...s});break}case"magicframe":{l=Kl({x:0,y:0,...s});break}case"freedraw":case"iframe":case"embeddable":{l=s;break}default:l=s,Ao(s,`Unhandled element type "${s.type}"`,!0)}o.getElement(l.id)?console.error(`Duplicate id found for ${l.id}`):(o.add(l),n.set(l.id,s),c&&i.set(c,l.id))}let a=o.getElementsMap();for(let[s,l]of n){let c=o.getElement(s);switch(l.type){case"rectangle":case"ellipse":case"diamond":case"arrow":{if(l.label?.text){let[d,m]=Rk(c,l?.label,a);if(o.add(d),o.add(m),d.type==="arrow"){let p=l.type==="arrow"?l?.start:void 0,u=l.type==="arrow"?l?.end:void 0;if(p&&p.id){let w=i.get(p.id);w&&Object.assign(p,{id:w})}if(u&&u.id){let w=i.get(u.id);w&&Object.assign(u,{id:w})}let{linearElement:h,startBoundElement:x,endBoundElement:E}=iv(d,p,u,o,a);d=h,o.add(h),o.add(x),o.add(E)}}else switch(l.type){case"arrow":{let{start:d,end:m}=l;if(d&&d.id){let x=i.get(d.id);Object.assign(d,{id:x})}if(m&&m.id){let x=i.get(m.id);Object.assign(m,{id:x})}let{linearElement:p,startBoundElement:u,endBoundElement:h}=iv(c,d,m,o,a);o.add(p),o.add(u),o.add(h);break}}break}}}for(let[s,l]of n){if(l.type!=="frame"&&l.type!=="magicframe")continue;let c=o.getElement(s);if(!c)throw new Error(`Excalidraw element with id ${s} doesn't exist`);let d=[];l.children.forEach(y=>{let v=i.get(y);if(!v)throw new Error(`Element with ${y} wasn't mapped correctly`);let A=o.getElement(v);if(!A)throw new Error(`Frame element with id ${v} doesn't exist`);Object.assign(A,{frameId:c.id}),A?.boundElements?.forEach(L=>{let S=o.getElement(L.id);if(!S)throw new Error(`Bound element with id ${L.id} doesn't exist`);Object.assign(S,{frameId:c.id}),d.push(S)}),d.push(A)});let[m,p,u,h]=Te(d),x=10;m=m-x,p=p-x,u=u+x,h=h+x;let E=Math.max(c?.width,u-m),w=Math.max(c?.height,h-p);Object.assign(c,{x:m,y:p,width:E,height:w})}return o.getElements()};f();f();G();V();import Zk,{useEffect as jk,useRef as qk}from"react";f();G();import{unstable_batchedUpdates as av}from"react-dom";import{version as Nk}from"react";var dt=e=>t=>{av(e,t)},zu=e=>es(t=>{av(e,t)}),Hu=(()=>{let e;try{let r=Nk.split(".");e=Number(r[0])>17}catch{e=!1}let t=!1;return()=>window.EXCALIDRAW_THROTTLE_RENDER===!0?e?!0:(t||(t=!0,console.warn("Excalidraw: render throttling is disabled on React versions < 18.")),!1):!1})();f();be();Cn();mr();fc();G();V();f();V();var Ok="#ff6b6b",Bk="#ff0000",sv=1,lv=2,cv=(e,t)=>{if(!t.snapLines.length)return;let r=t.theme===ae.LIGHT||t.zenModeEnabled?Ok:Bk,o=(t.zenModeEnabled?sv*1.5:sv)/t.zoom.value;e.save(),e.translate(t.scrollX,t.scrollY);for(let n of t.snapLines)n.type==="pointer"?(e.lineWidth=o,e.strokeStyle=r,zk(n,e,t)):n.type==="gap"?(e.lineWidth=o,e.strokeStyle=r,Hk(n.points[0],n.points[1],n.direction,t,e)):n.type==="points"&&(e.lineWidth=o,e.strokeStyle=r,Fk(n,e,t));e.restore()},Fk=(e,t,r)=>{if(!r.zenModeEnabled){let o=e.points[0],n=e.points[e.points.length-1];xo(o,n,t)}for(let o of e.points)dv(o,r,t)},zk=(e,t,r)=>{dv(e.points[0],r,t),r.zenModeEnabled||xo(e.points[0],e.points[1],t)},dv=([e,t],r,o)=>{o.save();let n=(r.zenModeEnabled?lv*1.5:lv)/r.zoom.value;o.beginPath(),o.moveTo(e-n,t-n),o.lineTo(e+n,t+n),o.moveTo(e+n,t-n),o.lineTo(e-n,t+n),o.stroke(),o.restore()},xo=(e,t,r)=>{r.beginPath(),r.lineTo(...e),r.lineTo(...t),r.stroke()},Hk=(e,t,r,o,n)=>{let i=8/o.zoom.value,a=i/2,s=i/4;if(r==="horizontal"){let l=[(e[0]+t[0])/2,e[1]];o.zenModeEnabled||xo([e[0],e[1]-i],[e[0],e[1]+i],n),xo([l[0]-s,l[1]-a],[l[0]-s,l[1]+a],n),xo([l[0]+s,l[1]-a],[l[0]+s,l[1]+a],n),o.zenModeEnabled||(xo([t[0],t[1]-i],[t[0],t[1]+i],n),xo(e,t,n))}else{let l=[e[0],(e[1]+t[1])/2];o.zenModeEnabled||xo([e[0]-i,e[1]],[e[0]+i,e[1]],n),xo([l[0]-a,l[1]-s],[l[0]+a,l[1]-s],n),xo([l[0]-a,l[1]+s],[l[0]+a,l[1]+s],n),o.zenModeEnabled||(xo([t[0]-i,t[1]],[t[0]+i,t[1]],n),xo(e,t,n))}};io();Zt();wg();se();import _u from"open-color";var _k=(e,t,r)=>{let{elementId:o,hoverPointIndex:n}=t.selectedLinearElement;if(t.editingLinearElement?.selectedPointsIndices?.includes(n))return;let i=Z.getElement(o,r);if(!i)return;let a=Z.getPointAtIndexGlobalCoordinates(i,n,r);e.save(),e.translate(t.scrollX,t.scrollY),b2(a,e,t),e.restore()},b2=(e,t,r)=>{t.fillStyle="rgba(105, 101, 219, 0.4)",dc(t,e[0],e[1],Z.POINT_HANDLE_SIZE/r.zoom.value,!1)},qc=(e,t,r,o,n,i,a,s,l=!1,c=0)=>{e.save(),e.translate(i,a),e.rotate(s),l&&e.fillRect(t-i,r-a,o,n),c&&e.roundRect?(e.beginPath(),e.roundRect(t-i,r-a,o,n,c),e.stroke(),e.closePath()):e.strokeRect(t-i,r-a,o,n),e.restore()},Gk=(e,t,r,o,n,i)=>{e.save(),e.translate(o,n),e.rotate(i),e.beginPath(),e.moveTo(0,r/2),e.lineTo(t/2,0),e.lineTo(0,-r/2),e.lineTo(-t/2,0),e.closePath(),e.stroke(),e.restore()},Gu=(e,t,r,o,n,i=!1)=>{e.strokeStyle="#5e5ad8",e.setLineDash([]),e.fillStyle="rgba(255, 255, 255, 0.9)",n?e.fillStyle="rgba(134, 131, 226, 0.9)":i&&(e.fillStyle="rgba(177, 151, 252, 0.7)"),dc(e,r[0],r[1],o/t.zoom.value,!i)},Uk=(e,t,r,o,n,i)=>{e.beginPath(),e.ellipse(o,n,t/2,r/2,i,0,Math.PI*2),e.stroke()},Wk=(e,t,r)=>{let[o,n,i,a]=re(t,r),s=i-o,l=a-n,c=Ul(t,s,l),d=4;e.strokeStyle="rgba(0,0,0,.05)",e.lineWidth=c-d;let m=d/2+c/2;switch(t.type){case"rectangle":case"text":case"image":case"iframe":case"embeddable":case"frame":case"magicframe":qc(e,o-m,n-m,s+m*2,l+m*2,o+s/2,n+l/2,t.angle);break;case"diamond":let p=Math.hypot(s,l),u=m*p/l,h=m*p/s;Gk(e,s+u*2,l+h*2,o+s/2,n+l/2,t.angle);break;case"ellipse":Uk(e,s+m*2,l+m*2,o+s/2,n+l/2,t.angle);break}},Yk=(e,t,r)=>{let[o,n,i]=t,a=Ul(i,i.width,i.height);e.strokeStyle="rgba(0,0,0,0)",e.fillStyle="rgba(0,0,0,.05)",(n==="both"?[0,-1]:n==="start"?[0]:[-1]).forEach(l=>{let[c,d]=Z.getPointAtIndexGlobalCoordinates(o,l,r);dc(e,c,d,a)})},pv=(e,t,r,o=Jn*2)=>{let{angle:n,elementX1:i,elementY1:a,elementX2:s,elementY2:l,selectionColors:c,cx:d,cy:m,dashed:p,activeEmbeddable:u}=r,h=s-i,x=l-a,E=o/t.zoom.value,w=8/t.zoom.value,y=4/t.zoom.value;e.save(),e.translate(t.scrollX,t.scrollY),e.lineWidth=(u?4:1)/t.zoom.value;let v=c.length;for(let A=0;A<v;++A)e.strokeStyle=c[A],p&&e.setLineDash([w,y+(w+y)*(v-1)]),e.lineDashOffset=(w+y)*A,qc(e,i-E,a-E,h+E*2,x+E*2,d,m,n);e.restore()},Vk=(e,t,r,o)=>{let n=Array.isArray(r)?Yk:Wk;e.save(),e.translate(t.scrollX,t.scrollY),n(e,r,o),e.restore()},Kk=(e,t,r,o)=>{let[n,i,a,s]=re(r,o),l=a-n,c=s-i;e.strokeStyle="rgb(0,118,255)",e.lineWidth=qe.strokeWidth/t.zoom.value,e.save(),e.translate(t.scrollX,t.scrollY),qc(e,n,i,l,c,n+l/2,i+c/2,r.angle,!1,qe.radius/t.zoom.value),e.restore()},Xk=(e,t,r)=>{let o=r.filter(s=>s.groupIds.length===0),n=r.filter(s=>s.groupIds.length>0),i=s=>{let[l,c,d,m]=Te(s);return{angle:0,elementX1:l,elementX2:d,elementY1:c,elementY2:m,selectionColors:["rgb(0,118,255)"],dashed:!1,cx:l+(d-l)/2,cy:c+(m-c)/2,activeEmbeddable:!1}},a=s=>{let l=tt(r,s);return i(l)};Object.entries(om(n,t)).filter(([s,l])=>l).map(([s,l])=>s).map(s=>a(s)).concat(o.map(s=>i([s]))).forEach(s=>pv(e,t,s))},f2=(e,t,r,o)=>{if(!t.selectedLinearElement)return;e.save(),e.translate(t.scrollX,t.scrollY),e.lineWidth=1/t.zoom.value;let n=Z.getPointsGlobalCoordinates(r,o),{POINT_HANDLE_SIZE:i}=Z,a=t.editingLinearElement?i:i/2;n.forEach((l,c)=>{let d=!!t.editingLinearElement?.selectedPointsIndices?.includes(c);Gu(e,t,l,a,d)}),Z.getEditorMidPoints(r,o,t).filter(l=>l!==null).forEach(l=>{t?.selectedLinearElement?.segmentMidPointHoveredCoords&&Z.arePointsEqual(l,t.selectedLinearElement.segmentMidPointHoveredCoords)?t.editingLinearElement?(Gu(e,t,l,a,!1),b2(l,e,t)):(b2(l,e,t),Gu(e,t,l,a,!1)):(t.editingLinearElement||n.length===2)&&Gu(e,t,l,i/2,!1,!0)}),e.restore()},mv=(e,t,r,o,n)=>{Object.keys(o).forEach(i=>{let a=o[i];if(a!==void 0){let[s,l,c,d]=a;e.save(),e.lineWidth=1/r.zoom.value,t.selectionColor&&(e.strokeStyle=t.selectionColor),i==="rotation"?dc(e,s+c/2,l+d/2,c/2):e.roundRect?(e.beginPath(),e.roundRect(s,l,c,d,2/r.zoom.value),e.fill(),e.stroke()):qc(e,s,l,c,d,s+c/2,l+d/2,n,!0),e.restore()}})},uv=({canvas:e,elementsMap:t,visibleElements:r,selectedElements:o,scale:n,appState:i,renderConfig:a,device:s})=>{if(e===null)return{atLeastOneVisibleElement:!1,elementsMap:t};let[l,c]=Pm(e,n),d=Dm({canvas:e,scale:n,normalizedWidth:l,normalizedHeight:c});d.save(),d.scale(i.zoom.value,i.zoom.value);let m;if(r.forEach(h=>{i.editingLinearElement?.elementId===h.id&&h&&(m=h)}),m&&f2(d,i,m,t),i.selectionElement)try{KE(i.selectionElement,d,i)}catch(h){console.error(h)}i.isBindingEnabled&&i.suggestedBindings.filter(h=>h!=null).forEach(h=>{Vk(d,i,h,t)}),i.frameToHighlight&&Kk(d,i,i.frameToHighlight,t),i.elementsToHighlight&&Xk(d,i,i.elementsToHighlight);let p=o.some(h=>ee(h));if(o.length===1&&i.editingLinearElement?.elementId===o[0].id&&f2(d,i,o[0],t),i.selectedLinearElement&&i.selectedLinearElement.hoverPointIndex>=0&&_k(d,i,t),!i.multiElement&&!i.editingLinearElement){let h=$m(o,i);o.length===1&&ne(o[0])&&i.selectedLinearElement?.elementId===o[0].id&&!o[0].locked&&f2(d,i,o[0],t);let E=a.selectionColor||_u.black;if(h){let w=X(o),y=[];for(let A of t.values()){let L=[];w.has(A.id)&&!rm(i,A)&&L.push(E);let S=a.remoteSelectedElementIds.get(A.id);if(S&&L.push(...S.map(k=>Ba(k,i.collaborators.get(k)))),L.length){let[k,R,_,M,O,I]=re(A,t,!0);y.push({angle:A.angle,elementX1:k,elementY1:R,elementX2:_,elementY2:M,selectionColors:L,dashed:!!S,cx:O,cy:I,activeEmbeddable:i.activeEmbeddable?.element===A&&i.activeEmbeddable.state==="active"})}}let v=A=>{let L=tt(t,A),[S,k,R,_]=Te(L);y.push({angle:0,elementX1:S,elementX2:R,elementY1:k,elementY2:_,selectionColors:[_u.black],dashed:!0,cx:S+(R-S)/2,cy:k+(_-k)/2,activeEmbeddable:!1})};for(let A of Sn(i))v(A);i.editingGroupId&&v(i.editingGroupId),y.forEach(A=>pv(d,i,A))}if(d.save(),d.translate(i.scrollX,i.scrollY),o.length===1){d.fillStyle=_u.white;let w=gc(o[0],i.zoom,t,"mouse",Ca(s));!i.viewModeEnabled&&h&&mv(d,a,i,w,o[0].angle)}else if(o.length>1&&!i.isRotating){let w=Jn*2/i.zoom.value;d.fillStyle=_u.white;let[y,v,A,L]=Te(o),S=d.getLineDash();d.setLineDash([2/i.zoom.value]);let k=d.lineWidth;d.lineWidth=1/i.zoom.value,d.strokeStyle=E,qc(d,y-w,v-w,A-y+w*2,L-v+w*2,(y+A)/2,(v+L)/2,0),d.lineWidth=k,d.setLineDash(S);let R=Rs([y,v,A,L,(y+A)/2,(v+L)/2],0,i.zoom,"mouse",p?{...Ca(s),rotation:!0}:Ca(s));o.some(_=>!_.locked)&&mv(d,a,i,R,0)}d.restore()}cv(d,i),d.restore(),U3({context:d,renderConfig:a,appState:i,normalizedWidth:l,normalizedHeight:c});let u;return a.renderScrollbars&&(u=C6(r,l,c,i),d.save(),d.fillStyle=v6,d.strokeStyle="rgba(255,255,255,0.8)",[u.horizontal,u.vertical].forEach(h=>{h&&Pp(d,h.x,h.y,h.width,h.height,mn/2)}),d.restore()),{scrollBars:u,atLeastOneVisibleElement:r.length>0,elementsMap:t}},x2=es(e=>{let t=uv(e);e.callback?.(t)},{trailing:!0}),hv=(e,t)=>{if(t){x2(e);return}let r=uv(e);return e.callback(r),r};import{jsx as $k}from"react/jsx-runtime";var Qk=e=>{let t=qk(!1);return jk(()=>{if(!t.current){t.current=!0;return}let r=new Map,o=new Map,n=new Map,i=new Map,a=new Map;e.appState.collaborators.forEach((l,c)=>{if(l.selectedElementIds)for(let d of Object.keys(l.selectedElementIds))n.has(d)||n.set(d,[]),n.get(d).push(c);!l.pointer||l.pointer.renderCursor===!1||(l.username&&i.set(c,l.username),l.userState&&a.set(c,l.userState),o.set(c,Bt({sceneX:l.pointer.x,sceneY:l.pointer.y},e.appState)),r.set(c,l.button))});let s=e.containerRef?.current&&getComputedStyle(e.containerRef.current).getPropertyValue("--color-selection")||"#6965db";hv({canvas:e.canvas,elementsMap:e.elementsMap,visibleElements:e.visibleElements,selectedElements:e.selectedElements,scale:window.devicePixelRatio,appState:e.appState,renderConfig:{remotePointerViewportCoords:o,remotePointerButton:r,remoteSelectedElementIds:n,remotePointerUsernames:i,remotePointerUserStates:a,selectionColor:s,renderScrollbars:!1},device:e.device,callback:e.renderInteractiveSceneCallback},Hu())}),$k("canvas",{className:"excalidraw__canvas interactive",style:{width:e.appState.width,height:e.appState.height,cursor:e.appState.viewModeEnabled?Le.GRAB:Le.AUTO},width:e.appState.width*e.scale,height:e.appState.height*e.scale,ref:e.handleCanvasRef,onContextMenu:e.onContextMenu,onPointerMove:e.onPointerMove,onPointerUp:e.onPointerUp,onPointerCancel:e.onPointerCancel,onTouchMove:e.onTouchMove,onPointerDown:e.onPointerDown,onDoubleClick:e.appState.viewModeEnabled?void 0:e.onDoubleClick,children:b("labels.drawingCanvas")})},gv=e=>({zoom:e.zoom,scrollX:e.scrollX,scrollY:e.scrollY,width:e.width,height:e.height,viewModeEnabled:e.viewModeEnabled,editingGroupId:e.editingGroupId,editingLinearElement:e.editingLinearElement,selectedElementIds:e.selectedElementIds,frameToHighlight:e.frameToHighlight,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,theme:e.theme,pendingImageElementId:e.pendingImageElementId,selectionElement:e.selectionElement,selectedGroupIds:e.selectedGroupIds,selectedLinearElement:e.selectedLinearElement,multiElement:e.multiElement,isBindingEnabled:e.isBindingEnabled,suggestedBindings:e.suggestedBindings,isRotating:e.isRotating,elementsToHighlight:e.elementsToHighlight,collaborators:e.collaborators,activeEmbeddable:e.activeEmbeddable,snapLines:e.snapLines,zenModeEnabled:e.zenModeEnabled}),Jk=(e,t)=>e.selectionNonce!==t.selectionNonce||e.versionNonce!==t.versionNonce||e.scale!==t.scale||e.elementsMap!==t.elementsMap||e.visibleElements!==t.visibleElements||e.selectedElements!==t.selectedElements?!1:Je(gv(e.appState),gv(t.appState)),E2=Zk.memo(Qk,Jk);f();Om();G();import eL,{useEffect as tL,useRef as fv}from"react";import{jsx as nL}from"react/jsx-runtime";var rL=e=>{let t=fv(null),r=fv(!1);return tL(()=>{let o=t.current;if(!o)return;let n=e.canvas;r.current||(r.current=!0,o.replaceChildren(n),n.classList.add("excalidraw__canvas","static"));let i=`${e.appState.width}px`,a=`${e.appState.height}px`;n.style.width!==i&&(n.style.width=i),n.style.height!==a&&(n.style.height=a);let s=e.appState.width*e.scale,l=e.appState.height*e.scale;n.width!==s&&(n.width=s),n.height!==l&&(n.height=l),Nm({canvas:n,rc:e.rc,scale:e.scale,elementsMap:e.elementsMap,allElementsMap:e.allElementsMap,visibleElements:e.visibleElements,appState:e.appState,renderConfig:e.renderConfig},Hu())}),nL("div",{className:"excalidraw__canvas-wrapper",ref:t})},bv=e=>({zoom:e.zoom,scrollX:e.scrollX,scrollY:e.scrollY,width:e.width,height:e.height,viewModeEnabled:e.viewModeEnabled,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,theme:e.theme,pendingImageElementId:e.pendingImageElementId,shouldCacheIgnoreZoom:e.shouldCacheIgnoreZoom,viewBackgroundColor:e.viewBackgroundColor,exportScale:e.exportScale,selectedElementsAreBeingDragged:e.selectedElementsAreBeingDragged,gridSize:e.gridSize,frameRendering:e.frameRendering,selectedElementIds:e.selectedElementIds,frameToHighlight:e.frameToHighlight,editingGroupId:e.editingGroupId}),oL=(e,t)=>e.versionNonce!==t.versionNonce||e.scale!==t.scale||e.elementsMap!==t.elementsMap||e.visibleElements!==t.visibleElements?!1:Je(bv(e.appState),bv(t.appState))&&Je(e.renderConfig,t.renderConfig),y2=eL.memo(rL,oL);f();va();se();Om();G();var Qc=class{scene;constructor(t){this.scene=t}getRenderableElements=(()=>{let t=({elementsMap:o,zoom:n,offsetLeft:i,offsetTop:a,scrollX:s,scrollY:l,height:c,width:d})=>{let m=[];for(let p of o.values())wa(p,d,c,{zoom:n,offsetLeft:i,offsetTop:a,scrollX:s,scrollY:l},o)&&m.push(p);return m},r=({elements:o,editingElement:n,pendingImageElementId:i})=>{let a=Fr(new Map);for(let s of o)to(s)&&i===s.id||(!n||n.type!=="text"||s.id!==n.id)&&a.set(s.id,s);return a};return W0(({zoom:o,offsetLeft:n,offsetTop:i,scrollX:a,scrollY:s,height:l,width:c,editingElement:d,pendingImageElementId:m,versionNonce:p})=>{let u=this.scene.getNonDeletedElements(),h=r({elements:u,editingElement:d,pendingImageElementId:m}),x=t({elementsMap:h,zoom:o,offsetLeft:n,offsetTop:i,scrollX:a,scrollY:s,height:l,width:c});return{elementsMap:h,visibleElements:x}})})();destroy(){x2.cancel(),vg.cancel(),this.getRenderableElements.clear()}};Zo();f();import{useEffect as iL,useRef as aL}from"react";import{jsx as xv}from"react/jsx-runtime";var Ev=({trails:e})=>{let t=aL(null);return iL(()=>{if(t.current)for(let r of e)r.start(t.current);return()=>{for(let r of e)r.stop()}},e),xv("div",{className:"SVGLayer",children:xv("svg",{ref:t})})};hs();Jl();f();G();be();import{jsx as cL}from"react/jsx-runtime";var sL=5,lL=(e,t,r)=>{let[o,n]=re(e,r),{x:i,y:a}=Bt({sceneX:o+e.width,sceneY:n},t),s=i-t.offsetLeft+10,l=a-t.offsetTop;return{x:s,y:l}},w2=({children:e,element:t,elementsMap:r})=>{let o=Js();if(o.contextMenu||o.draggingElement||o.resizingElement||o.isRotating||o.openMenu||o.viewModeEnabled)return null;let{x:n,y:i}=lL(t,o,r);return cL("div",{className:"excalidraw-canvas-buttons",style:{top:`${i}px`,left:`${n}px`,padding:sL},children:e})};f();V();var dL=`You are a skilled front-end developer who builds interactive prototypes from wireframes, and is an expert at CSS Grid and Flex design.
Your role is to transform low-fidelity wireframes into working front-end HTML code.

YOU MUST FOLLOW FOLLOWING RULES:

- Use HTML, CSS, JavaScript to build a responsive, accessible, polished prototype
- Leverage Tailwind for styling and layout (import as script <script src="https://cdn.tailwindcss.com"><\/script>)
- Inline JavaScript when needed
- Fetch dependencies from CDNs when needed (using unpkg or skypack)
- Source images from Unsplash or create applicable placeholders
- Interpret annotations as intended vs literal UI
- Fill gaps using your expertise in UX and business logic
- generate primarily for desktop UI, but make it responsive.
- Use grid and flexbox wherever applicable.
- Convert the wireframe in its entirety, don't omit elements if possible.

If the wireframes, diagrams, or text is unclear or unreadable, refer to provided text for clarification.

Your goal is a production-ready prototype that brings the wireframes to life.

Please output JUST THE HTML file containing your best attempt at implementing the provided wireframes.`;async function yv({image:e,apiKey:t,text:r,theme:o=ae.LIGHT}){let n={model:"gpt-4-vision-preview",max_tokens:4096,temperature:.1,messages:[{role:"system",content:dL},{role:"user",content:[{type:"image_url",image_url:{url:e,detail:"high"}},{type:"text",text:`Above is the reference wireframe. Please make a new website based on these and return just the HTML file. Also, please make it for the ${o} theme. What follows are the wireframe's text annotations (if any)...`},{type:"text",text:r}]}]},i,a=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(n)});return a.ok?i={...await a.json(),ok:!0}:i={...await a.json(),ok:!1},i}ya();$t();f();import mL from"clsx";import{jsx as wv,jsxs as uL}from"react/jsx-runtime";var pL="small",Uu=e=>uL("label",{className:mL("ToolIcon ToolIcon__MagicButton",`ToolIcon_size_${pL}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[wv("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title}),wv("div",{className:"ToolIcon__icon",children:e.icon})]});f();import{jsx as v2,jsxs as vv}from"react/jsx-runtime";var hL=({height:e,width:t,userToFollow:r,onDisconnect:o})=>v2("div",{className:"follow-mode",style:{width:t,height:e},children:vv("div",{className:"follow-mode__badge",children:[vv("div",{className:"follow-mode__badge__label",children:["Following"," ",v2("span",{className:"follow-mode__badge__username",title:r.username,children:r.username})]}),v2("button",{onClick:o,className:"follow-mode__disconnect-btn",children:co})]})}),Cv=hL;Oe();f();var Wu=class{targets=new WeakMap;rafIds=new WeakMap;register(t,r){this.targets.set(t,{callback:r,stopped:!0})}start(t){let r=this.targets.get(t);r&&(this.rafIds.has(t)||(this.targets.set(t,{...r,stopped:!1}),this.scheduleFrame(t)))}stop(t){let r=this.targets.get(t);r&&!r.stopped&&this.targets.set(t,{...r,stopped:!0}),this.cancelFrame(t)}constructFrame(t){return r=>{let o=this.targets.get(t);if(!o)return;let n=this.onFrame(o,r);!o.stopped&&!n?this.scheduleFrame(t):this.cancelFrame(t)}}scheduleFrame(t){let r=requestAnimationFrame(this.constructFrame(t));this.rafIds.set(t,r)}cancelFrame(t){if(this.rafIds.has(t)){let r=this.rafIds.get(t);cancelAnimationFrame(r)}this.rafIds.delete(t)}onFrame(t,r){return t.callback(r)??!1}};f();G();V();import{LaserPointer as gL}from"@excalidraw/laser-pointer";var _a=class{constructor(t,r,o){this.animationFrameHandler=t;this.app=r;this.options=o;this.animationFrameHandler.register(this,this.onFrame.bind(this)),this.trailElement=document.createElementNS(_e,"path")}currentTrail;pastTrails=[];container;trailElement;get hasCurrentTrail(){return!!this.currentTrail}hasLastPoint(t,r){if(this.currentTrail){let o=this.currentTrail.originalPoints.length;return this.currentTrail.originalPoints[o-1][0]===t&&this.currentTrail.originalPoints[o-1][1]===r}return!1}start(t){t&&(this.container=t),this.trailElement.parentNode!==this.container&&this.container&&this.container.appendChild(this.trailElement),this.animationFrameHandler.start(this)}stop(){this.animationFrameHandler.stop(this),this.trailElement.parentNode===this.container&&this.container?.removeChild(this.trailElement)}startPath(t,r){this.currentTrail=new gL(this.options),this.currentTrail.addPoint([t,r,performance.now()]),this.update()}addPointToPath(t,r){this.currentTrail&&(this.currentTrail.addPoint([t,r,performance.now()]),this.update())}endPath(){this.currentTrail&&(this.currentTrail.close(),this.currentTrail.options.keepHead=!1,this.pastTrails.push(this.currentTrail),this.currentTrail=void 0,this.update())}update(){this.start()}onFrame(){let t=[];for(let o of this.pastTrails)t.push(this.drawTrail(o,this.app.state));if(this.currentTrail){let o=this.drawTrail(this.currentTrail,this.app.state);t.push(o)}this.pastTrails=this.pastTrails.filter(o=>o.getStrokeOutline().length!==0),t.length===0&&this.stop();let r=t.join(" ").trim();this.trailElement.setAttribute("d",r),this.trailElement.setAttribute("fill",(this.options.fill??(()=>"black"))(this))}drawTrail(t,r){let o=t.getStrokeOutline(t.options.size/r.zoom.value).map(([n,i])=>{let a=Bt({sceneX:n,sceneY:i},r);return[a.x,a.y]});return Y0(o,!0)}};f();G();V();var Yu=class{constructor(t,r){this.animationFrameHandler=t;this.app=r;this.animationFrameHandler.register(this,this.onFrame.bind(this)),this.localTrail=new _a(t,r,{...this.getTrailOptions(),fill:()=>th})}localTrail;collabTrails=new Map;container;getTrailOptions(){return{simplify:0,streamline:.4,sizeMapping:t=>{let n=Math.max(0,1-(performance.now()-t.pressure)/1e3),i=(50-Math.min(50,t.totalLength-t.currentIndex))/50;return Math.min(yn(i),yn(n))}}}startPath(t,r){this.localTrail.startPath(t,r)}addPointToPath(t,r){this.localTrail.addPointToPath(t,r)}endPath(){this.localTrail.endPath()}start(t){this.container=t,this.animationFrameHandler.start(this),this.localTrail.start(t)}stop(){this.animationFrameHandler.stop(this),this.localTrail.stop()}onFrame(){this.updateCollabTrails()}updateCollabTrails(){if(!(!this.container||this.app.state.collaborators.size===0)){for(let[t,r]of this.app.state.collaborators.entries()){let o;this.collabTrails.has(t)?o=this.collabTrails.get(t):(o=new _a(this.animationFrameHandler,this.app,{...this.getTrailOptions(),fill:()=>r.pointer?.laserColor||Ba(t,r)}),o.start(this.container),this.collabTrails.set(t,o)),r.pointer&&r.pointer.tool==="laser"&&(r.button==="down"&&!o.hasCurrentTrail&&o.startPath(r.pointer.x,r.pointer.y),r.button==="down"&&o.hasCurrentTrail&&!o.hasLastPoint(r.pointer.x,r.pointer.y)&&o.addPointToPath(r.pointer.x,r.pointer.y),r.button==="up"&&o.hasCurrentTrail&&(o.addPointToPath(r.pointer.x,r.pointer.y),o.endPath()))}for(let t of this.collabTrails.keys())this.app.state.collaborators.has(t)||(this.collabTrails.get(t).stop(),this.collabTrails.delete(t))}}};Cn();Mm();f();ge();G();ni();se();V();Ge();lt();Zt();wi();Zd();var fL=(e,t,r,o,n,i)=>{let{zoom:a}=o,s=180*r/Math.PI,l=e*(a.value-1)/2,c=t*(a.value-1)/2;return e>n&&a.value!==1&&(l=n*(a.value-1)/2),t>i&&a.value!==1&&(c=i*(a.value-1)/2),`translate(${l}px, ${c}px) scale(${a.value}) rotate(${s}deg)`},Tv=({id:e,onChange:t,onSubmit:r,getViewportCoords:o,element:n,canvas:i,excalidrawContainer:a,app:s})=>{let l=(I,F)=>{if(!F.style.fontFamily||!F.style.fontSize)return!1;let Q=F.style.fontFamily.replace(/"/g,"");return $a({fontFamily:I.fontFamily})!==Q||`${I.fontSize}px`!==F.style.fontSize},c=()=>{let I=s.state,F=St.getScene(n)?.getElement(e);if(!F)return;let{textAlign:Q,verticalAlign:j}=F,oe=s.scene.getNonDeletedElementsMap();if(F&&U(F)){let Ce=F.x,Y=F.y,W=pt(F,s.scene.getNonDeletedElementsMap()),he=F.width,Ae=F.height,it=F.width,Me=F.height;if(W&&F.containerId){if(we(W)){let xr=Z.getBoundTextElementPosition(W,F,oe);Ce=xr.x,Y=xr.y}let yo=l(F,d),Nr;if(yo?Nr=ma(W.id,W.height):(Nr=da[W.id],Nr||(Nr=ma(W.id,W.height))),he=vr(W,F),Ae=pa(W,F),!we(W)&&Me>Ae){let xr=An(Me,W.type);z(W,{height:xr});return}else if(!we(W)&&W.height>Nr.height&&Me<Ae){let xr=An(Me,W.type);z(W,{height:xr})}else{let{y:xr}=ps(W,F,oe);Y=xr}}let[Jr,Xn]=o(Ce,Y),Ho=d.selectionStart,gn=d.selectionEnd,Zn=d.value.length;if(Ho===gn&&gn!==Zn){let yo=Zn-gn;d.selectionStart=d.value.length-yo,d.selectionEnd=d.value.length-yo}W||(he=(I.width-8-Jr)/I.zoom.value,it=Math.min(it,he));let Ua=(I.height-Xn)/I.zoom.value;Object.assign(d.style,{font:Ve(F),lineHeight:F.lineHeight,width:`${it}px`,height:`${Me}px`,left:`${Jr}px`,top:`${Xn}px`,transform:fL(it,Me,Zb(F,W),I,he,Ua),textAlign:Q,verticalAlign:j,color:F.strokeColor,opacity:F.opacity/100,filter:"var(--theme-filter)",maxHeight:`${Ua}px`}),d.scrollTop=0,Br()&&(d.style.fontFamily=$a(F)),z(F,{x:Ce,y:Y})}},d=document.createElement("textarea");d.dir="auto",d.tabIndex=0,d.dataset.type="wysiwyg",d.wrap="off",d.classList.add("excalidraw-wysiwyg");let m="pre",p="normal";Ie(n)&&(m="pre-wrap",p="break-word"),Object.assign(d.style,{position:"absolute",display:"inline-block",minHeight:"1em",backfaceVisibility:"hidden",margin:0,padding:0,border:0,outline:0,resize:"none",background:"transparent",overflow:"hidden",zIndex:"var(--zIndex-wysiwyg)",wordBreak:p,whiteSpace:m,overflowWrap:"break-word",boxSizing:"content-box"}),d.value=n.originalText,c(),t&&(d.onpaste=async I=>{let F=await Gm(I,!0);if(!F.text)return;let Q=pi(F.text);if(!Q)return;let j=pt(n,s.scene.getNonDeletedElementsMap()),oe=Ve({fontSize:s.state.currentItemFontSize,fontFamily:s.state.currentItemFontFamily});if(j){let Ce=me(j,s.scene.getNonDeletedElementsMap()),Y=hi(`${d.value}${Q}`,oe,vr(j,Ce)),W=Vl(Y,oe);d.style.width=`${W}px`}},d.oninput=()=>{t(pi(d.value))}),d.onkeydown=I=>{if(!I.shiftKey&&Sp.keyTest(I))I.preventDefault(),s.actionManager.executeAction(Sp),c();else if(!I.shiftKey&&Ip.keyTest(I))I.preventDefault(),s.actionManager.executeAction(Ip),c();else if(Hf.keyTest(I))s.actionManager.executeAction(Hf);else if(_f.keyTest(I))s.actionManager.executeAction(_f);else if(I.key===T.ESCAPE)I.preventDefault(),A=!0,L();else if(I.key===T.ENTER&&I[T.CTRL_OR_CMD]){if(I.preventDefault(),I.isComposing||I.keyCode===229)return;A=!0,L()}else if(I.key===T.TAB||I[T.CTRL_OR_CMD]&&(I.code===fe.BRACKET_LEFT||I.code===fe.BRACKET_RIGHT)){if(I.preventDefault(),I.isComposing)return;I.shiftKey||I.code===fe.BRACKET_LEFT?w():E(),d.dispatchEvent(new Event("input"))}};let u=4,h=" ".repeat(u),x=new RegExp(`^ {1,${u}}`),E=()=>{let{selectionStart:I,selectionEnd:F}=d,Q=y(),j=d.value;Q.forEach(oe=>{let Ce=j.slice(0,oe),Y=j.slice(oe);j=`${Ce}${h}${Y}`}),d.value=j,d.selectionStart=I+u,d.selectionEnd=F+u*Q.length},w=()=>{let{selectionStart:I,selectionEnd:F}=d,Q=y(),j=[],oe=d.value;Q.forEach(Ce=>{let Y=oe.slice(Ce,Ce+u).match(x);if(Y){let W=oe.slice(0,Ce),he=oe.slice(Ce+Y[0].length);oe=`${W}${he}`,j.push(Ce)}}),d.value=oe,j.length&&(I>j[j.length-1]?d.selectionStart=Math.max(I-u,j[j.length-1]):d.selectionStart=I,d.selectionEnd=Math.max(d.selectionStart,F-u*j.length))},y=()=>{let{selectionStart:I,selectionEnd:F,value:Q}=d,j=Q.slice(0,I).match(/[^\n]*$/)[0].length;return I=I-j,Q.slice(I,F).split(`
`).reduce((Ce,Y,W,he)=>Ce.concat(W?Ce[W-1]+he[W-1].length+1:I),[]).reverse()},v=I=>{I.preventDefault(),I.stopPropagation()},A=!1,L=()=>{S();let I=St.getScene(n)?.getElement(n.id);if(!I)return;let F=d.value,Q=pt(I,s.scene.getNonDeletedElementsMap());if(Q){if(F=I.text,d.value.trim()){let j=Po(Q);!j||j!==n.id?z(Q,{boundElements:(Q.boundElements||[]).concat({type:"text",id:n.id})}):we(Q)&&gi(Q)}else z(Q,{boundElements:Q.boundElements?.filter(j=>!U(j))});Nt(I,Q,s.scene.getNonDeletedElementsMap())}r({text:F,viaKeyboard:A,originalText:d.value})},S=()=>{M||(M=!0,d.onblur=null,d.oninput=null,d.onkeydown=null,O&&O.disconnect(),window.removeEventListener("resize",c),window.removeEventListener("wheel",v,!0),window.removeEventListener("pointerdown",R),window.removeEventListener("pointerup",k),window.removeEventListener("blur",L),window.removeEventListener("beforeunload",L),_(),d.remove())},k=I=>{window.removeEventListener("pointerup",k);let F=I?.target,Q=F instanceof HTMLElement&&F.classList.contains("active-color");setTimeout(()=>{if(d.onblur=L,Q){let j=(Ce,Y)=>{Ce.find(he=>he.removedNodes.length>0&&he.removedNodes[0].dataset?.radixPopperContentWrapper!==void 0)&&(setTimeout(()=>{d.focus()}),Y.disconnect())};new MutationObserver(j).observe(document.querySelector(".excalidraw-container"),{childList:!0})}Q||d.focus()})},R=I=>{let F=I.target instanceof HTMLElement&&I.target.classList.contains("active-color");((I.target instanceof HTMLElement||I.target instanceof SVGElement)&&I.target.closest(`.${pd.SHAPE_ACTIONS_MENU}`)&&!eo(I.target)||F)&&(d.onblur=null,window.addEventListener("pointerup",k),window.addEventListener("blur",L))},_=St.getScene(n).addCallback(()=>{c(),!!document.activeElement?.closest(".color-picker-content")||d.focus()}),M=!1;d.select(),k();let O=null;i&&"ResizeObserver"in window?(O=new window.ResizeObserver(()=>{c()}),O.observe(i)):window.addEventListener("resize",c),window.addEventListener("pointerdown",R),window.addEventListener("wheel",v,{passive:!1,capture:!0}),window.addEventListener("beforeunload",L),a?.querySelector(".excalidraw-textEditorContainer").appendChild(d)};no();Lm();import{Fragment as wL,jsx as je,jsxs as Ku}from"react/jsx-runtime";var Mv=hn.createContext(null),kv=hn.createContext(null),Lv={viewport:{isMobile:!1,isLandscape:!1},editor:{isMobile:!1,canFitSidebar:!1},isTouchScreen:!1},k2=hn.createContext(Lv);k2.displayName="DeviceContext";var L2=hn.createContext({container:null,id:null});L2.displayName="ExcalidrawContainerContext";var P2=hn.createContext([]);P2.displayName="ExcalidrawElementsContext";var D2=hn.createContext({...jt(),width:0,height:0,offsetLeft:0,offsetTop:0});D2.displayName="ExcalidrawAppStateContext";var R2=hn.createContext(()=>{console.warn("Uninitialized ExcalidrawSetAppStateContext context!")});R2.displayName="ExcalidrawSetAppStateContext";var N2=hn.createContext(null);N2.displayName="ExcalidrawActionManagerContext";var Mr=()=>Gi(Mv),Mi=()=>Gi(kv),ke=()=>Gi(k2),Gt=()=>Gi(L2),Ai=()=>Gi(P2),Js=()=>Gi(D2),Be=()=>Gi(R2),Ot=()=>Gi(N2),Jc=!1,T2=0,Ga=!1,$c=!1,A2=!1,S2={horizontal:null,vertical:null},_i=0,ed=!1,I2=new Map,Vu=!1,Sv=0,Iv=!1,td=null,Fe={pointers:new Map,lastCenter:null,initialDistance:null,initialScale:null},M2=class e extends hn.Component{canvas;interactiveCanvas=null;rc;unmounted=!1;actionManager;device=Lv;excalidrawContainerRef=hn.createRef();scene;renderer;fonts;resizeObserver;nearestScrollableContainer;library;libraryItemsFromStorage;id;store;history;excalidrawContainerValue;files={};imageCache=new Map;iFrameRefs=new Map;embedsValidationStatus=new Map;initializedEmbeds=new Set;elementsPendingErasure=new Set;hitLinkElement;lastPointerDownEvent=null;lastPointerUpEvent=null;lastPointerMoveEvent=null;lastViewportPosition={x:0,y:0};animationFrameHandler=new Wu;laserTrails=new Yu(this.animationFrameHandler,this);eraserTrail=new _a(this.animationFrameHandler,this,{streamline:.2,size:5,keepHead:!0,sizeMapping:t=>{let n=Math.max(0,1-(performance.now()-t.pressure)/200),i=(10-Math.min(10,t.totalLength-t.currentIndex))/10;return Math.min(yn(i),yn(n))},fill:()=>this.state.theme===ae.LIGHT?"rgba(0, 0, 0, 0.2)":"rgba(255, 255, 255, 0.2)"});onChangeEmitter=new or;onPointerDownEmitter=new or;onPointerUpEmitter=new or;onUserFollowEmitter=new or;onScrollChangeEmitter=new or;missingPointerEventCleanupEmitter=new or;onRemoveEventListenersEmitter=new or;constructor(t){super(t);let r=jt(),{excalidrawAPI:o,viewModeEnabled:n=!1,zenModeEnabled:i=!1,gridModeEnabled:a=!1,objectsSnapModeEnabled:s=!1,theme:l=r.theme,name:c=`${b("labels.untitled")}-${lh()}`}=t;if(this.state={...r,theme:l,isLoading:!0,...this.getCanvasOffsets(),viewModeEnabled:n,zenModeEnabled:i,objectsSnapModeEnabled:s,gridSize:a?En:null,name:c,width:window.innerWidth,height:window.innerHeight},this.id=xL(),this.library=new fw(this),this.actionManager=new du(this.syncActionResult,()=>this.state,()=>this.scene.getElementsIncludingDeleted(),this),this.scene=new St,this.canvas=document.createElement("canvas"),this.rc=bL.canvas(this.canvas),this.renderer=new Qc(this.scene),this.store=new um,this.history=new zc,o){let d={updateScene:this.updateScene,updateLibrary:this.library.updateLibrary,addFiles:this.addFiles,resetScene:this.resetScene,getSceneElementsIncludingDeleted:this.getSceneElementsIncludingDeleted,history:{clear:this.resetHistory},scrollToContent:this.scrollToContent,getSceneElements:this.getSceneElements,getAppState:()=>this.state,getFiles:()=>this.files,getName:this.getName,registerAction:m=>{this.actionManager.registerAction(m)},refresh:this.refresh,setToast:this.setToast,id:this.id,setActiveTool:this.setActiveTool,setCursor:this.setCursor,resetCursor:this.resetCursor,updateFrameRendering:this.updateFrameRendering,toggleSidebar:this.toggleSidebar,onChange:m=>this.onChangeEmitter.on(m),onPointerDown:m=>this.onPointerDownEmitter.on(m),onPointerUp:m=>this.onPointerUpEmitter.on(m),onScrollChange:m=>this.onScrollChangeEmitter.on(m),onUserFollow:m=>this.onUserFollowEmitter.on(m)};typeof o=="function"?o(d):console.error("excalidrawAPI should be a function!")}this.excalidrawContainerValue={container:this.excalidrawContainerRef.current,id:this.id},this.fonts=new Ou({scene:this.scene,onSceneUpdated:this.onSceneUpdated}),this.history=new zc,this.actionManager.registerAll(sm),this.actionManager.registerAction(l6(this.history,this.store)),this.actionManager.registerAction(c6(this.history,this.store))}onWindowMessage(t){if(t.origin!=="https://player.vimeo.com"&&t.origin!=="https://www.youtube.com")return;let r=null;try{r=JSON.parse(t.data)}catch{}if(r)switch(t.origin){case"https://player.vimeo.com":if(r.method==="paused"){let o=null,n=document.body.querySelectorAll("iframe.excalidraw__embeddable");if(!n)break;for(let i of n)i.contentWindow===t.source&&(o=i.contentWindow);o?.postMessage(JSON.stringify({method:r.value?"play":"pause",value:!0}),"*")}break;case"https://www.youtube.com":if(r.event==="infoDelivery"&&r.info&&r.id&&typeof r.info.playerState=="number"){let o=r.id,n=r.info.playerState;Object.values(bl).includes(n)&&I2.set(o,n)}break}}cacheEmbeddableRef(t,r){r&&this.iFrameRefs.set(t.id,r)}getHTMLIFrameElement(t){return this.iFrameRefs.get(t.id)}handleEmbeddableCenterClick(t){if(this.state.activeEmbeddable?.element===t&&this.state.activeEmbeddable?.state==="active"||(setTimeout(()=>{this.setState({activeEmbeddable:{element:t,state:"active"},selectedElementIds:{[t.id]:!0},draggingElement:null,selectionElement:null})},100),ro(t)))return;let r=this.getHTMLIFrameElement(t);if(r?.contentWindow){if(r.src.includes("youtube")){let o=I2.get(t.id);switch(o||(I2.set(t.id,bl.UNSTARTED),r.contentWindow.postMessage(JSON.stringify({event:"listening",id:t.id}),"*")),o){case bl.PLAYING:case bl.BUFFERING:r.contentWindow?.postMessage(JSON.stringify({event:"command",func:"pauseVideo",args:""}),"*");break;default:r.contentWindow?.postMessage(JSON.stringify({event:"command",func:"playVideo",args:""}),"*")}}r.src.includes("player.vimeo.com")&&r.contentWindow.postMessage(JSON.stringify({method:"paused"}),"*")}}isIframeLikeElementCenter(t,r,o,n){return t&&!r.altKey&&!r.shiftKey&&!r.metaKey&&!r.ctrlKey&&(this.state.activeEmbeddable?.element!==t||this.state.activeEmbeddable?.state==="hover"||!this.state.activeEmbeddable)&&o>=t.x+t.width/3&&o<=t.x+2*t.width/3&&n>=t.y+t.height/3&&n<=t.y+2*t.height/3}updateEmbedValidationStatus=(t,r)=>{this.embedsValidationStatus.set(t.id,r),Pe.delete(t)};updateEmbeddables=()=>{let t=new Set,r=!1;this.scene.getNonDeletedElements().filter(o=>{if(At(o)){if(t.add(o.id),!this.embedsValidationStatus.has(o.id)){r=!0;let n=fs(o.link,this.props.validateEmbeddable);this.updateEmbedValidationStatus(o,n)}}else ro(o)&&t.add(o.id);return!1}),r&&this.scene.informMutation(),this.iFrameRefs.forEach((o,n)=>{t.has(n)||this.iFrameRefs.delete(n)})};renderEmbeddables(){let t=this.state.zoom.value,r=this.state.width,o=this.state.height,n=this.scene.getNonDeletedElements().filter(i=>At(i)&&this.embedsValidationStatus.get(i.id)===!0||ro(i));return je(wL,{children:n.map(i=>{let{x:a,y:s}=Bt({sceneX:i.x,sceneY:i.y},this.state),l=wa(i,r,o,this.state,this.scene.getNonDeletedElementsMap()),c=this.initializedEmbeds.has(i.id);if(l&&!c&&this.initializedEmbeds.add(i.id),!(l||c))return null;let m;if(ro(i)){m=null;let h=(i.customData?.generationData??this.magicGenerations.get(i.id))||{status:"error",message:"No generation data",code:"ERR_NO_GENERATION_DATA"};if(h.status==="done"){let x=h.html;m={intrinsicSize:{w:i.width,h:i.height},type:"document",srcdoc:()=>x}}else if(h.status==="pending")m={intrinsicSize:{w:i.width,h:i.height},type:"document",srcdoc:()=>$l(`
                    <style>
                      html, body {
                        width: 100%;
                        height: 100%;
                        color: ${this.state.theme===ae.DARK?"white":"black"};
                      }
                      body {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        flex-direction: column;
                        gap: 1rem;
                      }

                      .Spinner {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        margin-left: auto;
                        margin-right: auto;
                      }

                      .Spinner svg {
                        animation: rotate 1.6s linear infinite;
                        transform-origin: center center;
                        width: 40px;
                        height: 40px;
                      }

                      .Spinner circle {
                        stroke: currentColor;
                        animation: dash 1.6s linear 0s infinite;
                        stroke-linecap: round;
                      }

                      @keyframes rotate {
                        100% {
                          transform: rotate(360deg);
                        }
                      }

                      @keyframes dash {
                        0% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: 0;
                        }
                        50% {
                          stroke-dasharray: 150, 300;
                          stroke-dashoffset: -200;
                        }
                        100% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: -280;
                        }
                      }
                    </style>
                    <div class="Spinner">
                      <svg
                        viewBox="0 0 100 100"
                      >
                        <circle
                          cx="50"
                          cy="50"
                          r="46"
                          stroke-width="8"
                          fill="none"
                          stroke-miter-limit="10"
                        />
                      </svg>
                    </div>
                    <div>Generating...</div>
                  `)};else{let x;h.code==="ERR_GENERATION_INTERRUPTED"?x="Generation was interrupted...":x=h.message||"Generation failed",m={intrinsicSize:{w:i.width,h:i.height},type:"document",srcdoc:()=>$l(`
                    <style>
                    html, body {
                      height: 100%;
                    }
                      body {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        color: ${de.red[3]};
                      }
                      h1, h3 {
                        margin-top: 0;
                        margin-bottom: 0.5rem;
                      }
                    </style>
                    <h1>Error!</h1>
                    <h3>${x}</h3>
                  `)}}}else m=Pn(am(i.link||""));let p=this.state.activeEmbeddable?.element===i&&this.state.activeEmbeddable?.state==="active",u=this.state.activeEmbeddable?.element===i&&this.state.activeEmbeddable?.state==="hover";return je("div",{className:Av("excalidraw__embeddable-container",{"is-hovered":u}),style:{transform:l?`translate(${a-this.state.offsetLeft}px, ${s-this.state.offsetTop}px) scale(${t})`:"none",display:l?"block":"none",opacity:Rg(i,_t(i,this.scene.getNonDeletedElementsMap()),this.elementsPendingErasure),"--embeddable-radius":`${Mo(Math.min(i.width,i.height),i)}px`},children:Ku("div",{className:"excalidraw__embeddable-container__inner",style:{width:l?`${i.width}px`:0,height:l?`${i.height}px`:0,transform:l?`rotate(${i.angle}rad)`:"none",pointerEvents:p?Ki.enabled:Ki.disabled},children:[u&&je("div",{className:"excalidraw__embeddable-hint",children:b("buttons.embeddableInteractionButton")}),je("div",{className:"excalidraw__embeddable__outer",style:{padding:`${i.strokeWidth}px`},children:(At(i)?this.props.renderEmbeddable?.(i,this.state):null)??je("iframe",{ref:h=>this.cacheEmbeddableRef(i,h),className:"excalidraw__embeddable",srcDoc:m?.type==="document"?m.srcdoc(this.state.theme):void 0,src:m?.type!=="document"?m?.link??"":void 0,scrolling:"no",referrerPolicy:"no-referrer-when-downgrade",title:"Excalidraw Embedded Content",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,sandbox:`${m?.sandbox?.allowSameOrigin?"allow-same-origin":""} allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox allow-presentation allow-downloads`})})]})},i.id)})})}getFrameNameDOMId=t=>`${this.id}-frame-name-${t.id}`;frameNameBoundsCache={get:t=>{let r=this.frameNameBoundsCache._cache.get(t.id);if(!r||r.zoom!==this.state.zoom.value||r.versionNonce!==t.versionNonce){let o=document.getElementById(this.getFrameNameDOMId(t));if(o){let n=o.getBoundingClientRect(),i=Ke({clientX:n.x,clientY:n.y},this.state),a=Ke({clientX:n.right,clientY:n.bottom},this.state);return r={x:i.x,y:i.y,width:a.x-i.x,height:a.y-i.y,angle:0,zoom:this.state.zoom.value,versionNonce:t.versionNonce},this.frameNameBoundsCache._cache.set(t.id,r),r}return null}return r},_cache:new Map};renderFrameNames=()=>{if(!this.state.frameRendering.enabled||!this.state.frameRendering.name)return null;let t=this.state.theme===ae.DARK,r=0,o=0;return this.scene.getNonDeletedFramesLikes().map(n=>{if(ri(n)?r++:o++,!wa(n,this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap()))return null;let{x:i,y:a}=Bt({sceneX:n.x,sceneY:n.y},this.state),s=6,l=()=>{z(n,{name:n.name?.trim()||null}),this.setState({editingFrame:null})},c,d=Fm(n,ri(n)?r:o);if(n.id===this.state.editingFrame){let m=d;c=je("input",{autoFocus:!0,value:m,onChange:p=>{z(n,{name:p.target.value})},onFocus:p=>p.target.select(),onBlur:()=>l(),onKeyDown:p=>{(p.key===T.ESCAPE||p.key===T.ENTER)&&l()},style:{background:this.state.viewBackgroundColor,filter:t?qa:"none",zIndex:2,border:"none",display:"block",padding:`${s}px`,borderRadius:4,boxShadow:"inset 0 0 0 1px var(--color-primary)",fontFamily:"Assistant",fontSize:"14px",transform:`translate(-${s}px, ${s}px)`,color:"var(--color-gray-80)",overflow:"hidden",maxWidth:`${document.body.clientWidth-i-s}px`},size:m.length+1||1,dir:"auto",autoComplete:"off",autoCapitalize:"off",autoCorrect:"off"})}else c=d;return je("div",{id:this.getFrameNameDOMId(n),style:{position:"absolute",bottom:`${this.state.height+qe.nameOffsetY-a+this.state.offsetTop}px`,left:`${i-this.state.offsetLeft}px`,zIndex:2,fontSize:qe.nameFontSize,color:t?qe.nameColorDarkTheme:qe.nameColorLightTheme,lineHeight:qe.nameLineHeight,width:"max-content",maxWidth:`${n.width}px`,overflow:n.id===this.state.editingFrame?"visible":"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",cursor:Le.MOVE,pointerEvents:this.state.viewModeEnabled?Ki.disabled:Ki.enabled},onPointerDown:m=>this.handleCanvasPointerDown(m),onWheel:m=>this.handleWheel(m),onContextMenu:this.handleCanvasContextMenu,onDoubleClick:()=>{this.setState({editingFrame:n.id})},children:c},n.id)})};toggleOverscrollBehavior(t){document.documentElement.style.overscrollBehaviorX=t.type==="pointerenter"?"none":"auto"}render(){let t=this.scene.getSelectedElements(this.state),{renderTopRightUI:r,renderCustomStats:o}=this.props,n=this.scene.getVersionNonce(),{elementsMap:i,visibleElements:a}=this.renderer.getRenderableElements({versionNonce:n,zoom:this.state.zoom,offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,height:this.state.height,width:this.state.width,editingElement:this.state.editingElement,pendingImageElementId:this.state.pendingImageElementId}),s=this.scene.getNonDeletedElementsMap(),l=!(this.state.editingElement&&ne(this.state.editingElement))&&(this.state.selectionElement||this.state.draggingElement||this.state.resizingElement||this.state.activeTool.type==="laser"&&this.state.cursorButton==="down"||this.state.editingElement&&!U(this.state.editingElement)),c=t[0];return je("div",{className:Av("excalidraw excalidraw-container",{"excalidraw--view-mode":this.state.viewModeEnabled,"excalidraw--mobile":this.device.editor.isMobile}),style:{"--ui-pointerEvents":l?Ki.disabled:Ki.enabled},ref:this.excalidrawContainerRef,onDrop:this.handleAppOnDrop,tabIndex:0,onKeyDown:this.props.handleKeyboardGlobally?void 0:this.onKeyDown,onPointerEnter:this.toggleOverscrollBehavior,onPointerLeave:this.toggleOverscrollBehavior,children:je(Mv.Provider,{value:this,children:je(kv.Provider,{value:this.props,children:je(L2.Provider,{value:this.excalidrawContainerValue,children:je(k2.Provider,{value:this.device,children:je(R2.Provider,{value:this.setAppState,children:je(D2.Provider,{value:this.state,children:Ku(P2.Provider,{value:this.scene.getNonDeletedElements(),children:[Ku(N2.Provider,{value:this.actionManager,children:[je(_5,{canvas:this.canvas,appState:this.state,files:this.files,setAppState:this.setAppState,actionManager:this.actionManager,elements:this.scene.getNonDeletedElements(),onLockToggle:this.toggleLock,onPenModeToggle:this.togglePenMode,onHandToolToggle:this.onHandToolToggle,langCode:fn().code,renderTopRightUI:r,renderCustomStats:o,showExitZenModeBtn:typeof this.props?.zenModeEnabled>"u"&&this.state.zenModeEnabled,UIOptions:this.props.UIOptions,onExportImage:this.onExportImage,renderWelcomeScreen:!this.state.isLoading&&this.state.showWelcomeScreen&&this.state.activeTool.type==="selection"&&!this.state.zenModeEnabled&&!this.scene.getElementsIncludingDeleted().length,app:this,isCollaborating:this.props.isCollaborating,openAIKey:this.OPENAI_KEY,isOpenAIKeyPersisted:this.OPENAI_KEY_IS_PERSISTED,onOpenAIAPIKeyChange:this.onOpenAIKeyChange,onMagicSettingsConfirm:this.onMagicSettingsConfirm,children:this.props.children}),je("div",{className:"excalidraw-textEditorContainer"}),je("div",{className:"excalidraw-contextMenuContainer"}),je("div",{className:"excalidraw-eye-dropper-container"}),je(Ev,{trails:[this.laserTrails,this.eraserTrail]}),t.length===1&&this.state.showHyperlinkPopup&&je(ew,{element:c,elementsMap:s,setAppState:this.setAppState,onLinkOpen:this.props.onLinkOpen,setToast:this.setToast,updateEmbedValidationStatus:this.updateEmbedValidationStatus},c.id),this.props.aiEnabled!==!1&&t.length===1&&Qi(c)&&je(w2,{element:c,elementsMap:i,children:je(Uu,{title:b("labels.convertToCode"),icon:Hs,checked:!1,onChange:()=>this.onMagicFrameGenerate(c,"button")})}),t.length===1&&ro(c)&&c.customData?.generationData?.status==="done"&&Ku(w2,{element:c,elementsMap:i,children:[je(Uu,{title:b("labels.copySource"),icon:up,checked:!1,onChange:()=>this.onIframeSrcCopy(c)}),je(Uu,{title:"Enter fullscreen",icon:Ty,checked:!1,onChange:()=>{let d=this.getHTMLIFrameElement(c);if(d)try{d.requestFullscreen(),this.setState({activeEmbeddable:{element:c,state:"active"},selectedElementIds:{[c.id]:!0},draggingElement:null,selectionElement:null})}catch(m){console.warn(m),this.setState({errorMessage:"Couldn't enter fullscreen"})}}})]}),this.state.toast!==null&&je(U5,{message:this.state.toast.message,onClose:()=>this.setToast(null),duration:this.state.toast.duration,closable:this.state.toast.closable}),this.state.contextMenu&&je(p6,{items:this.state.contextMenu.items,top:this.state.contextMenu.top,left:this.state.contextMenu.left,actionManager:this.actionManager,onClose:d=>{this.setState({contextMenu:null},()=>{this.focusContainer(),d?.()})}}),je(y2,{canvas:this.canvas,rc:this.rc,elementsMap:i,allElementsMap:s,visibleElements:a,versionNonce:n,selectionNonce:this.state.selectionElement?.versionNonce,scale:window.devicePixelRatio,appState:this.state,renderConfig:{imageCache:this.imageCache,isExporting:!1,renderGrid:!0,canvasBackgroundColor:this.state.viewBackgroundColor,embedsValidationStatus:this.embedsValidationStatus,elementsPendingErasure:this.elementsPendingErasure}}),je(E2,{containerRef:this.excalidrawContainerRef,canvas:this.interactiveCanvas,elementsMap:i,visibleElements:a,selectedElements:t,versionNonce:n,selectionNonce:this.state.selectionElement?.versionNonce,scale:window.devicePixelRatio,appState:this.state,device:this.device,renderInteractiveSceneCallback:this.renderInteractiveSceneCallback,handleCanvasRef:this.handleInteractiveCanvasRef,onContextMenu:this.handleCanvasContextMenu,onPointerMove:this.handleCanvasPointerMove,onPointerUp:this.handleCanvasPointerUp,onPointerCancel:this.removePointer,onTouchMove:this.handleTouchMove,onPointerDown:this.handleCanvasPointerDown,onDoubleClick:this.handleCanvasDoubleClick}),this.state.userToFollow&&je(Cv,{width:this.state.width,height:this.state.height,userToFollow:this.state.userToFollow,onDisconnect:this.maybeUnfollowRemoteUser}),this.renderFrameNames()]}),this.renderEmbeddables()]})})})})})})})})}focusContainer=()=>{this.excalidrawContainerRef.current?.focus()};getSceneElementsIncludingDeleted=()=>this.scene.getElementsIncludingDeleted();getSceneElements=()=>this.scene.getNonDeletedElements();onInsertElements=t=>{this.addElementsFromPasteOrLibrary({elements:t,position:"center",files:null})};onExportImage=async(t,r,o)=>{xe("export",t,"ui");let n=await Ra(t,r,this.state,this.files,{exportBackground:this.state.exportBackground,name:this.getName(),viewBackgroundColor:this.state.viewBackgroundColor,exportingFrame:o.exportingFrame}).catch(Ad).catch(i=>{console.error(i),this.setState({errorMessage:i.message})});this.state.exportEmbedScene&&n&&vs(n)&&this.setState({fileHandle:n})};magicGenerations=new Map;updateMagicGeneration=({frameElement:t,data:r})=>{r.status==="pending"?z(t,{customData:{generationData:void 0}},!1):z(t,{customData:{generationData:r}},!1),this.magicGenerations.set(t.id,r),this.onSceneUpdated()};getTextFromElements(t){return t.reduce((o,n)=>(U(n)&&o.push(n.text),o),[]).join(`

`)}async onMagicFrameGenerate(t,r){if(!this.OPENAI_KEY){this.setState({openDialog:{name:"settings",tab:"diagram-to-code",source:"generation"}}),xe("ai","generate (missing key)","d2c");return}let o=Ss(this.scene.getNonDeletedElements(),t).filter(m=>!Qi(m));if(!o.length){r==="button"?(this.setState({errorMessage:"Cannot generate from an empty frame"}),xe("ai","generate (no-children)","d2c")):this.setActiveTool({type:"magicframe"});return}let n=this.insertIframeElement({sceneX:t.x+t.width+30,sceneY:t.y,width:t.width,height:t.height});if(!n)return;this.updateMagicGeneration({frameElement:n,data:{status:"pending"}}),this.setState({selectedElementIds:{[n.id]:!0}});let i=await Wm({elements:this.scene.getNonDeletedElements(),appState:{...this.state,exportBackground:!0,viewBackgroundColor:this.state.viewBackgroundColor},exportingFrame:t,files:this.files}),a=await ym(i),s=this.getTextFromElements(o);xe("ai","generate (start)","d2c");let l=await yv({image:a,apiKey:this.OPENAI_KEY,text:s,theme:this.state.theme});if(!l.ok){xe("ai","generate (failed)","d2c"),console.error(l.error),this.updateMagicGeneration({frameElement:n,data:{status:"error",code:"ERR_OAI",message:l.error?.message||"Unknown error during generation"}});return}if(xe("ai","generate (success)","d2c"),l.choices[0].message.content==null){this.updateMagicGeneration({frameElement:n,data:{status:"error",code:"ERR_OAI",message:"Nothing genereated :("}});return}let c=l.choices[0].message.content,d=c.slice(c.indexOf("<!DOCTYPE html>"),c.indexOf("</html>")+7);this.updateMagicGeneration({frameElement:n,data:{status:"done",html:d}})}onIframeSrcCopy(t){t.customData?.generationData?.status==="done"&&(Fn(t.customData.generationData.html),this.setToast({message:"copied to clipboard",closable:!1,duration:1500}))}OPENAI_KEY=Lr.get($r.OAI_API_KEY);OPENAI_KEY_IS_PERSISTED=Lr.has($r.OAI_API_KEY)||!1;onOpenAIKeyChange=(t,r)=>{if(this.OPENAI_KEY=t||null,r){let o=Lr.set($r.OAI_API_KEY,t);this.OPENAI_KEY_IS_PERSISTED=o}else this.OPENAI_KEY_IS_PERSISTED=!1};onMagicSettingsConfirm=(t,r,o)=>{if(this.OPENAI_KEY=t||null,this.onOpenAIKeyChange(this.OPENAI_KEY,r),o==="settings")return;let n=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds});t?n.length?this.onMagicframeToolSelect():this.setActiveTool({type:"magicframe"}):Qi(n[0])||this.setActiveTool({type:"magicframe"})};onMagicframeToolSelect=()=>{if(!this.OPENAI_KEY){this.setState({openDialog:{name:"settings",tab:"diagram-to-code",source:"tool"}}),xe("ai","tool-select (missing key)","d2c");return}let t=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds});if(t.length===0)this.setActiveTool({type:wt.magicframe}),xe("ai","tool-select (empty-selection)","d2c");else{let r=t.length===1&&Qi(t[0])&&t[0];if(!r&&t.some(n=>ee(n)||n.frameId)){this.setActiveTool({type:wt.magicframe});return}xe("ai","tool-select (existing selection)","d2c");let o;if(r)o=r;else{let[n,i,a,s]=Te(t),l=50;o=Kl({...qe,x:n-l,y:i-l,width:a-n+l*2,height:s-i+l*2,opacity:100,locked:!1}),this.scene.insertElement(o);for(let c of t)z(c,{frameId:o.id});this.setState({selectedElementIds:{[o.id]:!0}})}this.onMagicFrameGenerate(o,"upstream")}};openEyeDropper=({type:t})=>{Jt.set(Ti,{swapPreviewOnAlt:!0,colorPickerType:t==="stroke"?"elementStroke":"elementBackground",onSelect:(r,o)=>{let n=t==="background"&&o.altKey||t==="stroke"&&!o.altKey;!this.scene.getSelectedElements(this.state).length||this.state.activeTool.type!=="selection"?n?this.syncActionResult({appState:{...this.state,currentItemStrokeColor:r},storeAction:D.CAPTURE}):this.syncActionResult({appState:{...this.state,currentItemBackgroundColor:r},storeAction:D.CAPTURE}):this.updateScene({elements:this.scene.getElementsIncludingDeleted().map(a=>this.state.selectedElementIds[a.id]?ie(a,{[n?"strokeColor":"backgroundColor"]:r}):a),storeAction:D.CAPTURE})},keepOpenOnAlt:!1})};syncActionResult=dt(t=>{if(this.unmounted||t===!1)return;let r=null;if(t.elements&&(t.elements.forEach(o=>{this.state.editingElement?.id===o.id&&this.state.editingElement!==o&&kl(o)&&(r=o)}),t.storeAction===D.UPDATE?this.store.shouldUpdateSnapshot():t.storeAction===D.CAPTURE&&this.store.shouldCaptureIncrement(),this.scene.replaceAllElements(t.elements)),t.files&&(this.files=t.replaceFiles?t.files:{...this.files,...t.files},this.addNewImagesToImageCache()),t.appState||r||this.state.contextMenu){t.storeAction===D.UPDATE?this.store.shouldUpdateSnapshot():t.storeAction===D.CAPTURE&&this.store.shouldCaptureIncrement();let o=t?.appState?.viewModeEnabled||!1,n=t?.appState?.zenModeEnabled||!1,i=t?.appState?.gridSize||null,a=t?.appState?.theme||this.props.theme||ae.LIGHT,s=t?.appState?.name??this.state.name,l=t?.appState?.errorMessage??this.state.errorMessage;typeof this.props.viewModeEnabled<"u"&&(o=this.props.viewModeEnabled),typeof this.props.zenModeEnabled<"u"&&(n=this.props.zenModeEnabled),typeof this.props.gridModeEnabled<"u"&&(i=this.props.gridModeEnabled?En:null),r=r||t.appState?.editingElement||null,r?.isDeleted&&(r=null),this.setState(c=>Object.assign(t.appState||{},{contextMenu:null,editingElement:r,viewModeEnabled:o,zenModeEnabled:n,gridSize:i,theme:a,name:s,errorMessage:l}))}});onBlur=dt(()=>{Ga=!1,this.setState({isBindingEnabled:!0})});onUnload=()=>{this.onBlur()};disableEvent=t=>{t.preventDefault()};resetHistory=()=>{this.history.clear()};resetStore=()=>{this.store.clear()};resetScene=dt(t=>{this.scene.replaceAllElements([]),this.setState(r=>({...jt(),isLoading:t?.resetLoadingState?!1:r.isLoading,theme:this.state.theme})),this.resetStore(),this.resetHistory()});initializeScene=async()=>{"launchQueue"in window&&"LaunchParams"in window&&window.launchQueue.setConsumer(async o=>{if(!o.files.length)return;let n=o.files[0],i=await n.getFile();this.loadFileToCanvas(new File([i],i.name||"",{type:i.type}),n)}),this.props.theme&&this.setState({theme:this.props.theme}),this.state.isLoading||this.setState({isLoading:!0});let t=null;try{t=await this.props.initialData||null,t?.libraryItems&&this.library.updateLibrary({libraryItems:t.libraryItems,merge:!0}).catch(o=>{console.error(o)})}catch(o){console.error(o),t={appState:{errorMessage:o.message||"Encountered an error during importing or restoring scene data"}}}let r=bi(t,null,null,{repairBindings:!0});r.appState={...r.appState,theme:this.props.theme||r.appState.theme,openSidebar:r.appState?.openSidebar||this.state.openSidebar,activeTool:r.appState.activeTool.type==="image"?{...r.appState.activeTool,type:"selection"}:r.appState.activeTool,isLoading:!1,toast:this.state.toast},t?.scrollToContent&&(r.appState={...r.appState,...$o(r.elements,{...r.appState,width:this.state.width,height:this.state.height,offsetTop:this.state.offsetTop,offsetLeft:this.state.offsetLeft})}),this.fonts.loadFontsForElements(r.elements),this.resetStore(),this.resetHistory(),this.syncActionResult({...r,storeAction:D.UPDATE})};isMobileBreakpoint=(t,r)=>t<x0||r<y0&&t<E0;refreshViewportBreakpoints=()=>{if(!this.excalidrawContainerRef.current)return;let{clientWidth:r,clientHeight:o}=document.body,n=this.device.viewport,i=ts(n,{isLandscape:r>o,isMobile:this.isMobileBreakpoint(r,o)});return n!==i?(this.device={...this.device,viewport:i},!0):!1};refreshEditorBreakpoints=()=>{let t=this.excalidrawContainerRef.current;if(!t)return;let{width:r,height:o}=t.getBoundingClientRect(),n=this.props.UIOptions.dockedSidebarBreakpoint!=null?this.props.UIOptions.dockedSidebarBreakpoint:w0,i=this.device.editor,a=ts(i,{isMobile:this.isMobileBreakpoint(r,o),canFitSidebar:r>n});return i!==a?(this.device={...this.device,editor:a},!0):!1};async componentDidMount(){if(this.unmounted=!1,this.excalidrawContainerValue.container=this.excalidrawContainerRef.current,C.MODE===yr.TEST||C.DEV){let r=this.setState.bind(this);Object.defineProperties(window.h,{state:{configurable:!0,get:()=>this.state},setState:{configurable:!0,value:(...o)=>this.setState(...o)},app:{configurable:!0,value:this},history:{configurable:!0,value:this.history},store:{configurable:!0,value:this.store}})}this.store.onStoreIncrementEmitter.on(r=>{this.history.record(r.elementsChange,r.appStateChange)}),this.scene.addCallback(this.onSceneUpdated),this.addEventListeners(),this.props.autoFocus&&this.excalidrawContainerRef.current&&this.focusContainer(),Br()||(this.refreshViewportBreakpoints(),this.refreshEditorBreakpoints()),gl&&this.excalidrawContainerRef.current&&(this.resizeObserver=new ResizeObserver(()=>{this.refreshEditorBreakpoints(),this.updateDOMRect()}),this.resizeObserver?.observe(this.excalidrawContainerRef.current)),new URLSearchParams(window.location.search.slice(1)).has("web-share-target")?this.restoreFileFromShare():this.updateDOMRect(this.initializeScene),a0()&&!Jb()&&this.setState({errorMessage:je(nv,{})})}componentWillUnmount(){this.renderer.destroy(),this.scene=new St,this.renderer=new Qc(this.scene),this.files={},this.imageCache.clear(),this.resizeObserver?.disconnect(),this.unmounted=!0,this.removeEventListeners(),this.scene.destroy(),this.library.destroy(),this.laserTrails.stop(),this.eraserTrail.stop(),this.onChangeEmitter.clear(),this.store.onStoreIncrementEmitter.clear(),Pe.destroy(),fo.destroy(),clearTimeout(_i),Ye.clearCache(),qt.clearCache(),_i=0,document.documentElement.style.overscrollBehaviorX=""}onResize=dt(()=>{this.scene.getElementsIncludingDeleted().forEach(t=>Pe.delete(t)),this.refreshViewportBreakpoints(),this.updateDOMRect(),gl||this.refreshEditorBreakpoints(),this.setState({})});onFullscreenChange=()=>{!document.fullscreenElement&&this.state.activeEmbeddable?.state==="active"&&this.setState({activeEmbeddable:null})};removeEventListeners(){this.onRemoveEventListenersEmitter.trigger()}addEventListeners(){this.removeEventListeners(),this.props.handleKeyboardGlobally&&this.onRemoveEventListenersEmitter.once(gt(document,"keydown",this.onKeyDown,!1)),this.onRemoveEventListenersEmitter.once(gt(this.excalidrawContainerRef.current,"wheel",this.onWheel,{passive:!1}),gt(window,"message",this.onWindowMessage,!1),gt(document,"pointerup",this.removePointer),gt(document,"copy",this.onCopy),gt(document,"keyup",this.onKeyUp,{passive:!0}),gt(document,"mousemove",this.updateCurrentCursorPosition),gt(document.fonts,"loadingdone",t=>{let r=t.fontfaces;this.fonts.onFontsLoaded(r)}),gt(document,"gesturestart",this.onGestureStart,!1),gt(document,"gesturechange",this.onGestureChange,!1),gt(document,"gestureend",this.onGestureEnd,!1),gt(window,"focus",()=>{this.maybeCleanupAfterMissingPointerUp(null)})),!this.state.viewModeEnabled&&(this.onRemoveEventListenersEmitter.once(gt(document,"fullscreenchange",this.onFullscreenChange),gt(document,"paste",this.pasteFromClipboard),gt(document,"cut",this.onCut),gt(window,"resize",this.onResize,!1),gt(window,"unload",this.onUnload,!1),gt(window,"blur",this.onBlur,!1),gt(this.excalidrawContainerRef.current,"dragover",this.disableEvent,!1),gt(this.excalidrawContainerRef.current,"drop",this.disableEvent,!1)),this.props.detectScroll&&this.onRemoveEventListenersEmitter.once(gt(B0(this.excalidrawContainerRef.current),"scroll",this.onScroll)))}componentDidUpdate(t,r){this.updateEmbeddables();let o=this.scene.getElementsIncludingDeleted(),n=this.scene.getElementsMapIncludingDeleted(),i=this.scene.getNonDeletedElementsMap();!this.state.showWelcomeScreen&&!o.length&&this.setState({showWelcomeScreen:!0}),t.UIOptions.dockedSidebarBreakpoint!==this.props.UIOptions.dockedSidebarBreakpoint&&this.refreshEditorBreakpoints(),r.userToFollow&&!this.state.collaborators.has(r.userToFollow.socketId)&&this.maybeUnfollowRemoteUser(),(r.zoom.value!==this.state.zoom.value||r.scrollX!==this.state.scrollX||r.scrollY!==this.state.scrollY)&&(this.props?.onScrollChange?.(this.state.scrollX,this.state.scrollY,this.state.zoom),this.onScrollChangeEmitter.trigger(this.state.scrollX,this.state.scrollY,this.state.zoom)),r.userToFollow!==this.state.userToFollow&&(r.userToFollow&&this.onUserFollowEmitter.trigger({userToFollow:r.userToFollow,action:"UNFOLLOW"}),this.state.userToFollow&&this.onUserFollowEmitter.trigger({userToFollow:this.state.userToFollow,action:"FOLLOW"})),Object.keys(this.state.selectedElementIds).length&&Tr(this.state)&&this.setState({activeTool:Qe(this.state,{type:"selection"})}),this.state.activeTool.type==="eraser"&&r.theme!==this.state.theme&&$h(this.interactiveCanvas,this.state.theme),r.activeTool.type==="selection"&&this.state.activeTool.type!=="selection"&&this.state.showHyperlinkPopup&&this.setState({showHyperlinkPopup:!1}),t.langCode!==this.props.langCode&&this.updateLanguage(),Tr(r)&&!Tr(this.state)&&this.eraserTrail.endPath(),t.viewModeEnabled!==this.props.viewModeEnabled&&this.setState({viewModeEnabled:!!this.props.viewModeEnabled}),r.viewModeEnabled!==this.state.viewModeEnabled&&(this.addEventListeners(),this.deselectElements()),t.zenModeEnabled!==this.props.zenModeEnabled&&this.setState({zenModeEnabled:!!this.props.zenModeEnabled}),t.theme!==this.props.theme&&this.props.theme&&this.setState({theme:this.props.theme}),t.gridModeEnabled!==this.props.gridModeEnabled&&this.setState({gridSize:this.props.gridModeEnabled?En:null}),this.excalidrawContainerRef.current?.classList.toggle("theme--dark",this.state.theme===ae.DARK),this.state.editingLinearElement&&!this.state.selectedElementIds[this.state.editingLinearElement.elementId]&&setTimeout(()=>{this.state.editingLinearElement&&this.actionManager.executeAction(uo)}),this.state.editingElement?.isDeleted&&this.setState({editingElement:null}),this.state.selectedLinearElement&&!this.state.selectedElementIds[this.state.selectedLinearElement.elementId]&&this.setState({selectedLinearElement:null});let{multiElement:s}=r;r.activeTool!==this.state.activeTool&&s!=null&&qo(this.state)&&wr(s,!1)&&Gl(s,this.state,To(Z.getPointAtIndexGlobalCoordinates(s,-1,i)),this),this.store.commit(n,this.state),this.state.isLoading||(this.props.onChange?.(o,this.state,this.files),this.onChangeEmitter.trigger(o,this.state,this.files))}renderInteractiveSceneCallback=({atLeastOneVisibleElement:t,scrollBars:r,elementsMap:o})=>{r&&(S2=r);let n=U(this.state.editingElement)?!1:!t&&o.size>0;this.state.scrolledOutside!==n&&this.setState({scrolledOutside:n}),this.scheduleImageRefresh()};onScroll=qi(()=>{let{offsetTop:t,offsetLeft:r}=this.getCanvasOffsets();this.setState(o=>o.offsetLeft===r&&o.offsetTop===t?null:{offsetTop:t,offsetLeft:r})},f0);onCut=dt(t=>{!this.excalidrawContainerRef.current?.contains(document.activeElement)||eo(t.target)||(this.actionManager.executeAction(Rp,"keyboard",t),t.preventDefault(),t.stopPropagation())});onCopy=dt(t=>{!this.excalidrawContainerRef.current?.contains(document.activeElement)||eo(t.target)||(this.actionManager.executeAction(qs,"keyboard",t),t.preventDefault(),t.stopPropagation())});static resetTapTwice(){Jc=!1}onTouchStart=t=>{if(md&&t.preventDefault(),!Jc){Jc=!0,clearTimeout(T2),T2=window.setTimeout(e.resetTapTwice,h0);return}if(Jc&&t.touches.length===1){let r=t.touches[0];this.handleCanvasDoubleClick({clientX:r.clientX,clientY:r.clientY}),Jc=!1,clearTimeout(T2)}t.touches.length===2&&this.setState({selectedElementIds:Ne({},this.state),activeEmbeddable:null})};onTouchEnd=t=>{this.resetContextMenuTimer(),t.touches.length>0?this.setState({previousSelectedElementIds:{},selectedElementIds:Ne(this.state.previousSelectedElementIds,this.state)}):Fe.pointers.clear()};pasteFromClipboard=dt(async t=>{let r=!!Vu,o=document.activeElement,n=this.excalidrawContainerRef.current?.contains(o);if(t&&!n)return;let i=document.elementFromPoint(this.lastViewportPosition.x,this.lastViewportPosition.y);if(t&&(!(i instanceof HTMLCanvasElement)||eo(o)))return;let{x:a,y:s}=Ke({clientX:this.lastViewportPosition.x,clientY:this.lastViewportPosition.y},this.state),l=t?.clipboardData?.files[0],c=await Gm(t,r);if(!l&&!r){if(c.mixedContent)return this.addElementsFromMixedContentPaste(c.mixedContent,{isPlainPaste:r,sceneX:a,sceneY:s});if(c.text){let d=c.text.trim();d.startsWith("<svg")&&d.endsWith("</svg>")&&(l=ug(d))}}if(xi(l)&&!c.spreadsheet){if(!this.isToolSupported("image")){this.setState({errorMessage:b("errors.imageToolNotSupported")});return}let d=this.createImageElement({sceneX:a,sceneY:s});this.insertImageElement(d,l),this.initializeImageDimensions(d),this.setState({selectedElementIds:Ne({[d.id]:!0},this.state)});return}if(this.props.onPaste)try{if(await this.props.onPaste(c,t)===!1)return}catch(d){console.error(d)}if(c.errorMessage)this.setState({errorMessage:c.errorMessage});else if(c.spreadsheet&&!r)this.setState({pasteDialog:{data:c.spreadsheet,shown:!0}});else if(c.elements){let d=c.programmaticAPI?Kc(c.elements):c.elements;this.addElementsFromPasteOrLibrary({elements:d,files:c.files||null,position:"cursor",retainSeed:r})}else if(c.text){let d=kd(c.text).split(/\n+/).map(p=>p.trim()).filter(Boolean),m=d.map(p=>vx(p)).filter(p=>fs(p,this.props.validateEmbeddable)&&(/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(p)||Pn(p)?.type==="video"));if(!Vu&&m.length>0&&m.length===d.length){let p=[];for(let u of m){let h=p[p.length-1],x=this.insertEmbeddableElement({sceneX:h?h.x+h.width+20:a,sceneY:s,link:pr(u)});x&&p.push(x)}p.length&&this.setState({selectedElementIds:Object.fromEntries(p.map(u=>[u.id,!0]))});return}this.addTextFromPaste(c.text,r)}this.setActiveTool({type:"selection"}),t?.preventDefault()});addElementsFromPasteOrLibrary=t=>{let r=oc(t.elements,null,void 0),[o,n,i,a]=Te(r),s=Pt(o,i)/2,l=Pt(n,a)/2,c=typeof t.position=="object"?t.position.clientX:t.position==="cursor"?this.lastViewportPosition.x:this.state.width/2+this.state.offsetLeft,d=typeof t.position=="object"?t.position.clientY:t.position==="cursor"?this.lastViewportPosition.y:this.state.height/2+this.state.offsetTop,{x:m,y:p}=Ke({clientX:c,clientY:d},this.state),u=m-s,h=p-l,[x,E]=It(u,h,this.state.gridSize),w=pm(r.map(S=>ie(S,{x:S.x+x-o,y:S.y+E-n})),{randomizeSeed:!t.retainSeed}),v=[...this.scene.getElementsIncludingDeleted(),...w];Ft(v,X(w));let A=this.getTopLayerFrameAtSceneCoords({x:m,y:p});if(A){let S=FE(w,A);hc(v,S,A)}this.scene.replaceAllElements(v),w.forEach(S=>{if(U(S)&&Ie(S)){let k=pt(S,this.scene.getElementsMapIncludingDeleted());Nt(S,k,this.scene.getElementsMapIncludingDeleted())}}),t.files&&(this.files={...this.files,...t.files}),this.store.shouldCaptureIncrement();let L=Aa(w);this.setState({...this.state,openSidebar:this.state.openSidebar&&this.device.editor.canFitSidebar&&Jt.get(Wc)?this.state.openSidebar:null,...qt({editingGroupId:null,selectedElementIds:L.reduce((S,k)=>(Ie(k)||(S[k.id]=!0),S),{})},this.scene.getNonDeletedElements(),this.state,this)},()=>{t.files&&this.addNewImagesToImageCache()}),this.setActiveTool({type:"selection"}),t.fitToContent&&this.scrollToContent(w,{fitToContent:!0})};async addElementsFromMixedContentPaste(t,{isPlainPaste:r,sceneX:o,sceneY:n}){if(!r&&t.some(i=>i.type==="imageUrl")&&this.isToolSupported("image")){let i=t.filter(m=>m.type==="imageUrl").map(m=>m.value),a=await Promise.all(i.map(async m=>{try{return{file:await Yx(m)}}catch(p){let u=p.message;return p.cause==="FETCH_ERROR"?u=b("errors.failedToFetchImage"):p.cause==="UNSUPPORTED"&&(u=b("errors.unsupportedFileType")),{errorMessage:u}}})),s=n,l=!1,c={};for(let m of a)if(m.file){let p=this.createImageElement({sceneX:o,sceneY:s}),u=await this.insertImageElement(p,m.file);u&&(l||(l=!0,s-=u.height/2),z(u,{y:s},!1),s=p.y+p.height+25,c[p.id]=!0)}this.setState({selectedElementIds:Ne(c,this.state)});let d=a.find(m=>!!m.errorMessage);d&&d.errorMessage&&this.setState({errorMessage:d.errorMessage})}else{let i=t.filter(a=>a.type==="text");i.length&&this.addTextFromPaste(i.map(a=>a.value).join(`

`),r)}}addTextFromPaste(t,r=!1){let{x:o,y:n}=Ke({clientX:this.lastViewportPosition.x,clientY:this.lastViewportPosition.y},this.state),i={x:o,y:n,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roundness:null,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,text:t,fontSize:this.state.currentItemFontSize,fontFamily:this.state.currentItemFontFamily,textAlign:this.state.currentItemTextAlign,verticalAlign:Xi,locked:!1},a=10,s=n,l=r?[t]:t.split(`
`),c=l.reduce((d,m,p)=>{let u=m.trim(),h=_r(i.fontFamily);if(u.length){let x=this.getTopLayerFrameAtSceneCoords({x:o,y:s}),E=Ht({...i,x:o,y:s,text:u,lineHeight:h,frameId:x?x.id:null});d.push(E),s+=E.height+a}else l[p-1]?.trim()&&(s+=ui(i.fontSize,h)+a);return d},[]);c.length!==0&&(this.scene.insertElements(c),this.setState({selectedElementIds:Ne(Object.fromEntries(c.map(d=>[d.id,!0])),this.state)}),!r&&c.length>1&&Iv===!1&&!this.device.editor.isMobile&&(this.setToast({message:b("toast.pasteAsSingleElement",{shortcut:N("CtrlOrCmd+Shift+V")}),duration:5e3}),Iv=!0),this.store.shouldCaptureIncrement())}setAppState=(t,r)=>{this.setState(t,r)};removePointer=t=>{_i&&this.resetContextMenuTimer(),Fe.pointers.delete(t.pointerId)};toggleLock=(t="ui")=>{this.state.activeTool.locked||xe("toolbar","toggleLock",`${t} (${this.device.editor.isMobile?"mobile":"desktop"})`),this.setState(r=>({activeTool:{...r.activeTool,...Qe(this.state,r.activeTool.locked?{type:"selection"}:r.activeTool),locked:!r.activeTool.locked}}))};updateFrameRendering=t=>{this.setState(r=>{let o=typeof t=="function"?t(r.frameRendering):t;return{frameRendering:{enabled:o?.enabled??r.frameRendering.enabled,clip:o?.clip??r.frameRendering.clip,name:o?.name??r.frameRendering.name,outline:o?.outline??r.frameRendering.outline}}})};togglePenMode=t=>{this.setState(r=>({penMode:t??!r.penMode,penDetected:!0}))};onHandToolToggle=()=>{this.actionManager.executeAction(k3)};zoomCanvas=t=>{this.setState({...Hn({viewportX:this.state.width/2+this.state.offsetLeft,viewportY:this.state.height/2+this.state.offsetTop,nextZoom:rn(t)},this.state)})};cancelInProgressAnimation=null;scrollToContent=(t=this.scene.getNonDeletedElements(),r)=>{this.cancelInProgressAnimation?.();let o=Array.isArray(t)?t:[t],n=this.state.zoom,i=this.state.scrollX,a=this.state.scrollY;if(r?.fitToContent||r?.fitToViewport){let{appState:s}=Mc({targetElements:o,appState:this.state,fitToViewport:!!r?.fitToViewport,viewportZoomFactor:r?.viewportZoomFactor});n=s.zoom,i=s.scrollX,a=s.scrollY}else{let s=$o(o,this.state);i=s.scrollX,a=s.scrollY}if(r?.animate){let s=this.state.scrollX,l=this.state.scrollY,c=this.state.zoom.value,d=N0({fromValues:{scrollX:s,scrollY:l,zoom:c},toValues:{scrollX:i,scrollY:a,zoom:n.value},interpolateValue:(m,p,u,h)=>{if(h==="zoom")return m*Math.pow(p/m,yn(u))},onStep:({scrollX:m,scrollY:p,zoom:u})=>{this.setState({scrollX:m,scrollY:p,zoom:{value:u}})},onStart:()=>{this.setState({shouldCacheIgnoreZoom:!0})},onEnd:()=>{this.setState({shouldCacheIgnoreZoom:!1})},onCancel:()=>{this.setState({shouldCacheIgnoreZoom:!1})},duration:r?.duration??500});this.cancelInProgressAnimation=()=>{d(),this.cancelInProgressAnimation=null}}else this.setState({scrollX:i,scrollY:a,zoom:n})};maybeUnfollowRemoteUser=()=>{this.state.userToFollow&&this.setState({userToFollow:null})};translateCanvas=t=>{this.cancelInProgressAnimation?.(),this.maybeUnfollowRemoteUser(),this.setState(t)};setToast=t=>{this.setState({toast:t})};restoreFileFromShare=async()=>{try{let t=await caches.open("web-share-target"),r=await t.match("shared-file");if(r){let o=await r.blob(),n=new File([o],o.name||"",{type:o.type});this.loadFileToCanvas(n,null),await t.delete("shared-file"),window.history.replaceState(null,fl,window.location.pathname)}}catch(t){this.setState({errorMessage:t.message})}};addFiles=dt(t=>{let r=t.reduce((o,n)=>(o.set(n.id,n),o),new Map);this.files={...this.files,...Object.fromEntries(r)},this.scene.getNonDeletedElements().forEach(o=>{lr(o)&&r.has(o.fileId)&&(this.imageCache.delete(o.fileId),Pe.delete(o))}),this.scene.informMutation(),this.addNewImagesToImageCache()});updateScene=dt(t=>{let r=cr(t.elements??[]);if(t.storeAction&&t.storeAction!==D.NONE){let o=this.store.snapshot.appState,n=this.store.snapshot.elements,i=t.appState?Object.assign({},o,t.appState):o,a=t.elements?this.store.filterUncomittedElements(this.scene.getElementsMapIncludingDeleted(),X(r)):n;t.storeAction===D.CAPTURE?this.store.captureIncrement(a,i):t.storeAction===D.UPDATE&&this.store.updateSnapshot(a,i)}t.appState&&this.setState(t.appState),t.elements&&this.scene.replaceAllElements(r),t.collaborators&&this.setState({collaborators:t.collaborators})});onSceneUpdated=()=>{this.setState({})};toggleSidebar=({name:t,tab:r,force:o})=>{let n;o===void 0?n=this.state.openSidebar?.name===t&&this.state.openSidebar?.tab===r?null:t:n=o?t:null;let i=n?{name:n}:null;return i&&r&&(i.tab=r),this.setState({openSidebar:i}),!!n};updateCurrentCursorPosition=dt(t=>{this.lastViewportPosition.x=t.clientX,this.lastViewportPosition.y=t.clientY});onKeyDown=dt(t=>{if("Proxy"in window&&(!t.shiftKey&&/^[A-Z]$/.test(t.key)||t.shiftKey&&/^[a-z]$/.test(t.key))&&(t=new Proxy(t,{get(i,a){let s=i[a];return typeof s=="function"?s.bind(i):a==="key"?t.shiftKey?i.key.toUpperCase():i.key.toLowerCase():s}})),t[T.CTRL_OR_CMD]&&t.key===T.P&&!t.shiftKey&&!t.altKey){this.setToast({message:b("commandPalette.shortcutHint",{shortcut:Mt("commandPalette")})}),t.preventDefault();return}if(t[T.CTRL_OR_CMD]&&t.key.toLowerCase()===T.V&&(Vu=t.shiftKey,clearTimeout(Sv),Sv=window.setTimeout(()=>{Vu=!1},100)),t[T.CTRL_OR_CMD]&&eo(t.target)&&(t.code===fe.MINUS||t.code===fe.EQUAL)){t.preventDefault();return}if(eo(t.target)&&t.key!==T.ESCAPE||ls(t.key)&&ch(t.target))return;if(t.key===T.QUESTION_MARK){this.setState({openDialog:{name:"help"}});return}else if(t.key.toLowerCase()===T.E&&t.shiftKey&&t[T.CTRL_OR_CMD]){t.preventDefault(),this.setState({openDialog:{name:"imageExport"}});return}if(t.key===T.PAGE_UP||t.key===T.PAGE_DOWN){let i=(t.shiftKey?this.state.width:this.state.height)/this.state.zoom.value;t.key===T.PAGE_DOWN&&(i=-i),t.shiftKey?this.translateCanvas(a=>({scrollX:a.scrollX+i})):this.translateCanvas(a=>({scrollY:a.scrollY+i}))}if(this.actionManager.handleKeyDown(t)||this.state.viewModeEnabled)return;if(t[T.CTRL_OR_CMD]&&this.state.isBindingEnabled&&this.setState({isBindingEnabled:!1}),ls(t.key)){let i=this.state.gridSize&&(t.shiftKey?eh:this.state.gridSize)||(t.shiftKey?s0:eh),a=0,s=0;t.key===T.ARROW_LEFT?a=-i:t.key===T.ARROW_RIGHT?a=i:t.key===T.ARROW_UP?s=-i:t.key===T.ARROW_DOWN&&(s=i);let l=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});l.forEach(c=>{z(c,{x:c.x+a,y:c.y+s}),Hr(c,this.scene.getNonDeletedElementsMap(),{simultaneouslyUpdated:l})}),this.setState({suggestedBindings:Yd(l,this)}),t.preventDefault()}else if(t.key===T.ENTER){let i=this.scene.getSelectedElements(this.state);if(i.length===1){let a=i[0];if(t[T.CTRL_OR_CMD])ne(a)&&(!this.state.editingLinearElement||this.state.editingLinearElement.elementId!==i[0].id)&&(this.store.shouldCaptureIncrement(),this.setState({editingLinearElement:new Z(a)}));else if(U(a)||Qb(a)){let s;U(a)||(s=a);let l=$d(a,this.state,this.scene.getNonDeletedElementsMap()),c=l.x,d=l.y;this.startTextEditing({sceneX:c,sceneY:d,container:s}),t.preventDefault();return}else ee(a)&&this.setState({editingFrame:a.id})}}else if(!t.ctrlKey&&!t.altKey&&!t.metaKey&&this.state.draggingElement===null){let i=Qw(t.key);i?(this.state.activeTool.type!==i&&xe("toolbar",i,`keyboard (${this.device.editor.isMobile?"mobile":"desktop"})`),this.setActiveTool({type:i}),t.stopPropagation()):t.key===T.Q&&(this.toggleLock("keyboard"),t.stopPropagation())}if(t.key===T.SPACE&&Fe.pointers.size===0&&(Ga=!0,We(this.interactiveCanvas,Le.GRAB),t.preventDefault()),(t.key===T.G||t.key===T.S)&&!t.altKey&&!t[T.CTRL_OR_CMD]){let i=this.scene.getSelectedElements(this.state);if(this.state.activeTool.type==="selection"&&!i.length)return;t.key===T.G&&(vn(this.state.activeTool.type)||i.some(a=>vn(a.type)))&&(this.setState({openPopup:"elementBackground"}),t.stopPropagation()),t.key===T.S&&(this.setState({openPopup:"elementStroke"}),t.stopPropagation())}if(t.key===T.K&&!t.altKey&&!t[T.CTRL_OR_CMD]){this.state.activeTool.type==="laser"?this.setActiveTool({type:"selection"}):this.setActiveTool({type:"laser"});return}t[T.CTRL_OR_CMD]&&(t.key===T.BACKSPACE||t.key===T.DELETE)&&Jt.set(za,"clearCanvas");let r=t.key.toLocaleLowerCase(),o=r===T.S&&t.shiftKey,n=t.key===T.I||r===T.G&&t.shiftKey;(o||n)&&this.openEyeDropper({type:o?"stroke":"background"})});onWheel=dt(t=>{!(t.target instanceof HTMLCanvasElement)&&t.ctrlKey&&t.preventDefault()});onKeyUp=dt(t=>{t.key===T.SPACE&&(this.state.viewModeEnabled?We(this.interactiveCanvas,Le.GRAB):this.state.activeTool.type==="selection"?Ur(this.interactiveCanvas):(Wr(this.interactiveCanvas,this.state),this.setState({selectedElementIds:Ne({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})),Ga=!1),!t[T.CTRL_OR_CMD]&&!this.state.isBindingEnabled&&this.setState({isBindingEnabled:!0}),ls(t.key)&&(_l(this.scene.getSelectedElements(this.state).filter(ne),this,qo(this.state),this.state.selectedLinearElement?.selectedPointsIndices??[]),this.setState({suggestedBindings:[]}))});isToolSupported=t=>this.props.UIOptions.tools?.[t]!==!1;setActiveTool=t=>{if(!this.isToolSupported(t.type)){console.warn(`"${t.type}" tool is disabled via "UIOptions.canvasActions.tools.${t.type}"`);return}let r=Qe(this.state,t);r.type==="hand"?We(this.interactiveCanvas,Le.GRAB):Ga||Wr(this.interactiveCanvas,this.state),D0(document.activeElement)&&this.focusContainer(),Sl(r.type)||this.setState({suggestedBindings:[]}),r.type==="image"&&this.onImageAction({insertOnCanvasDirectly:(t.type==="image"&&t.insertOnCanvasDirectly)??!1}),this.setState(o=>{let n={snapLines:o.snapLines.length?[]:o.snapLines,originSnapOffset:null,activeEmbeddable:null};return r.type==="freedraw"&&this.store.shouldCaptureIncrement(),r.type!=="selection"?{...o,activeTool:r,selectedElementIds:Ne({},o),selectedGroupIds:Ne({},o),editingGroupId:null,multiElement:null,...n}:{...o,activeTool:r,...n}})};setOpenDialog=t=>{this.setState({openDialog:t})};setCursor=t=>{We(this.interactiveCanvas,t)};resetCursor=()=>{Ur(this.interactiveCanvas)};isTouchScreenMultiTouchGesture=()=>Fe.pointers.size>=2;getName=()=>this.state.name||this.props.name||`${b("labels.untitled")}-${lh()}`;onGestureStart=dt(t=>{t.preventDefault(),this.isTouchScreenMultiTouchGesture()&&this.setState({selectedElementIds:Ne({},this.state),activeEmbeddable:null}),Fe.initialScale=this.state.zoom.value});onGestureChange=dt(t=>{if(t.preventDefault(),this.isTouchScreenMultiTouchGesture())return;let r=Fe.initialScale;r&&this.setState(o=>({...Hn({viewportX:this.lastViewportPosition.x,viewportY:this.lastViewportPosition.y,nextZoom:rn(r*t.scale)},o)}))});onGestureEnd=dt(t=>{t.preventDefault(),this.isTouchScreenMultiTouchGesture()&&this.setState({previousSelectedElementIds:{},selectedElementIds:Ne(this.state.previousSelectedElementIds,this.state)}),Fe.initialScale=null});handleTextWysiwyg(t,{isExistingElement:r=!1}){let o=this.scene.getElementsMapIncludingDeleted(),n=(i,a,s)=>{this.scene.replaceAllElements([...this.scene.getElementsIncludingDeleted().map(l=>l.id===t.id&&U(l)?tg(l,pt(l,o),o,{text:i,isDeleted:s,originalText:a}):l)])};Tv({id:t.id,canvas:this.canvas,getViewportCoords:(i,a)=>{let{x:s,y:l}=Bt({sceneX:i,sceneY:a},this.state);return[s-this.state.offsetLeft,l-this.state.offsetTop]},onChange:dt(i=>{n(i,i,!1),kl(t)&&Hr(t,o)}),onSubmit:dt(({text:i,viaKeyboard:a,originalText:s})=>{let l=!i.trim();if(n(i,s,l),!l&&a){let c=t.containerId?t.containerId:t.id;this.setState(d=>({selectedElementIds:Ne({...d.selectedElementIds,[c]:!0},d)}))}l&&Kd(this.scene.getNonDeletedElements(),[t]),(!l||r)&&this.store.shouldCaptureIncrement(),this.setState({draggingElement:null,editingElement:null}),this.state.activeTool.locked&&Wr(this.interactiveCanvas,this.state),this.focusContainer()}),element:t,excalidrawContainer:this.excalidrawContainerRef.current,app:this}),this.deselectElements(),n(t.text,t.originalText,!1)}deselectElements(){this.setState({selectedElementIds:Ne({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})}getTextElementAtPosition(t,r){let o=this.getElementAtPosition(t,r,{includeBoundTextElement:!0});return o&&U(o)&&!o.isDeleted?o:null}getElementShape(t){switch(t.type){case"rectangle":case"diamond":case"frame":case"magicframe":case"embeddable":case"image":case"iframe":case"text":case"selection":return Sm(t);case"arrow":case"line":{let r=Pe.get(t)?.[0]??Pe.generateElementShape(t,null)[0],[,,,,o,n]=re(t,this.scene.getNonDeletedElementsMap());return Im(t)?tE(t,r,[t.x,t.y],t.angle,[o,n]):$x(r,[t.x,t.y],t.angle,[o,n])}case"ellipse":return Qx(t);case"freedraw":{let[,,,,r,o]=re(t,this.scene.getNonDeletedElementsMap());return eE(t,[r,o],Im(t))}}}getBoundTextShape(t){let r=me(t,this.scene.getNonDeletedElementsMap());return r?t.type==="arrow"?this.getElementShape({...r,...Z.getBoundTextElementPosition(t,r,this.scene.getNonDeletedElementsMap())}):this.getElementShape(r):null}getElementAtPosition(t,r,o){let n=this.getElementsAtPosition(t,r,o?.includeBoundTextElement,o?.includeLockedElements);if(n.length>1){if(o?.preferSelected){for(let a=n.length-1;a>-1;a--)if(this.state.selectedElementIds[n[a].id])return n[a]}let i=n[n.length-1];return ba({x:t,y:r,element:i,shape:this.getElementShape(i),threshold:this.getElementHitThreshold()/2,frameNameBound:ee(i)?this.frameNameBoundsCache.get(i):null})?i:n[n.length-2]}return n.length===1?n[0]:null}getElementsAtPosition(t,r,o=!1,n=!1){let i=[],a=this.scene.getNonDeletedElementsMap();return(o&&n?this.scene.getNonDeletedElements():this.scene.getNonDeletedElements().filter(l=>(n||!l.locked)&&(o||!(U(l)&&l.containerId)))).filter(l=>this.hitElement(t,r,l)).filter(l=>{let c=_t(l,a);return c&&this.state.frameRendering.enabled&&this.state.frameRendering.clip?Pg({x:t,y:r},c,a):!0}).filter(l=>ro(l)?(i.push(l),!1):!0).concat(i)}getElementHitThreshold(){return c0/this.state.zoom.value}hitElement(t,r,o,n=!0){if(n&&this.state.selectedElementIds[o.id]&&$m([o],this.state)){let a=qx(o,this.scene.getNonDeletedElementsMap(),this.getElementHitThreshold());return ss([t,r],a)}return oE(t,r,this.getBoundTextShape(o))?!0:ba({x:t,y:r,element:o,shape:this.getElementShape(o),threshold:this.getElementHitThreshold(),frameNameBound:ee(o)?this.frameNameBoundsCache.get(o):null})}getTextBindableContainerAtPosition(t,r){let o=this.scene.getNonDeletedElements(),n=this.scene.getSelectedElements(this.state);if(n.length===1)return Vo(n[0],!1)?n[0]:null;let i=null;for(let a=o.length-1;a>=0;--a){if(o[a].isDeleted)continue;let[s,l,c,d]=re(o[a],this.scene.getNonDeletedElementsMap());if(we(o[a])&&ba({x:t,y:r,element:o[a],shape:this.getElementShape(o[a]),threshold:this.getElementHitThreshold()})){i=o[a];break}else if(s<t&&t<c&&l<r&&r<d){i=o[a];break}}return Vo(i,!1)?i:null}startTextEditing=({sceneX:t,sceneY:r,insertAtParentCenter:o=!0,container:n})=>{let i=!1,a=o&&this.getTextWysiwygSnappedToCenterPosition(t,r,this.state,n);n&&a&&(me(n,this.scene.getNonDeletedElementsMap())||(i=!0));let s=null,l=this.scene.getSelectedElements(this.state);l.length===1?U(l[0])?s=l[0]:n?s=me(l[0],this.scene.getNonDeletedElementsMap()):s=this.getTextElementAtPosition(t,r):s=this.getTextElementAtPosition(t,r);let c=s?.fontFamily||this.state.currentItemFontFamily,d=s?.lineHeight||_r(c),m=this.state.currentItemFontSize;if(!s&&i&&n&&!we(n)){let x=Jd(Ve({fontSize:m,fontFamily:c}),d),E=Qd(m,d),w=Math.max(n.height,E),y=Math.max(n.width,x);z(n,{height:w,width:y}),t=n.x+y/2,r=n.y+w/2,a&&(a=this.getTextWysiwygSnappedToCenterPosition(t,r,this.state,n))}let p=this.getTopLayerFrameAtSceneCoords({x:t,y:r}),u=s||Ht({x:a?a.elementCenterX:t,y:a?a.elementCenterY:r,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,text:"",fontSize:m,fontFamily:c,textAlign:a?"center":this.state.currentItemTextAlign,verticalAlign:a?yt.MIDDLE:Xi,containerId:i?n?.id:void 0,groupIds:n?.groupIds??[],lineHeight:d,angle:n?.angle??0,frameId:p?p.id:null});if(!s&&i&&n&&z(n,{boundElements:(n.boundElements||[]).concat({type:"text",id:u.id})}),this.setState({editingElement:u}),!s)if(n&&i){let h=this.scene.getElementIndex(n.id);this.scene.insertElementAtIndex(u,h+1)}else this.scene.insertElement(u);this.setState({editingElement:u}),this.handleTextWysiwyg(u,{isExistingElement:!!s})};handleCanvasDoubleClick=t=>{if(this.state.multiElement||this.state.activeTool.type!=="selection")return;let r=this.scene.getSelectedElements(this.state);if(r.length===1&&ne(r[0])&&t[T.CTRL_OR_CMD]&&(!this.state.editingLinearElement||this.state.editingLinearElement.elementId!==r[0].id)){this.store.shouldCaptureIncrement(),this.setState({editingLinearElement:new Z(r[0])});return}Ur(this.interactiveCanvas);let{x:o,y:n}=Ke(t,this.state);if(Sn(this.state).length>0){let a=this.getElementAtPosition(o,n),s=a&&nx(a,this.state.selectedGroupIds);if(s){this.store.shouldCaptureIncrement(),this.setState(l=>({...l,...qt({editingGroupId:s,selectedElementIds:{[a.id]:!0}},this.scene.getNonDeletedElements(),l,this)}));return}}if(Ur(this.interactiveCanvas),!t[T.CTRL_OR_CMD]&&!this.state.viewModeEnabled){let a=this.getElementAtPosition(o,n);if(Xt(a)){this.setState({activeEmbeddable:{element:a,state:"active"}});return}let s=this.getTextBindableContainerAtPosition(o,n);if(s&&(tr(s)||!sr(s.backgroundColor)||ba({x:o,y:n,element:s,shape:this.getElementShape(s),threshold:this.getElementHitThreshold()}))){let l=$d(s,this.state,this.scene.getNonDeletedElementsMap());o=l.x,n=l.y}this.startTextEditing({sceneX:o,sceneY:n,insertAtParentCenter:!t.altKey,container:s})}};getElementLinkAtPosition=(t,r)=>{let o=this.scene.getNonDeletedElements().slice().reverse(),n=1/0;return o.find((i,a)=>(r&&i.id===r.id&&(n=a),i.link&&a<=n&&km(i,this.scene.getNonDeletedElementsMap(),this.state,[t.x,t.y],this.device.editor.isMobile)))};redirectToLink=(t,r)=>{let o=vt(this.lastPointerDownEvent.clientX,this.lastPointerDownEvent.clientY,this.lastPointerUpEvent.clientX,this.lastPointerUpEvent.clientY);if(!this.hitLinkElement||r&&o>xn||!r&&o!==0)return;let n=Ke(this.lastPointerDownEvent,this.state),i=this.scene.getNonDeletedElementsMap(),a=km(this.hitLinkElement,i,this.state,[n.x,n.y],this.device.editor.isMobile),s=Ke(this.lastPointerUpEvent,this.state),l=km(this.hitLinkElement,i,this.state,[s.x,s.y],this.device.editor.isMobile);if(a&&l){let c=this.hitLinkElement.link;if(c){c=pr(c);let d;if(this.props.onLinkOpen&&(d=Id("excalidraw-link",t.nativeEvent),this.props.onLinkOpen({...this.hitLinkElement,link:c},d)),!d?.defaultPrevented){let m=im(c)?"_self":"_blank",p=window.open(void 0,m);p&&(p.opener=null,p.location=c)}}}};getTopLayerFrameAtSceneCoords=t=>{let r=this.scene.getNonDeletedElementsMap(),o=this.scene.getNonDeletedFramesLikes().filter(n=>Pg(t,n,r));return o.length?o[o.length-1]:null};handleCanvasPointerMove=t=>{this.savePointer(t.clientX,t.clientY,this.state.cursorButton),this.lastPointerMoveEvent=t.nativeEvent,Fe.pointers.has(t.pointerId)&&Fe.pointers.set(t.pointerId,{x:t.clientX,y:t.clientY});let r=Fe.initialScale;if(Fe.pointers.size===2&&Fe.lastCenter&&r&&Fe.initialDistance){let p=z1(Fe.pointers),u=p.x-Fe.lastCenter.x,h=p.y-Fe.lastCenter.y;Fe.lastCenter=p;let x=H1(Array.from(Fe.pointers.values())),E=this.state.activeTool.type==="freedraw"&&this.state.penMode?1:x/Fe.initialDistance,w=E?rn(r*E):this.state.zoom.value;this.setState(y=>{let v=Hn({viewportX:p.x,viewportY:p.y,nextZoom:w},y);this.translateCanvas({zoom:v.zoom,scrollX:v.scrollX+u/w,scrollY:v.scrollY+h/w,shouldCacheIgnoreZoom:!0})}),this.resetShouldCacheIgnoreZoomDebounced()}else Fe.lastCenter=Fe.initialDistance=Fe.initialScale=null;if(Ga||$c||A2||Do(this.state))return;let n=U1(S2,t.clientX-this.state.offsetLeft,t.clientY-this.state.offsetTop).isOverEither;!this.state.draggingElement&&!this.state.multiElement&&(n?Ur(this.interactiveCanvas):Wr(this.interactiveCanvas,this.state));let i=Ke(t,this.state),{x:a,y:s}=i;if(!this.state.draggingElement&&rv(this.state.activeTool.type)){let{originOffset:p,snapLines:u}=tv(this.scene.getNonDeletedElements(),this.state,{x:a,y:s},t,this.scene.getNonDeletedElementsMap());this.setState(h=>{let x=Md(h.snapLines,u),E=h.originSnapOffset?Md(h.originSnapOffset,p):p;return h.snapLines===x&&h.originSnapOffset===E?null:{snapLines:x,originSnapOffset:E}})}else this.state.draggingElement||this.setState(p=>p.snapLines.length?{snapLines:[]}:null);if(this.state.editingLinearElement&&!this.state.editingLinearElement.isDragging){let p=Z.handlePointerMove(t,a,s,this.state,this.scene.getNonDeletedElementsMap());p&&p!==this.state.editingLinearElement&&C2(()=>{this.setState({editingLinearElement:p})}),p?.lastUncommittedPoint!=null?this.maybeSuggestBindingAtCursor(i):C2(()=>{this.setState({suggestedBindings:[]})})}if(uh(this.state.activeTool.type)){let{draggingElement:p}=this.state;wr(p,!1)?this.maybeSuggestBindingsForLinearElementAtCoords(p,[i],this.state.startBoundElement):this.maybeSuggestBindingAtCursor(i)}if(this.state.multiElement){let{multiElement:p}=this.state,{x:u,y:h}=p,{points:x,lastCommittedPoint:E}=p,w=x[x.length-1];if(Wr(this.interactiveCanvas,this.state),w===E)vt(a-u,s-h,w[0],w[1])>=Za?z(p,{points:[...x,[a-u,s-h]]}):We(this.interactiveCanvas,Le.POINTER);else if(x.length>2&&E&&vt(a-u,s-h,E[0],E[1])<Za)We(this.interactiveCanvas,Le.POINTER),z(p,{points:x.slice(0,-1)});else{let[y,v]=It(a,s,t[T.CTRL_OR_CMD]?null:this.state.gridSize),[A,L]=p?.lastCommittedPoint??[0,0],S=y-u-A,k=v-h-L;aa(t)&&({width:S,height:k}=ms(A+u,L+h,y,v)),dr(x,this.state.zoom.value)&&We(this.interactiveCanvas,Le.POINTER),z(p,{points:[...x.slice(0,-1),[A+S,L+k]]})}return}if(!!t.buttons||this.state.activeTool.type!=="selection"&&this.state.activeTool.type!=="text"&&this.state.activeTool.type!=="eraser")return;let c=this.scene.getNonDeletedElements(),d=this.scene.getSelectedElements(this.state);if(d.length===1&&!n&&!this.state.editingLinearElement){if(this.state.selectedLinearElement&&this.handleHoverSelectedLinearElement(this.state.selectedLinearElement,a,s),!this.state.selectedLinearElement||this.state.selectedLinearElement.hoverPointIndex===-1){let p=ep(c,this.state,a,s,this.state.zoom,t.pointerType,this.scene.getNonDeletedElementsMap(),this.device);if(p&&p.transformHandleType){We(this.interactiveCanvas,rp(p));return}}}else if(d.length>1&&!n){let p=tp(Te(d),a,s,this.state.zoom,t.pointerType,this.device);if(p){We(this.interactiveCanvas,rp({transformHandleType:p}));return}}let m=this.getElementAtPosition(i.x,i.y);this.hitLinkElement=this.getElementLinkAtPosition(i,m),!Tr(this.state)&&(this.hitLinkElement&&!this.state.selectedElementIds[this.hitLinkElement.id]?(We(this.interactiveCanvas,Le.POINTER),rw(this.hitLinkElement,this.state,this.scene.getNonDeletedElementsMap())):(ow(),m&&(m.link||At(m))&&this.state.selectedElementIds[m.id]&&!this.state.contextMenu&&!this.state.showHyperlinkPopup?this.setState({showHyperlinkPopup:"info"}):this.state.activeTool.type==="text"?We(this.interactiveCanvas,U(m)?Le.TEXT:Le.CROSSHAIR):this.state.viewModeEnabled?We(this.interactiveCanvas,Le.GRAB):n?We(this.interactiveCanvas,Le.AUTO):this.state.selectedLinearElement?this.handleHoverSelectedLinearElement(this.state.selectedLinearElement,a,s):t[T.CTRL_OR_CMD]?We(this.interactiveCanvas,Le.AUTO):(m||this.isHittingCommonBoundingBoxOfSelectedElements(i,d))&&!m?.locked&&(m&&Xt(m)&&this.isIframeLikeElementCenter(m,t,a,s)?(We(this.interactiveCanvas,Le.POINTER),this.setState({activeEmbeddable:{element:m,state:"hover"}})):(We(this.interactiveCanvas,Le.MOVE),this.state.activeEmbeddable?.state==="hover"&&this.setState({activeEmbeddable:null})))))};handleEraser=(t,r,o)=>{this.eraserTrail.addPointToPath(o.x,o.y);let n=!1,i=new Set,a=this.scene.getNonDeletedElements(),s=p=>{for(let u of p){if(u.locked)return;if(t.altKey?this.elementsPendingErasure.delete(u.id)&&(n=!0):this.elementsPendingErasure.has(u.id)||(n=!0,this.elementsPendingErasure.add(u.id)),n&&u.groupIds?.length){let h=u.groupIds.at(-1);if(!i.has(h)){i.add(h);let x=tt(a,h);for(let E of x)t.altKey?this.elementsPendingErasure.delete(E.id):this.elementsPendingErasure.add(E.id)}}}},l=vt(r.lastCoords.x,r.lastCoords.y,o.x,o.y),c=this.getElementHitThreshold(),d={...r.lastCoords},m=0;for(;m<=l;){let p=this.getElementsAtPosition(d.x,d.y);if(s(p),m===l)break;m=Math.min(m+c,l);let u=m/l,h=(1-u)*d.x+u*o.x,x=(1-u)*d.y+u*o.y;d.x=h,d.y=x}if(r.lastCoords.x=o.x,r.lastCoords.y=o.y,n){for(let p of this.scene.getNonDeletedElements())Ie(p)&&(this.elementsPendingErasure.has(p.id)||this.elementsPendingErasure.has(p.containerId))&&(t.altKey?(this.elementsPendingErasure.delete(p.id),this.elementsPendingErasure.delete(p.containerId)):(this.elementsPendingErasure.add(p.id),this.elementsPendingErasure.add(p.containerId)));this.elementsPendingErasure=new Set(this.elementsPendingErasure),this.onSceneUpdated()}};handleTouchMove=t=>{ed=!0};handleHoverSelectedLinearElement(t,r,o){let n=this.scene.getNonDeletedElementsMap(),i=Z.getElement(t.elementId,n);if(i)if(this.state.selectedLinearElement){let a=-1,s=null;ba({x:r,y:o,element:i,shape:this.getElementShape(i)})?(a=Z.getPointIndexUnderCursor(i,n,this.state.zoom,r,o),s=Z.getSegmentMidpointHitCoords(t,{x:r,y:o},this.state,this.scene.getNonDeletedElementsMap()),a>=0||s?We(this.interactiveCanvas,Le.POINTER):this.hitElement(r,o,i)&&We(this.interactiveCanvas,Le.MOVE)):this.hitElement(r,o,i)&&We(this.interactiveCanvas,Le.MOVE),this.state.selectedLinearElement.hoverPointIndex!==a&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,hoverPointIndex:a}}),Z.arePointsEqual(this.state.selectedLinearElement.segmentMidPointHoveredCoords,s)||this.setState({selectedLinearElement:{...this.state.selectedLinearElement,segmentMidPointHoveredCoords:s}})}else We(this.interactiveCanvas,Le.AUTO)}handleCanvasPointerDown=t=>{if(this.maybeCleanupAfterMissingPointerUp(t.nativeEvent),this.maybeUnfollowRemoteUser(),this.state.contextMenu&&this.setState({contextMenu:null}),this.state.snapLines&&this.setAppState({snapLines:[]}),this.updateGestureOnPointerDown(t),t.pointerType==="touch"&&this.state.draggingElement&&this.state.draggingElement.type==="freedraw"){let c=this.state.draggingElement;this.updateScene({...c.points.length<10?{elements:this.scene.getElementsIncludingDeleted().filter(d=>d.id!==c.id)}:{},appState:{draggingElement:null,editingElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:Ne(Object.keys(this.state.selectedElementIds).filter(d=>d!==c.id).reduce((d,m)=>(d[m]=this.state.selectedElementIds[m],d),{}),this.state)},storeAction:D.UPDATE});return}let r=document.getSelection();if(r?.anchorNode&&r.removeAllRanges(),this.maybeOpenContextMenuAfterPointerDownOnTouchDevices(t),!this.state.penDetected&&t.pointerType==="pen"&&this.setState(c=>({penMode:!0,penDetected:!0})),!this.device.isTouchScreen&&["pen","touch"].includes(t.pointerType)&&(this.device=ts(this.device,{isTouchScreen:!0})),$c||(this.lastPointerDownEvent=t,this.handleCanvasPanUsingWheelOrSpaceDrag(t)))return;if(this.setState({lastPointerDownWith:t.pointerType,cursorButton:"down"}),this.savePointer(t.clientX,t.clientY,"down"),t.button===qn.ERASER&&this.state.activeTool.type!==wt.eraser){this.setState({activeTool:Qe(this.state,{type:wt.eraser,lastActiveToolBeforeEraser:this.state.activeTool})},()=>{this.handleCanvasPointerDown(t);let c=()=>{d(),m?.(),Tr(this.state)&&this.setState({activeTool:Qe(this.state,{...this.state.activeTool.lastActiveTool||{type:wt.selection},lastActiveToolBeforeEraser:null})})},d=gt(window,"pointerup",c,{once:!0}),m;requestAnimationFrame(()=>{m=this.missingPointerEventCleanupEmitter.once(c)})});return}if(t.button!==qn.MAIN&&t.button!==qn.TOUCH&&t.button!==qn.ERASER||Fe.pointers.size>1)return;let o=this.initialPointerDownState(t);if(this.setState({selectedElementsAreBeingDragged:!1}),this.handleDraggingScrollBar(t,o)||(this.clearSelectionIfNotUsingSelection(),this.updateBindingEnabledOnPointerMove(t),this.handleSelectionOnPointerDown(t,o))||!(!this.state.penMode||t.pointerType!=="touch"||this.state.activeTool.type==="selection"||this.state.activeTool.type==="text"||this.state.activeTool.type==="image"))return;if(this.state.activeTool.type==="text"){this.handleTextOnPointerDown(t,o);return}else if(this.state.activeTool.type==="arrow"||this.state.activeTool.type==="line")this.handleLinearElementOnPointerDown(t,this.state.activeTool.type,o);else if(this.state.activeTool.type==="image"){We(this.interactiveCanvas,Le.CROSSHAIR);let c=this.state.pendingImageElementId&&this.scene.getElement(this.state.pendingImageElementId);if(!c)return;this.setState({draggingElement:c,editingElement:c,pendingImageElementId:null,multiElement:null});let{x:d,y:m}=Ke(t,this.state),p=this.getTopLayerFrameAtSceneCoords({x:d,y:m});z(c,{x:d,y:m,frameId:p?p.id:null})}else this.state.activeTool.type==="freedraw"?this.handleFreeDrawElementOnPointerDown(t,this.state.activeTool.type,o):this.state.activeTool.type==="custom"?Wr(this.interactiveCanvas,this.state):this.state.activeTool.type===wt.frame||this.state.activeTool.type===wt.magicframe?this.createFrameElementOnPointerDown(o,this.state.activeTool.type):this.state.activeTool.type==="laser"?this.laserTrails.startPath(o.lastCoords.x,o.lastCoords.y):this.state.activeTool.type!=="eraser"&&this.state.activeTool.type!=="hand"&&this.createGenericElementOnPointerDown(this.state.activeTool.type,o);this.props?.onPointerDown?.(this.state.activeTool,o),this.onPointerDownEmitter.trigger(this.state.activeTool,o,t),this.state.activeTool.type==="eraser"&&this.eraserTrail.startPath(o.lastCoords.x,o.lastCoords.y);let i=this.onPointerMoveFromPointerDownHandler(o),a=this.onPointerUpFromPointerDownHandler(o),s=this.onKeyDownFromPointerDownHandler(o),l=this.onKeyUpFromPointerDownHandler(o);this.missingPointerEventCleanupEmitter.once(c=>a(c||t.nativeEvent)),(!this.state.viewModeEnabled||this.state.activeTool.type==="laser")&&(window.addEventListener("pointermove",i),window.addEventListener("pointerup",a),window.addEventListener("keydown",s),window.addEventListener("keyup",l),o.eventListeners.onMove=i,o.eventListeners.onUp=a,o.eventListeners.onKeyUp=l,o.eventListeners.onKeyDown=s)};handleCanvasPointerUp=t=>{this.removePointer(t),this.lastPointerUpEvent=t;let r=Ke({clientX:t.clientX,clientY:t.clientY},this.state),o=t.timeStamp-(this.lastPointerDownEvent?.timeStamp??0);if(this.device.editor.isMobile&&o<300){let n=this.getElementAtPosition(r.x,r.y);if(Xt(n)&&this.isIframeLikeElementCenter(n,t,r.x,r.y)){this.handleEmbeddableCenterClick(n);return}}if(this.device.isTouchScreen){let n=this.getElementAtPosition(r.x,r.y);this.hitLinkElement=this.getElementLinkAtPosition(r,n)}this.hitLinkElement&&!this.state.selectedElementIds[this.hitLinkElement.id]?o<300&&Xt(this.hitLinkElement)&&!yg(this.hitLinkElement,this.scene.getNonDeletedElementsMap(),this.state,[r.x,r.y])?this.handleEmbeddableCenterClick(this.hitLinkElement):this.redirectToLink(t,this.device.isTouchScreen):this.state.viewModeEnabled&&this.setState({activeEmbeddable:null,selectedElementIds:{}})};maybeOpenContextMenuAfterPointerDownOnTouchDevices=t=>{t.pointerType==="touch"&&(ed=!1,_i?ed=!0:_i=window.setTimeout(()=>{_i=0,ed||this.handleCanvasContextMenu(t)},g0))};resetContextMenuTimer=()=>{clearTimeout(_i),_i=0,ed=!1};maybeCleanupAfterMissingPointerUp=t=>{td?.(),this.missingPointerEventCleanupEmitter.trigger(t).clear()};handleCanvasPanUsingWheelOrSpaceDrag=t=>{if(!(Fe.pointers.size<=1&&(t.button===qn.WHEEL||t.button===qn.MAIN&&Ga||Do(this.state)||this.state.viewModeEnabled))||U(this.state.editingElement))return!1;$c=!0,t.preventDefault();let r=!1,o=typeof window===void 0?!1:/Linux/.test(window.navigator.platform);We(this.interactiveCanvas,Le.GRABBING);let{clientX:n,clientY:i}=t,a=zu(l=>{let c=n-l.clientX,d=i-l.clientY;if(n=l.clientX,i=l.clientY,o&&!r&&(Math.abs(c)>1||Math.abs(d)>1)){r=!0;let m=u=>{document.body.removeEventListener("paste",m),u.stopPropagation()},p=()=>{setTimeout(()=>{document.body.removeEventListener("paste",m),window.removeEventListener("pointerup",p)},100)};document.body.addEventListener("paste",m),window.addEventListener("pointerup",p)}this.translateCanvas({scrollX:this.state.scrollX-c/this.state.zoom.value,scrollY:this.state.scrollY-d/this.state.zoom.value})}),s=dt(td=()=>{td=null,$c=!1,Ga||(this.state.viewModeEnabled?We(this.interactiveCanvas,Le.GRAB):Wr(this.interactiveCanvas,this.state)),this.setState({cursorButton:"up"}),this.savePointer(t.clientX,t.clientY,"up"),window.removeEventListener("pointermove",a),window.removeEventListener("pointerup",s),window.removeEventListener("blur",s),a.flush()});return window.addEventListener("blur",s),window.addEventListener("pointermove",a,{passive:!0}),window.addEventListener("pointerup",s),!0};updateGestureOnPointerDown(t){Fe.pointers.set(t.pointerId,{x:t.clientX,y:t.clientY}),Fe.pointers.size===2&&(Fe.lastCenter=z1(Fe.pointers),Fe.initialScale=this.state.zoom.value,Fe.initialDistance=H1(Array.from(Fe.pointers.values())))}initialPointerDownState(t){let r=Ke(t,this.state),o=this.scene.getSelectedElements(this.state),[n,i,a,s]=Te(o);return{origin:r,withCmdOrCtrl:t[T.CTRL_OR_CMD],originInGrid:To(It(r.x,r.y,t[T.CTRL_OR_CMD]?null:this.state.gridSize)),scrollbars:U1(S2,t.clientX-this.state.offsetLeft,t.clientY-this.state.offsetTop),lastCoords:{...r},originalElements:this.scene.getNonDeletedElements().reduce((l,c)=>(l.set(c.id,Mn(c)),l),new Map),resize:{handleType:!1,isResizing:!1,offset:{x:0,y:0},arrowDirection:"origin",center:{x:(a+n)/2,y:(s+i)/2}},hit:{element:null,allHitElements:[],wasAddedToSelection:!1,hasBeenDuplicated:!1,hasHitCommonBoundingBoxOfSelectedElements:this.isHittingCommonBoundingBoxOfSelectedElements(r,o)},drag:{hasOccurred:!1,offset:null},eventListeners:{onMove:null,onUp:null,onKeyUp:null,onKeyDown:null},boxSelection:{hasOccurred:!1}}}handleDraggingScrollBar(t,r){if(!(r.scrollbars.isOverEither&&!this.state.multiElement))return!1;A2=!0,r.lastCoords.x=t.clientX,r.lastCoords.y=t.clientY;let o=zu(i=>{i.target instanceof HTMLElement&&this.handlePointerMoveOverScrollbars(i,r)}),n=dt(()=>{td=null,A2=!1,Wr(this.interactiveCanvas,this.state),this.setState({cursorButton:"up"}),this.savePointer(t.clientX,t.clientY,"up"),window.removeEventListener("pointermove",o),window.removeEventListener("pointerup",n),o.flush()});return td=n,window.addEventListener("pointermove",o),window.addEventListener("pointerup",n),!0}clearSelectionIfNotUsingSelection=()=>{this.state.activeTool.type!=="selection"&&this.setState({selectedElementIds:Ne({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})};handleSelectionOnPointerDown=(t,r)=>{if(this.state.activeTool.type==="selection"){let o=this.scene.getNonDeletedElements(),n=this.scene.getNonDeletedElementsMap(),i=this.scene.getSelectedElements(this.state);if(i.length===1&&!this.state.editingLinearElement&&!(this.state.selectedLinearElement&&this.state.selectedLinearElement.hoverPointIndex!==-1)){let a=ep(o,this.state,r.origin.x,r.origin.y,this.state.zoom,t.pointerType,this.scene.getNonDeletedElementsMap(),this.device);a!=null&&(this.setState({resizingElement:a.element}),r.resize.handleType=a.transformHandleType)}else i.length>1&&(r.resize.handleType=tp(Te(i),r.origin.x,r.origin.y,this.state.zoom,t.pointerType,this.device));if(r.resize.handleType)r.resize.isResizing=!0,r.resize.offset=To(_g(r.resize.handleType,i,n,r.origin.x,r.origin.y)),i.length===1&&ne(i[0])&&i[0].points.length===2&&(r.resize.arrowDirection=Gg(r.resize.handleType,i[0]));else{if(this.state.selectedLinearElement){let l=this.state.editingLinearElement||this.state.selectedLinearElement,c=Z.handlePointerDown(t,this.state,this.store,r.origin,l,this);if(c.hitElement&&(r.hit.element=c.hitElement),c.linearElementEditor&&(this.setState({selectedLinearElement:c.linearElementEditor}),this.state.editingLinearElement&&this.setState({editingLinearElement:c.linearElementEditor})),c.didAddPoint)return!0}if(r.hit.element=r.hit.element??this.getElementAtPosition(r.origin.x,r.origin.y),r.hit.element&&this.getElementLinkAtPosition({x:r.origin.x,y:r.origin.y},r.hit.element))return!1;r.hit.allHitElements=this.getElementsAtPosition(r.origin.x,r.origin.y);let a=r.hit.element,s=r.hit.allHitElements.some(l=>this.isASelectedElement(l));if((a===null||!s)&&!t.shiftKey&&!r.hit.hasHitCommonBoundingBoxOfSelectedElements&&this.clearSelection(a),this.state.editingLinearElement)this.setState({selectedElementIds:Ne({[this.state.editingLinearElement.elementId]:!0},this.state)});else if(a!=null){if(t[T.CTRL_OR_CMD])return this.state.selectedElementIds[a.id]||(r.hit.wasAddedToSelection=!0),this.setState(l=>({...ox(l,a),previousSelectedElementIds:this.state.selectedElementIds})),!1;this.state.selectedElementIds[a.id]||(this.state.editingGroupId&&!ua(a,this.state.editingGroupId)&&this.setState({selectedElementIds:Ne({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null}),!s&&!r.hit.hasHitCommonBoundingBoxOfSelectedElements&&(this.setState(l=>{let c={...l.selectedElementIds,[a.id]:!0},d=[];if(Object.keys(l.selectedElementIds).forEach(m=>{let p=this.scene.getElement(m);p&&d.push(p)}),ee(a))Vr(d,a.id).forEach(m=>{delete c[m.id]});else if(a.frameId)c[a.frameId]&&delete c[a.id];else{let m=a.groupIds,p=new Set(m.flatMap(u=>tt(this.scene.getNonDeletedElements(),u)).filter(u=>ee(u)).map(u=>u.id));p.size>0&&d.forEach(u=>{u.frameId&&p.has(u.frameId)&&(delete c[u.id],u.groupIds.flatMap(h=>tt(this.scene.getNonDeletedElements(),h)).forEach(h=>{delete c[h.id]}))})}return{...qt({editingGroupId:l.editingGroupId,selectedElementIds:c},this.scene.getNonDeletedElements(),l,this),showHyperlinkPopup:a.link||At(a)?"info":!1}}),r.hit.wasAddedToSelection=!0))}this.setState({previousSelectedElementIds:this.state.selectedElementIds})}}return!1};isASelectedElement(t){return t!=null&&this.state.selectedElementIds[t.id]}isHittingCommonBoundingBoxOfSelectedElements(t,r){if(r.length<2)return!1;let o=this.getElementHitThreshold(),[n,i,a,s]=Te(r);return t.x>n-o&&t.x<a+o&&t.y>i-o&&t.y<s+o}handleTextOnPointerDown=(t,r)=>{if(U(this.state.editingElement))return;let o=r.origin.x,n=r.origin.y,i=this.getElementAtPosition(o,n,{includeBoundTextElement:!0}),a=this.getTextBindableContainerAtPosition(o,n);tr(i)&&(a=i,o=i.x+i.width/2,n=i.y+i.height/2),this.startTextEditing({sceneX:o,sceneY:n,insertAtParentCenter:!t.altKey,container:a}),Ur(this.interactiveCanvas),this.state.activeTool.locked||this.setState({activeTool:Qe(this.state,{type:"selection"})})};handleFreeDrawElementOnPointerDown=(t,r,o)=>{let[n,i]=It(o.origin.x,o.origin.y,null),a=this.getTopLayerFrameAtSceneCoords({x:n,y:i}),s=gx({type:r,x:n,y:i,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:null,simulatePressure:t.pressure===.5,locked:!1,frameId:a?a.id:null});this.setState(d=>{let m={...d.selectedElementIds};return delete m[s.id],{selectedElementIds:Ne(m,d)}});let l=s.simulatePressure?s.pressures:[...s.pressures,t.pressure];z(s,{points:[[0,0]],pressures:l});let c=Qo(o.origin,this);this.scene.insertElement(s),this.setState({draggingElement:s,editingElement:s,startBoundElement:c,suggestedBindings:[]})};insertIframeElement=({sceneX:t,sceneY:r,width:o,height:n})=>{let[i,a]=It(t,r,this.lastPointerDownEvent?.[T.CTRL_OR_CMD]?null:this.state.gridSize),s=ux({type:"iframe",x:i,y:a,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:this.getCurrentItemRoundness("iframe"),opacity:this.state.currentItemOpacity,locked:!1,width:o,height:n});return this.scene.insertElement(s),s};insertEmbeddableElement=({sceneX:t,sceneY:r,link:o})=>{let[n,i]=It(t,r,this.lastPointerDownEvent?.[T.CTRL_OR_CMD]?null:this.state.gridSize),a=Pn(o);if(!a)return;a.error instanceof URIError&&this.setToast({message:b("toast.unrecognizedLinkFormat"),closable:!0});let s=eg({type:"embeddable",x:n,y:i,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:this.getCurrentItemRoundness("embeddable"),opacity:this.state.currentItemOpacity,locked:!1,width:a.intrinsicSize.w,height:a.intrinsicSize.h,link:o});return this.scene.insertElement(s),s};createImageElement=({sceneX:t,sceneY:r,addToFrameUnderCursor:o=!0})=>{let[n,i]=It(t,r,this.lastPointerDownEvent?.[T.CTRL_OR_CMD]?null:this.state.gridSize),a=o?this.getTopLayerFrameAtSceneCoords({x:n,y:i}):null;return Xl({type:"image",x:n,y:i,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:null,opacity:this.state.currentItemOpacity,locked:!1,frameId:a?a.id:null})};handleLinearElementOnPointerDown=(t,r,o)=>{if(this.state.multiElement){let{multiElement:n}=this.state;if(n.type==="line"&&dr(n.points,this.state.zoom.value)){z(n,{lastCommittedPoint:n.points[n.points.length-1]}),this.actionManager.executeAction(uo);return}let{x:i,y:a,lastCommittedPoint:s}=n;if(n.points.length>1&&s&&vt(o.origin.x-i,o.origin.y-a,s[0],s[1])<Za){this.actionManager.executeAction(uo);return}this.setState(l=>({selectedElementIds:Ne({...l.selectedElementIds,[n.id]:!0},l)})),z(n,{lastCommittedPoint:n.points[n.points.length-1]}),We(this.interactiveCanvas,Le.POINTER)}else{let[n,i]=It(o.origin.x,o.origin.y,t[T.CTRL_OR_CMD]?null:this.state.gridSize),a=this.getTopLayerFrameAtSceneCoords({x:n,y:i}),{currentItemStartArrowhead:s,currentItemEndArrowhead:l}=this.state,[c,d]=r==="arrow"?[s,l]:[null,null],m=ao({type:r,x:n,y:i,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.state.currentItemRoundness==="round"?{type:at.PROPORTIONAL_RADIUS}:null,startArrowhead:c,endArrowhead:d,locked:!1,frameId:a?a.id:null});this.setState(u=>{let h={...u.selectedElementIds};return delete h[m.id],{selectedElementIds:Ne(h,u)}}),z(m,{points:[...m.points,[0,0]]});let p=Qo(o.origin,this);this.scene.insertElement(m),this.setState({draggingElement:m,editingElement:m,startBoundElement:p,suggestedBindings:[]})}};getCurrentItemRoundness(t){return this.state.currentItemRoundness==="round"?{type:Ko(t)?at.ADAPTIVE_RADIUS:at.PROPORTIONAL_RADIUS}:null}createGenericElementOnPointerDown=(t,r)=>{let[o,n]=It(r.origin.x,r.origin.y,this.lastPointerDownEvent?.[T.CTRL_OR_CMD]?null:this.state.gridSize),i=this.getTopLayerFrameAtSceneCoords({x:o,y:n}),a={x:o,y:n,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.getCurrentItemRoundness(t),locked:!1,frameId:i?i.id:null},s;t==="embeddable"?s=eg({type:"embeddable",...a}):s=Yr({type:t,...a}),s.type==="selection"?this.setState({selectionElement:s,draggingElement:s}):(this.scene.insertElement(s),this.setState({multiElement:null,draggingElement:s,editingElement:s}))};createFrameElementOnPointerDown=(t,r)=>{let[o,n]=It(t.origin.x,t.origin.y,this.lastPointerDownEvent?.[T.CTRL_OR_CMD]?null:this.state.gridSize),i={x:o,y:n,opacity:this.state.currentItemOpacity,locked:!1,...qe},a=r===wt.magicframe?Kl(i):mm(i);this.scene.insertElement(a),this.setState({multiElement:null,draggingElement:a,editingElement:a})};maybeCacheReferenceSnapPoints(t,r,o=!1){Kn({event:t,appState:this.state,selectedElements:r})&&(o||!fo.getReferenceSnapPoints())&&fo.setReferenceSnapPoints(Q5(this.scene.getNonDeletedElements(),r,this.state,this.scene.getNonDeletedElementsMap()))}maybeCacheVisibleGaps(t,r,o=!1){Kn({event:t,appState:this.state,selectedElements:r})&&(o||!fo.getVisibleGaps())&&fo.setVisibleGaps(q5(this.scene.getNonDeletedElements(),r,this.state,this.scene.getNonDeletedElementsMap()))}onKeyDownFromPointerDownHandler(t){return dt(r=>{this.maybeHandleResize(t,r)||this.maybeDragNewGenericElement(t,r)})}onKeyUpFromPointerDownHandler(t){return dt(r=>{r.key===T.ALT&&r.preventDefault(),!this.maybeHandleResize(t,r)&&this.maybeDragNewGenericElement(t,r)})}onPointerMoveFromPointerDownHandler(t){return zu(r=>{if(t.drag.offset===null&&(t.drag.offset=To(Yg(this.scene.getSelectedElements(this.state),t.origin.x,t.origin.y))),!(r.target instanceof HTMLElement)||this.handlePointerMoveOverScrollbars(r,t))return;let n=Ke(r,this.state);if(Tr(this.state)){this.handleEraser(r,t,n);return}this.state.activeTool.type==="laser"&&this.laserTrails.addPointToPath(n.x,n.y);let[i,a]=It(n.x,n.y,r[T.CTRL_OR_CMD]?null:this.state.gridSize);if(!t.drag.hasOccurred&&(this.state.activeTool.type==="arrow"||this.state.activeTool.type==="line")&&vt(n.x,n.y,t.origin.x,t.origin.y)<xn)return;if(t.resize.isResizing&&(t.lastCoords.x=n.x,t.lastCoords.y=n.y,this.maybeHandleResize(t,r)))return!0;let s=this.scene.getNonDeletedElementsMap();if(this.state.selectedLinearElement){let m=this.state.editingLinearElement||this.state.selectedLinearElement;if(Z.shouldAddMidpoint(this.state.selectedLinearElement,n,this.state,s)){let u=Z.addMidpoint(this.state.selectedLinearElement,n,this.state,!r[T.CTRL_OR_CMD],s);if(!u)return;C2(()=>{this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,pointerDownState:u.pointerDownState,selectedPointsIndices:u.selectedPointsIndices}}),this.state.editingLinearElement&&this.setState({editingLinearElement:{...this.state.editingLinearElement,pointerDownState:u.pointerDownState,selectedPointsIndices:u.selectedPointsIndices}})});return}else if(m.pointerDownState.segmentMidpoint.value!==null&&!m.pointerDownState.segmentMidpoint.added)return;if(Z.handlePointDragging(r,this.state,n.x,n.y,(u,h)=>{this.maybeSuggestBindingsForLinearElementAtCoords(u,h)},m,this.scene.getNonDeletedElementsMap())){t.lastCoords.x=n.x,t.lastCoords.y=n.y,t.drag.hasOccurred=!0,this.state.editingLinearElement&&!this.state.editingLinearElement.isDragging&&this.setState({editingLinearElement:{...this.state.editingLinearElement,isDragging:!0}}),this.state.selectedLinearElement.isDragging||this.setState({selectedLinearElement:{...this.state.selectedLinearElement,isDragging:!0}});return}}let l=t.hit.allHitElements.some(m=>this.isASelectedElement(m)),c=this.state.editingLinearElement&&r.shiftKey&&this.state.editingLinearElement.elementId===t.hit.element?.id;if((l||t.hit.hasHitCommonBoundingBoxOfSelectedElements)&&!c){let m=this.scene.getSelectedElements(this.state);if(m.every(h=>h.locked))return;let p=m.find(h=>ee(h)),u=this.getTopLayerFrameAtSceneCoords(n);if(this.setState({frameToHighlight:u&&!p?u:null}),t.drag.hasOccurred=!0,this.setState({selectedElementsAreBeingDragged:!0}),m.length>0&&!t.withCmdOrCtrl&&!this.state.editingElement&&this.state.activeEmbeddable?.state!=="active"){let h={x:n.x-t.origin.x,y:n.y-t.origin.y},x=[...t.originalElements.values()],E=r.shiftKey;if(E){let v=Math.abs(h.x),A=Math.abs(h.y),L=E&&v<A,S=E&&v>A;L&&(h.x=0),S&&(h.y=0)}this.maybeCacheVisibleGaps(r,m),this.maybeCacheReferenceSnapPoints(r,m);let{snapOffset:w,snapLines:y}=J5(x,h,this.state,r,this.scene.getNonDeletedElementsMap());if(this.setState({snapLines:y}),!this.state.editingFrame&&Wg(t,m,h,this.state,this.scene,w,r[T.CTRL_OR_CMD]?null:this.state.gridSize),this.setState({suggestedBindings:Yd(m,this)}),r.altKey&&!t.hit.hasBeenDuplicated){t.hit.hasBeenDuplicated=!0;let v=[],A=[],L=new Map,S=new Map,k=t.hit.element,R=new Set(this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0}).map(O=>O.id)),_=this.scene.getElementsIncludingDeleted();for(let O of _)if(R.has(O.id)||O.id===k?.id&&t.hit.wasAddedToSelection){let I=Zl(this.state.editingGroupId,L,O),F=t.originalElements.get(O.id);z(I,{x:F.x,y:F.y}),t.originalElements.set(I.id,I),v.push(I),A.push(O),S.set(O.id,I.id)}else v.push(O);let M=[...v,...A];Ft(M,X(A)),jd(v,A,S),Vd(M,A,S,"duplicatesServeAsOld"),Vm(M,A,S),this.scene.replaceAllElements(M),this.maybeCacheVisibleGaps(r,m,!0),this.maybeCacheReferenceSnapPoints(r,m,!0)}return}}let d=this.state.draggingElement;if(d){if(d.type==="freedraw"){let m=d.points,p=n.x-d.x,u=n.y-d.y,h=m.length>0&&m[m.length-1];if(!(h&&h[0]===p&&h[1]===u)){let E=d.simulatePressure?d.pressures:[...d.pressures,r.pressure];z(d,{points:[...m,[p,u]],pressures:E})}}else if(ne(d)){t.drag.hasOccurred=!0,this.setState({selectedElementsAreBeingDragged:!0});let m=d.points,p=i-d.x,u=a-d.y;aa(r)&&m.length===2&&({width:p,height:u}=ms(d.x,d.y,n.x,n.y)),m.length===1?z(d,{points:[...m,[p,u]]}):m.length===2&&z(d,{points:[...m.slice(0,-1),[p,u]]}),wr(d,!1)&&this.maybeSuggestBindingsForLinearElementAtCoords(d,[n],this.state.startBoundElement)}else t.lastCoords.x=n.x,t.lastCoords.y=n.y,this.maybeDragNewGenericElement(t,r);if(this.state.activeTool.type==="selection"){t.boxSelection.hasOccurred=!0;let m=this.scene.getNonDeletedElements();if(this.state.editingLinearElement)Z.handleBoxSelection(r,this.state,this.setState.bind(this),this.scene.getNonDeletedElementsMap());else{let p=!0;!r.shiftKey&&Ye(m,this.state)&&(t.withCmdOrCtrl&&t.hit.element?this.setState(h=>qt({...h,selectedElementIds:{[t.hit.element.id]:!0}},this.scene.getNonDeletedElements(),h,this)):p=!1);let u=Ds(m,d,this.scene.getNonDeletedElementsMap());this.setState(h=>{let x={...p&&h.selectedElementIds,...u.reduce((E,w)=>(E[w.id]=!0,E),{})};return t.hit.element&&(u.length?delete x[t.hit.element.id]:x[t.hit.element.id]=!0),h=p?h:{...h,selectedGroupIds:{},editingGroupId:null},{...qt({editingGroupId:h.editingGroupId,selectedElementIds:x},this.scene.getNonDeletedElements(),h,this),selectedLinearElement:u.length===1&&ne(u[0])?new Z(u[0]):null,showHyperlinkPopup:u.length===1&&(u[0].link||At(u[0]))?"info":!1}})}}}})}handlePointerMoveOverScrollbars(t,r){if(r.scrollbars.isOverHorizontal){let o=t.clientX,n=o-r.lastCoords.x;return this.translateCanvas({scrollX:this.state.scrollX-n/this.state.zoom.value}),r.lastCoords.x=o,!0}if(r.scrollbars.isOverVertical){let o=t.clientY,n=o-r.lastCoords.y;return this.translateCanvas({scrollY:this.state.scrollY-n/this.state.zoom.value}),r.lastCoords.y=o,!0}return!1}onPointerUpFromPointerDownHandler(t){return dt(r=>{this.removePointer(r),t.eventListeners.onMove&&t.eventListeners.onMove.flush();let{draggingElement:o,resizingElement:n,multiElement:i,activeTool:a,isResizing:s,isRotating:l}=this.state;this.setState(u=>({isResizing:!1,isRotating:!1,resizingElement:null,selectionElement:null,frameToHighlight:null,elementsToHighlight:null,cursorButton:"up",editingElement:i||U(this.state.editingElement)?this.state.editingElement:null,snapLines:Md(u.snapLines,[]),originSnapOffset:null})),fo.setReferenceSnapPoints(null),fo.setVisibleGaps(null),this.savePointer(r.clientX,r.clientY,"up"),this.setState({selectedElementsAreBeingDragged:!1});let c=this.scene.getNonDeletedElementsMap();if(this.state.editingLinearElement)if(!t.boxSelection.hasOccurred&&t.hit?.element?.id!==this.state.editingLinearElement.elementId)this.actionManager.executeAction(uo);else{let u=Z.handlePointerUp(r,this.state.editingLinearElement,this.state,this);u!==this.state.editingLinearElement&&this.setState({editingLinearElement:u,suggestedBindings:[]})}else if(this.state.selectedLinearElement)if(t.hit?.element?.id!==this.state.selectedLinearElement.elementId)this.scene.getSelectedElements(this.state).length>1&&this.setState({selectedLinearElement:null});else{let u=Z.handlePointerUp(r,this.state.selectedLinearElement,this.state,this),{startBindingElement:h,endBindingElement:x}=u,E=this.scene.getElement(u.elementId);wr(E)&&la(E,h,x,c),u!==this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...u,selectedPointsIndices:null},suggestedBindings:[]})}if(this.missingPointerEventCleanupEmitter.clear(),window.removeEventListener("pointermove",t.eventListeners.onMove),window.removeEventListener("pointerup",t.eventListeners.onUp),window.removeEventListener("keydown",t.eventListeners.onKeyDown),window.removeEventListener("keyup",t.eventListeners.onKeyUp),this.state.pendingImageElementId&&this.setState({pendingImageElementId:null}),this.props?.onPointerUp?.(a,t),this.onPointerUpEmitter.trigger(this.state.activeTool,t,r),o?.type==="freedraw"){let u=Ke(r,this.state),h=o.points,x=u.x-o.x,E=u.y-o.y;x===h[0][0]&&E===h[0][1]&&(E+=1e-4,x+=1e-4);let w=o.simulatePressure?[]:[...o.pressures,r.pressure];z(o,{points:[...h,[x,E]],pressures:w,lastCommittedPoint:[x,E]}),this.actionManager.executeAction(uo);return}if(to(o)){let u=o;try{this.initializeImageDimensions(u),this.setState({selectedElementIds:Ne({[u.id]:!0},this.state)},()=>{this.actionManager.executeAction(uo)})}catch(h){console.error(h),this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().filter(x=>x.id!==u.id)),this.actionManager.executeAction(uo)}return}if(ne(o)){o.points.length>1&&this.store.shouldCaptureIncrement();let u=Ke(r,this.state);!t.drag.hasOccurred&&o&&!i?(z(o,{points:[...o.points,[u.x-o.x,u.y-o.y]]}),this.setState({multiElement:o,editingElement:this.state.draggingElement})):t.drag.hasOccurred&&!i&&(qo(this.state)&&wr(o,!1)&&Gl(o,this.state,u,this),this.setState({suggestedBindings:[],startBoundElement:null}),a.locked?this.setState(h=>({draggingElement:null})):(Ur(this.interactiveCanvas),this.setState(h=>({draggingElement:null,activeTool:Qe(this.state,{type:"selection"}),selectedElementIds:Ne({...h.selectedElementIds,[o.id]:!0},h),selectedLinearElement:new Z(o)}))));return}if(a.type!=="selection"&&o&&so(o)){this.updateScene({elements:this.scene.getElementsIncludingDeleted().filter(u=>u.id!==o.id),appState:{draggingElement:null},storeAction:D.UPDATE});return}if(o){if(t.drag.hasOccurred){let u=Ke(r,this.state);if(this.state.selectedLinearElement&&this.state.selectedLinearElement.isDragging){let h=this.scene.getElement(this.state.selectedLinearElement.elementId);if(h?.frameId){let x=_t(h,c);x&&h&&(en(h,x,this.scene.getNonDeletedElementsMap())||(z(h,{groupIds:[]}),Ps([h],this.scene.getNonDeletedElementsMap()),this.scene.informMutation()))}}else{let h=this.getTopLayerFrameAtSceneCoords(u),x=this.scene.getSelectedElements(this.state),E=this.scene.getElementsMapIncludingDeleted(),w=y=>{if(y.length>0){for(let v of y){let A=v.groupIds.indexOf(this.state.editingGroupId);z(v,{groupIds:v.groupIds.slice(0,A)},!1)}E.forEach(v=>{v.groupIds.length&&tt(E,v.groupIds[v.groupIds.length-1]).length<2&&z(v,{groupIds:[]},!1)}),this.setState({editingGroupId:null})}};if(h&&!this.state.selectedElementIds[h.id]){let y=x.filter(v=>v.frameId!==h.id&&xa(v,E,this.state));this.state.editingGroupId&&w(y),E=hc(E,y,h)}else if(!h&&this.state.editingGroupId){let y=x.filter(v=>v.frameId&&!xa(v,E,this.state));w(y)}E=tn(E,this.state,this),this.scene.replaceAllElements(E)}}if(ee(o)){let u=BE(this.scene.getElementsIncludingDeleted(),o,this.scene.getNonDeletedElementsMap());this.scene.replaceAllElements(hc(this.scene.getElementsMapIncludingDeleted(),u,o))}z(o,nc(o))}if(n&&this.store.shouldCaptureIncrement(),n&&so(n)&&this.updateScene({elements:this.scene.getElementsIncludingDeleted().filter(u=>u.id!==n.id),storeAction:D.UPDATE}),t.resize.isResizing){let u=tn(this.scene.getElementsIncludingDeleted(),this.state,this),h=this.scene.getSelectedElements(this.state).filter(x=>ee(x));for(let x of h)u=Km(u,Ls(this.scene.getElementsIncludingDeleted(),x,this.state,c),x,this);this.scene.replaceAllElements(u)}let d=t.hit.element;this.state.selectedLinearElement?.elementId!==d?.id&&ne(d)&&this.scene.getSelectedElements(this.state).length===1&&this.setState({selectedLinearElement:new Z(d)});let m=this.lastPointerDownEvent,p=this.lastPointerUpEvent||this.lastPointerMoveEvent;if(Tr(this.state)&&m&&p){if(this.eraserTrail.endPath(),vt(m.clientX,m.clientY,p.clientX,p.clientY)===0){let h=Ke({clientX:p.clientX,clientY:p.clientY},this.state);this.getElementsAtPosition(h.x,h.y).forEach(E=>this.elementsPendingErasure.add(E.id))}this.eraseElements();return}else this.elementsPendingErasure.size&&this.restoreReadyToEraseElements();if(d&&!t.drag.hasOccurred&&!t.hit.wasAddedToSelection&&(!this.state.editingLinearElement||!t.boxSelection.hasOccurred)&&(r.shiftKey&&!this.state.editingLinearElement?this.state.selectedElementIds[d.id]?rm(this.state,d)?this.setState(u=>{let h={...u.selectedElementIds};for(let x of d.groupIds.flatMap(E=>tt(this.scene.getNonDeletedElements(),E)))delete h[x.id];return{selectedGroupIds:{...u.selectedElementIds,...d.groupIds.map(x=>({[x]:!1})).reduce((x,E)=>({...x,...E}),{})},selectedElementIds:Ne(h,u)}}):this.state.selectedLinearElement?.isDragging||this.setState(u=>{let h={...u.selectedElementIds};delete h[d.id];let x=ue(this.scene.getNonDeletedElements(),{selectedElementIds:h});return{...qt({editingGroupId:u.editingGroupId,selectedElementIds:h},this.scene.getNonDeletedElements(),u,this),selectedLinearElement:x.length===1&&ne(x[0])?new Z(x[0]):u.selectedLinearElement}}):d.frameId&&this.state.selectedElementIds[d.frameId]?this.setState(u=>{let h={...u.selectedElementIds,[d.id]:!0};return delete h[d.frameId],(this.scene.getElement(d.frameId)?.groupIds??[]).flatMap(x=>tt(this.scene.getNonDeletedElements(),x)).forEach(x=>{delete h[x.id]}),{...qt({editingGroupId:u.editingGroupId,selectedElementIds:h},this.scene.getNonDeletedElements(),u,this),showHyperlinkPopup:d.link||At(d)?"info":!1}}):this.setState(u=>({selectedElementIds:Ne({...u.selectedElementIds,[d.id]:!0},u)})):this.setState(u=>({...qt({editingGroupId:u.editingGroupId,selectedElementIds:{[d.id]:!0}},this.scene.getNonDeletedElements(),u,this),selectedLinearElement:ne(d)&&u.selectedLinearElement?.elementId!==d.id?new Z(d):u.selectedLinearElement}))),!t.drag.hasOccurred&&!this.state.isResizing&&(d&&rE({x:t.origin.x,y:t.origin.y,element:d,shape:this.getElementShape(d),threshold:this.getElementHitThreshold(),frameNameBound:ee(d)?this.frameNameBoundsCache.get(d):null},c)||!d&&t.hit.hasHitCommonBoundingBoxOfSelectedElements)){this.state.editingLinearElement?this.setState({editingLinearElement:null}):this.setState({selectedElementIds:Ne({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null}),We(this.interactiveCanvas,Le.AUTO);return}if(!a.locked&&a.type!=="freedraw"&&o&&o.type!=="selection"&&this.setState(u=>({selectedElementIds:Ne({...u.selectedElementIds,[o.id]:!0},u),showHyperlinkPopup:At(o)&&!o.link?"editor":u.showHyperlinkPopup})),(a.type!=="selection"||Ye(this.scene.getNonDeletedElements(),this.state)||!Je(this.state.previousSelectedElementIds,this.state.selectedElementIds))&&this.store.shouldCaptureIncrement(),t.drag.hasOccurred||s||l){let u=this.scene.getSelectedElements(this.state).filter(ne);_l(u,this,qo(this.state),this.state.selectedLinearElement?.selectedPointsIndices??[])}if(a.type==="laser"){this.laserTrails.endPath();return}!a.locked&&a.type!=="freedraw"?(Ur(this.interactiveCanvas),this.setState({draggingElement:null,suggestedBindings:[],activeTool:Qe(this.state,{type:"selection"})})):this.setState({draggingElement:null,suggestedBindings:[]}),d&&this.lastPointerUpEvent&&this.lastPointerDownEvent&&this.lastPointerUpEvent.timeStamp-this.lastPointerDownEvent.timeStamp<300&&Fe.pointers.size<=1&&Xt(d)&&this.isIframeLikeElementCenter(d,this.lastPointerUpEvent,t.origin.x,t.origin.y)&&this.handleEmbeddableCenterClick(d)})}restoreReadyToEraseElements=()=>{this.elementsPendingErasure=new Set,this.onSceneUpdated()};eraseElements=()=>{let t=!1,r=this.scene.getElementsIncludingDeleted().map(o=>this.elementsPendingErasure.has(o.id)||o.frameId&&this.elementsPendingErasure.has(o.frameId)||Ie(o)&&this.elementsPendingErasure.has(o.containerId)?(t=!0,ie(o,{isDeleted:!0})):o);this.elementsPendingErasure=new Set,t&&(this.store.shouldCaptureIncrement(),this.scene.replaceAllElements(r))};initializeImage=async({imageFile:t,imageElement:r,showCursorImagePreview:o=!1})=>{if(!xi(t))throw new Error(b("errors.unsupportedFileType"));let n=t.type;if(We(this.interactiveCanvas,"wait"),n===te.svg)try{t=ug(await jx(await t.text()),t.name)}catch(c){throw console.warn(c),new Error(b("errors.svgImageInsertError"))}let i=await(this.props.generateIdForFile?.(t)||Ux(t));if(!i)throw console.warn("Couldn't generate file id or the supplied `generateIdForFile` didn't resolve to one."),new Error(b("errors.imageInsertError"));if(!this.files[i]?.dataURL){try{t=await ac(t,{maxWidthOrHeight:C0})}catch(c){console.error("Error trying to resizing image file on insertion",c)}if(t.size>ih)throw new Error(b("errors.fileTooBig",{maxSize:`${Math.trunc(ih/1024/1024)}MB`}))}if(o){let c=this.files[i]?.dataURL,d=c&&Wx(c);this.setImagePreviewCursor(d||t)}let s=this.files[i]?.dataURL||await ym(t),l=z(r,{fileId:i},!1);return new Promise(async(c,d)=>{try{this.files={...this.files,[i]:{mimeType:n,id:i,dataURL:s,created:Date.now(),lastRetrieved:Date.now()}};let m=this.imageCache.get(i);m||(this.addNewImagesToImageCache(),await this.updateImageCache([l])),m?.image instanceof Promise&&await m.image,this.state.pendingImageElementId!==l.id&&this.state.draggingElement?.id!==l.id&&this.initializeImageDimensions(l,!0),c(l)}catch(m){console.error(m),d(new Error(b("errors.imageInsertError")))}finally{o||Ur(this.interactiveCanvas)}})};insertImageElement=async(t,r,o)=>{if(!this.isToolSupported("image")){this.setState({errorMessage:b("errors.imageToolNotSupported")});return}this.scene.insertElement(t);try{return await this.initializeImage({imageFile:r,imageElement:t,showCursorImagePreview:o})}catch(n){return z(t,{isDeleted:!0}),this.actionManager.executeAction(uo),this.setState({errorMessage:n.message||b("errors.imageInsertError")}),null}};setImagePreviewCursor=async t=>{let o;try{o=await ac(t,{maxWidthOrHeight:96})}catch(i){throw i.cause==="UNSUPPORTED"?new Error(b("errors.unsupportedFileType")):i}let n=await ym(o);if(t.type===te.svg){let i=await fg(n),a=Math.min(i.height,96),s=a*(i.width/i.height);s>96&&(s=96,a=s*(i.height/i.width));let l=document.createElement("canvas");l.height=a,l.width=s,l.getContext("2d").drawImage(i,0,0,s,a),n=l.toDataURL(te.svg)}this.state.pendingImageElementId&&We(this.interactiveCanvas,`url(${n}) 4 4, auto`)};onImageAction=async({insertOnCanvasDirectly:t})=>{try{let r=this.state.width/2+this.state.offsetLeft,o=this.state.height/2+this.state.offsetTop,{x:n,y:i}=Ke({clientX:r,clientY:o},this.state),a=await bs({description:"Image",extensions:Object.keys(El)}),s=this.createImageElement({sceneX:n,sceneY:i,addToFrameUnderCursor:!1});t?(this.insertImageElement(s,a),this.initializeImageDimensions(s),this.setState({selectedElementIds:Ne({[s.id]:!0},this.state)},()=>{this.actionManager.executeAction(uo)})):this.setState({pendingImageElementId:s.id},()=>{this.insertImageElement(s,a,!0)})}catch(r){r.name!=="AbortError"?console.error(r):console.warn(r),this.setState({pendingImageElementId:null,editingElement:null,activeTool:Qe(this.state,{type:"selection"})},()=>{this.actionManager.executeAction(uo)})}};initializeImageDimensions=(t,r=!1)=>{let o=lr(t)&&this.imageCache.get(t.fileId)?.image;if(!o||o instanceof Promise){if(t.width<xn/this.state.zoom.value&&t.height<xn/this.state.zoom.value){let n=100/this.state.zoom.value;z(t,{x:t.x-n/2,y:t.y-n/2,width:n,height:n})}return}if(r||t.width<xn/this.state.zoom.value&&t.height<xn/this.state.zoom.value){let n=Math.max(this.state.height-120,160),i=Math.min(n,Math.floor(this.state.height*.5)/this.state.zoom.value),a=Math.min(o.naturalHeight,i),s=a*(o.naturalWidth/o.naturalHeight),l=t.x+t.width/2-s/2,c=t.y+t.height/2-a/2;z(t,{x:l,y:c,width:s,height:a})}};updateImageCache=async(t,r=this.files)=>{let{updatedFiles:o,erroredFiles:n}=await Tm({imageCache:this.imageCache,fileIds:t.map(i=>i.fileId),files:r});if(o.size||n.size)for(let i of t)o.has(i.fileId)&&Pe.delete(i);return n.size&&this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().map(i=>lr(i)&&n.has(i.fileId)?ie(i,{status:"error"}):i)),{updatedFiles:o,erroredFiles:n}};addNewImagesToImageCache=async(t=Am(this.scene.getNonDeletedElements()),r=this.files)=>{let o=t.filter(n=>!n.isDeleted&&!this.imageCache.has(n.fileId));if(o.length){let{updatedFiles:n}=await this.updateImageCache(o,r);n.size&&this.scene.informMutation()}};scheduleImageRefresh=EL(()=>{this.addNewImagesToImageCache()},u0);updateBindingEnabledOnPointerMove=t=>{let r=Ob(t);this.state.isBindingEnabled!==r&&this.setState({isBindingEnabled:r})};maybeSuggestBindingAtCursor=t=>{let r=Qo(t,this);this.setState({suggestedBindings:r!=null?[r]:[]})};maybeSuggestBindingsForLinearElementAtCoords=(t,r,o)=>{if(!r.length)return;let n=r.reduce((i,a)=>{let s=Qo(a,this);return s!=null&&!Fh(t,o?.id,s)&&i.push(s),i},[]);this.setState({suggestedBindings:n})};clearSelection(t){this.setState(r=>({selectedElementIds:Ne({},r),activeEmbeddable:null,selectedGroupIds:{},editingGroupId:r.editingGroupId&&t!=null&&ua(t,r.editingGroupId)?r.editingGroupId:null})),this.setState({selectedElementIds:Ne({},this.state),activeEmbeddable:null,previousSelectedElementIds:this.state.selectedElementIds})}handleInteractiveCanvasRef=t=>{t!==null?(this.interactiveCanvas=t,this.interactiveCanvas.addEventListener("wheel",this.handleWheel),this.interactiveCanvas.addEventListener("touchstart",this.onTouchStart),this.interactiveCanvas.addEventListener("touchend",this.onTouchEnd)):(this.interactiveCanvas?.removeEventListener("wheel",this.handleWheel),this.interactiveCanvas?.removeEventListener("touchstart",this.onTouchStart),this.interactiveCanvas?.removeEventListener("touchend",this.onTouchEnd))};handleAppOnDrop=async t=>{let{file:r,fileHandle:o}=await Vx(t),{x:n,y:i}=Ke(t,this.state);try{if(xi(r)&&this.isToolSupported("image")){if(r?.type===te.png||r?.type===te.svg)try{let l=await Cs(r,this.state,this.scene.getElementsIncludingDeleted(),o);this.syncActionResult({...l,appState:{...l.appState||this.state,isLoading:!1},replaceFiles:!0,storeAction:D.CAPTURE});return}catch(l){if(l.name!=="EncodingError")throw new Error(b("alerts.couldNotLoadInvalidFile"))}let s=this.createImageElement({sceneX:n,sceneY:i});this.insertImageElement(s,r),this.initializeImageDimensions(s),this.setState({selectedElementIds:Ne({[s.id]:!0},this.state)});return}}catch(s){return this.setState({isLoading:!1,errorMessage:s.message})}let a=t.dataTransfer.getData(te.excalidrawlib);if(a&&typeof a=="string"){try{let s=mg(a);this.addElementsFromPasteOrLibrary({elements:Wp(s),position:t,files:null})}catch(s){this.setState({errorMessage:s.message})}return}if(r&&await this.loadFileToCanvas(r,o),t.dataTransfer?.types?.includes("text/plain")){let s=t.dataTransfer?.getData("text");if(s&&fs(s,this.props.validateEmbeddable)&&(/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(s)||Pn(s)?.type==="video")){let l=this.insertEmbeddableElement({sceneX:n,sceneY:i,link:pr(s)});l&&this.setState({selectedElementIds:{[l.id]:!0}})}}};loadFileToCanvas=async(t,r)=>{t=await sc(t);try{let o=this.scene.getElementsIncludingDeleted(),n;try{n=await Em(t,this.state,o,r)}catch(i){let a=i instanceof Io;if(a&&i.code==="IMAGE_NOT_CONTAINS_SCENE_DATA"&&!this.isToolSupported("image")){this.setState({isLoading:!1,errorMessage:b("errors.imageToolNotSupported")});return}let s=a?b("alerts.cannotRestoreFromImage"):b("alerts.couldNotLoadInvalidFile");this.setState({isLoading:!1,errorMessage:s})}if(!n)return;n.type===te.excalidraw?(cr(o.concat(n.data.elements)),this.store.updateSnapshot(X(o),this.state),this.setState({isLoading:!0}),this.syncActionResult({...n.data,appState:{...n.data.appState||this.state,isLoading:!1},replaceFiles:!0,storeAction:D.CAPTURE})):n.type===te.excalidrawlib&&await this.library.updateLibrary({libraryItems:t,merge:!0,openLibraryMenu:!0}).catch(i=>{console.error(i),this.setState({errorMessage:b("errors.importLibraryError")})})}catch(o){this.setState({isLoading:!1,errorMessage:o.message})}};handleCanvasContextMenu=t=>{if(t.preventDefault(),("pointerType"in t.nativeEvent&&t.nativeEvent.pointerType==="touch"||"pointerType"in t.nativeEvent&&t.nativeEvent.pointerType==="pen"&&t.button!==qn.SECONDARY)&&this.state.activeTool.type!=="selection")return;let{x:r,y:o}=Ke(t,this.state),n=this.getElementAtPosition(r,o,{preferSelected:!0,includeLockedElements:!0}),i=this.scene.getSelectedElements(this.state),a=this.isHittingCommonBoundingBoxOfSelectedElements({x:r,y:o},i),s=n||a?"element":"canvas",l=this.excalidrawContainerRef.current,{top:c,left:d}=l.getBoundingClientRect(),m=t.clientX-d,p=t.clientY-c;xe("contextMenu","openContextMenu",s),this.setState({...n&&!this.state.selectedElementIds[n.id]?{...this.state,...qt({editingGroupId:this.state.editingGroupId,selectedElementIds:{[n.id]:!0}},this.scene.getNonDeletedElements(),this.state,this),selectedLinearElement:ne(n)?new Z(n):null}:this.state,showHyperlinkPopup:!1},()=>{this.setState({contextMenu:{top:p,left:m,items:this.getContextMenuItems(s)}})})};maybeDragNewGenericElement=(t,r)=>{let o=this.state.draggingElement,n=t.lastCoords;if(o)if(o.type==="selection"&&this.state.activeTool.type!=="eraser")np(o,this.state.activeTool.type,t.origin.x,t.origin.y,n.x,n.y,Pt(t.origin.x,n.x),Pt(t.origin.y,n.y),cs(r),Gd(r));else{let[i,a]=It(n.x,n.y,r[T.CTRL_OR_CMD]?null:this.state.gridSize),s=lr(o)&&this.imageCache.get(o.fileId)?.image,l=s&&!(s instanceof Promise)?s.width/s.height:null;this.maybeCacheReferenceSnapPoints(r,[o]);let{snapOffset:c,snapLines:d}=ev(o,this.state,r,{x:t.originInGrid.x+(this.state.originSnapOffset?.x??0),y:t.originInGrid.y+(this.state.originSnapOffset?.y??0)},{x:i-t.originInGrid.x,y:a-t.originInGrid.y},this.scene.getNonDeletedElementsMap());i+=c.x,a+=c.y,this.setState({snapLines:d}),np(o,this.state.activeTool.type,t.originInGrid.x,t.originInGrid.y,i,a,Pt(t.originInGrid.x,i),Pt(t.originInGrid.y,a),to(o)?!cs(r):cs(r),Gd(r),l,this.state.originSnapOffset),(this.state.activeTool.type===wt.frame||this.state.activeTool.type===wt.magicframe)&&this.setState({elementsToHighlight:Ls(this.scene.getNonDeletedElements(),o,this.state,this.scene.getNonDeletedElementsMap())})}};maybeHandleResize=(t,r)=>{let o=this.scene.getSelectedElements(this.state),n=o.filter(d=>ee(d)),i=t.resize.handleType;if(n.length>0&&i==="rotation")return!1;this.setState({isResizing:i&&i!=="rotation",isRotating:i==="rotation",activeEmbeddable:null});let a=t.lastCoords,[s,l]=It(a.x-t.resize.offset.x,a.y-t.resize.offset.y,r[T.CTRL_OR_CMD]?null:this.state.gridSize),c=new Map;if(n.forEach(d=>{Vr(this.scene.getNonDeletedElements(),d.id).forEach(p=>{c.set(d.id+p.id,{x:p.x-d.x,y:p.y-d.y})})}),!this.state.selectedElementsAreBeingDragged){let[d,m]=It(a.x,a.y,r[T.CTRL_OR_CMD]?null:this.state.gridSize),p={x:d-t.originInGrid.x,y:m-t.originInGrid.y},u=[...t.originalElements.values()];this.maybeCacheReferenceSnapPoints(r,o);let{snapOffset:h,snapLines:x}=$5(o,ue(u,this.state),this.state,r,p,i);s+=h.x,l+=h.y,this.setState({snapLines:x})}if(Fg(t.originalElements,i,o,this.scene.getElementsMapIncludingDeleted(),aa(r),Gd(r),o.some(d=>to(d))?!cs(r):cs(r),s,l,t.resize.center.x,t.resize.center.y)){let d=Yd(o,this),m=new Set;return n.forEach(p=>{Ls(this.scene.getNonDeletedElements(),p,this.state,this.scene.getNonDeletedElementsMap()).forEach(u=>m.add(u))}),this.setState({elementsToHighlight:[...m],suggestedBindings:d}),!0}return!1};getContextMenuItems=t=>{let r=[];return r.push(Op,Np),t==="canvas"?this.state.viewModeEnabled?[...r,Fp,Qs,u2,Ii]:[Jf,gr,Op,Np,Bp,gr,Sf,nw,gr,Fp,$f,Qs,u2,Ii]:(r.push(Bp),this.state.viewModeEnabled?[qs,...r]:[Rp,qs,Jf,Y5,V5,gr,...r,gr,Yf,Vf,gr,Kf,e1,t1,q3,Xf,gr,jf,gr,vf,Cf,Tf,Af,gr,qf,Qf,gr,N1,Rc,If,s1,gr,Tc])};handleWheel=dt(t=>{if(t.preventDefault(),$c)return;let{deltaX:r,deltaY:o}=t;if(t.metaKey||t.ctrlKey){let n=Math.sign(o),i=Zi*100,a=Math.abs(o),s=o;a>i&&(s=i*n);let l=this.state.zoom.value-s/100;l+=Math.log10(Math.max(1,this.state.zoom.value))*-n*Math.min(1,a/20),this.translateCanvas(c=>({...Hn({viewportX:this.lastViewportPosition.x,viewportY:this.lastViewportPosition.y,nextZoom:rn(l)},c),shouldCacheIgnoreZoom:!0})),this.resetShouldCacheIgnoreZoomDebounced();return}if(t.shiftKey){this.translateCanvas(({zoom:n,scrollX:i})=>({scrollX:i-(o||r)/n.value}));return}this.translateCanvas(({zoom:n,scrollX:i,scrollY:a})=>({scrollX:i-r/n.value,scrollY:a-o/n.value}))});getTextWysiwygSnappedToCenterPosition(t,r,o,n){if(n){let i=n.x+n.width/2,a=n.y+n.height/2,s=$d(n,o,this.scene.getNonDeletedElementsMap());if(s&&(i=s.x,a=s.y),Math.hypot(t-i,r-a)<l0){let{x:d,y:m}=Bt({sceneX:i,sceneY:a},o);return{viewportX:d,viewportY:m,elementCenterX:i,elementCenterY:a}}}}savePointer=(t,r,o)=>{if(!t||!r)return;let{x:n,y:i}=Ke({clientX:t,clientY:r},this.state);isNaN(n)||isNaN(i);let a={x:n,y:i,tool:this.state.activeTool.type==="laser"?"laser":"pointer"};this.props.onPointerUpdate?.({pointer:a,button:o,pointersMap:Fe.pointers})};resetShouldCacheIgnoreZoomDebounced=qi(()=>{this.unmounted||this.setState({shouldCacheIgnoreZoom:!1})},300);updateDOMRect=t=>{if(this.excalidrawContainerRef?.current){let r=this.excalidrawContainerRef.current,{width:o,height:n,left:i,top:a}=r.getBoundingClientRect(),{width:s,height:l,offsetTop:c,offsetLeft:d}=this.state;if(o===s&&n===l&&i===d&&a===c){t&&t();return}this.setState({width:o,height:n,offsetLeft:i,offsetTop:a},()=>{t&&t()})}};refresh=()=>{this.setState({...this.getCanvasOffsets()})};getCanvasOffsets(){if(this.excalidrawContainerRef?.current){let t=this.excalidrawContainerRef.current,{left:r,top:o}=t.getBoundingClientRect();return{offsetLeft:r,offsetTop:o}}return{offsetLeft:0,offsetTop:0}}async updateLanguage(){let t=Va.find(r=>r.code===this.props.langCode)||_o;await ad(t),this.setAppState({})}},yL=()=>{(C.MODE===yr.TEST||C.DEV)&&(window.h=window.h||{},Object.defineProperties(window.h,{elements:{configurable:!0,get(){return this.app?.scene.getElementsIncludingDeleted()},set(e){return this.app?.scene.replaceAllElements(cr(e))}}}))};yL();var Pv=M2;G();f();var vL=()=>{Array.prototype.at||Object.defineProperty(Array.prototype,"at",{value:function(e){if(e=Math.trunc(e)||0,e<0&&(e+=this.length),!(e<0||e>=this.length))return this[e]},writable:!0,enumerable:!1,configurable:!0}),Element.prototype.replaceChildren||(Element.prototype.replaceChildren=function(...e){this.innerHTML="",this.append(...e)})},Dv=vL;V();import{Provider as zL}from"jotai";f();import CL from"clsx";import{jsx as Rv}from"react/jsx-runtime";var Nv=({children:e})=>{let{FooterCenterTunnel:t}=ot(),r=Re();return Rv(t.In,{children:Rv("div",{className:CL("footer-center zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-bottom":r.zenModeEnabled}),children:e})})},TL=Nv;Nv.displayName="FooterCenter";f();f();f();import{jsx as Ui,jsxs as O2}from"react/jsx-runtime";var AL=()=>O2("svg",{fill:"none",height:"100",viewBox:"0 0 176 176",width:"176",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[Ui("circle",{cx:"88",cy:"88",fill:"url(#pattern0_5_1958)",r:"88"}),O2("defs",{children:[Ui("pattern",{height:"1",id:"pattern0_5_1958",patternContentUnits:"objectBoundingBox",width:"1",children:Ui("use",{transform:"scale(0.00284091)",xlinkHref:"#image0_5_1958"})}),Ui("image",{height:"352",id:"image0_5_1958",width:"352",xlinkHref:"data:image/png;base64,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"})]})]}),SL=()=>Ui("svg",{fill:"none",height:"89",viewBox:"0 0 550 89",width:"550",xmlns:"http://www.w3.org/2000/svg",children:Ui("path",{d:"M39.6065 1.432C39.7505 1.24 40.2065 1.06 40.9745 0.891999C41.7665 0.699999 42.5105 0.603999 43.2065 0.603999C43.9025 0.603999 44.4785 0.699999 44.9345 0.891999C43.1825 14.908 42.3065 22.156 42.3065 22.636C42.3065 23.116 42.4505 23.548 42.7385 23.932C43.0505 24.292 43.4945 24.472 44.0705 24.472C45.6545 24.472 47.0705 22.3 48.3185 17.956C48.3185 17.908 48.3305 17.848 48.3545 17.776C48.3785 17.704 48.3905 17.656 48.3905 17.632C49.4465 18.304 50.1305 18.724 50.4425 18.892C49.6505 21.916 48.6665 24.232 47.4905 25.84C46.3145 27.424 44.8025 28.216 42.9545 28.216C41.1065 28.216 39.8585 27.34 39.2105 25.588H39.1025C38.3585 26.524 37.5305 27.196 36.6185 27.604C35.7065 28.012 34.5665 28.216 33.1985 28.216C30.9425 28.216 29.2025 27.628 27.9785 26.452C26.7785 25.276 26.1785 23.596 26.1785 21.412C26.1785 20.956 26.2145 20.452 26.2865 19.9L27.2945 11.476C24.9185 9.796 23.7305 7.816 23.7305 5.536C23.7305 4.024 24.1865 2.824 25.0985 1.936C26.0105 1.048 27.1745 0.603999 28.5905 0.603999C31.5425 0.603999 33.0185 2.164 33.0185 5.284C33.0185 5.788 32.9825 6.352 32.9105 6.976L31.0745 21.052C31.0505 21.22 31.0385 21.472 31.0385 21.808C31.0385 22.744 31.2545 23.5 31.6865 24.076C32.1185 24.652 32.7785 24.94 33.6665 24.94C35.8025 24.94 37.0625 23.284 37.4465 19.972L39.6065 1.432ZM27.2585 3.916C26.4425 3.916 26.0345 4.42 26.0345 5.428C26.0345 6.412 26.5865 7.384 27.6905 8.344L27.7985 7.408C27.9425 6.16 28.0265 5.38 28.0505 5.068C28.0505 4.3 27.7865 3.916 27.2585 3.916ZM61.6227 16.984C63.5187 18.376 64.4667 20.02 64.4667 21.916C64.4667 23.812 63.7227 25.336 62.2347 26.488C60.7467 27.64 58.8747 28.216 56.6187 28.216C55.1547 28.216 53.9307 27.856 52.9467 27.136C51.9867 26.392 51.5067 25.48 51.5067 24.4C51.5067 23.32 51.8667 22.468 52.5867 21.844C53.3067 21.196 54.2067 20.8 55.2867 20.656C54.7827 21.376 54.5307 22.072 54.5307 22.744C54.5307 23.392 54.7587 23.92 55.2147 24.328C55.6707 24.736 56.2467 24.94 56.9427 24.94C57.6387 24.94 58.2147 24.688 58.6707 24.184C59.1267 23.656 59.3547 23.056 59.3547 22.384C59.3547 21.28 58.8387 20.296 57.8067 19.432C57.1827 18.928 56.5107 18.46 55.7907 18.028C55.0707 17.572 54.6867 17.332 54.6387 17.308C54.5427 17.236 54.4467 17.176 54.3507 17.128C53.9187 17.632 53.2947 18.328 52.4787 19.216C51.6627 20.08 51.0147 20.776 50.5347 21.304C49.1907 22.768 48.4347 23.992 48.2667 24.976C48.2187 25.168 48.1947 25.54 48.1947 26.092C48.1947 26.62 48.3507 27.172 48.6627 27.748C48.9987 28.324 49.3947 28.756 49.8507 29.044C50.3067 29.332 50.7507 29.56 51.1827 29.728C51.6387 29.92 52.0227 30.052 52.3347 30.124C52.6707 30.196 52.8387 30.244 52.8387 30.268C52.8387 30.436 52.5747 30.628 52.0467 30.844C51.0627 31.204 50.0307 31.384 48.9507 31.384C47.8947 31.384 46.8627 31 45.8547 30.232C44.4867 29.176 43.8027 27.772 43.8027 26.02C43.8027 24.94 44.0787 23.872 44.6307 22.816C45.6147 20.944 47.9187 18.376 51.5427 15.112C50.6547 14.224 50.2107 13.276 50.2107 12.268C50.2107 11.26 50.5827 10.408 51.3267 9.712C52.0947 9.016 52.9947 8.668 54.0267 8.668C54.9627 8.668 55.7787 9.04 56.4747 9.784C56.9307 10.288 57.1587 10.924 57.1587 11.692C57.1587 12.46 56.9067 13.324 56.4027 14.284C58.9707 15.436 60.7107 16.336 61.6227 16.984ZM53.8107 12.916C54.3867 12.316 54.6747 11.884 54.6747 11.62C54.6747 11.02 54.4107 10.696 53.8827 10.648C53.2827 10.648 52.9827 10.984 52.9827 11.656C52.9827 12.064 53.2587 12.484 53.8107 12.916ZM73.2381 2.944C73.2381 3.088 72.9141 5.668 72.2661 10.684H77.5581V13.456H71.9061L71.7981 14.356C74.6061 16.708 76.0101 19.276 76.0101 22.06C76.0101 24.244 75.4461 25.816 74.3181 26.776C73.2141 27.736 71.8821 28.216 70.3221 28.216C68.7621 28.216 67.6221 27.808 66.9021 26.992C66.1821 26.152 65.8221 25.144 65.8221 23.968C65.8221 23.704 65.8461 23.416 65.8941 23.104L67.0101 13.528L66.8661 13.456H63.9501C63.9261 13.216 63.9141 12.832 63.9141 12.304C63.9141 11.752 64.0221 11.212 64.2381 10.684H67.3341L68.4861 0.891999C68.9901 0.699999 69.6621 0.603999 70.5021 0.603999C72.3261 0.603999 73.2381 1.384 73.2381 2.944ZM73.5981 22.024C73.5981 20.368 72.8781 18.736 71.4381 17.128C71.0061 20.704 70.7901 22.768 70.7901 23.32C70.7901 24.4 71.1381 24.94 71.8341 24.94C72.3381 24.94 72.7581 24.712 73.0941 24.256C73.4301 23.776 73.5981 23.032 73.5981 22.024ZM93.5331 11.044C92.5491 18.82 92.0571 22.96 92.0571 23.464C92.0571 24.424 92.4051 24.904 93.1011 24.904C93.7251 24.904 94.3971 24.484 95.1171 23.644C95.8611 22.78 96.4491 21.496 96.8811 19.792C97.6731 20.656 98.1531 21.328 98.3211 21.808C97.7691 24.136 96.8931 25.78 95.6931 26.74C94.4931 27.7 93.2571 28.18 91.9851 28.18C89.8971 28.18 88.4931 27.376 87.7731 25.768C86.5251 27.376 84.8571 28.18 82.7691 28.18C81.0411 28.18 79.7091 27.748 78.7731 26.884C77.8371 26.02 77.3691 24.892 77.3691 23.5C77.3691 23.164 77.4291 22.576 77.5491 21.736C78.1011 17.272 78.5211 13.72 78.8091 11.08C79.5531 10.816 80.2371 10.684 80.8611 10.684C81.4851 10.684 81.9531 10.708 82.2651 10.756C82.5771 10.804 82.8771 10.984 83.1651 11.296C83.4531 11.608 83.5971 12.052 83.5971 12.628L82.4091 21.808C82.3611 22.096 82.3371 22.36 82.3371 22.6C82.3371 24.016 82.9851 24.724 84.2811 24.724C85.4811 24.724 86.4771 24.136 87.2691 22.96C87.2691 22.696 87.2931 22.276 87.3411 21.7L88.5291 12.124C88.6971 11.716 89.0571 11.38 89.6091 11.116C90.1611 10.828 90.8451 10.684 91.6611 10.684C92.5011 10.684 93.1251 10.804 93.5331 11.044ZM109.475 2.044C109.643 1.636 110.015 1.3 110.591 1.036C111.191 0.747999 111.899 0.603999 112.715 0.603999C113.555 0.603999 114.179 0.723999 114.587 0.963998C114.347 2.836 113.963 5.776 113.435 9.784C112.331 18.16 111.779 22.78 111.779 23.644C111.779 24.484 112.139 24.904 112.859 24.904C113.483 24.904 114.131 24.52 114.803 23.752C115.475 22.96 116.087 21.676 116.639 19.9C117.311 20.548 117.779 21.256 118.043 22.024C117.179 24.88 115.823 26.728 113.975 27.568C113.135 27.976 112.343 28.18 111.599 28.18C109.463 28.18 108.035 27.412 107.315 25.876C106.067 27.436 104.471 28.216 102.527 28.216C100.583 28.216 98.9392 27.556 97.5952 26.236C96.2752 24.916 95.6152 23.176 95.6152 21.016C95.6152 17.872 96.5392 15.364 98.3872 13.492C100.235 11.62 102.575 10.684 105.407 10.684C105.479 10.684 105.551 10.684 105.623 10.684C106.607 10.684 107.531 10.828 108.395 11.116L109.475 2.044ZM105.947 13.492C104.411 13.492 103.187 14.08 102.275 15.256C101.387 16.408 100.859 18.136 100.691 20.44C100.667 20.656 100.655 20.86 100.655 21.052C100.655 22.228 100.931 23.164 101.483 23.86C102.059 24.556 102.791 24.904 103.679 24.904C105.191 24.904 106.331 23.836 107.099 21.7L108.035 13.96C107.243 13.648 106.547 13.492 105.947 13.492ZM121.638 38.692C120.27 38.692 119.094 38.272 118.11 37.432C117.126 36.616 116.634 35.416 116.634 33.832C116.634 31.888 117.618 29.992 119.586 28.144C118.194 28.024 117.078 27.568 116.238 26.776C115.398 25.984 114.978 24.868 114.978 23.428C114.978 22.756 115.062 21.748 115.23 20.404C115.398 19.06 115.578 17.608 115.77 16.048C115.962 14.488 116.166 12.832 116.382 11.08C117.126 10.816 117.81 10.684 118.434 10.684C119.058 10.684 119.526 10.708 119.838 10.756C120.15 10.804 120.45 10.984 120.738 11.296C121.026 11.608 121.17 12.052 121.17 12.628L119.982 21.808C119.934 22.192 119.91 22.456 119.91 22.6C119.91 24.016 120.558 24.724 121.854 24.724C123.03 24.724 123.99 24.172 124.734 23.068C124.806 22.516 124.986 20.932 125.274 18.316C125.562 15.676 125.802 13.624 125.994 12.16C126.21 11.704 126.654 11.344 127.326 11.08C128.022 10.816 128.586 10.684 129.018 10.684C129.786 10.684 130.482 10.78 131.106 10.972L129.414 24.256C132.222 24.76 133.902 26.692 134.454 30.052C134.358 30.508 133.902 31.228 133.086 32.212C132.606 29.212 131.286 27.388 129.126 26.74L128.55 31.24C128.286 33.4 127.602 35.176 126.498 36.568C125.394 37.984 123.774 38.692 121.638 38.692ZM119.442 33.148C119.442 33.94 119.634 34.528 120.018 34.912C120.402 35.296 120.906 35.488 121.53 35.488C122.178 35.488 122.67 35.224 123.006 34.696C123.342 34.168 123.606 33.112 123.798 31.528L124.266 27.568C121.122 29.2 119.514 31.06 119.442 33.148ZM161.564 28.072C160.22 28.072 159.2 27.64 158.504 26.776C157.832 25.888 157.376 24.244 157.136 21.844C156.992 20.596 156.848 18.976 156.704 16.984C155.024 17.488 153.332 18.016 151.628 18.568L150.404 21.952C150.164 22.6 149.996 23.068 149.9 23.356C149.804 23.62 149.624 24.028 149.36 24.58C149.12 25.132 148.904 25.54 148.712 25.804C148.544 26.044 148.292 26.356 147.956 26.74C147.644 27.124 147.32 27.4 146.984 27.568C146.12 28 145.196 28.216 144.212 28.216C143.228 28.216 142.424 27.868 141.8 27.172C141.2 26.452 140.9 25.576 140.9 24.544C140.9 24.256 140.924 23.956 140.972 23.644C141.284 21.34 143.648 19.24 148.064 17.344C149.312 14.152 151.388 8.776 154.292 1.216C155.06 0.783999 156.032 0.567999 157.208 0.567999C157.472 0.567999 157.724 0.567999 157.964 0.567999C158.204 0.567999 158.492 0.567999 158.828 0.567999C159.188 0.567999 159.632 0.639999 160.16 0.783998C160.184 1.912 160.736 8.908 161.816 21.772C161.912 22.852 162.044 23.56 162.212 23.896C162.38 24.208 162.668 24.364 163.076 24.364C163.748 24.364 164.636 23.908 165.74 22.996C166.868 22.084 167.876 20.944 168.764 19.576L169.772 22.024L168.908 23.176C166.388 26.44 163.94 28.072 161.564 28.072ZM155.84 6.832L152.708 15.58C154.388 15.004 155.636 14.584 156.452 14.32L155.84 6.832ZM146.804 20.476C144.572 21.604 143.456 22.708 143.456 23.788C143.456 24.556 143.744 24.94 144.32 24.94C144.752 24.94 145.1 24.628 145.364 24.004C145.676 23.332 146.156 22.156 146.804 20.476ZM180.315 2.044C180.483 1.636 180.855 1.3 181.431 1.036C182.031 0.747999 182.739 0.603999 183.555 0.603999C184.395 0.603999 185.019 0.723999 185.427 0.963998C185.187 2.836 184.803 5.776 184.275 9.784C183.171 18.16 182.619 22.78 182.619 23.644C182.619 24.484 182.979 24.904 183.699 24.904C184.323 24.904 184.971 24.52 185.643 23.752C186.315 22.96 186.927 21.676 187.479 19.9C188.151 20.548 188.619 21.256 188.883 22.024C188.019 24.88 186.663 26.728 184.815 27.568C183.975 27.976 183.183 28.18 182.439 28.18C180.303 28.18 178.875 27.412 178.155 25.876C176.907 27.436 175.311 28.216 173.367 28.216C171.423 28.216 169.779 27.556 168.435 26.236C167.115 24.916 166.455 23.176 166.455 21.016C166.455 17.872 167.379 15.364 169.227 13.492C171.075 11.62 173.415 10.684 176.247 10.684C176.319 10.684 176.391 10.684 176.463 10.684C177.447 10.684 178.371 10.828 179.235 11.116L180.315 2.044ZM176.787 13.492C175.251 13.492 174.027 14.08 173.115 15.256C172.227 16.408 171.699 18.136 171.531 20.44C171.507 20.656 171.495 20.86 171.495 21.052C171.495 22.228 171.771 23.164 172.323 23.86C172.899 24.556 173.631 24.904 174.519 24.904C176.031 24.904 177.171 23.836 177.939 21.7L178.875 13.96C178.083 13.648 177.387 13.492 176.787 13.492ZM196.438 28L197.806 16.048C197.806 15.376 197.638 14.824 197.302 14.392C196.99 13.936 196.426 13.708 195.61 13.708C194.794 13.708 194.122 14.104 193.594 14.896C193.066 15.664 192.73 16.48 192.586 17.344C191.746 23.32 191.278 26.872 191.182 28H186.358L188.338 11.08C189.346 10.816 190.114 10.684 190.642 10.684C192.154 10.684 192.982 11.188 193.126 12.196C194.302 11.188 195.586 10.684 196.978 10.684C199.762 10.684 201.538 11.512 202.306 13.168C203.482 11.488 205.162 10.648 207.346 10.648C208.954 10.648 210.226 11.068 211.162 11.908C212.098 12.724 212.566 13.756 212.566 15.004C212.566 15.364 212.494 16 212.35 16.912C211.798 20.512 211.522 22.624 211.522 23.248C211.522 24.376 211.894 24.94 212.638 24.94C213.262 24.94 213.922 24.532 214.618 23.716C215.338 22.876 215.914 21.592 216.346 19.864C217.162 20.728 217.654 21.412 217.822 21.916C216.574 26.092 214.366 28.18 211.198 28.18C209.71 28.18 208.606 27.724 207.886 26.812C207.166 25.9 206.806 24.94 206.806 23.932L207.67 15.976C207.67 15.328 207.502 14.788 207.166 14.356C206.83 13.924 206.29 13.708 205.546 13.708C204.826 13.708 204.19 13.984 203.638 14.536C203.086 15.088 202.702 15.796 202.486 16.66C201.766 22.756 201.298 26.536 201.082 28H196.438ZM217.955 1.504C218.507 0.927998 219.179 0.639998 219.971 0.639998C220.763 0.639998 221.435 0.927998 221.987 1.504C222.563 2.056 222.851 2.728 222.851 3.52C222.851 4.312 222.563 4.984 221.987 5.536C221.435 6.088 220.763 6.364 219.971 6.364C219.179 6.364 218.507 6.088 217.955 5.536C217.403 4.984 217.127 4.312 217.127 3.52C217.127 2.728 217.403 2.056 217.955 1.504ZM216.479 12.052C216.719 11.62 217.175 11.296 217.847 11.08C218.519 10.84 219.179 10.72 219.827 10.72C220.499 10.72 221.087 10.804 221.591 10.972C220.655 18.196 220.187 21.844 220.187 21.916C220.067 22.396 220.007 22.804 220.007 23.14C220.007 23.452 220.031 23.728 220.079 23.968C220.175 24.592 220.607 24.904 221.375 24.904C222.167 24.904 222.887 24.4 223.535 23.392C224.207 22.36 224.711 21.196 225.047 19.9C225.215 19.996 225.479 20.284 225.839 20.764C226.199 21.244 226.415 21.604 226.487 21.844C226.007 23.764 225.191 25.312 224.039 26.488C222.887 27.664 221.507 28.252 219.899 28.252C218.291 28.252 217.091 27.856 216.299 27.064C215.531 26.272 215.147 25.252 215.147 24.004C215.147 23.74 215.159 23.464 215.183 23.176L216.479 12.052ZM233.811 23.968L234.675 15.94C234.675 15.292 234.507 14.752 234.171 14.32C233.835 13.888 233.271 13.672 232.479 13.672C231.711 13.672 231.051 14.02 230.499 14.716C229.971 15.388 229.635 16.24 229.491 17.272C228.627 23.848 228.171 27.424 228.123 28H223.263L225.243 11.044C226.251 10.78 227.019 10.648 227.547 10.648C229.155 10.648 229.995 11.236 230.067 12.412C231.243 11.26 232.647 10.684 234.279 10.684C235.935 10.684 237.231 11.092 238.167 11.908C239.103 12.724 239.571 13.756 239.571 15.004C239.571 15.34 239.499 15.976 239.355 16.912C238.803 20.56 238.527 22.684 238.527 23.284C238.527 24.388 238.899 24.94 239.643 24.94C241.275 24.94 242.511 23.236 243.351 19.828C244.167 20.692 244.659 21.376 244.827 21.88C243.555 26.104 241.347 28.216 238.203 28.216C236.715 28.216 235.611 27.76 234.891 26.848C234.171 25.936 233.811 24.976 233.811 23.968ZM249.625 8.38C249.625 6.076 250.645 4.204 252.685 2.764C254.725 1.324 257.449 0.603999 260.857 0.603999C262.897 0.603999 264.685 0.843998 266.221 1.324C267.757 1.78 268.933 2.416 269.749 3.232C271.381 4.84 272.197 6.688 272.197 8.776C272.197 10.864 271.357 12.616 269.677 14.032C268.021 15.424 265.897 16.12 263.305 16.12C263.017 16.12 262.585 16.096 262.009 16.048L262.333 13.42C265.525 13.42 267.121 11.92 267.121 8.92C267.121 7.528 266.533 6.352 265.357 5.392C264.133 4.384 262.309 3.88 259.885 3.88C257.461 3.88 255.541 4.504 254.125 5.752C253.285 6.472 252.865 7.252 252.865 8.092C252.865 9.676 253.813 10.576 255.709 10.792L255.277 13.456C253.621 13.384 252.265 12.856 251.209 11.872C250.153 10.888 249.625 9.724 249.625 8.38ZM262.297 5.752L260.713 16.048C263.761 17.512 265.285 19.672 265.285 22.528C265.285 24.616 264.733 26.092 263.629 26.956C262.549 27.796 261.241 28.216 259.705 28.216C258.169 28.216 256.969 27.82 256.105 27.028C255.241 26.236 254.809 25.168 254.809 23.824C254.809 23.512 254.821 23.272 254.845 23.104L257.005 6.436C258.253 5.836 259.309 5.536 260.173 5.536C261.037 5.536 261.745 5.608 262.297 5.752ZM260.749 24.94C261.325 24.94 261.817 24.736 262.225 24.328C262.657 23.92 262.873 23.236 262.873 22.276C262.873 20.572 262.057 19.228 260.425 18.244C260.041 21.052 259.849 22.744 259.849 23.32C259.849 23.872 259.933 24.28 260.101 24.544C260.293 24.808 260.509 24.94 260.749 24.94ZM288.438 28.18C286.23 28.18 284.766 27.412 284.046 25.876C282.798 27.436 281.19 28.216 279.222 28.216C277.278 28.216 275.634 27.556 274.29 26.236C272.97 24.916 272.31 23.176 272.31 21.016C272.31 17.872 273.234 15.364 275.082 13.492C276.93 11.62 279.27 10.684 282.102 10.684C282.174 10.684 282.246 10.684 282.318 10.684C283.518 10.684 284.622 10.888 285.63 11.296C286.278 10.888 287.058 10.684 287.97 10.684C288.906 10.684 289.578 10.804 289.986 11.044C289.77 12.82 289.542 14.572 289.302 16.3C289.062 18.004 288.894 19.216 288.798 19.936C288.582 21.568 288.474 22.744 288.474 23.464C288.474 24.424 288.858 24.904 289.626 24.904C290.226 24.904 290.862 24.508 291.534 23.716C292.206 22.9 292.794 21.628 293.298 19.9C293.994 20.524 294.474 21.22 294.738 21.988C294.042 24.268 293.106 25.876 291.93 26.812C290.754 27.724 289.59 28.18 288.438 28.18ZM282.642 13.492C281.106 13.492 279.882 14.08 278.97 15.256C278.082 16.408 277.554 18.136 277.386 20.44C277.362 20.656 277.35 20.86 277.35 21.052C277.35 22.228 277.626 23.164 278.178 23.86C278.754 24.556 279.486 24.904 280.374 24.904C281.886 24.904 283.026 23.836 283.794 21.7L284.658 13.924C283.962 13.636 283.29 13.492 282.642 13.492ZM302.401 23.968L303.265 15.94C303.265 15.292 303.097 14.752 302.761 14.32C302.425 13.888 301.861 13.672 301.069 13.672C300.301 13.672 299.641 14.02 299.089 14.716C298.561 15.388 298.225 16.24 298.081 17.272C297.217 23.848 296.761 27.424 296.713 28H291.853L293.833 11.044C294.841 10.78 295.609 10.648 296.137 10.648C297.745 10.648 298.585 11.236 298.657 12.412C299.833 11.26 301.237 10.684 302.869 10.684C304.525 10.684 305.821 11.092 306.757 11.908C307.693 12.724 308.161 13.756 308.161 15.004C308.161 15.34 308.089 15.976 307.945 16.912C307.393 20.56 307.117 22.684 307.117 23.284C307.117 24.388 307.489 24.94 308.233 24.94C309.865 24.94 311.101 23.236 311.941 19.828C312.757 20.692 313.249 21.376 313.417 21.88C312.145 26.104 309.937 28.216 306.793 28.216C305.305 28.216 304.201 27.76 303.481 26.848C302.761 25.936 302.401 24.976 302.401 23.968ZM317.505 19.936C318.993 19.624 320.097 19.024 320.817 18.136C321.561 17.248 321.933 16.396 321.933 15.58C321.933 14.74 321.705 14.176 321.249 13.888C320.817 13.576 320.337 13.42 319.809 13.42C318.681 13.42 317.685 14.056 316.821 15.328C315.981 16.576 315.561 18.076 315.561 19.828C315.561 21.556 315.969 22.852 316.785 23.716C317.625 24.556 318.657 24.976 319.881 24.976C321.681 24.976 323.409 24.352 325.065 23.104C326.721 21.856 328.065 20.224 329.097 18.208C329.625 18.712 330.105 19.336 330.537 20.08C329.745 21.88 328.341 23.644 326.325 25.372C325.317 26.212 324.117 26.896 322.725 27.424C321.357 27.952 319.941 28.216 318.477 28.216C316.077 28.216 314.181 27.484 312.789 26.02C311.301 24.436 310.557 22.408 310.557 19.936C310.557 17.464 311.481 15.304 313.329 13.456C315.201 11.608 317.433 10.684 320.025 10.684C321.873 10.684 323.373 11.092 324.525 11.908C325.677 12.7 326.265 13.78 326.289 15.148C326.289 16.996 325.545 18.496 324.057 19.648C322.593 20.8 320.577 21.604 318.009 22.06L317.505 19.936ZM332.403 28.252C330.939 28.252 329.787 27.844 328.947 27.028C328.107 26.188 327.687 25.048 327.687 23.608C327.687 23.224 328.335 17.524 329.631 6.508C329.967 3.676 330.867 1.888 332.331 1.144C333.003 0.783998 333.807 0.603999 334.743 0.603999C337.911 0.603999 339.495 2.068 339.495 4.996C339.495 5.236 339.483 5.488 339.459 5.752C339.219 8.968 337.203 12.244 333.411 15.58C333.291 16.756 333.159 17.896 333.015 19C332.727 21.472 332.583 22.84 332.583 23.104C332.583 24.352 333.123 24.976 334.203 24.976C335.379 24.976 336.471 24.304 337.479 22.96C338.511 21.592 339.303 19.852 339.855 17.74C340.071 17.812 340.371 18.016 340.755 18.352C341.139 18.664 341.403 18.94 341.547 19.18C341.163 21.172 340.299 23.08 338.955 24.904C338.283 25.84 337.431 26.608 336.399 27.208C335.223 27.904 333.891 28.252 332.403 28.252ZM333.807 11.98C336.015 9.556 337.119 7.384 337.119 5.464C337.119 4.312 336.687 3.736 335.823 3.736C335.271 3.784 334.899 4.144 334.707 4.816C334.539 5.488 334.371 6.58 334.203 8.092C334.059 9.604 333.963 10.54 333.915 10.9L333.807 11.98ZM365.393 3.052L365.357 3.52C364.445 10.528 363.845 14.848 363.557 16.48C363.077 19.168 362.837 21.22 362.837 22.636C362.837 24.028 363.437 24.724 364.637 24.724C365.645 24.724 366.545 24.004 367.337 22.564C368.129 21.1 368.729 19.288 369.137 17.128C369.977 12.616 370.397 8.716 370.397 5.428C370.397 3.892 370.265 2.56 370.001 1.432C370.961 0.855999 372.113 0.567999 373.457 0.567999C374.801 0.567999 375.473 1.36 375.473 2.944C375.473 5.416 375.089 9.172 374.321 14.212C373.697 18.412 372.833 21.496 371.729 23.464C371.225 24.304 370.649 25.108 370.001 25.876C368.657 27.436 366.773 28.216 364.349 28.216C361.949 28.216 360.233 27.184 359.201 25.12C357.881 27.184 355.877 28.216 353.189 28.216C351.461 28.216 350.117 27.724 349.157 26.74C348.221 25.732 347.753 24.4 347.753 22.744C347.753 22.528 347.777 22.204 347.825 21.772L349.157 11.62C346.589 9.772 345.305 7.696 345.305 5.392C345.305 3.928 345.809 2.764 346.817 1.9C347.825 1.036 349.049 0.603999 350.489 0.603999C353.633 0.603999 355.205 2.164 355.205 5.284C355.205 5.332 355.193 5.392 355.169 5.464C355.169 5.536 355.157 5.656 355.133 5.824C355.133 5.968 355.109 6.148 355.061 6.364C355.037 6.556 354.989 6.856 354.917 7.264C354.869 7.672 354.809 8.128 354.737 8.632C354.665 9.112 354.569 9.76 354.449 10.576C354.329 11.392 354.197 12.28 354.053 13.24C353.933 14.176 353.777 15.328 353.585 16.696C353.393 18.064 353.225 19.228 353.081 20.188C352.937 21.148 352.865 21.844 352.865 22.276C352.865 23.884 353.489 24.688 354.737 24.688C356.465 24.688 357.533 23.116 357.941 19.972L360.245 1.792C361.037 1.432 361.985 1.252 363.089 1.252C364.625 1.252 365.393 1.852 365.393 3.052ZM349.085 3.484C348.629 3.484 348.293 3.652 348.077 3.988C347.861 4.324 347.753 4.708 347.753 5.14C347.753 6.22 348.353 7.336 349.553 8.488L349.733 7.048C349.829 6.256 349.877 5.464 349.877 4.672C349.901 3.88 349.637 3.484 349.085 3.484ZM386.098 23.896L386.962 15.94C386.962 15.292 386.794 14.752 386.458 14.32C386.122 13.888 385.582 13.672 384.838 13.672C384.094 13.672 383.458 13.972 382.93 14.572C382.426 15.148 382.054 15.916 381.814 16.876C381.646 18.244 381.394 20.248 381.058 22.888C380.722 25.504 380.506 27.208 380.41 28H375.622C377.35 13.288 378.394 4.252 378.754 0.891999C379.258 0.699999 379.942 0.603999 380.806 0.603999C382.678 0.603999 383.614 1.156 383.614 2.26V2.476C383.206 6.244 382.774 9.556 382.318 12.412C383.59 11.26 385.03 10.684 386.638 10.684C388.246 10.684 389.518 11.092 390.454 11.908C391.39 12.724 391.858 13.756 391.858 15.004C391.858 15.34 391.786 15.964 391.642 16.876C391.09 20.476 390.814 22.588 390.814 23.212C390.814 24.34 391.186 24.904 391.93 24.904C392.554 24.904 393.214 24.496 393.91 23.68C394.63 22.84 395.206 21.556 395.638 19.828C396.454 20.692 396.946 21.376 397.114 21.88C395.866 26.056 393.658 28.144 390.49 28.144C389.002 28.144 387.898 27.688 387.178 26.776C386.458 25.864 386.098 24.904 386.098 23.896ZM396.901 1.504C397.453 0.927998 398.125 0.639998 398.917 0.639998C399.709 0.639998 400.381 0.927998 400.933 1.504C401.509 2.056 401.797 2.728 401.797 3.52C401.797 4.312 401.509 4.984 400.933 5.536C400.381 6.088 399.709 6.364 398.917 6.364C398.125 6.364 397.453 6.088 396.901 5.536C396.349 4.984 396.073 4.312 396.073 3.52C396.073 2.728 396.349 2.056 396.901 1.504ZM395.425 12.052C395.665 11.62 396.121 11.296 396.793 11.08C397.465 10.84 398.125 10.72 398.773 10.72C399.445 10.72 400.033 10.804 400.537 10.972C399.601 18.196 399.133 21.844 399.133 21.916C399.013 22.396 398.953 22.804 398.953 23.14C398.953 23.452 398.977 23.728 399.025 23.968C399.121 24.592 399.553 24.904 400.321 24.904C401.113 24.904 401.833 24.4 402.481 23.392C403.153 22.36 403.657 21.196 403.993 19.9C404.161 19.996 404.425 20.284 404.785 20.764C405.145 21.244 405.361 21.604 405.433 21.844C404.953 23.764 404.137 25.312 402.985 26.488C401.833 27.664 400.453 28.252 398.845 28.252C397.237 28.252 396.037 27.856 395.245 27.064C394.477 26.272 394.093 25.252 394.093 24.004C394.093 23.74 394.105 23.464 394.129 23.176L395.425 12.052ZM410.633 2.944C410.633 3.088 410.309 5.668 409.661 10.684H414.953V13.456H409.301L409.193 14.356C412.001 16.708 413.405 19.276 413.405 22.06C413.405 24.244 412.841 25.816 411.713 26.776C410.609 27.736 409.277 28.216 407.717 28.216C406.157 28.216 405.017 27.808 404.297 26.992C403.577 26.152 403.217 25.144 403.217 23.968C403.217 23.704 403.241 23.416 403.289 23.104L404.405 13.528L404.261 13.456H401.345C401.321 13.216 401.309 12.832 401.309 12.304C401.309 11.752 401.417 11.212 401.633 10.684H404.729L405.881 0.891999C406.385 0.699999 407.057 0.603999 407.897 0.603999C409.721 0.603999 410.633 1.384 410.633 2.944ZM410.993 22.024C410.993 20.368 410.273 18.736 408.833 17.128C408.401 20.704 408.185 22.768 408.185 23.32C408.185 24.4 408.533 24.94 409.229 24.94C409.733 24.94 410.153 24.712 410.489 24.256C410.825 23.776 410.993 23.032 410.993 22.024ZM421.568 19.936C423.056 19.624 424.16 19.024 424.88 18.136C425.624 17.248 425.996 16.396 425.996 15.58C425.996 14.74 425.768 14.176 425.312 13.888C424.88 13.576 424.4 13.42 423.872 13.42C422.744 13.42 421.748 14.056 420.884 15.328C420.044 16.576 419.624 18.076 419.624 19.828C419.624 21.556 420.032 22.852 420.848 23.716C421.688 24.556 422.72 24.976 423.944 24.976C425.744 24.976 427.472 24.352 429.128 23.104C430.784 21.856 432.128 20.224 433.16 18.208C433.688 18.712 434.168 19.336 434.6 20.08C433.808 21.88 432.404 23.644 430.388 25.372C429.38 26.212 428.18 26.896 426.788 27.424C425.42 27.952 424.004 28.216 422.54 28.216C420.14 28.216 418.244 27.484 416.852 26.02C415.364 24.436 414.62 22.408 414.62 19.936C414.62 17.464 415.544 15.304 417.392 13.456C419.264 11.608 421.496 10.684 424.088 10.684C425.936 10.684 427.436 11.092 428.588 11.908C429.74 12.7 430.328 13.78 430.352 15.148C430.352 16.996 429.608 18.496 428.12 19.648C426.656 20.8 424.64 21.604 422.072 22.06L421.568 19.936ZM442.189 10.648C443.917 10.648 445.405 11.356 446.653 12.772C447.901 14.188 448.525 15.844 448.525 17.74C448.525 18.004 448.513 18.28 448.489 18.568C448.225 21.712 447.169 24.112 445.321 25.768C443.473 27.4 441.061 28.216 438.085 28.216C436.885 28.168 435.841 27.952 434.953 27.568C434.065 27.184 433.405 26.704 432.973 26.128C432.157 25.072 431.749 24.136 431.749 23.32C431.749 22.48 431.869 21.136 432.109 19.288C432.613 15.496 433.333 9.364 434.269 0.891999C434.773 0.699999 435.445 0.603999 436.285 0.603999C438.205 0.603999 439.165 1.156 439.165 2.26L437.941 11.836C439.069 11.044 440.485 10.648 442.189 10.648ZM436.609 23.068C436.609 23.62 436.813 24.088 437.221 24.472C437.653 24.832 438.241 25.012 438.985 25.012C440.209 25.012 441.217 24.448 442.009 23.32C442.969 21.952 443.449 20.176 443.449 17.992C443.449 16.936 443.209 16 442.729 15.184C442.249 14.368 441.505 13.96 440.497 13.96C439.129 13.96 438.085 14.776 437.365 16.408L437.077 18.568C436.765 20.992 436.609 22.492 436.609 23.068ZM459.495 10.684C461.703 10.684 463.539 11.392 465.003 12.808C466.491 14.224 467.235 15.952 467.235 17.992C467.235 21.088 466.323 23.572 464.499 25.444C462.699 27.292 460.515 28.216 457.947 28.216C455.379 28.216 453.339 27.484 451.827 26.02C450.339 24.556 449.595 22.744 449.595 20.584C449.595 17.56 450.519 15.16 452.367 13.384C454.239 11.584 456.615 10.684 459.495 10.684ZM458.775 13.6C457.647 13.6 456.699 14.248 455.931 15.544C455.163 16.84 454.743 18.472 454.671 20.44C454.671 21.832 454.947 22.984 455.499 23.896C456.075 24.808 456.939 25.264 458.091 25.264C459.243 25.264 460.203 24.628 460.971 23.356C461.763 22.084 462.159 20.632 462.159 19C462.159 17.368 461.883 16.072 461.331 15.112C460.779 14.104 459.927 13.6 458.775 13.6ZM484.786 28.18C482.578 28.18 481.114 27.412 480.394 25.876C479.146 27.436 477.538 28.216 475.57 28.216C473.626 28.216 471.982 27.556 470.638 26.236C469.318 24.916 468.658 23.176 468.658 21.016C468.658 17.872 469.582 15.364 471.43 13.492C473.278 11.62 475.618 10.684 478.45 10.684C478.522 10.684 478.594 10.684 478.666 10.684C479.866 10.684 480.97 10.888 481.978 11.296C482.626 10.888 483.406 10.684 484.318 10.684C485.254 10.684 485.926 10.804 486.334 11.044C486.118 12.82 485.89 14.572 485.65 16.3C485.41 18.004 485.242 19.216 485.146 19.936C484.93 21.568 484.822 22.744 484.822 23.464C484.822 24.424 485.206 24.904 485.974 24.904C486.574 24.904 487.21 24.508 487.882 23.716C488.554 22.9 489.142 21.628 489.646 19.9C490.342 20.524 490.822 21.22 491.086 21.988C490.39 24.268 489.454 25.876 488.278 26.812C487.102 27.724 485.938 28.18 484.786 28.18ZM478.99 13.492C477.454 13.492 476.23 14.08 475.318 15.256C474.43 16.408 473.902 18.136 473.734 20.44C473.71 20.656 473.698 20.86 473.698 21.052C473.698 22.228 473.974 23.164 474.526 23.86C475.102 24.556 475.834 24.904 476.722 24.904C478.234 24.904 479.374 23.836 480.142 21.7L481.006 13.924C480.31 13.636 479.638 13.492 478.99 13.492ZM499.109 15.4C499.109 14.344 498.617 13.816 497.633 13.816C496.673 13.816 495.905 14.44 495.329 15.688C497.921 17.728 499.217 20.02 499.217 22.564C499.217 24.412 498.701 25.816 497.669 26.776C496.637 27.736 495.341 28.216 493.781 28.216C492.221 28.216 491.081 27.736 490.361 26.776C489.641 25.792 489.281 24.556 489.281 23.068C489.281 22.612 489.293 22.276 489.317 22.06L490.577 11.08C491.441 10.816 492.317 10.684 493.205 10.684C494.669 10.684 495.401 11.224 495.401 12.304V12.376C496.361 11.248 497.585 10.684 499.073 10.684C500.153 10.684 500.993 10.936 501.593 11.44C502.193 11.92 502.493 12.568 502.493 13.384C502.493 14.2 502.181 14.872 501.557 15.4C500.957 15.904 500.165 16.156 499.181 16.156C499.133 16.156 499.085 16.156 499.037 16.156C499.085 15.892 499.109 15.64 499.109 15.4ZM496.877 22.384C496.877 20.992 496.157 19.6 494.717 18.208C494.285 21.664 494.069 23.404 494.069 23.428C494.069 24.436 494.477 24.94 495.293 24.94C496.349 24.94 496.877 24.088 496.877 22.384ZM517.077 2.044C517.245 1.636 517.617 1.3 518.193 1.036C518.793 0.747999 519.501 0.603999 520.317 0.603999C521.157 0.603999 521.781 0.723999 522.189 0.963998C521.949 2.836 521.565 5.776 521.037 9.784C519.933 18.16 519.381 22.78 519.381 23.644C519.381 24.484 519.741 24.904 520.461 24.904C521.085 24.904 521.733 24.52 522.405 23.752C523.077 22.96 523.689 21.676 524.241 19.9C524.913 20.548 525.381 21.256 525.645 22.024C524.781 24.88 523.425 26.728 521.577 27.568C520.737 27.976 519.945 28.18 519.201 28.18C517.065 28.18 515.637 27.412 514.917 25.876C513.669 27.436 512.073 28.216 510.129 28.216C508.185 28.216 506.541 27.556 505.197 26.236C503.877 24.916 503.217 23.176 503.217 21.016C503.217 17.872 504.141 15.364 505.989 13.492C507.837 11.62 510.177 10.684 513.009 10.684C513.081 10.684 513.153 10.684 513.225 10.684C514.209 10.684 515.133 10.828 515.997 11.116L517.077 2.044ZM513.549 13.492C512.013 13.492 510.789 14.08 509.877 15.256C508.989 16.408 508.461 18.136 508.293 20.44C508.269 20.656 508.257 20.86 508.257 21.052C508.257 22.228 508.533 23.164 509.085 23.86C509.661 24.556 510.393 24.904 511.281 24.904C512.793 24.904 513.933 23.836 514.701 21.7L515.637 13.96C514.845 13.648 514.149 13.492 513.549 13.492ZM23.76 50.856C24.264 50.664 24.972 50.568 25.884 50.568C26.796 50.568 27.612 50.628 28.332 50.748C27.588 56.268 27 61.272 26.568 65.76C26.16 70.224 25.932 72.576 25.884 72.816C25.86 73.056 25.848 73.272 25.848 73.464C25.872 74.088 26.172 74.4 26.748 74.4C28.188 74.4 30.192 72.744 32.76 69.432C33.216 70.704 33.48 71.556 33.552 71.988C32.4 73.812 31.008 75.312 29.376 76.488C27.768 77.64 26.244 78.216 24.804 78.216C23.364 78.216 22.368 77.844 21.816 77.1C21.264 76.356 20.988 75.528 20.988 74.616C20.988 74.4 21.012 73.98 21.06 73.356C21.132 72.732 21.612 68.844 22.5 61.692L16.596 75.336H13.536L11.772 61.908L9.252 73.068C8.844 74.844 8.172 76.152 7.236 76.992C6.324 77.832 5.316 78.252 4.212 78.252C3.108 78.252 2.208 77.928 1.512 77.28C0.768 76.584 0.396 75.6 0.396 74.328C0.396 71.784 2.364 69.612 6.3 67.812C8.436 57.564 9.588 51.888 9.756 50.784C10.332 50.64 11.1 50.568 12.06 50.568C13.044 50.568 13.716 50.592 14.076 50.64H14.328L16.56 67.38L23.76 51.036V50.856ZM2.952 73.716C2.952 74.484 3.252 74.868 3.852 74.868C4.26 74.868 4.596 74.544 4.86 73.896C5.196 73.104 5.472 72.06 5.688 70.764C3.864 71.796 2.952 72.78 2.952 73.716ZM46.3525 78.18C44.1445 78.18 42.6805 77.412 41.9605 75.876C40.7125 77.436 39.1045 78.216 37.1365 78.216C35.1925 78.216 33.5485 77.556 32.2045 76.236C30.8845 74.916 30.2245 73.176 30.2245 71.016C30.2245 67.872 31.1485 65.364 32.9965 63.492C34.8445 61.62 37.1845 60.684 40.0165 60.684C40.0885 60.684 40.1605 60.684 40.2325 60.684C41.4325 60.684 42.5365 60.888 43.5445 61.296C44.1925 60.888 44.9725 60.684 45.8845 60.684C46.8205 60.684 47.4925 60.804 47.9005 61.044C47.6845 62.82 47.4565 64.572 47.2165 66.3C46.9765 68.004 46.8085 69.216 46.7125 69.936C46.4965 71.568 46.3885 72.744 46.3885 73.464C46.3885 74.424 46.7725 74.904 47.5405 74.904C48.1405 74.904 48.7765 74.508 49.4485 73.716C50.1205 72.9 50.7085 71.628 51.2125 69.9C51.9085 70.524 52.3885 71.22 52.6525 71.988C51.9565 74.268 51.0205 75.876 49.8445 76.812C48.6685 77.724 47.5045 78.18 46.3525 78.18ZM40.5565 63.492C39.0205 63.492 37.7965 64.08 36.8845 65.256C35.9965 66.408 35.4685 68.136 35.3005 70.44C35.2765 70.656 35.2645 70.86 35.2645 71.052C35.2645 72.228 35.5405 73.164 36.0925 73.86C36.6685 74.556 37.4005 74.904 38.2885 74.904C39.8005 74.904 40.9405 73.836 41.7085 71.7L42.5725 63.924C41.8765 63.636 41.2045 63.492 40.5565 63.492ZM63.8072 52.044C63.9752 51.636 64.3472 51.3 64.9232 51.036C65.5232 50.748 66.2312 50.604 67.0472 50.604C67.8872 50.604 68.5112 50.724 68.9192 50.964C68.6792 52.836 68.2952 55.776 67.7672 59.784C66.6632 68.16 66.1112 72.78 66.1112 73.644C66.1112 74.484 66.4712 74.904 67.1912 74.904C67.8152 74.904 68.4632 74.52 69.1352 73.752C69.8072 72.96 70.4192 71.676 70.9712 69.9C71.6432 70.548 72.1112 71.256 72.3752 72.024C71.5112 74.88 70.1552 76.728 68.3072 77.568C67.4672 77.976 66.6752 78.18 65.9312 78.18C63.7952 78.18 62.3672 77.412 61.6472 75.876C60.3992 77.436 58.8032 78.216 56.8592 78.216C54.9152 78.216 53.2712 77.556 51.9272 76.236C50.6072 74.916 49.9472 73.176 49.9472 71.016C49.9472 67.872 50.8712 65.364 52.7192 63.492C54.5672 61.62 56.9072 60.684 59.7392 60.684C59.8112 60.684 59.8832 60.684 59.9552 60.684C60.9392 60.684 61.8632 60.828 62.7272 61.116L63.8072 52.044ZM60.2792 63.492C58.7432 63.492 57.5192 64.08 56.6072 65.256C55.7192 66.408 55.1912 68.136 55.0232 70.44C54.9992 70.656 54.9872 70.86 54.9872 71.052C54.9872 72.228 55.2632 73.164 55.8152 73.86C56.3912 74.556 57.1232 74.904 58.0112 74.904C59.5232 74.904 60.6632 73.836 61.4312 71.7L62.3672 63.96C61.5752 63.648 60.8792 63.492 60.2792 63.492ZM76.4738 69.936C77.9618 69.624 79.0658 69.024 79.7858 68.136C80.5298 67.248 80.9018 66.396 80.9018 65.58C80.9018 64.74 80.6738 64.176 80.2178 63.888C79.7858 63.576 79.3058 63.42 78.7778 63.42C77.6498 63.42 76.6538 64.056 75.7898 65.328C74.9498 66.576 74.5298 68.076 74.5298 69.828C74.5298 71.556 74.9378 72.852 75.7538 73.716C76.5938 74.556 77.6258 74.976 78.8498 74.976C80.6498 74.976 82.3778 74.352 84.0338 73.104C85.6898 71.856 87.0338 70.224 88.0658 68.208C88.5938 68.712 89.0738 69.336 89.5058 70.08C88.7138 71.88 87.3098 73.644 85.2938 75.372C84.2858 76.212 83.0858 76.896 81.6938 77.424C80.3258 77.952 78.9098 78.216 77.4458 78.216C75.0458 78.216 73.1498 77.484 71.7578 76.02C70.2698 74.436 69.5258 72.408 69.5258 69.936C69.5258 67.464 70.4498 65.304 72.2978 63.456C74.1698 61.608 76.4018 60.684 78.9938 60.684C80.8418 60.684 82.3418 61.092 83.4938 61.908C84.6458 62.7 85.2338 63.78 85.2578 65.148C85.2578 66.996 84.5138 68.496 83.0258 69.648C81.5618 70.8 79.5458 71.604 76.9778 72.06L76.4738 69.936ZM105.006 60.648C106.734 60.648 108.222 61.356 109.47 62.772C110.718 64.188 111.342 65.844 111.342 67.74C111.342 68.004 111.33 68.28 111.306 68.568C111.042 71.712 109.986 74.112 108.138 75.768C106.29 77.4 103.878 78.216 100.902 78.216C99.7015 78.168 98.6575 77.952 97.7695 77.568C96.8815 77.184 96.2215 76.704 95.7895 76.128C94.9735 75.072 94.5655 74.136 94.5655 73.32C94.5655 72.48 94.6855 71.136 94.9255 69.288C95.4295 65.496 96.1495 59.364 97.0855 50.892C97.5895 50.7 98.2615 50.604 99.1015 50.604C101.022 50.604 101.982 51.156 101.982 52.26L100.758 61.836C101.886 61.044 103.302 60.648 105.006 60.648ZM99.4255 73.068C99.4255 73.62 99.6295 74.088 100.038 74.472C100.47 74.832 101.058 75.012 101.802 75.012C103.026 75.012 104.034 74.448 104.826 73.32C105.786 71.952 106.266 70.176 106.266 67.992C106.266 66.936 106.026 66 105.546 65.184C105.066 64.368 104.322 63.96 103.314 63.96C101.946 63.96 100.902 64.776 100.182 66.408L99.8935 68.568C99.5815 70.992 99.4255 72.492 99.4255 73.068ZM119.071 88.692C117.703 88.692 116.527 88.272 115.543 87.432C114.559 86.616 114.067 85.416 114.067 83.832C114.067 81.888 115.051 79.992 117.019 78.144C115.627 78.024 114.511 77.568 113.671 76.776C112.831 75.984 112.411 74.868 112.411 73.428C112.411 72.756 112.495 71.748 112.663 70.404C112.831 69.06 113.011 67.608 113.203 66.048C113.395 64.488 113.599 62.832 113.815 61.08C114.559 60.816 115.243 60.684 115.867 60.684C116.491 60.684 116.959 60.708 117.271 60.756C117.583 60.804 117.883 60.984 118.171 61.296C118.459 61.608 118.603 62.052 118.603 62.628L117.415 71.808C117.367 72.192 117.343 72.456 117.343 72.6C117.343 74.016 117.991 74.724 119.287 74.724C120.463 74.724 121.423 74.172 122.167 73.068C122.239 72.516 122.419 70.932 122.707 68.316C122.995 65.676 123.235 63.624 123.427 62.16C123.643 61.704 124.087 61.344 124.759 61.08C125.455 60.816 126.019 60.684 126.451 60.684C127.219 60.684 127.915 60.78 128.539 60.972L126.847 74.256C129.655 74.76 131.335 76.692 131.887 80.052C131.791 80.508 131.335 81.228 130.519 82.212C130.039 79.212 128.719 77.388 126.559 76.74L125.983 81.24C125.719 83.4 125.035 85.176 123.931 86.568C122.827 87.984 121.207 88.692 119.071 88.692ZM116.875 83.148C116.875 83.94 117.067 84.528 117.451 84.912C117.835 85.296 118.339 85.488 118.963 85.488C119.611 85.488 120.103 85.224 120.439 84.696C120.775 84.168 121.039 83.112 121.231 81.528L121.699 77.568C118.555 79.2 116.947 81.06 116.875 83.148ZM160.869 50.856C161.373 50.664 162.081 50.568 162.993 50.568C163.905 50.568 164.721 50.628 165.441 50.748C164.697 56.268 164.109 61.272 163.677 65.76C163.269 70.224 163.041 72.576 162.993 72.816C162.969 73.056 162.957 73.272 162.957 73.464C162.981 74.088 163.281 74.4 163.857 74.4C165.297 74.4 167.301 72.744 169.869 69.432C170.325 70.704 170.589 71.556 170.661 71.988C169.509 73.812 168.117 75.312 166.485 76.488C164.877 77.64 163.353 78.216 161.913 78.216C160.473 78.216 159.477 77.844 158.925 77.1C158.373 76.356 158.097 75.528 158.097 74.616C158.097 74.4 158.121 73.98 158.169 73.356C158.241 72.732 158.721 68.844 159.609 61.692L153.705 75.336H150.645L148.881 61.908L146.361 73.068C145.953 74.844 145.281 76.152 144.345 76.992C143.433 77.832 142.425 78.252 141.321 78.252C140.217 78.252 139.317 77.928 138.621 77.28C137.877 76.584 137.505 75.6 137.505 74.328C137.505 71.784 139.473 69.612 143.409 67.812C145.545 57.564 146.697 51.888 146.865 50.784C147.441 50.64 148.209 50.568 149.169 50.568C150.153 50.568 150.825 50.592 151.185 50.64H151.437L153.669 67.38L160.869 51.036V50.856ZM140.061 73.716C140.061 74.484 140.361 74.868 140.961 74.868C141.369 74.868 141.705 74.544 141.969 73.896C142.305 73.104 142.581 72.06 142.797 70.764C140.973 71.796 140.061 72.78 140.061 73.716ZM167.874 58.704C167.874 56.136 168.99 54.12 171.222 52.656C173.454 51.192 176.022 50.46 178.926 50.46C182.646 50.46 185.91 51.528 188.718 53.664C190.11 54.744 191.19 56.184 191.958 57.984C192.726 59.76 193.11 61.728 193.11 63.888C193.11 68.136 191.898 71.592 189.474 74.256C186.954 76.968 183.798 78.324 180.006 78.324C179.166 78.324 178.278 78.216 177.342 78C176.406 77.784 175.662 77.496 175.11 77.136C174.222 77.808 173.082 78.144 171.69 78.144C170.322 78.144 169.254 77.76 168.486 76.992C167.718 76.224 167.334 75.24 167.334 74.04C167.334 71.208 169.482 68.796 173.778 66.804C173.898 65.796 174.066 64.44 174.282 62.736C174.522 61.008 174.702 59.616 174.822 58.56C174.966 57.504 175.062 56.808 175.11 56.472C176.094 55.848 177.234 55.536 178.53 55.536C179.13 55.536 179.706 55.596 180.258 55.716L177.99 71.088C177.774 72.456 177.474 73.596 177.09 74.508C177.834 74.7 178.434 74.796 178.89 74.796C181.65 74.796 183.786 73.752 185.298 71.664C186.858 69.48 187.638 66.84 187.638 63.744C187.638 59.784 186.21 56.94 183.354 55.212C181.77 54.252 180.03 53.772 178.134 53.772C175.71 53.772 173.79 54.432 172.374 55.752C171.558 56.496 171.15 57.396 171.15 58.452C171.15 59.004 171.318 59.532 171.654 60.036C171.99 60.516 172.578 60.792 173.418 60.864L173.058 63.204C171.306 63.108 169.998 62.628 169.134 61.764C168.294 60.876 167.874 59.856 167.874 58.704ZM169.998 73.572C169.998 74.436 170.406 74.868 171.222 74.868C171.558 74.868 171.906 74.652 172.266 74.22C172.65 73.764 172.914 73.056 173.058 72.096L173.382 69.864C171.126 71.136 169.998 72.372 169.998 73.572ZM224.713 50.856C225.217 50.664 225.925 50.568 226.837 50.568C227.749 50.568 228.565 50.628 229.285 50.748C228.541 56.268 227.953 61.272 227.521 65.76C227.113 70.224 226.885 72.576 226.837 72.816C226.813 73.056 226.801 73.272 226.801 73.464C226.825 74.088 227.125 74.4 227.701 74.4C229.141 74.4 231.145 72.744 233.713 69.432C234.169 70.704 234.433 71.556 234.505 71.988C233.353 73.812 231.961 75.312 230.329 76.488C228.721 77.64 227.197 78.216 225.757 78.216C224.317 78.216 223.321 77.844 222.769 77.1C222.217 76.356 221.941 75.528 221.941 74.616C221.941 74.4 221.965 73.98 222.013 73.356C222.085 72.732 222.565 68.844 223.453 61.692L217.549 75.336H214.489L212.725 61.908L210.205 73.068C209.797 74.844 209.125 76.152 208.189 76.992C207.277 77.832 206.269 78.252 205.165 78.252C204.061 78.252 203.161 77.928 202.465 77.28C201.721 76.584 201.349 75.6 201.349 74.328C201.349 71.784 203.317 69.612 207.253 67.812C209.389 57.564 210.541 51.888 210.709 50.784C211.285 50.64 212.053 50.568 213.013 50.568C213.997 50.568 214.669 50.592 215.029 50.64H215.281L217.513 67.38L224.713 51.036V50.856ZM203.905 73.716C203.905 74.484 204.205 74.868 204.805 74.868C205.213 74.868 205.549 74.544 205.813 73.896C206.149 73.104 206.425 72.06 206.641 70.764C204.817 71.796 203.905 72.78 203.905 73.716ZM251.986 78.072C250.642 78.072 249.622 77.64 248.926 76.776C248.254 75.888 247.798 74.244 247.558 71.844C247.414 70.596 247.27 68.976 247.126 66.984C245.446 67.488 243.754 68.016 242.05 68.568L240.826 71.952C240.586 72.6 240.418 73.068 240.322 73.356C240.226 73.62 240.046 74.028 239.782 74.58C239.542 75.132 239.326 75.54 239.134 75.804C238.966 76.044 238.714 76.356 238.378 76.74C238.066 77.124 237.742 77.4 237.406 77.568C236.542 78 235.618 78.216 234.634 78.216C233.65 78.216 232.846 77.868 232.222 77.172C231.622 76.452 231.322 75.576 231.322 74.544C231.322 74.256 231.346 73.956 231.394 73.644C231.706 71.34 234.07 69.24 238.486 67.344C239.734 64.152 241.81 58.776 244.714 51.216C245.482 50.784 246.454 50.568 247.63 50.568C247.894 50.568 248.146 50.568 248.386 50.568C248.626 50.568 248.914 50.568 249.25 50.568C249.61 50.568 250.054 50.64 250.582 50.784C250.606 51.912 251.158 58.908 252.238 71.772C252.334 72.852 252.466 73.56 252.634 73.896C252.802 74.208 253.09 74.364 253.498 74.364C254.17 74.364 255.058 73.908 256.162 72.996C257.29 72.084 258.298 70.944 259.186 69.576L260.194 72.024L259.33 73.176C256.81 76.44 254.362 78.072 251.986 78.072ZM246.262 56.832L243.13 65.58C244.81 65.004 246.058 64.584 246.874 64.32L246.262 56.832ZM237.226 70.476C234.994 71.604 233.878 72.708 233.878 73.788C233.878 74.556 234.166 74.94 234.742 74.94C235.174 74.94 235.522 74.628 235.786 74.004C236.098 73.332 236.578 72.156 237.226 70.476ZM275.921 51.432C276.065 51.24 276.521 51.06 277.289 50.892C278.081 50.7 278.825 50.604 279.521 50.604C280.217 50.604 280.793 50.7 281.249 50.892L277.721 78H272.825L274.229 65.832L273.761 65.976C271.553 66.624 269.549 67.26 267.749 67.884L267.245 71.844C266.669 76.092 264.677 78.216 261.269 78.216C260.045 78.216 259.097 77.856 258.425 77.136C257.753 76.392 257.417 75.444 257.417 74.292C257.417 71.724 259.229 69.408 262.853 67.344L264.689 51.72C265.145 51.408 265.745 51.144 266.489 50.928C267.233 50.712 267.953 50.604 268.649 50.604C269.345 50.604 269.801 50.616 270.017 50.64L268.145 64.968C269.609 64.44 271.457 63.876 273.689 63.276L274.553 63.06L275.921 51.432ZM259.937 73.752C259.937 74.52 260.285 74.904 260.981 74.904C261.365 74.904 261.617 74.796 261.737 74.58C261.857 74.34 261.941 74.148 261.989 74.004C262.061 73.836 262.121 73.62 262.169 73.356C262.217 73.092 262.253 72.864 262.277 72.672C262.301 72.456 262.325 72.18 262.349 71.844C262.373 71.508 262.397 71.244 262.421 71.052L262.493 70.512C260.789 71.688 259.937 72.768 259.937 73.752ZM303.771 78.072C302.427 78.072 301.407 77.64 300.711 76.776C300.039 75.888 299.583 74.244 299.343 71.844C299.199 70.596 299.055 68.976 298.911 66.984C297.231 67.488 295.539 68.016 293.835 68.568L292.611 71.952C292.371 72.6 292.203 73.068 292.107 73.356C292.011 73.62 291.831 74.028 291.567 74.58C291.327 75.132 291.111 75.54 290.919 75.804C290.751 76.044 290.499 76.356 290.163 76.74C289.851 77.124 289.527 77.4 289.191 77.568C288.327 78 287.403 78.216 286.419 78.216C285.435 78.216 284.631 77.868 284.007 77.172C283.407 76.452 283.107 75.576 283.107 74.544C283.107 74.256 283.131 73.956 283.179 73.644C283.491 71.34 285.855 69.24 290.271 67.344C291.519 64.152 293.595 58.776 296.499 51.216C297.267 50.784 298.239 50.568 299.415 50.568C299.679 50.568 299.931 50.568 300.171 50.568C300.411 50.568 300.699 50.568 301.035 50.568C301.395 50.568 301.839 50.64 302.367 50.784C302.391 51.912 302.943 58.908 304.023 71.772C304.119 72.852 304.251 73.56 304.419 73.896C304.587 74.208 304.875 74.364 305.283 74.364C305.955 74.364 306.843 73.908 307.947 72.996C309.075 72.084 310.083 70.944 310.971 69.576L311.979 72.024L311.115 73.176C308.595 76.44 306.147 78.072 303.771 78.072ZM298.047 56.832L294.915 65.58C296.595 65.004 297.843 64.584 298.659 64.32L298.047 56.832ZM289.011 70.476C286.779 71.604 285.663 72.708 285.663 73.788C285.663 74.556 285.951 74.94 286.527 74.94C286.959 74.94 287.307 74.628 287.571 74.004C287.883 73.332 288.363 72.156 289.011 70.476ZM309.094 58.524C309.094 56.244 310.102 54.36 312.118 52.872C314.134 51.36 316.798 50.604 320.11 50.604C321.862 50.604 323.434 50.784 324.826 51.144C326.218 51.48 327.322 51.912 328.138 52.44C328.954 52.968 329.638 53.58 330.19 54.276C331.102 55.476 331.546 56.82 331.522 58.308C331.522 59.772 330.946 61.08 329.794 62.232C328.642 63.384 327.25 63.984 325.618 64.032C327.658 64.176 329.422 64.848 330.91 66.048C332.422 67.248 333.178 68.76 333.178 70.584C333.178 72.984 332.254 74.856 330.406 76.2C328.558 77.544 326.302 78.216 323.638 78.216C320.998 78.216 319.198 77.868 318.238 77.172L319.354 74.148C320.41 74.7 321.634 74.976 323.026 74.976C324.442 74.976 325.594 74.568 326.482 73.752C327.37 72.912 327.814 71.808 327.814 70.44C327.814 69.072 327.202 67.92 325.978 66.984C324.778 66.048 323.134 65.58 321.046 65.58L321.37 62.916C322.81 62.916 324.022 62.58 325.006 61.908C326.014 61.212 326.53 60.18 326.554 58.812C326.602 57.444 325.99 56.292 324.718 55.356C323.35 54.372 321.478 53.88 319.102 53.88C317.542 53.88 316.018 54.288 314.53 55.104C313.042 55.896 312.298 56.964 312.298 58.308C312.298 58.956 312.562 59.508 313.09 59.964C313.618 60.396 314.314 60.66 315.178 60.756L314.782 63.42C312.958 63.348 311.554 62.832 310.57 61.872C309.586 60.912 309.094 59.796 309.094 58.524ZM319.39 71.088C319.006 73.656 318.262 75.48 317.158 76.56C316.054 77.616 314.758 78.144 313.27 78.144C311.782 78.144 310.654 77.76 309.886 76.992C309.118 76.224 308.734 75.24 308.734 74.04C308.734 71.208 310.882 68.796 315.178 66.804C315.298 65.796 315.466 64.44 315.682 62.736C315.922 61.008 316.102 59.616 316.222 58.56C316.366 57.504 316.462 56.808 316.51 56.472C317.494 55.848 318.634 55.536 319.93 55.536C320.53 55.536 321.106 55.596 321.658 55.716L319.39 71.088ZM311.398 73.572C311.398 74.436 311.806 74.868 312.622 74.868C312.958 74.868 313.306 74.652 313.666 74.22C314.05 73.764 314.314 73.056 314.458 72.096L314.782 69.864C312.526 71.136 311.398 72.372 311.398 73.572ZM348.911 51.432C349.055 51.24 349.511 51.06 350.279 50.892C351.071 50.7 351.815 50.604 352.511 50.604C353.207 50.604 353.783 50.7 354.239 50.892C352.487 64.908 351.611 72.156 351.611 72.636C351.611 73.116 351.755 73.548 352.043 73.932C352.355 74.292 352.799 74.472 353.375 74.472C354.959 74.472 356.375 72.3 357.623 67.956C357.623 67.908 357.635 67.848 357.659 67.776C357.683 67.704 357.695 67.656 357.695 67.632C358.751 68.304 359.435 68.724 359.747 68.892C358.955 71.916 357.971 74.232 356.795 75.84C355.619 77.424 354.107 78.216 352.259 78.216C350.411 78.216 349.163 77.34 348.515 75.588H348.407C347.663 76.524 346.835 77.196 345.923 77.604C345.011 78.012 343.871 78.216 342.503 78.216C340.247 78.216 338.507 77.628 337.283 76.452C336.083 75.276 335.483 73.596 335.483 71.412C335.483 70.956 335.519 70.452 335.591 69.9L336.599 61.476C334.223 59.796 333.035 57.816 333.035 55.536C333.035 54.024 333.491 52.824 334.403 51.936C335.315 51.048 336.479 50.604 337.895 50.604C340.847 50.604 342.323 52.164 342.323 55.284C342.323 55.788 342.287 56.352 342.215 56.976L340.379 71.052C340.355 71.22 340.343 71.472 340.343 71.808C340.343 72.744 340.559 73.5 340.991 74.076C341.423 74.652 342.083 74.94 342.971 74.94C345.107 74.94 346.367 73.284 346.751 69.972L348.911 51.432ZM336.563 53.916C335.747 53.916 335.339 54.42 335.339 55.428C335.339 56.412 335.891 57.384 336.995 58.344L337.103 57.408C337.247 56.16 337.331 55.38 337.355 55.068C337.355 54.3 337.091 53.916 336.563 53.916ZM356.203 58.524C356.203 56.244 357.211 54.36 359.227 52.872C361.243 51.36 363.907 50.604 367.219 50.604C368.971 50.604 370.543 50.784 371.935 51.144C373.327 51.48 374.431 51.912 375.247 52.44C376.063 52.968 376.747 53.58 377.299 54.276C378.211 55.476 378.655 56.82 378.631 58.308C378.631 59.772 378.055 61.08 376.903 62.232C375.751 63.384 374.359 63.984 372.727 64.032C374.767 64.176 376.531 64.848 378.019 66.048C379.531 67.248 380.287 68.76 380.287 70.584C380.287 72.984 379.363 74.856 377.515 76.2C375.667 77.544 373.411 78.216 370.747 78.216C368.107 78.216 366.307 77.868 365.347 77.172L366.463 74.148C367.519 74.7 368.743 74.976 370.135 74.976C371.551 74.976 372.703 74.568 373.591 73.752C374.479 72.912 374.923 71.808 374.923 70.44C374.923 69.072 374.311 67.92 373.087 66.984C371.887 66.048 370.243 65.58 368.155 65.58L368.479 62.916C369.919 62.916 371.131 62.58 372.115 61.908C373.123 61.212 373.639 60.18 373.663 58.812C373.711 57.444 373.099 56.292 371.827 55.356C370.459 54.372 368.587 53.88 366.211 53.88C364.651 53.88 363.127 54.288 361.639 55.104C360.151 55.896 359.407 56.964 359.407 58.308C359.407 58.956 359.671 59.508 360.199 59.964C360.727 60.396 361.423 60.66 362.287 60.756L361.891 63.42C360.067 63.348 358.663 62.832 357.679 61.872C356.695 60.912 356.203 59.796 356.203 58.524ZM366.499 71.088C366.115 73.656 365.371 75.48 364.267 76.56C363.163 77.616 361.867 78.144 360.379 78.144C358.891 78.144 357.763 77.76 356.995 76.992C356.227 76.224 355.843 75.24 355.843 74.04C355.843 71.208 357.991 68.796 362.287 66.804C362.407 65.796 362.575 64.44 362.791 62.736C363.031 61.008 363.211 59.616 363.331 58.56C363.475 57.504 363.571 56.808 363.619 56.472C364.603 55.848 365.743 55.536 367.039 55.536C367.639 55.536 368.215 55.596 368.767 55.716L366.499 71.088ZM358.507 73.572C358.507 74.436 358.915 74.868 359.731 74.868C360.067 74.868 360.415 74.652 360.775 74.22C361.159 73.764 361.423 73.056 361.567 72.096L361.891 69.864C359.635 71.136 358.507 72.372 358.507 73.572ZM408.179 51.432C408.323 51.24 408.779 51.06 409.547 50.892C410.339 50.7 411.083 50.604 411.779 50.604C412.475 50.604 413.051 50.7 413.507 50.892L409.979 78H405.083L406.487 65.832L406.019 65.976C403.811 66.624 401.807 67.26 400.007 67.884L399.503 71.844C398.927 76.092 396.935 78.216 393.527 78.216C392.303 78.216 391.355 77.856 390.683 77.136C390.011 76.392 389.675 75.444 389.675 74.292C389.675 71.724 391.487 69.408 395.111 67.344L396.947 51.72C397.403 51.408 398.003 51.144 398.747 50.928C399.491 50.712 400.211 50.604 400.907 50.604C401.603 50.604 402.059 50.616 402.275 50.64L400.403 64.968C401.867 64.44 403.715 63.876 405.947 63.276L406.811 63.06L408.179 51.432ZM392.195 73.752C392.195 74.52 392.543 74.904 393.239 74.904C393.623 74.904 393.875 74.796 393.995 74.58C394.115 74.34 394.199 74.148 394.247 74.004C394.319 73.836 394.379 73.62 394.427 73.356C394.475 73.092 394.511 72.864 394.535 72.672C394.559 72.456 394.583 72.18 394.607 71.844C394.631 71.508 394.655 71.244 394.679 71.052L394.751 70.512C393.047 71.688 392.195 72.768 392.195 73.752ZM447.441 63.528C446.889 64.128 445.977 64.668 444.705 65.148C443.433 65.604 442.413 65.832 441.645 65.832C440.901 65.832 440.349 65.808 439.989 65.76C439.389 69.312 437.853 72.276 435.381 74.652C432.933 77.028 430.077 78.216 426.813 78.216C423.573 78.216 421.125 77.208 419.469 75.192C417.837 73.176 417.021 70.548 417.021 67.308C417.021 65.196 417.345 63.144 417.993 61.152C418.641 59.136 419.529 57.348 420.657 55.788C421.809 54.228 423.249 52.98 424.977 52.044C426.705 51.084 428.505 50.604 430.377 50.604C432.273 50.604 433.821 51.036 435.021 51.9C436.245 52.74 436.857 53.916 436.857 55.428C436.857 56.58 436.449 57.612 435.633 58.524C434.841 59.412 433.737 59.856 432.321 59.856C431.577 59.856 430.917 59.676 430.341 59.316C429.765 58.932 429.477 58.332 429.477 57.516C429.477 57.132 429.573 56.796 429.765 56.508C429.957 56.22 430.149 56.04 430.341 55.968L430.665 55.824C430.665 56.784 431.049 57.264 431.817 57.264C432.177 57.264 432.489 57.144 432.753 56.904C433.017 56.64 433.161 56.352 433.185 56.04C433.209 55.728 433.197 55.488 433.149 55.32C433.101 55.128 433.005 54.912 432.861 54.672C432.525 54.072 431.817 53.772 430.737 53.772C429.321 53.772 427.977 54.444 426.705 55.788C425.433 57.132 424.413 58.86 423.645 60.972C422.901 63.084 422.529 65.244 422.529 67.452C422.529 69.3 422.829 70.944 423.429 72.384C423.765 73.152 424.257 73.764 424.905 74.22C425.553 74.652 426.333 74.868 427.245 74.868C428.757 74.868 430.101 74.232 431.277 72.96C432.477 71.688 433.353 70.152 433.905 68.352C434.481 66.552 434.769 64.728 434.769 62.88V62.448C434.697 62.184 434.661 61.932 434.661 61.692C434.661 60.54 435.069 59.664 435.885 59.064C436.413 58.68 437.073 58.488 437.865 58.488C438.081 58.488 438.429 58.524 438.909 58.596C439.389 58.668 439.725 58.776 439.917 58.92C439.413 58.944 439.017 59.112 438.729 59.424C438.465 59.736 438.333 60.156 438.333 60.684C438.333 61.212 438.573 61.704 439.053 62.16C439.725 62.808 440.769 63.132 442.185 63.132C443.625 63.132 445.113 62.544 446.649 61.368L447.441 63.528ZM456.083 59.856C456.803 58.776 457.163 57.768 457.163 56.832C457.163 55.896 456.899 55.152 456.371 54.6C455.843 54.048 455.147 53.772 454.283 53.772C453.419 53.772 452.723 53.988 452.195 54.42C451.667 54.828 451.403 55.488 451.403 56.4C451.403 57.288 452.027 58.896 453.275 61.224C454.523 63.552 455.315 65.052 455.651 65.724C456.563 67.548 457.019 69.312 457.019 71.016C457.019 73.152 456.239 74.892 454.679 76.236C453.143 77.556 451.319 78.216 449.207 78.216C447.119 78.216 445.475 77.568 444.275 76.272C443.075 74.952 442.475 73.416 442.475 71.664C442.475 68.424 444.479 65.748 448.487 63.636C446.855 60.42 446.039 58.176 446.039 56.904C446.039 55.128 446.747 53.628 448.163 52.404C449.603 51.156 451.355 50.532 453.419 50.532C455.507 50.532 457.103 51.06 458.207 52.116C459.311 53.172 459.863 54.516 459.863 56.148C459.863 57.228 459.503 58.464 458.783 59.856H456.083ZM446.651 73.896C447.299 74.592 448.079 74.94 448.991 74.94C449.927 74.94 450.647 74.676 451.151 74.148C451.679 73.596 451.943 72.792 451.943 71.736C451.943 70.776 451.571 69.6 450.827 68.208C450.731 68.016 450.551 67.668 450.287 67.164C450.023 66.636 449.831 66.264 449.711 66.048C447.023 67.44 445.679 69.192 445.679 71.304C445.679 72.384 446.003 73.248 446.651 73.896ZM473.661 59.856C474.381 58.776 474.741 57.768 474.741 56.832C474.741 55.896 474.477 55.152 473.949 54.6C473.421 54.048 472.725 53.772 471.861 53.772C470.997 53.772 470.301 53.988 469.773 54.42C469.245 54.828 468.981 55.488 468.981 56.4C468.981 57.288 469.605 58.896 470.853 61.224C472.101 63.552 472.893 65.052 473.229 65.724C474.141 67.548 474.597 69.312 474.597 71.016C474.597 73.152 473.817 74.892 472.257 76.236C470.721 77.556 468.897 78.216 466.785 78.216C464.697 78.216 463.053 77.568 461.853 76.272C460.653 74.952 460.053 73.416 460.053 71.664C460.053 68.424 462.057 65.748 466.065 63.636C464.433 60.42 463.617 58.176 463.617 56.904C463.617 55.128 464.325 53.628 465.741 52.404C467.181 51.156 468.933 50.532 470.997 50.532C473.085 50.532 474.681 51.06 475.785 52.116C476.889 53.172 477.441 54.516 477.441 56.148C477.441 57.228 477.081 58.464 476.361 59.856H473.661ZM464.229 73.896C464.877 74.592 465.657 74.94 466.569 74.94C467.505 74.94 468.225 74.676 468.729 74.148C469.257 73.596 469.521 72.792 469.521 71.736C469.521 70.776 469.149 69.6 468.405 68.208C468.309 68.016 468.129 67.668 467.865 67.164C467.601 66.636 467.409 66.264 467.289 66.048C464.601 67.44 463.257 69.192 463.257 71.304C463.257 72.384 463.581 73.248 464.229 73.896ZM498.079 78.072C496.735 78.072 495.715 77.64 495.019 76.776C494.347 75.888 493.891 74.244 493.651 71.844C493.507 70.596 493.363 68.976 493.219 66.984C491.539 67.488 489.847 68.016 488.143 68.568L486.919 71.952C486.679 72.6 486.511 73.068 486.415 73.356C486.319 73.62 486.139 74.028 485.875 74.58C485.635 75.132 485.419 75.54 485.227 75.804C485.059 76.044 484.807 76.356 484.471 76.74C484.159 77.124 483.835 77.4 483.499 77.568C482.635 78 481.711 78.216 480.727 78.216C479.743 78.216 478.939 77.868 478.315 77.172C477.715 76.452 477.415 75.576 477.415 74.544C477.415 74.256 477.439 73.956 477.487 73.644C477.799 71.34 480.163 69.24 484.579 67.344C485.827 64.152 487.903 58.776 490.807 51.216C491.575 50.784 492.547 50.568 493.723 50.568C493.987 50.568 494.239 50.568 494.479 50.568C494.719 50.568 495.007 50.568 495.343 50.568C495.703 50.568 496.147 50.64 496.675 50.784C496.699 51.912 497.251 58.908 498.331 71.772C498.427 72.852 498.559 73.56 498.727 73.896C498.895 74.208 499.183 74.364 499.591 74.364C500.263 74.364 501.151 73.908 502.255 72.996C503.383 72.084 504.391 70.944 505.279 69.576L506.287 72.024L505.423 73.176C502.903 76.44 500.455 78.072 498.079 78.072ZM492.355 56.832L489.223 65.58C490.903 65.004 492.151 64.584 492.967 64.32L492.355 56.832ZM483.319 70.476C481.087 71.604 479.971 72.708 479.971 73.788C479.971 74.556 480.259 74.94 480.835 74.94C481.267 74.94 481.615 74.628 481.879 74.004C482.191 73.332 482.671 72.156 483.319 70.476ZM521.907 54.672C521.523 54.504 521.139 54.42 520.755 54.42C520.395 54.42 520.035 54.648 519.675 55.104C519.339 55.56 519.111 56.22 518.991 57.084L517.119 70.44C516.783 72.864 515.943 74.772 514.599 76.164C513.279 77.556 511.623 78.252 509.631 78.252C507.639 78.252 506.091 77.7 504.987 76.596C503.907 75.468 503.367 74.136 503.367 72.6C503.367 71.04 503.895 69.72 504.951 68.64C506.031 67.56 507.387 67.02 509.019 67.02C510.027 67.02 510.819 67.092 511.395 67.236L511.215 69.432C510.807 69.336 510.171 69.288 509.307 69.288C508.467 69.288 507.711 69.576 507.039 70.152C506.391 70.728 506.067 71.448 506.067 72.312C506.067 73.176 506.307 73.848 506.787 74.328C507.267 74.784 507.843 75.012 508.515 75.012C510.531 75.012 511.707 73.524 512.043 70.548C512.691 64.596 513.159 60.576 513.447 58.488C512.007 58.992 510.735 59.244 509.631 59.244C507.879 59.244 506.535 58.836 505.599 58.02C504.687 57.204 504.231 56.136 504.231 54.816C504.231 53.496 504.699 52.464 505.635 51.72C506.595 50.952 507.795 50.568 509.235 50.568C510.123 50.568 511.395 50.844 513.051 51.396C514.731 51.948 516.027 52.224 516.939 52.224C518.571 52.224 519.939 51.804 521.043 50.964C521.643 51.804 521.943 52.8 521.943 53.952C521.943 54.192 521.931 54.432 521.907 54.672ZM507.795 55.788C507.795 56.148 507.987 56.46 508.371 56.724C508.779 56.988 509.379 57.12 510.171 57.12C510.987 57.12 512.043 56.76 513.339 56.04C512.403 55.824 511.443 55.584 510.459 55.32C509.475 55.032 508.887 54.888 508.695 54.888C508.095 54.888 507.795 55.188 507.795 55.788ZM540.605 55.824C540.869 53.976 541.397 52.644 542.189 51.828C542.981 51.012 544.025 50.604 545.321 50.604C546.617 50.604 547.565 50.988 548.165 51.756C548.789 52.5 549.101 53.256 549.101 54.024C549.101 54.264 549.077 54.504 549.029 54.744C548.501 57.408 546.737 59.484 543.737 60.972L541.217 78H535.169L530.885 59.028L528.905 73.068C528.641 74.844 528.089 76.152 527.249 76.992C526.433 77.832 525.473 78.252 524.369 78.252C523.265 78.252 522.341 77.928 521.597 77.28C520.877 76.632 520.433 75.708 520.265 74.508C520.241 74.316 520.229 74.124 520.229 73.932C520.229 71.556 522.017 69.516 525.593 67.812L527.141 56.22C527.741 55.956 528.257 55.824 528.689 55.824C529.145 55.824 529.529 55.86 529.841 55.932C529.289 55.068 528.413 54.636 527.213 54.636C526.013 54.636 524.957 55.26 524.045 56.508L523.361 53.412C523.817 52.788 524.609 52.164 525.737 51.54C526.889 50.892 528.149 50.568 529.517 50.568C530.909 50.568 532.085 50.988 533.045 51.828C534.005 52.644 534.701 54.024 535.133 55.968L538.517 70.224L540.605 55.824ZM544.205 57.876C545.693 56.82 546.437 55.836 546.437 54.924C546.437 54.756 546.377 54.564 546.257 54.348C546.137 54.132 545.957 54.024 545.717 54.024C545.261 54.024 544.949 54.276 544.781 54.78C544.541 55.476 544.349 56.508 544.205 57.876ZM525.233 70.8C523.577 71.736 522.749 72.648 522.749 73.536C522.749 74.424 523.073 74.868 523.721 74.868C524.153 74.868 524.465 74.592 524.657 74.04C524.849 73.464 525.029 72.444 525.197 70.98L525.233 70.8Z",fill:"black"})}),Ov=({style:e,size:t="small",withText:r})=>O2("div",{className:`ExcalidrawLogo is-${t}`,style:e,children:[Ui(AL,{}),r&&Ui(SL,{})]});import{Fragment as zv,jsx as kt,jsxs as B2}from"react/jsx-runtime";var F2=({icon:e,shortcut:t,children:r})=>{let o=ke();return B2(zv,{children:[kt("div",{className:"welcome-screen-menu-item__icon",children:e}),kt("div",{className:"welcome-screen-menu-item__text",children:r}),t&&!o.editor.isMobile&&kt("div",{className:"welcome-screen-menu-item__shortcut",children:t})]})};F2.displayName="WelcomeScreenMenuItemContent";var rd=({onSelect:e,children:t,icon:r,shortcut:o,className:n="",...i})=>kt("button",{...i,type:"button",className:`welcome-screen-menu-item ${n}`,onClick:e,children:kt(F2,{icon:r,shortcut:o,children:t})});rd.displayName="WelcomeScreenMenuItem";var Bv=({children:e,href:t,icon:r,shortcut:o,className:n="",...i})=>kt("a",{...i,className:`welcome-screen-menu-item ${n}`,href:t,target:"_blank",rel:"noreferrer",children:kt(F2,{icon:r,shortcut:o,children:e})});Bv.displayName="WelcomeScreenMenuItemLink";var Eo=({children:e})=>{let{WelcomeScreenCenterTunnel:t}=ot();return kt(t.In,{children:kt("div",{className:"welcome-screen-center",children:e||B2(zv,{children:[kt(z2,{}),kt(H2,{children:b("welcomeScreen.defaults.center_heading")}),B2(_2,{children:[kt(U2,{}),kt(G2,{})]})]})})})};Eo.displayName="Center";var z2=({children:e})=>kt("div",{className:"welcome-screen-center__logo virgil welcome-screen-decor",children:e||kt(Ov,{withText:!0})});z2.displayName="Logo";var H2=({children:e})=>kt("div",{className:"welcome-screen-center__heading welcome-screen-decor virgil",children:e});H2.displayName="Heading";var _2=({children:e})=>kt("div",{className:"welcome-screen-menu",children:e});_2.displayName="Menu";var G2=()=>{let e=Ot();return kt(rd,{onSelect:()=>e.executeAction(Oa),shortcut:"?",icon:Bs,children:b("helpDialog.title")})};G2.displayName="MenuItemHelp";var U2=()=>{let e=Re(),t=Ot();return e.viewModeEnabled?null:kt(rd,{onSelect:()=>t.executeAction(Ks),shortcut:Mt("loadScene"),icon:Fs,children:b("buttons.load")})};U2.displayName="MenuItemLoadScene";var Fv=({onSelect:e})=>{let{t}=Tt();return kt(rd,{shortcut:null,onSelect:e,icon:mp,children:t("labels.liveCollaboration")})};Fv.displayName="MenuItemLiveCollaborationTrigger";Eo.Logo=z2;Eo.Heading=H2;Eo.Menu=_2;Eo.MenuItem=rd;Eo.MenuItemLink=Bv;Eo.MenuItemHelp=G2;Eo.MenuItemLoadScene=U2;Eo.MenuItemLiveCollaborationTrigger=Fv;f();import{jsx as hl,jsxs as W2}from"react/jsx-runtime";var Xu=({children:e})=>{let{WelcomeScreenMenuHintTunnel:t}=ot();return hl(t.In,{children:W2("div",{className:"virgil welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--menu",children:[m4,hl("div",{className:"welcome-screen-decor-hint__label",children:e||b("welcomeScreen.defaults.menuHint")})]})})};Xu.displayName="MenuHint";var Zu=({children:e})=>{let{WelcomeScreenToolbarHintTunnel:t}=ot();return hl(t.In,{children:W2("div",{className:"virgil welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--toolbar",children:[hl("div",{className:"welcome-screen-decor-hint__label",children:e||b("welcomeScreen.defaults.toolbarHint")}),u4]})})};Zu.displayName="ToolbarHint";var ju=({children:e})=>{let{WelcomeScreenHelpHintTunnel:t}=ot();return hl(t.In,{children:W2("div",{className:"virgil welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--help",children:[hl("div",{children:e||b("welcomeScreen.defaults.helpHint")}),p4]})})};ju.displayName="HelpHint";import{Fragment as Hv,jsx as od,jsxs as ML}from"react/jsx-runtime";var qu=e=>od(Hv,{children:e.children||ML(Hv,{children:[od(Eo,{}),od(Xu,{}),od(Zu,{}),od(ju,{})]})});qu.displayName="WelcomeScreen";qu.Center=Eo;qu.Hints={MenuHint:Xu,ToolbarHint:Zu,HelpHint:ju};var IL=qu;f();import kL from"clsx";import{jsx as PL,jsxs as DL}from"react/jsx-runtime";var _v=({isCollaborating:e,onSelect:t,...r})=>{let o=Re(),n=o.width<830;return DL(sn,{...r,className:kL("collab-button",{active:e}),type:"button",onSelect:t,style:{position:"relative",width:n?void 0:"auto"},title:b("labels.liveCollaboration"),children:[n?B4:b("labels.share"),o.collaborators.size>0&&PL("div",{className:"CollabButton-collaborators",children:o.collaborators.size})]})},LL=_v;_v.displayName="LiveCollaborationTrigger";be();ys();f();no();G();var RL=(e,t,r)=>!!(t&&(t.id===e.editingElement?.id||t.id===e.resizingElement?.id||t.id===e.draggingElement?.id||t.version>r.version||t.version===r.version&&t.versionNonce<r.versionNonce)),NL=(e,t,r)=>{let o=X(e),n=[],i=new Set;for(let s of t)if(!i.has(s.id)){let l=o.get(s.id),c=RL(r,l,s);l&&c?(n.push(l),i.add(l.id)):(n.push(s),i.add(s.id))}for(let s of e)i.has(s.id)||(n.push(s),i.add(s.id));let a=Dd(n);return cr(a),a};ya();On();Sr();Cn();se();V();Ge();Oe();G();f();import{jsx as Gv,jsxs as OL}from"react/jsx-runtime";var Uv=({children:e,icon:t})=>{let{TTDDialogTriggerTunnel:r}=ot(),o=Be();return Gv(r.In,{children:OL(ze.Item,{onSelect:()=>{xe("ai","dialog open","ttd"),o({openDialog:{name:"ttd",tab:"text-to-diagram"}})},icon:t??Sy,children:[e??b("labels.textToDiagram"),Gv(ze.Item.Badge,{children:"AI"})]})})};Uv.displayName="TTDDialogTrigger";ga();st();kg();import{jsx as Y2}from"react/jsx-runtime";Dv();var HL=e=>{let{onChange:t,initialData:r,excalidrawAPI:o,isCollaborating:n=!1,onPointerUpdate:i,renderTopRightUI:a,langCode:s=_o.code,viewModeEnabled:l,zenModeEnabled:c,gridModeEnabled:d,libraryReturnUrl:m,theme:p,name:u,renderCustomStats:h,onPaste:x,detectScroll:E=!0,handleKeyboardGlobally:w=!1,onLibraryChange:y,autoFocus:v=!1,generateIdForFile:A,onLinkOpen:L,onPointerDown:S,onPointerUp:k,onScrollChange:R,children:_,validateEmbeddable:M,renderEmbeddable:O,aiEnabled:I}=e,F=e.UIOptions?.canvasActions,Q={...e.UIOptions,canvasActions:{...nh.canvasActions,...F},tools:{image:e.UIOptions?.tools?.image??!0}};return F?.export&&(Q.canvasActions.export.saveFileToDisk=F.export?.saveFileToDisk??nh.canvasActions.export.saveFileToDisk),Q.canvasActions.toggleTheme===null&&typeof p>"u"&&(Q.canvasActions.toggleTheme=!0),FL(()=>{(async()=>{await import("canvas-roundrect-polyfill")})();let oe=Ce=>{typeof Ce.scale=="number"&&Ce.scale!==1&&Ce.preventDefault()};return document.addEventListener("touchmove",oe,{passive:!1}),()=>{document.removeEventListener("touchmove",oe)}},[]),Y2(zL,{unstable_createStore:()=>Jt,scope:He,children:Y2(M0,{langCode:s,theme:p,children:Y2(Pv,{onChange:t,initialData:r,excalidrawAPI:o,isCollaborating:n,onPointerUpdate:i,renderTopRightUI:a,langCode:s,viewModeEnabled:l,zenModeEnabled:c,gridModeEnabled:d,libraryReturnUrl:m,theme:p,name:u,renderCustomStats:h,UIOptions:Q,onPaste:x,detectScroll:E,handleKeyboardGlobally:w,onLibraryChange:y,autoFocus:v,generateIdForFile:A,onLinkOpen:L,onPointerDown:S,onPointerUp:k,onScrollChange:R,validateEmbeddable:M,renderEmbeddable:O,aiEnabled:I!==!1,children:_})})})},_L=(e,t)=>{if(e.children!==t.children)return!1;let{initialData:r,UIOptions:o={},...n}=e,{initialData:i,UIOptions:a={},...s}=t,l=Object.keys(o),c=Object.keys(a);return l.length!==c.length?!1:l.every(m=>m==="canvasActions"?Object.keys(o.canvasActions).every(u=>u==="export"&&o?.canvasActions?.export&&a?.canvasActions?.export?o.canvasActions.export.saveFileToDisk===a.canvasActions.export.saveFileToDisk:o?.canvasActions?.[u]===a?.canvasActions?.[u]):o[m]===a[m])&&Je(n,s)},GL=BL.memo(HL,_L);GL.displayName="Excalidraw";export{sn as Button,th as DEFAULT_LASER_COLOR,Tu as DefaultSidebar,GL as Excalidraw,mt as FONT_FAMILY,TL as Footer,LL as LiveCollaborationTrigger,te as MIME_TYPES,fr as MainMenu,at as ROUNDNESS,Yn as Sidebar,D as StoreAction,ae as THEME,p2 as TTDDialog,Uv as TTDDialogTrigger,IL as WelcomeScreen,gi as bumpVersion,Kc as convertToExcalidrawElements,_o as defaultLang,CE as elementPartiallyOverlapsWithOrContainsBBox,Mg as elementsOverlappingBBox,Wm as exportToBlob,vi as exportToCanvas,yC as exportToClipboard,ks as exportToSvg,Te as getCommonBounds,bm as getFreeDrawSvgPath,Up as getLibraryItemsHash,Ee as getNonDeletedElements,WC as getSceneVersion,w8 as getVisibleSceneBounds,Vg as hashElementsVersion,Kg as hashString,Ig as isElementInsideBBox,so as isInvisiblySmallElement,ne as isLinearElement,Va as languages,Cs as loadFromBlob,pg as loadLibraryFromBlob,Em as loadSceneOrLibraryFromBlob,hw as mergeLibraryItems,z as mutateElement,ie as newElementWith,pr as normalizeLink,d1 as parseLibraryTokensFromUrl,NL as reconcileElements,bi as restore,kx as restoreAppState,oc as restoreElements,fa as restoreLibraryItems,Bt as sceneCoordsToViewportCoords,Ei as serializeAsJSON,Cm as serializeLibraryAsJSON,ke as useDevice,gA as useHandleLibrary,Tt as useI18n,Ke as viewportCoordsToSceneCoords,M3 as zoomToFitBounds};
